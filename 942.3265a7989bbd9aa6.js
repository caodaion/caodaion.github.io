(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[942],{942:(xe,e,t)=>{"use strict";t.r(e),t.d(e,{Caodai100Module:()=>p});var i=t(6814),n=t(2787),o=t(5275),r=t.n(o),a=t(5879);const c=[{path:"",component:(()=>{var d;class h{constructor(){this.messages=["S\u1ef0 TH\u01af\u01a0NG Y\xcaU L\xc0 GI\u1ec0NG B\u1ea2O SANH C\u1ee6A C\xc0N KH\xd4N TH\u1ebe GI\u1edaI.","\u0110\u1ea1o g\u1ed1c b\u1edfi l\xf2ng th\xe0nh t\xedn hi\u1ec7p","Trong Tam Gi\xe1o c\xf3 l\u1eddi khuy\u1ebfn d\u1ea1y\nG\u1ed1c b\u1edfi l\xf2ng l\xe0m ph\u1ea3i l\xe0m l\xe0nh","M\u1ed9t c\u1ed9i sanh ba nh\xe1nh in nhau","Nam M\xf4:\n    Nh\u1ee9t nguy\u1ec7n: \u0110\u1ea1i \u0110\u1ea1o ho\u1eb1ng khai.\n    Nh\xec nguy\u1ec7n: Ph\u1ed5 \u0111\u1ed9 ch\xfang sanh.\n    Tam nguy\u1ec7n: X\xe1 t\u1ed9i \u0111\u1ec7 t\u1eed.\n    T\u1ee9 nguy\u1ec7n: Thi\xean h\u1ea1 th\xe1i b\xecnh.\n    Ng\u0169 nguy\u1ec7n: Th\xe1nh Th\u1ea5t an ninh.","Mu\xf4n ki\u1ebfp c\xf3 Ta n\u1eafm ch\u1ee7 quy\u1ec1n,\nVui l\xf2ng tu ni\u1ec7m h\u01b0\u1edfng \xe2n Thi\xean.\n\u0110\u1ea1o m\xe0u r\u01b0\u1edbi kh\u1eafp n\u01a1i tr\u1ea7n th\u1ebf,\nNg\xe0n tu\u1ed5i mu\xf4n t\xean gi\u1eef tr\u1ecdn bi\xean."],this.message=this.messages[0]}ngOnInit(){const f=()=>{this.message=this.messages[Math.floor(Math.random()*this.messages.length)],setTimeout(()=>{f()},12e3)};f(),this.initChart()}initChart(){r().templates.mindMap=Object.assign({},r().templates.ana),r().templates.mindMap.size=[150,27],r().templates.mindMap.minus=r().templates.belinda.minus="",r().templates.mindMap.node="",r().templates.mindMap.link='<path stroke="#575757" stroke-width="2" fill="none" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}" />',r().templates.mindMap.field_1='<text data-width="auto" style="font-size: 16px;" fill="#575757" x="75" y="18" text-anchor="middle">{val}</text>',r().templates.invisibleGroup.plus="",r().templates.invisibleGroup.minus="",r().templates.belinda.size=[200,200],r().templates.belinda.defs=r().gradientCircleForDefs("circle",["#F57C00","#FFCA28","#039BE5","#039BE5","#33b864","#F57C00"],100,10),r().templates.belinda.node='<use x="0" y="0" xlink:href="#circle" /><g transform="matrix(3.5,0,0,3.5,20,20)"><circle cx="12" cy="22" r="12" fill="#039BE5"></circle><circle cx="33" cy="14" r="10" fill="#FFCA28"></circle><circle cx="30" cy="32" r="8" fill="#F57C00"></circle></g>';const f=document.getElementById("tree");if(f){var v=new(r())(f,{template:"mindMap",nodeMouseClick:r().action.details,enableSearch:!0,enablePan:!0,levelSeparation:120,orientation:r().orientation.top,scaleInitial:r().match.boundary,nodeBinding:{field_0:"id",field_1:"T\xean",field_2:"\u0110\u1ecba Ch\u1ec9",field_3:"recognitionDate"},tags:{ig:{template:"invisibleGroup",subTreeConfig:{}},belinda:{template:"belinda"}}});v.on("node-initialized",function(x,_){_.node.children.length||_.node.tags.push("no-children")}),v.load([{id:"root",T\u00ean:"\u0110\u1ea1o Cao \u0110\xe0i",tags:["ig"]},{id:"dao-cao-dai",stpid:"root",tags:["belinda"]},{id:"toa-thanh-tay-tinh",T\u00ean:"T\xf2a Th\xe1nh T\xe2y Ninh",pid:"dao-cao-dai"},{id:"ban-chinh-dao",T\u00ean:"Ban Ch\u1ec9nh \u0110\u1ea1o",pid:"dao-cao-dai"},{id:"chieu-minh",T\u00ean:"Chi\u1ebfu Minh",pid:"dao-cao-dai"},{id:"tien-thien",T\u00ean:"Ti\xean Thi\xean",pid:"dao-cao-dai"},{id:"truyen-giao",T\u00ean:"Truy\u1ec1n Gi\xe1o",pid:"dao-cao-dai"},{id:"toa-thanh-tay-tinh-ban-dai-dien-ben-tre",T\u00ean:"Ban \u0110\u1ea1i Di\u1ec7n B\u1ebfn Tre",pid:"toa-thanh-tay-tinh"},{id:"ban-chinh-dao-ban-dai-dien-ben-tre",T\u00ean:"Ban \u0110\u1ea1i Di\u1ec7n B\u1ebfn Tre",pid:"ban-chinh-dao"},{id:"ban-chinh-dao-ban-dai-dien-ben-tre-thanh-that-an-hoi",T\u00ean:"Th\xe1nh Th\u1ea5t An H\u1ed9i",pid:"ban-chinh-dao-ban-dai-dien-ben-tre"},{id:"ban-chinh-dao-ban-dai-dien-ben-tre-thanh-that-binh-phu",T\u00ean:"Th\xe1nh Th\u1ea5t B\xecnh Ph\xfa",pid:"ban-chinh-dao-ban-dai-dien-ben-tre"},{id:"ban-chinh-dao-ban-dai-dien-lam-dong",T\u00ean:"Ban \u0110\u1ea1i Di\u1ec7n L\xe2m \u0110\u1ed3ng",pid:"ban-chinh-dao"},{id:"ban-chinh-dao-ban-dai-dien-lam-dong-thanh-that-da-lat",T\u00ean:"Th\xe1nh Th\u1ea5t \u0110\xe0 L\u1ea1t",pid:"ban-chinh-dao-ban-dai-dien-lam-dong"},{id:"ban-chinh-dao-ban-dai-dien-lam-dong-thanh-that-bong-lai",T\u00ean:"Th\xe1nh Th\u1ea5t B\u1ed3ng Lai",pid:"ban-chinh-dao-ban-dai-dien-lam-dong"},{id:"ban-chinh-dao-ban-dai-dien-lam-dong-thanh-that-xuan-son",T\u00ean:"Th\xe1nh Th\u1ea5t Xu\xe2n S\u01a1n",pid:"ban-chinh-dao-ban-dai-dien-lam-dong"},{id:"ban-chinh-dao-ban-dai-dien-lam-dong-thanh-that-phu-son",T\u00ean:"Th\xe1nh Th\u1ea5t Ph\xfa S\u01a1n",pid:"ban-chinh-dao-ban-dai-dien-lam-dong"},{id:"ban-chinh-dao-ban-dai-dien-lam-dong-thanh-that-quang-lac",T\u00ean:"Th\xe1nh Th\u1ea5t Qu\u1ea3ng L\u1ea1c",pid:"ban-chinh-dao-ban-dai-dien-lam-dong"},{id:"tien-thien-ban-dai-dien-ben-tre",T\u00ean:"Ban \u0110\u1ea1i Di\u1ec7n B\u1ebfn Tre",pid:"tien-thien"},{id:"truyen-giao-ban-dai-dien-ben-tre",T\u00ean:"Ban \u0110\u1ea1i Di\u1ec7n B\u1ebfn Tre",pid:"truyen-giao"}])}}}return(d=h).\u0275fac=function(f){return new(f||d)},d.\u0275cmp=a.Xpm({type:d,selectors:[["app-home"]],decls:12,vars:1,consts:[[1,"h-screen"],[1,"h-full","flex","justify-center","items-center","flex-col"],["id","counter100",1,"text-9xl"],[1,"text-2xl"],[1,"text-justify"],[1,"whitespace-pre-wrap","h-[150px]",3,"innerHTML"],["id","tree"],[1,"text-center"],["href","https://www.caodaion.com",1,"underline"]],template:function(f,v){1&f&&(a.TgZ(0,"div",0)(1,"div",1),a._UZ(2,"h1",2),a.TgZ(3,"div",3),a._uU(4,"N\u0102M KHAI \u0110\u1ea0O CAO \u0110\xc0I"),a.qZA(),a.TgZ(5,"div",4),a._UZ(6,"div",5),a.qZA()()(),a._UZ(7,"div",6),a.TgZ(8,"footer",7),a._uU(9," Developed, "),a.TgZ(10,"a",8),a._uU(11,"CaoDaiON"),a.qZA()()),2&f&&(a.xp6(6),a.Q6J("innerHTML",v.message,a.oJD))},styles:['@font-face{font-family:"SP3 - Traveling Typewriter";src:url("/assets/fonts/SP3 - Traveling Typewriter.otf") format("opentype")}*[_ngcontent-%COMP%]{font-family:"SP3 - Traveling Typewriter"}  .no-children text{text-anchor:end!important;transform:translate(65px)}  [lcn=ig].belinda text{text-anchor:start!important;transform:translate(-65px);display:none}  [lcn=ig] text{font-family:"SP3 - Traveling Typewriter"}  [data-l-id*=Timing] path{stroke:#ffca28!important}  [data-l-id*=Stakeholders] path{stroke:#039be5!important}  [data-l-id*=Content] path{stroke:#f57c00!important}  [data-l-id*="Go big ideas"] path{stroke:#33b864!important}@property --num{syntax: "<integer>"; initial-value: 0; inherits: false;}h1#counter100[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_counter 12s linear forwards;counter-reset:num var(--num)}h1[_ngcontent-%COMP%]:after{content:counter(num)}@keyframes _ngcontent-%COMP%_counter{0%{--num: 0}to{--num: 100}}']}),h})()}];let l=(()=>{var d;class h{}return(d=h).\u0275fac=function(f){return new(f||d)},d.\u0275mod=a.oAB({type:d}),d.\u0275inj=a.cJS({imports:[n.Bz.forChild(c),n.Bz]}),h})(),p=(()=>{var d;class h{}return(d=h).\u0275fac=function(f){return new(f||d)},d.\u0275mod=a.oAB({type:d}),d.\u0275inj=a.cJS({imports:[i.ez,l]}),h})()},5275:xe=>{var t,e=function(t,i){var n=this;if(("string"==typeof t||t instanceof String)&&(t=document.querySelector(t)),this.element=t,this.config=e.mergeDeep(e._defaultConfig(i),i),this._layoutConfigs={base:{orientation:this.config.orientation,levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:this.config.assistantSeparation,subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:this.config.siblingSeparation,layout:this.config.layout,columns:this.config.columns,collapse:this.config.collapse,partnerNodeSeparation:this.config.partnerNodeSeparation}},this.config.tags)for(var o in this.config.tags){var r=this.config.tags[o];null!=r.subTreeConfig&&(this._layoutConfigs[o]={orientation:null!=r.subTreeConfig.orientation?r.subTreeConfig.orientation:this.config.orientation,levelSeparation:null!=r.subTreeConfig.levelSeparation?r.subTreeConfig.levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:null!=r.subTreeConfig.mixedHierarchyNodesSeparation?r.subTreeConfig.mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:null!=r.subTreeConfig.assistantSeparation?r.subTreeConfig.assistantSeparation:this.config.assistantSeparation,subtreeSeparation:null!=r.subTreeConfig.subtreeSeparation?r.subTreeConfig.subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:null!=r.subTreeConfig.siblingSeparation?r.subTreeConfig.siblingSeparation:this.config.siblingSeparation,layout:null!=r.subTreeConfig.layout?r.subTreeConfig.layout:this.config.layout,columns:null!=r.subTreeConfig.columns?r.subTreeConfig.columns:this.config.columns,collapse:null!=r.subTreeConfig.collapse?r.subTreeConfig.collapse:this.config.collapse,partnerNodeSeparation:null!=r.subTreeConfig.partnerNodeSeparation?r.subTreeConfig.partnerNodeSeparation:this.config.partnerNodeSeparation})}this._event_id=e._guid(),e._validateConfig(this.config)&&(this._vScroll={},this.config.ui||(this.ui=e.ui),this.editUI=this.config.editUI?this.config.editUI:new e.editUI,this.editUI.init(this),this.filterUI=this.config.filterUI?this.config.filterUI:new e.filterUI,this.filterUI.init(this),this.manager=new e.manager(this),this.searchUI=this.config.searchUI?this.config.searchUI:new e.searchUI,this.nodeMenuUI=this.config.nodeMenuUI?this.config.nodeMenuUI:new e.menuUI,this.nodeMenuUI.init(this,this.config.nodeMenu),this.nodeCircleMenuUI=this.config.nodeCircleMenuUI?this.config.nodeCircleMenuUI:new e.circleMenuUI,this.nodeCircleMenuUI.init(this,this.config.nodeCircleMenu),this.nodeContextMenuUI=this.config.nodeContextMenuUI?this.config.nodeContextMenuUI:new e.menuUI,this.nodeContextMenuUI.init(this,this.config.nodeContextMenu),this.toolbarUI=this.config.toolbarUI?this.config.toolbarUI:new e.toolbarUI,this.notifierUI=this.config.notifierUI?this.config.notifierUI:new e.notifierUI,this.notifierUI.init(this),this.menuUI=this.config.menuUI?this.config.menuUI:new e.menuUI,this.menuUI.init(this,this.config.menu),this.config.xScrollUI||(this.xScrollUI=new e.xScrollUI(this.element,this.config,function(){return{boundary:n.response.boundary,scale:n.getScale(),viewBox:n.getViewBox(),padding:n.config.padding}},function(a){n.setViewBox(a)},function(){n._draw(!0,e.action.xScroll)})),this.config.yScrollUI||(this.yScrollUI=new e.yScrollUI(this.element,this.config,function(){return{boundary:n.response.boundary,scale:n.getScale(),viewBox:n.getViewBox(),padding:n.config.padding}},function(a){n.setViewBox(a)},function(){n._draw(!0,e.action.xScroll)})),this.undoRedoUI=this.config.undoRedoUI?this.config.undoRedoUI:new e.undoRedoUI,this.element.classList.add("boc-"+this.config.mode),this._gragStartedId=null,this._timeout=null,this._touch=null,this._initialized=!1,this._loaded=!1,this._moveInterval=null,this._movePosition=null,this.response=null,this.nodes=null,this.isVisible=null,e._intersectionObserver(this.element,function(a){n.isVisible=a,!1!==e.events.publish("visibility-change",[n])&&e.LAZY_LOADING&&n.isVisible&&(n._loaded?n._draw(!1,e.action.update):(n._setInitialSizeIfNotSet(),n._draw(!1,e.action.init)))}))};e._defaultConfig=function(t){return{interactive:!0,mode:"light",lazyLoading:!0,enableDragDrop:!1,enableSearch:!0,enableTouch:!1,enablePan:!0,keyNavigation:!1,miniMap:!1,nodeMenu:null,nodeCircleMenu:null,nodeContextMenu:null,menu:null,toolbar:!1,sticky:!0,nodeMouseClick:e.action.details,nodeMouseDbClick:e.none,mouseScrool:e.action.zoom,showXScroll:e.none,showYScroll:e.none,template:"ana",tags:{},min:!1,nodeBinding:{},linkBinding:{},searchFields:null,searchDisplayField:null,searchFieldsWeight:null,searchFieldsAbbreviation:null,nodes:[],clinks:[],slinks:[],groupDottedLines:[],dottedLines:[],undoRedoStorageName:null,levelSeparation:60,siblingSeparation:20,subtreeSeparation:40,mixedHierarchyNodesSeparation:15,assistantSeparation:100,minPartnerSeparation:50,partnerChildrenSplitSeparation:20,partnerNodeSeparation:15,columns:10,padding:30,orientation:e.orientation.top,layout:e.layout.normal,scaleInitial:1,draggable:null,scaleMin:.1,scaleMax:5,orderBy:null,editUI:null,filterUI:null,searchUI:null,xScrollUI:null,yScrollUI:null,nodeMenuUI:null,nodeCircleMenuUI:null,nodeContextMenuUI:null,toolbarUI:null,notifierUI:null,menuUI:null,undoRedoUI:null,exportUrl:"https://balkan.app/export",collapse:{},expand:{},align:e.CENTER,UI:null,anim:{func:e.anim.outPow,duration:200},zoom:{speed:120,smooth:12},roots:null,state:null,editForm:{readOnly:!1,titleBinding:"name",photoBinding:"img",addMore:"Add more fields",addMoreBtn:"Add",addMoreFieldName:"Field name",saveAndCloseBtn:"Save and close",cancelBtn:"Cancel",generateElementsFromFields:!0,focusBinding:null,buttons:{edit:{icon:e.icon.edit(24,24,"#fff"),text:"Edit",hideIfEditMode:!0,hideIfDetailsMode:!1},share:{icon:e.icon.share(24,24,"#fff"),text:"Share"},pdf:{icon:e.icon.pdf(24,24,"#fff"),text:"Save as PDF"},remove:{icon:e.icon.remove(24,24,"#fff"),text:"Remove",hideIfDetailsMode:!0}},elements:[]}}},e.prototype.load=function(t,i){var n=this;return this.config.nodes=t,this._draw(!1,e.action.init,void 0,function(){n.filterUI.update(),i&&i()}),this},e.prototype.loadXML=function(t,i){var n=e._xml2json(t);return this.load(n,i)},e.prototype.getXML=function(){return e._json2xml(this.config.nodes)},e.prototype.on=function(t,i){return e.events.on(t,i,this._event_id),this},e.prototype.removeListener=function(t,i){return e.events.remove(t,i,this._event_id)},e.prototype.draw=function(t,i,n){null==t&&(t=e.action.update),this._draw(!1,t,i,n)},e.prototype._draw=function(t,i,n,o){var r=this;if(!e.LAZY_LOADING||this.isVisible)if(e.LAZY_LOADING||this._initialized||(this._setInitialSizeIfNotSet(),0!=this.width()&&0!=this.height())){this._hideBeforeAnimationCompleted=!1;var a=i==e.action.init?null:this.getViewBox();this.manager.read(t,this.width(),this.height(),a,i,n,function(s){if(!r.notifierUI.show(s.notif)){i!=e.action.exporting&&(r.nodes=s.nodes,r.visibleNodeIds=s.visibleNodeIds,r.roots=s.roots),r.editUI.fields=s.allFields;var c={defs:""};e.events.publish("renderdefs",[r,c]);var l=r.ui.defs(c.defs),p=r.getScale(s.viewBox);l+=r.ui.pointer(r.config,i,p);var d=r.getViewBox(),h=s.viewBox;e.events.publish("prerender",[r,c={content:l,res:s}]),l=c.content;for(var u=0;u<s.visibleNodeIds.length;u++){var f=s.nodes[s.visibleNodeIds[u]],v=r._get(f.id);e.RENDER_LINKS_BEFORE_NODES&&(l+=r.ui.link(f,r,p,s.bordersByRootIdAndLevel,s.nodes,i)),l+=r.ui.node(f,v,s.animations,r.config,void 0,void 0,void 0,i,p,r)}for(u=0;u<s.visibleNodeIds.length;u++)f=s.nodes[s.visibleNodeIds[u]],e.RENDER_LINKS_BEFORE_NODES||(l+=r.ui.link(f,r,p,s.bordersByRootIdAndLevel,s.nodes,i)),l+=r.ui.expandCollapseBtn(r,f,r._layoutConfigs,i,p);if(e.events.publish("render",[r,c={content:l,res:s}]),l=c.content,s=c.res,l+=r.ui.lonely(r.config),i!==e.action.exporting){if(i!==e.action.centerNode&&i!==e.action.insert&&i!==e.action.expand&&i!==e.action.collapse&&i!==e.action.update||(h=d),i===e.action.init&&null!=d&&(h=d),r.response=s,S=r.ui.svg(r.width(),r.height(),h,r.config,l),r._initialized){var x=r.getSvg(),_=x.parentNode;_.removeChild(x),_.insertAdjacentHTML("afterbegin",S),r._attachEventHandlers(),r.xScrollUI.addListener(r.getSvg()),r.yScrollUI.addListener(r.getSvg()),r.xScrollUI.setPosition(),r.yScrollUI.setPosition()}else r.element.innerHTML=r.ui.css()+S+r.ui.menuButton(r.config),r._attachInitEventHandlers(),r._attachEventHandlers(),r.xScrollUI.create(r.width(),r.config.padding),r.xScrollUI.setPosition(),r.xScrollUI.addListener(r.getSvg()),r.yScrollUI.create(r.height(),r.config.padding),r.yScrollUI.setPosition(),r.yScrollUI.addListener(r.getSvg()),r.config.enableSearch&&r.searchUI.init(r),r.toolbarUI.init(r,r.config.toolbar),r.undoRedoUI.init(r);var g=!1,y=r.response.animations;if(y[0].length>0){for(r._hideBeforeAnimation(y[0].length),u=0;u<y[0].length;u++)y[0][u]=r.getNodeElement(y[0][u]);e.animate(y[0],y[1],y[2],r.config.anim.duration,r.config.anim.func,function(){g||(o&&o(),e.events.publish("redraw",[r]),r._showAfterAnimation(),g=!0)})}i===e.action.centerNode?e.animate(r.getSvg(),{viewbox:d},{viewbox:r.response.viewBox},r.config.anim.duration,r.config.anim.func,function(){r.ripple(n.options.rippleId),g||(o&&o(),e.events.publish("redraw",[r]),r._showAfterAnimation(),g=!0)},function(){r.xScrollUI.setPosition(),r.yScrollUI.setPosition()}):!d||!r.response||d[0]==r.response.viewBox[0]&&d[1]==r.response.viewBox[1]&&d[2]==r.response.viewBox[2]&&d[3]==r.response.viewBox[3]||i!==e.action.insert&&i!==e.action.expand&&i!==e.action.collapse&&i!==e.action.update&&i!==e.action.init?0==y[0].length&&(g||(o&&o(),e.events.publish("redraw",[r]),g=!0)):e.animate(r.getSvg(),{viewbox:d},{viewbox:r.response.viewBox},2*r.config.anim.duration,r.config.anim.func,function(){r.xScrollUI.setPosition(),r.yScrollUI.setPosition(),g||(o&&o(),e.events.publish("redraw",[r]),g=!0)}),r._initialized||(r._initialized=!0,r.filterUI.update(),e.events.publish("init",[r])),!r._loaded&&s&&s.nodes&&Object.keys(s.nodes).length&&(r._loaded=!0)}else{var b=s.boundary,m=b.maxX-b.minX,w=b.maxY-b.minY,S=r.ui.svg(m,w,[b.minX,b.minY,m,w],r.config,l,p);o(S)}}},function(s){e.events.publish("ready",[r,s])})}else console.error("Cannot load the chart with size 0! If you are using the OrgChart within tabs set OrgChart.LAZY_LOADING to true! ")},e.prototype._setInitialSizeIfNotSet=function(){this.element.style.overflow="hidden",this.element.style.position="relative",0==this.element.offsetHeight&&(this.element.style.height="100%",0==this.element.offsetHeight&&(this.element.style.height="700px")),0==this.element.offsetWidth&&(this.element.style.width="100%",0==this.element.offsetWidth&&(this.element.style.width="700px"))},e.prototype.width=function(){return this.element.offsetWidth},e.prototype.height=function(){return this.element.offsetHeight},e.prototype.getViewBox=function(){var t=this.getSvg();return e._getViewBox(t)},e.prototype.setViewBox=function(t){this.getSvg().setAttribute("viewBox",t.toString())},e.prototype.getScale=function(t){return t||(t=this.getViewBox()),e.getScale(t,this.width(),this.height(),this.config.scaleInitial,this.config.scaleMax,this.config.scaleMin)},e.prototype.setScale=function(t){t>this.config.scaleMax&&(t=this.config.scaleMax),t<this.config.scaleMin&&(t=this.config.scaleMin);var i=this.getViewBox().slice(0),n=this.width(),o=this.height(),r=n/i[2],a=o/i[3],s=r>a?a:r,c=i,l=i[2],p=i[3];return i[2]=i[2]/(t/s),i[3]=i[3]/(t/s),i[0]=c[0]-(i[2]-l)/2,i[1]=c[1]-(i[3]-p)/2,this.setViewBox(i),e.events.publish("redraw",[this]),t},e.prototype.ripple=function(t,i,n){var o=this.getNode(t);if(null!=o){var r=this.getNodeElement(t);if(null!=r){var a=this.getScale(),s=o.w/2,c=o.h/2;if(void 0!==i&&void 0!==n){var l=r.getBoundingClientRect();s=i/a-l.left/a,c=n/a-l.top/a}var p=o.w,d=o.h,h=p-s>s?p-s:s,u=d-c>c?d-c:c,f=h>u?h:u,v=document.createElementNS("http://www.w3.org/2000/svg","g"),x=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),_=document.createElementNS("http://www.w3.org/2000/svg","rect"),g=document.createElementNS("http://www.w3.org/2000/svg","circle"),y=e.randomId();x.setAttribute("id",y);var b={ripple:e.t(o.templateName,o.min,this.getScale()).ripple,node:o};e.events.publish("ripple",[this,b]),_.setAttribute("x",b.ripple.rect?b.ripple.rect.x:0),_.setAttribute("y",b.ripple.rect?b.ripple.rect.y:0),_.setAttribute("width",b.ripple.rect?b.ripple.rect.width:o.w),_.setAttribute("height",b.ripple.rect?b.ripple.rect.height:o.h),_.setAttribute("rx",b.ripple.radius),_.setAttribute("ry",b.ripple.radius),g.setAttribute("clip-path","url(#"+y+")"),g.setAttribute("cx",s),g.setAttribute("cy",c),g.setAttribute("r",0),g.setAttribute("fill",b.ripple.color),g.setAttribute("class","boc-ripple"),x.appendChild(_),v.appendChild(x),v.appendChild(g),r.appendChild(v),e.animate(g,{r:0,opacity:1},{r:f,opacity:0},500,e.anim.outPow,function(){r.removeChild(v)})}}},e.prototype.center=function(t,i,n){var o,r,a=t,s=!0,c=!0;i&&null!=i.parentState&&(o=i.parentState),i&&null!=i.childrenState&&(r=i.childrenState),i&&null!=i.rippleId&&(a=i.rippleId),i&&null!=i.vertical&&(s=i.vertical),i&&null!=i.horizontal&&(c=i.horizontal),this._draw(!1,e.action.centerNode,{id:t,options:{parentState:o,childrenState:r,rippleId:a,vertical:s,horizontal:c}},n)},e.prototype.fit=function(t){this.config.scaleInitial=e.match.boundary,this._draw(!0,e.action.init,{method:"fit"},t)},e.prototype.toggleFullScreen=function(){var t=document.querySelector("["+e.attr.tlbr+"r='fullScreen']");document.fullscreenElement==this.element||document.webkitFullscreenElement==this.element||document.mozFullScreenElement==this.element||document.msFullscreenElement==this.element?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),t&&(t.innerHTML=e.toolbarUI.openFullScreenIcon)):(this.element.requestFullscreen?this.element.requestFullscreen():this.element.mozRequestFullScreen?this.element.mozRequestFullScreen():this.element.webkitRequestFullscreen?this.element.webkitRequestFullscreen():this.element.msRequestFullscreen&&this.element.msRequestFullscreen(),t&&(t.innerHTML=e.toolbarUI.closeFullScreenIcon))},e.prototype.getNode=function(t){return this.nodes[t]},e.prototype.setLayout=function(t,i){i||(i="base"),this._layoutConfigs[i].layout=t,"base"==i&&(this.config.layout=t),this._draw(!1,e.action.update)},e.prototype.setOrientation=function(t,i,n){var o=this;i||(i="base"),this._layoutConfigs[i].orientation=t,"base"==i&&(this.config.orientation=t),this._draw(!1,e.action.update,void 0,function(){e._moveToBoundaryArea(o.getSvg(),o.getViewBox(),o.response.boundary,function(){o._draw(!0,e.action.pan),n&&n()})})},e.prototype.search=function(t,i,n){return e.isNEU(i)&&(i=this.searchUI._searchFields),e.isNEU(n)&&(n=i),e._search.search(this.config.nodes,t,i,n,this.config.searchDisplayField,this.config.searchFieldsWeight,this.searchUI._searchFieldsAbbreviation)},e.prototype._hideBeforeAnimation=function(t){if(1!=this._hideBeforeAnimationCompleted&&!(t&&t<e.ANIM_THRESHOLD)){var i=this.element.getElementsByTagName("text");if(i.length>e.TEXT_THRESHOLD)for(var n=0;n<i.length;n++)i[n].style.display="none";var o=this.element.getElementsByTagName("image");if(o.length>e.IMAGES_THRESHOLD)for(n=0;n<o.length;n++)o[n].style.display="none";var r=this.element.querySelectorAll("["+e.attr.link_id+"]");if(r.length>e.LINKS_THRESHOLD)for(n=0;n<r.length;n++)r[n].style.display="none";var a=this.element.querySelectorAll("["+e.attr.control_expcoll_id+"]");if(a.length>e.BUTTONS_THRESHOLD)for(n=0;n<a.length;n++)a[n].style.display="none";var s=this.element.querySelectorAll("["+e.attr.control_up_id+"]");if(s.length>e.BUTTONS_THRESHOLD)for(n=0;n<s.length;n++)s[n].style.display="none";this._hideBeforeAnimationCompleted=!0}},e.prototype._showAfterAnimation=function(){for(var t=this.element.getElementsByTagName("text"),i=0;i<t.length;i++)t[i].style.display="";var n=this.element.getElementsByTagName("image");for(i=0;i<n.length;i++)n[i].style.display="";var o=this.element.querySelectorAll("["+e.attr.link_id+"]");for(i=0;i<o.length;i++)o[i].style.display="";var r=this.element.querySelectorAll("["+e.attr.control_expcoll_id+"]");for(i=0;i<r.length;i++)r[i].style.display="";var a=this.element.querySelectorAll("["+e.attr.control_up_id+"]");for(i=0;i<a.length;i++)a[i].style.display="";this._hideBeforeAnimationCompleted=!1},e.prototype.isChild=function(t,i){for(var n=this.getNode(i);n;){if(n.id==t)return!0;n=n.parent?n.parent:n.stParent}return!1},e.prototype.getCollapsedIds=function(t){for(var i=[],n=0;n<t.childrenIds.length;n++){var o=this.getNode(t.childrenIds[n]);1==o.collapsed&&i.push(o.id)}return i},e.prototype.stateToUrl=function(){if(this.manager.state){var t={};return t.exp=this.manager.state.exp.join("*"),t.min=this.manager.state.min.join("*"),t.adjustify=this.manager.state.adjustify.x+"*"+this.manager.state.adjustify.y,t.scale=this.manager.state.scale,t.y=this.manager.state.x,t.x=this.manager.state.y,new URLSearchParams(t).toString()}return""},e.prototype.generateId=function(){for(;;){var t="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(null==this.nodes||!this.nodes.hasOwnProperty(t))return t}},e.prototype.moveNodesToVisibleArea=function(t,i){for(var n=this,o=this.getSvg(),r=this.getViewBox(),a=null,s=null,c=null,l=null,p=0;p<t.length;p++){var d=this.nodes[t[p]];(null===a||a<d.x+d.w)&&(a=d.x+d.w),(null===s||s<d.y+d.h)&&(s=d.y+d.h),(null===c||c>d.x)&&(c=d.x),(null===l||l>d.y)&&(l=d.y)}var h=this.width(),u=this.height(),f=h/(y=a-c+2*this.config.padding),v=u/(b=s-l+2*this.config.padding),x=f>v?v:f,_=Math.ceil(h/x),g=Math.ceil(u/x),y=0,b=0;if(_-2*this.config.padding>=a-c)switch(y=(a+c)/2-_/2,this.config.orientation){case e.orientation.right:case e.orientation.right_top:y=(c-a)/2-_/2}else switch(y=firstRoot.x-_/2+e.manager._getNodeWidth(firstRoot,this.config)/2,this.config.orientation){case e.orientation.right:case e.orientation.right_top:(y=-(_/2-(c-a)/2))<this.config.padding-_&&(y=this.config.padding-_);break;case e.orientation.left:case e.orientation.bottom_left:case e.orientation.top_left:case e.orientation.left_top:(y=-(_/2-(a-c)/2))>-this.config.padding&&(y=-this.config.padding)}if(g-2*this.config.padding>=s-l)switch(b=(s+l)/2-g/2,chart.config.orientation){case e.orientation.bottom:case e.orientation.bottom_left:b=(l-s)/2-g/2}else switch((b=-(g/2-(s-l)/2))>-this.config.padding&&(b=-this.config.padding),this.config.orientation){case e.orientation.bottom:case e.orientation.bottom_left:(b=-(g/2-(l-s)/2))<this.config.padding-g&&(b=this.config.padding-g);break;case e.orientation.left:case e.orientation.right:b=firstRoot.y-g/2+e.manager._getNodeWidth(firstRoot,this.config)/2}var m=[y,b,_,g];r[0]!==m[0]||r[1]!==m[1]?e.animate(o,{viewBox:r},{viewBox:m},this.config.anim.duration,this.config.anim.func,function(){n.draw(e.action.update,void 0,i)}):i&&i()},e.prototype._nodeHasHiddenParent=function(t){return!t.parent&&!e.isNEU(t.pid)&&this.getNode(t.pid)},e.prototype.destroy=function(){this._removeEvent(window,"resize"),e.events.removeForEventId(this._event_id),this.element.innerHTML=null},e.localStorage={},e.localStorage.getItem=function(t){var i=localStorage.getItem("to_date");if(i){if((i=new Date(i))<new Date){for(var n=0,o=localStorage.length;n<o;++n){var r=localStorage.key(n);r&&r.startsWith&&r.startsWith('{"n"')&&localStorage.removeItem(r)}localStorage.removeItem("to_date")}}else(i=new Date).setDate(i.getDate()+5),i=i.toISOString(),localStorage.setItem("to_date",i);return localStorage.getItem(t)},e.localStorage.setItem=function(t,i){try{localStorage.setItem(t,i)}catch(n){n.code==n.QUOTA_EXCEEDED_ERR?(console.warn("Local storage quota exceeded"),localStorage.clear()):(console.error("Local storage error code:"+n.code),console.error(n))}},e.prototype.canUpdateLink=function(t,i){if(null==i||null==i||null==t||null==t||t==i)return!1;var n=this.getNode(i),o=this.getNode(t);return!(n&&o&&(n.isPartner||n.hasPartners&&o.isAssistant||n.hasAssistants&&o.isPartner)||this.isChild(t,i))},e.prototype._canUpdateLink=e.prototype.canUpdateLink,e.prototype.updateNode=function(t,i,n){var o=this,r=this.get(t.id);if(!0===n&&!1===e.events.publish("update",[this,r,t]))return!1;this.update(t),e.events.publish("updated",[this]),this.filterUI.update();var a=this.getNode(t.id),s=a.pid;null==s&&(s=a.stpid),this._draw(!1,e.action.update,{id:s},function(){o.ripple(t.id),i&&i()})},e.prototype.update=function(t){for(var i=0;i<this.config.nodes.length;i++)if(this.config.nodes[i].id==t.id){this._putInUndoStack(),this.clearRedo(),this.config.nodes[i]=t;break}return this},e.prototype.removeNode=function(t,i,n){var o=this;if(!this.canRemove(t))return!1;var r=this._getNewPidsAndStpidsForIds(t);return(!0!==n||!1!==e.events.publish("remove",[this,t,r]))&&(this.remove(t),e.events.publish("updated",[this]),this.filterUI.update(),this._draw(!1,e.action.update,null,function(){o.config.sticky&&e._moveToBoundaryArea(o.getSvg(),o.getViewBox(),o.response.boundary),i&&i()}),!0)},e.prototype.remove=function(t){var i=this.get(t);if(i){this._putInUndoStack(),this.clearRedo();for(var n=this.config.nodes.length-1;n>=0;n--)this.config.nodes[n].pid!=t&&this.config.nodes[n].stpid!=t||(this.config.nodes[n].pid=i.pid,this.config.nodes[n].stpid=i.stpid),this.config.nodes[n].id==t&&this.config.nodes.splice(n,1)}return this},e.prototype._getNewPidsAndStpidsForIds=function(t){var i=this.get(t),n={},o={};if(i)for(var r=this.config.nodes.length-1;r>=0;r--)this.config.nodes[r].pid==t?n[this.config.nodes[r].id]=i.pid:this.config.nodes[r].stpid==t&&(o[this.config.nodes[r].id]=i.stpid);return{newPidsForIds:n,newStpidsForIds:o}},e.prototype.addNode=function(t,i,n){var o=this;if(!0===n&&!1===e.events.publish("add",[this,t]))return!1;this.add(t),e.events.publish("updated",[this]),this.filterUI.update(),o._draw(!1,e.action.insert,{id:t.pid,insertedNodeId:t.id},function(){o.ripple(t.id),i&&i()})},e.prototype.add=function(t){if(null==t.id&&console.error("Call addNode without id"),this._putInUndoStack(),this.clearRedo(),this.config.draggable&&!e.isNEU(t.pid)){var i=this._get(t.pid);i&&(null!=i.movex&&(t.movex=i.movex),null!=i.movey&&(t.movey=i.movey))}return this.config.nodes.push(t),this},e.prototype.replaceIds=function(t,i){this._replaceIds(t),this._draw(!1,e.action.update,void 0,i)},e.prototype._replaceIds=function(t){for(var i=function(l){for(var p=0;p<l.length;p++){var d=l[p];for(var h in t){var u=t[h];d.from==h&&(d.from=u),d.to==h&&(d.to=u)}}},n=0;n<this.config.nodes.length;n++){var o=this.config.nodes[n];for(var r in t){var a=t[r];o.id==r&&(o.id=a),o.pid==r&&(o.pid=a),o.stpid==r&&(o.stpid=a),o.ppid==r&&(o.ppid=a)}}if(Array.isArray(this.config.roots))for(n=0;n<this.config.roots.length;n++)e.isNEU(t[this.config.roots[n]])||(this.config.roots[n]=t[this.config.roots[n]]);if(this.nodes)for(var s in this.nodes)e.isNEU(t[s])||((c=this.nodes[s]).id=a=t[s],this.nodes[a]=c);if(this.manager.oldNodes)for(var s in this.manager.oldNodes)e.isNEU(t[s])||((c=this.manager.oldNodes[s]).id=a=t[s],this.manager.oldNodes[a]=c);if(this.roots)for(var s in this.roots)if(!e.isNEU(t[s])){var c;(c=this.roots[s]).id=a=t[s],this.roots[a]=c}i(this.config.clinks),i(this.config.slinks),i(this.config.groupDottedLines),i(this.config.dottedLines)},e.prototype._get=function(t){var i=this.__get(t);if(i)return i;if((this.config.groupDottedLines.length||this.config.dottedLines.length)&&!e.isNEU(t)&&"string"==typeof t&&(-1!=t.indexOf("balkan_group_dotted_")||-1!=t.indexOf("balkan_dotted_"))){var n=(t=(t=t.replace("balkan_group_dotted_","")).replace("balkan_dotted_","")).indexOf("_balkan_id_");if(t=t.substring(n+11),i=this.__get(t))return i}return null},e.prototype.__get=function(t){for(var i=0;i<this.config.nodes.length;i++)if(this.config.nodes[i].id==t)return this.config.nodes[i];return null},e.prototype.get=function(t){var i=this._get(t);return null==i?null:JSON.parse(JSON.stringify(i))},e.prototype.canRemove=function(t){var i=this.getNode(t);return!!i&&!i.hasPartners&&!i.hasAssistants},void 0===e&&(e={}),e._ajax=function(t,i,n,o,r){null==o&&(o="arraybuffer");var a=new XMLHttpRequest;a.onload=function(s){4==a.readyState&&200===this.status&&r(null==s.target?this.response:s.target.response)},a.onerror=function(s){r({error:s})},a.open(i,t),a.responseType=o,a.setRequestHeader("Content-Type","application/json"),null==n?a.send():a.send(n)},void 0===e&&(e={}),e.animate=function(t,i,n,o,r,a,s){var c,l=10,p=1,d=o/l+1;return document.getElementsByTagName("g"),Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]),c=setInterval(function(){for(var h=0;h<t.length;h++)for(var u in n[h]){var f=e._arrayContains(["top","left","right","bottom","width","height"],u.toLowerCase())?"px":"";switch(u.toLowerCase()){case"d":var v=r((p*l-l)/o)*(n[h][u][0]-i[h][u][0])+i[h][u][0],x=r((p*l-l)/o)*(n[h][u][1]-i[h][u][1])+i[h][u][1];t[h].setAttribute("d",t[h].getAttribute("d")+" L"+v+" "+x);break;case"r":var _=r((p*l-l)/o)*(n[h][u]-i[h][u])+i[h][u];t[h].setAttribute("r",_);break;case"x1":_=r((p*l-l)/o)*(n[h][u]-i[h][u])+i[h][u],t[h].setAttribute("x1",_);break;case"x2":_=r((p*l-l)/o)*(n[h][u]-i[h][u])+i[h][u],t[h].setAttribute("x2",_);break;case"y1":_=r((p*l-l)/o)*(n[h][u]-i[h][u])+i[h][u],t[h].setAttribute("y1",_);break;case"y2":_=r((p*l-l)/o)*(n[h][u]-i[h][u])+i[h][u],t[h].setAttribute("y2",_);break;case"rotate3d":if(n[h][u]){var g=i[h][u],y=n[h][u],b=[0,0,0,0];for(var m in g)b[m]=r((p*l-l)/o)*(y[m]-g[m])+g[m];t[h].style.transform="rotate3d("+b.toString()+"deg)"}break;case"transform":if(n[h][u]){for(var m in y=n[h][u],b=[0,0,0,0,0,0],g=i[h][u])b[m]=r((p*l-l)/o)*(y[m]-g[m])+g[m];t[h].hasAttribute("transform")?t[h].setAttribute("transform","matrix("+b.toString()+")"):t[h].style.transform="matrix("+b.toString()+")"}break;case"viewbox":if(n[h][u]){for(var m in y=n[h][u],b=[0,0,0,0],g=i[h][u])b[m]=r((p*l-l)/o)*(y[m]-g[m])+g[m];t[h].setAttribute("viewBox",b.toString())}break;case"margin":if(n[h][u]){for(var m in y=n[h][u],b=[0,0,0,0],g=i[h][u])b[m]=r((p*l-l)/o)*(y[m]-g[m])+g[m];var w="";for(m=0;m<b.length;m++)w+=parseInt(b[m])+"px ";t[h]&&t[h].style&&(t[h].style[u]=w)}break;case"scrolly":_=r((p*l-l)/o)*(n[h][u]-i[h][u])+i[h][u],t[h].scrollTo(0,_);break;default:_=r((p*l-l)/o)*(n[h][u]-i[h][u])+i[h][u],t[h]&&t[h].style&&(t[h].style[u]=_+f)}}s&&s(),(p+=1)>d+1&&(clearInterval(c),a&&a(t))},l)},e.anim={},e.anim.inPow=function(t){return t<0?0:t>1?1:Math.pow(t,2)},e.anim.outPow=function(t){return t<0?0:t>1?1:-1*(Math.pow(t-1,2)+-1)},e.anim.inOutPow=function(t){return t<0?0:t>1?1:(t*=2)<1?e.anim.inPow(t,2)/2:-.5*(Math.pow(t-2,2)+-2)},e.anim.inSin=function(t){return t<0?0:t>1?1:1-Math.cos(t*(Math.PI/2))},e.anim.outSin=function(t){return t<0?0:t>1?1:Math.sin(t*(Math.PI/2))},e.anim.inOutSin=function(t){return t<0?0:t>1?1:-.5*(Math.cos(Math.PI*t)-1)},e.anim.inExp=function(t){return t<0?0:t>1?1:Math.pow(2,10*(t-1))},e.anim.outExp=function(t){return t<0?0:t>1?1:1-Math.pow(2,-10*t)},e.anim.inOutExp=function(t){return t<0?0:t>1?1:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,10*(-2*t+1)))},e.anim.inCirc=function(t){return t<0?0:t>1?1:-(Math.sqrt(1-t*t)-1)},e.anim.outCirc=function(t){return t<0?0:t>1?1:Math.sqrt(1-(t-1)*(t-1))},e.anim.inOutCirc=function(t){return t<0?0:t>1?1:t<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(2*t-2)*(2*t-2))+1)},e.anim.rebound=function(t){return t<0?0:t>1?1:t<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-1.5/2.75)*(t-1.5/2.75)+.75):t<2.5/2.75?1-(7.5625*(t-2.25/2.75)*(t-2.25/2.75)+.9375):1-(7.5625*(t-2.625/2.75)*(t-2.625/2.75)+.984375)},e.anim.inBack=function(t){return t<0?0:t>1?1:t*t*(2.70158*t-1.70158)},e.anim.outBack=function(t){return t<0?0:t>1?1:(t-1)*(t-1)*(2.70158*(t-1)+1.70158)+1},e.anim.inOutBack=function(t){return t<0?0:t>1?1:t<.5?4*t*t*(7.1898*t-2.5949)*.5:.5*((2*t-2)*(2*t-2)*(3.5949*(2*t-2)+2.5949)+2)},e.anim.impulse=function(t){var i=2*t;return i*Math.exp(1-i)},e.anim.expPulse=function(t){return Math.exp(-2*Math.pow(t,2))},void 0===e&&(e={}),e.prototype._attachInitEventHandlers=function(t){this._addEvent(window,"resize",this._resizeHandler)},e.prototype._attachEventHandlers=function(t){if(this.config.interactive){t=this.getSvg(),this.config.enableTouch||e.isMobile()?(this._addEvent(t,"touchstart",this._globalMouseDownHandler),this._addEvent(t,"touchend",this._globalClickHandler)):(this._addEvent(t,"mousedown",this._globalMouseDownHandler),this._addEvent(t,"click",this._globalClickHandler),this._addEvent(t,"contextmenu",this._globalContextHandler),this._addEvent(t,"dblclick",this._globalDbClickHandler),this.config.mouseScrool!=e.action.none&&this._addEvent(t,"wheel",this._mouseScrollHandler));var i=this.getMenuButton();i&&this._addEvent(i,"click",this._menuClickHandler)}},e.prototype._addEvent=function(t,i,n,o){var r,a;function s(c){var l=n.apply(this,arguments);return!1===l&&(c.stopPropagation(),c.preventDefault()),l}o||(o=""),t.getListenerList||(t.getListenerList={}),t.getListenerList[i+o]||(r=this,a=n,n=function(){if(a)return a.apply(r,[this,arguments[0]])},t.addEventListener?t.addEventListener(i,s,"mousewheel"==i&&{passive:!1}):t.attachEvent("on"+i,function(){var c=n.call(t,window.event);return!1===c&&(window.event.returnValue=!1,window.event.cancelBubble=!0),c}),t.getListenerList[i+o]=s)},e.prototype._removeEvent=function(t,i){t.getListenerList[i]&&(t.removeEventListener(i,t.getListenerList[i],!1),delete t.getListenerList[i])},void 0===e&&(e={}),e.VERSION="8.13.25",e.orientation={},e.orientation.top=0,e.orientation.bottom=1,e.orientation.right=2,e.orientation.left=3,e.orientation.top_left=4,e.orientation.bottom_left=5,e.orientation.right_top=6,e.orientation.left_top=7,e.align={},e.align.center=e.CENTER=8,e.align.orientation=e.ORIENTATION=9,e.attr={},e.attr.l="data-l",e.attr.id="data-id",e.attr.sl="data-sl",e.attr.lbl="data-lbl",e.attr.val="data-val",e.attr.tlbr="data-tlbr",e.attr.item="data-item",e.attr.layout="data-layout",e.attr.node_id="data-n-id",e.attr.link_id="data-l-id",e.attr.field_name="data-f-name",e.attr.c_link_to="data-c-l-to",e.attr.c_link_from="data-c-l-from",e.attr.s_link_to="data-s-l-to",e.attr.s_link_from="data-s-l-from",e.attr.control_add="data-ctrl-add",e.attr.control_expcoll_id="data-ctrl-ec-id",e.attr.control_up_id="data-ctrl-up-id",e.attr.control_export_menu="data-ctrl-menu",e.attr.control_node_menu_id="data-ctrl-n-menu-id",e.attr.control_node_circle_menu_id="data-ctrl-n-c-menu-id",e.attr.control_node_circle_menu_name="data-ctrl-n-c-menu-name",e.attr.control_node_circle_menu_wrraper_id="data-ctrl-n-c-menu-wrapper-id",e.attr.width="data-width",e.attr.text_overflow="data-text-overflow",e.ID="id",e.PID="pid",e.STPID="stpid",e.TAGS="tags",e.NODES="nodes",e.ELASTIC="elastic",e.ASSISTANT="Assistant",e.action={},e.action.expand=0,e.action.collapse=1,e.action.maximize=101,e.action.minimize=102,e.action.expandCollapse=501,e.action.edit=1,e.action.zoom=2,e.action.ctrlZoom=22,e.action.scroll=41,e.action.xScroll=3,e.action.yScroll=4,e.action.none=5,e.action.init=6,e.action.update=7,e.action.move=70,e.action.pan=8,e.action.centerNode=9,e.action.resize=10,e.action.insert=11,e.action.insertfirst=12,e.action.details=13,e.action.exporting=14,e.none=400001,e.scroll={},e.scroll.visible=!0,e.scroll.smooth=12,e.scroll.speed=120,e.scroll.safari={smooth:12,speed:250},e.match={},e.match.height=100001,e.match.width=100002,e.match.boundary=100003,e.draggable={},e.draggable.node="node",e.draggable.tree="tree",e.layout={},e.layout.normal=e.normal=0,e.layout.mixed=e.mixed=1,e.layout.tree=e.tree=2,e.layout.treeLeftOffset=e.treeLeftOffset=3,e.layout.treeRightOffset=e.treeRightOffset=4,e.layout.treeLeft=5,e.layout.treeRight=6,e.nodeOpenTag="<g "+e.attr.node_id+'="{id}" style="opacity: {opacity}" transform="matrix(1,0,0,1,{x},{y})" class="{class}" '+e.attr.sl+'="{sl}" '+e.attr.l+"={level} {lcn}>",e.linkOpenTag="<g "+e.attr.link_id+'="[{id}][{child-id}]" class="{class}">',e.expcollOpenTag="<g "+e.attr.control_expcoll_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})"  style="cursor:pointer;">',e.upOpenTag="<g "+e.attr.control_up_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})" style="cursor:pointer;">',e.linkFieldsOpenTag='<g transform="matrix(1,0,0,1,{x},{y}) rotate({rotate})">',e.grCloseTag="</g>",e.A5w=420,e.A5h=595,e.A4w=595,e.A4h=842,e.A3w=842,e.A3h=1191,e.A2w=1191,e.A2h=1684,e.A1w=1684,e.A1h=2384,e.Letterw=612,e.Letterh=791,e.Legalw=612,e.Legalh=1009,e.COLLAPSE_PARENT_NEIGHBORS=1,e.COLLAPSE_SUB_CHILDRENS=2,e.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED=3,e.TEXT_THRESHOLD=400,e.IMAGES_THRESHOLD=100,e.LINKS_THRESHOLD=200,e.BUTTONS_THRESHOLD=70,e.ANIM_THRESHOLD=50,e.IT_IS_LONELY_HERE='<g transform="translate(-100, 0)" style="cursor:pointer;"  '+e.attr.control_add+'="control-add"><text fill="#039be5">{link}</text></g>',e.RES={},e.RES.IT_IS_LONELY_HERE_LINK="It's lonely here, add your first node",e.FIRE_DRAG_NOT_CLICK_IF_MOVE=3,e.STRING_TAGS=!1,e.MAX_NODES_MESS="The trial has expired or 200 nodes limit was reached! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/OrgChartJS/Docs/Evaluation'>See more</a>",e.OFFLINE_MESS="The evaluation version requires internet connection! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/OrgChartJS/Docs/Evaluation'>See more</a>",e.SEARCH_PLACEHOLDER="T\xecm ki\u1ebfm... \u1ea5n ? \u0111\u1ec3 g\u1ee3i \xfd.",e.SEARCH_HELP_SYMBOL="?",e.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE=!1,e.SEARCH_RESULT_LIMIT=10,e.IMPORT_MESSAGE="Choose the columns (fields) in your data file that contain the required information.",e.FIXED_POSITION_ON_CLICK=!1,e.RENDER_LINKS_BEFORE_NODES=!1,e.MIXED_LAYOUT_ALL_NODES=!0,e.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN=!1,e.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN=1,e.LINK_ROUNDED_CORNERS=5,e.MOVE_STEP=5,e.CLINK_CURVE=1,e.MAX_DEPTH=200,e.SCALE_FACTOR=1.44,e.LAZY_LOADING_FACTOR=500,e.HIDE_EDIT_FORM_ON_PAN=!0,e.LAZY_LOADING=!0,e.ARRAY_FIELDS=["tags"],e.CSV_DELIMITER=",",e.EDITFORM_CLOSE_BTN='<svg data-edit-from-close class="boc-edit-form-close"><path style="fill:#ffffff;" d="M21.205,5.007c-0.429-0.444-1.143-0.444-1.587,0c-0.429,0.429-0.429,1.143,0,1.571l8.047,8.047H1.111 C0.492,14.626,0,15.118,0,15.737c0,0.619,0.492,1.127,1.111,1.127h26.554l-8.047,8.032c-0.429,0.444-0.429,1.159,0,1.587 c0.444,0.444,1.159,0.444,1.587,0l9.952-9.952c0.444-0.429,0.444-1.143,0-1.571L21.205,5.007z"></path></svg>',e.ESCAPE_HTML=!1,e.VERTICAL_CHILDREN_ASSISTANT=!1,xe.exports=e,e._intersects=function(t,i,n){var o=t.x-n.siblingSeparation/4,r=t.y,a=t.x+t.w+n.siblingSeparation/4,s=t.y;switch(n.orientation){case e.orientation.right:case e.orientation.right_top:case e.orientation.left:case e.orientation.left_top:o=t.x,r=t.y-n.siblingSeparation/4,a=t.x,s=t.y+t.h+n.siblingSeparation/4}var c,l,p,d=i.p,h=i.q,u=i.r,f=i.s;return 0!=(c=(a-o)*(f-h)-(u-d)*(s-r))&&(l=((r-s)*(u-o)+(a-o)*(f-r))/c,0<(p=((f-h)*(u-o)+(d-u)*(f-r))/c)&&p<1&&0<l&&l<1)},e._addPoint=function(t,i,n,o,r){switch(n.orientation){case e.orientation.top:case e.orientation.top_left:return e._addPointTop(t,i,n,o,r);case e.orientation.bottom:case e.orientation.bottom_left:return e._addPointBottom(t,i,n,o,r);case e.orientation.left:case e.orientation.left_top:return e._addPointLeft(t,i,n,o,r);case e.orientation.right:case e.orientation.right_top:return e._addPointRight(t,i,n,o,r)}},e._addPointTop=function(t,i,n,o,r){var a,s,c;return"left"==r?a=t.leftNeighbor?t.x+(t.leftNeighbor.x+t.leftNeighbor.w-t.x)/2:t.x-n.siblingSeparation/2:"right"==r&&(a=t.rightNeighbor?t.x+t.w+(t.rightNeighbor.x-(t.x+t.w))/2:t.x+t.w+n.siblingSeparation/2),i.push([a,i[i.length-1][1]]),i.push([a,t.y-n.levelSeparation/3]),s=i[i.length-1][1],c=a,o.p=a,o.q=s,o.r=c,o},e._addPointBottom=function(t,i,n,o,r){var a,s,c;return"left"==r?a=t.leftNeighbor?t.x+(t.leftNeighbor.x+t.leftNeighbor.w-t.x)/2:t.x-n.siblingSeparation/2:"right"==r&&(a=t.rightNeighbor?t.x+t.w+(t.rightNeighbor.x-(t.x+t.w))/2:t.x+t.w+n.siblingSeparation/2),i.push([a,i[i.length-1][1]]),i.push([a,t.y+t.h+n.levelSeparation/3]),s=i[i.length-1][1],c=a,o.p=a,o.q=s,o.r=c,o},e._addPointLeft=function(t,i,n,o,r){var a;"bottom"==r?a=t.rightNeighbor?t.y+t.h+(t.rightNeighbor.y-(t.y+t.h))/2:t.y+t.h+n.siblingSeparation/2:"top"==r&&(a=t.leftNeighbor?t.y+(t.leftNeighbor.y+t.leftNeighbor.h-t.y)/2:t.y-n.siblingSeparation/2),i.push([i[i.length-1][0],a]),i.push([t.x-n.levelSeparation/3,a]);var c=a;return o.p=i[i.length-1][0],o.q=a,o.s=c,o},e._addPointRight=function(t,i,n,o,r){var a;"bottom"==r?a=t.rightNeighbor?t.y+t.h+(t.rightNeighbor.y-(t.y+t.h))/2:t.y+t.h+n.siblingSeparation/2:"top"==r&&(a=t.leftNeighbor?t.y+(t.leftNeighbor.y+t.leftNeighbor.h-t.y)/2:t.y-n.siblingSeparation/2),i.push([i[i.length-1][0],a]),i.push([t.x+t.w+n.levelSeparation/3,a]);var c=a;return o.p=i[i.length-1][0],o.q=a,o.s=c,o},e.editUI=function(){},e.editUI.prototype.init=function(t){this.obj=t,this.fields=null,this._event_id=e._guid()},e.editUI.prototype.on=function(t,i){return e.events.on(t,i,this._event_id),this},e.editUI.prototype.show=function(t,i,n){if(this.hide(),!1===e.events.publish("show",[this,t]))return!1;var o=this,r=this.content(t,i,n);this.obj.element.appendChild(r.element),e.input.init(this.obj.element),n?i||this._focusElement(r.focusId):this.interval=e.animate(r.element,{right:-20,opacity:0},{right:0,opacity:1},300,e.anim.outSin,function(){i||o._focusElement(r.focusId)}),this.obj.element.querySelector("[data-edit-from-close]").addEventListener("click",function(c){c.preventDefault(),!1!==e.events.publish("cancel",[o,{id:t}])&&o.hide()}),this.obj.element.querySelector("[data-edit-from-cancel]").addEventListener("click",function(c){c.preventDefault(),!1!==e.events.publish("cancel",[o,{id:t}])&&o.hide()}),this.obj.element.querySelector("[data-edit-from-save]").addEventListener("click",function(c){c.preventDefault();var l=e.input.validateAndGetData(r.element);if(!1!==l){var p=o.obj.get(t),d={data:e.mergeDeep(p,l)};if(!1===e.events.publish("save",[o,d]))return;o.obj.updateNode(d.data,null,!0),o.hide()}});for(var a=this.obj.element.querySelectorAll("[data-input-btn]"),s=0;s<a.length;s++)a[s].addEventListener("click",function(c){c.preventDefault(),e.events.publish("element-btn-click",[o,{input:this.parentNode.querySelector("input"),nodeId:t,event:c}])});this.obj.element.querySelector("[data-add-more-fields-btn]").addEventListener("click",function(c){c.stopPropagation(),c.preventDefault();var l=this,p=e.elements.textbox({},{type:"textbox",label:o.obj.config.editForm.addMoreFieldName,btn:o.obj.config.editForm.addMoreBtn},"280px");l.parentNode.insertAdjacentHTML("beforebegin",p.html),l.style.display="none",e.input.init(l.parentNode.previousSibling);var d=document.getElementById(p.id);d.focus(),d.nextElementSibling.addEventListener("click",function(h){h.stopPropagation(),h.preventDefault();var u=d.value,f=o.obj.element.querySelector('[data-binding="'+e._escapeDoubleQuotes(d.value)+'"]');if(e.isNEU(u)||f)d.focus();else{var v=e.elements.textbox({},{type:"textbox",label:u,binding:u},"280px");d.parentNode.parentNode.parentNode.removeChild(d.parentNode.parentNode),l.parentNode.insertAdjacentHTML("beforebegin",v.html),l.style.display="",e.input.init(l.parentNode.previousSibling),document.getElementById(v.id).focus()}})}),this.obj.element.querySelector("[data-boc-edit-from-btns]").addEventListener("click",function(c){for(var l=c.target;l&&l.hasAttribute&&!l.hasAttribute("data-edit-from-btn");)l=l.parentNode;if(l&&l.hasAttribute){var p=l.getAttribute("data-edit-from-btn");if(!1===e.events.publish("button-click",[o,{button:o.obj.config.editForm.buttons[p],name:p,nodeId:t,event:c}]))return!1;switch(p){case"edit":o.obj.editUI.show(t,!1,!0);break;case"pdf":o.obj.exportPDFProfile({id:t,filename:r.title}),o.hide();break;case"png":o.obj.exportPNGProfile({id:t,filename:r.title}),o.hide();break;case"share":o.obj.shareProfile(t);break;case"remove":o.obj.removeNode(t,null,!0),o.hide()}}})},e.editUI.prototype._focusElement=function(t){var i=null;e.isNEU(this.obj.config.editForm.focusBinding)?e.isNEU(t)||(i=document.getElementById(t)):i=this.obj.element.querySelector('[data-binding="'+this.obj.config.editForm.focusBinding+'"]'),i&&(i.value&&i.value.length&&i.setSelectionRange(i.value.length,i.value.length),i.focus())},e.editUI.prototype.setAvatar=function(t){this.obj.element.querySelector("#boc-avatar").innerHTML=e.isNEU(t)?e.icon.user(150,150,"#8C8C8C",0,0):`<img style="width: 100%;height:100%;border-radius: 50%;" src="${t}"></img>`},e.editUI.prototype.content=function(t,i,n,o,r){var a,s=this.obj.config.editForm.readOnly,c=JSON.parse(JSON.stringify(this.obj.config.editForm.elements)),l=this.obj.config.editForm.addMore,p=this.obj.config.editForm.saveAndCloseBtn,d=this.obj.config.editForm.cancelBtn,h=this.obj.config.editForm.buttons,u=this.obj.config.editForm.titleBinding,f=this.obj.config.editForm.photoBinding,v=this.obj.getNode(t),x=this.obj._get(t),_=e.t(v.templateName,v.min,this.obj.getScale()),g=x[u],y=x[f];if(this.obj.config.editForm.generateElementsFromFields)for(var b=0;b<this.fields.length;b++){var m=this.fields[b];if("tags"!=m){for(var w=!1,S=0;S<c.length;S++){if(Array.isArray(c[S])){for(var k=0;k<c[S].length;k++)if(m==c[S][k].binding){w=!0;break}}else if(m==c[S].binding){w=!0;break}if(w)break}w||c.push({type:"textbox",label:m,binding:m})}}e.isNEU(g)&&(g=""),y=e.isNEU(y)?e.icon.user(150,150,"#8C8C8C",0,0):`<img style="width: 100%;height:100%;border-radius: 50%;" src="${y}"></img>`;var I=!i,A=i?"display:none;":"",M=i||!l?"display:none;":"",N=_.editFormHeaderColor?`style="background-color:${_.editFormHeaderColor};"`:"",C=document.createElement("form");if(C.setAttribute("data-boc-edit-form",""),C.classList.add("boc-edit-form"),C.classList.add(this.obj.config.mode),C.classList.add(v.templateName),C.classList.add(e.ui._defsIds[v.templateName]),Array.isArray(v.tags)&&v.tags.length)for(b=0;b<v.tags.length;b++)C.classList.add(v.tags[b]);C.style.display="flex",C.style.opacity=n?1:0,C.style.right=n?0:"-20px",o&&(C.style.width=o);var U=[];return C.innerHTML=`<div>\n                        <div class="boc-edit-form-header" ${N}>\n                            ${r?"":e.EDITFORM_CLOSE_BTN}\n                            ${e.editUI.renderHeaderContent(g,y,v,x)}\n                        </div>\n                        <div data-boc-edit-from-btns class="boc-edit-form-instruments">\n                        ${function(){if(r)return"";var P="";for(var T in h){var E=h[T];e.isNEU(E)||I&&E.hideIfEditMode||i&&E.hideIfDetailsMode||s&&"Edit"==E.text||(P+=`<div data-edit-from-btn='${T}' class="boc-img-button" ${N} title="${E.text}">${E.icon}</div>`)}return P}()}    \n                        </div>\n                    </div>\n                    <div class="boc-edit-form-fields">\n                        <div class="boc-edit-form-fields-inner">\n                            <div class="boc-form-fieldset">\n                                ${function(){for(var P="",T=0;T<c.length;T++){var E=c[T];if(Array.isArray(E)){P+='<div class="boc-form-field-100 boc-form-fieldset">';for(var F=0;F<E.length;F++){var O=E[F],D=e.elements[O.type](x,O,"unset",i);!e.isNEU(D.id)&&e.isNEU(a)&&e.isNEU(D.value)&&(a=D.id),e.isNEU(D.value)||U.push(`${O.label}: ${D.value}`),P+=D.html}P+="</div>"}else D=e.elements[E.type](x,E,"280px",i),!e.isNEU(D.id)&&e.isNEU(a)&&e.isNEU(D.value)&&(a=D.id),e.isNEU(D.value)||U.push(`${E.label}: ${D.value}`),P+=D.html}return P}()}\n\n                                <div class="boc-form-field" style="min-width: 280px; text-align:center; ${M}">\n                                    <a data-add-more-fields-btn href="#" class="boc-link">${l}</a>\n                                </div>\n                            </div>        \n                        </div>\n                    </div>\n                    <div class="boc-form-fieldset" style="padding: 14px 10px; ${A}">\n                        <div class="boc-form-field" style="min-width: initial;">\n                            <button data-edit-from-cancel type="button" class="boc-button transparent">${d}</button>\n                        </div>\n                        <div class="boc-form-field" style="min-width: initial;">\n                            <button type="submit" data-edit-from-save type="button" class="boc-button">${p}</button>\n                        </div>\n                    </div>`,{element:C,focusId:a,title:g,shareText:U.join("\n")}},e.editUI.prototype.hide=function(){if(!1===e.events.publish("hide",[this]))return!1;e.isNEU(this.interval)&&(clearInterval(this.interval),this.interval=null);var t=this.obj.element.querySelector("[data-boc-edit-form]");t&&t.parentNode&&t.parentNode.removeChild(t)},e.editUI.renderHeaderContent=function(t,i,n,o){return`<h1 class="boc-edit-form-title">${e._escapeGreaterLessSign(t)}</h1>\n                <div id="boc-avatar" class="boc-edit-form-avatar">${i}</div>`},e.prototype.getSvg=function(){var t=this.element.getElementsByTagName("svg");return t&&t.length?t[0]:null},e.prototype.getPointerElement=function(){return this.element.querySelector("g[data-pointer]")},e.prototype.getNodeElement=function(t){return this.element.querySelector("["+e.attr.node_id+"='"+t+"']")},e.prototype.getMenuButton=function(){return this.element.querySelector("["+e.attr.control_export_menu+"]")},e.menuUI=function(){},e.menuUI.prototype.init=function(t,i){this.obj=t,this.wrapper=null,this.menu=i,this._event_id=e._guid()},e.menuUI.prototype.showStickIn=function(t,i,n,o){this._show(t,null,i,n,o)},e.menuUI.prototype.show=function(t,i,n,o,r){this._show(t,i,n,o,r)},e.menuUI.prototype._show=function(t,i,n,o,r){var a=this;this.hide();var s="";r||(r=this.menu);var c={firstNodeId:n,secondNodeId:o,menu:r};if(!1===e.events.publish("show",[this,c]))return!1;for(var l in r=c.menu){var p=r[l].icon,d=r[l].text;void 0===p&&(p=e.icon[l]?e.icon[l](24,24,"#7A7A7A"):""),"function"==typeof d&&(d=d()),"function"==typeof p&&(p=p()),s+="<div "+e.attr.item+'="'+l+'">'+p+"<span>&nbsp;&nbsp;"+d+"</span></div>"}if(""!=s){if(this.wrapper=document.createElement("div"),this.wrapper.className="boc-chart-menu",this.wrapper.style.left="-99999px",this.wrapper.style.top="-99999px",this.wrapper.innerHTML=s,this.obj.element.appendChild(this.wrapper),null==i){var h=e._menuPosition(t,this.wrapper,this.obj.getSvg());t=h.x,i=h.y}var u=t+45;this.wrapper.style.left=u+"px",this.wrapper.style.top=i+"px",this.wrapper.style.left=u-this.wrapper.offsetWidth+"px",e.animate(this.wrapper,{opacity:0,left:u-this.wrapper.offsetWidth},{opacity:1,left:t-this.wrapper.offsetWidth},300,e.anim.inOutPow);for(var v=this.wrapper.getElementsByTagName("div"),x=0;x<v.length;x++)(l=v[x]).addEventListener("click",function(_){var g,y=this.getAttribute(e.attr.item);if(void 0===r[y].onClick)if("add"===y){var b={id:a.obj.generateId(),pid:n};a.obj.addNode(b,null,!0)}else if("edit"===y){var m=a.obj.getNode(n);a.obj.editUI.show(m.id)}else"details"===y?(m=a.obj.getNode(n),a.obj.editUI.show(m.id,!0)):"remove"===y?a.obj.removeNode(n,null,!0):"svg"===y?a.obj.exportSVG({filename:"OrgChart.svg",expandChildren:!1,nodeId:n}):"pdf"===y?a.obj.exportPDF({filename:"OrgChart.pdf",expandChildren:!1,nodeId:n}):"png"===y?a.obj.exportPNG({filename:"OrgChart.png",expandChildren:!1,nodeId:n}):"csv"===y?a.obj.exportCSV({nodeId:n}):"xml"===y?a.obj.exportXML({nodeId:n}):"json"===y&&a.obj.exportJSON({nodeId:n});else g=r[y].onClick.call(a.obj,n,o);0!=g&&a.hide()})}},e.menuUI.prototype.isVisible=function(){return null!=this.wrapper},e.menuUI.prototype.hide=function(){null!=this.wrapper&&(this.obj.element.removeChild(this.wrapper),this.wrapper=null)},e.menuUI.prototype.on=function(t,i){return e.events.on(t,i,this._event_id),this},e.circleMenuUI=function(){},e.circleMenuUI.prototype.init=function(t,i){this.obj=t,this.menu=i,this._menu=null,this._buttonsInterval=[],this._linesInterval=[],this._event_id=e._guid()},e.circleMenuUI.prototype.show=function(t,i){this._show(t,i)},e.circleMenuUI.prototype._show=function(t,i){var n=this,o=this.obj.getNode(t),r=e.t(o.templateName,o.min,this.obj.getScale());if(!e.isNEU(r.nodeCircleMenuButton)){var a=this.obj.getSvg(),s=this.obj.element.querySelector("["+e.attr.control_node_circle_menu_id+'="'+t+'"]'),c=this.obj.getNodeElement(t),l=e._getTransform(s),p=e._getTransform(c),d=l[4]+p[4],h=l[5]+p[5],u=s.querySelectorAll("line"),f=this.obj.element.querySelector("["+e.attr.control_node_circle_menu_wrraper_id+"]");if(e.isNEU(f)||f.getAttribute(e.attr.control_node_circle_menu_wrraper_id)!=t){this.hide(),i||(i=this.menu);var v={nodeId:t,menu:i},x=e.events.publish("show",[this,v]);if(this._menu=i,!1===x)return!1;for(var _=0,g=Object.keys(v.menu).length,y=2*r.nodeCircleMenuButton.radius+4,b=2*Math.PI*y,m=b/g-(2*r.nodeCircleMenuButton.radius+2);m<0;)y+=8,m=(b=2*Math.PI*y)/g-(2*r.nodeCircleMenuButton.radius+2);for(var w in(f=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute(e.attr.control_node_circle_menu_wrraper_id,t),f.setAttribute("transform","matrix(1,0,0,1,"+d+","+h+")"),a.appendChild(f),v.menu){var S=v.menu[w].icon,k=v.menu[w].color,I=v.menu[w].text;"function"==typeof S&&(S=S()),"function"==typeof k&&(k=k()),"function"==typeof I&&(I=I());var A=document.createElementNS("http://www.w3.org/2000/svg","g");A.setAttribute("transform","matrix(1,0,0,1,0,0)"),A.setAttribute(e.attr.control_node_circle_menu_name,w),A.style.cursor="pointer";var M=document.createElementNS("http://www.w3.org/2000/svg","title");e.isNEU(I)||(M.innerHTML=I);var N=document.createElementNS("http://www.w3.org/2000/svg","circle");N.setAttribute("cx",0),N.setAttribute("cy",0),N.setAttribute("r",r.nodeCircleMenuButton.radius),N.setAttribute("fill",k),N.setAttribute("stroke-width","1"),N.setAttribute("stroke",r.nodeCircleMenuButton.stroke),A.appendChild(N),A.appendChild(M),A.innerHTML+=S,f.appendChild(A);var C=A.getElementsByTagName("svg")[0];if(C.setAttribute("pointer-events","none"),C){var U=parseInt(C.getAttribute("width")),R=parseInt(C.getAttribute("height"));C.setAttribute("x",-U/2),C.setAttribute("y",-R/2)}var P=_*Math.PI/(g/2);_++;var T=Math.cos(P)*y,E=Math.sin(P)*y;this._buttonsInterval.push(e.animate(A,{transform:[1,0,0,1,0,0]},{transform:[1,0,0,1,T,E]},250,e.anim.outBack,function(F){var O=F[0].getAttribute(e.attr.control_node_circle_menu_name),D=F[0].parentNode.getAttribute(e.attr.control_node_circle_menu_wrraper_id);F[0].addEventListener("mouseenter",function(Y){e.events.publish("mouseenter",[n,{from:D,menuItem:v.menu[O],menuItemName:O,event:Y}])}),F[0].addEventListener("mouseout",function(Y){e.events.publish("mouseout",[n,{from:D,menuItem:v.menu[O],menuItemName:O,event:Y}])})}))}this._linesInterval.push(e.animate(u[0],{x1:-r.nodeCircleMenuButton.radius/2,y1:-6,x2:r.nodeCircleMenuButton.radius/2,y2:-6},{x1:-7,y1:-7,x2:7,y2:7},500,e.anim.inOutSin)),this._linesInterval.push(e.animate(u[1],{x1:-r.nodeCircleMenuButton.radius/2,y1:0,x2:r.nodeCircleMenuButton.radius/2,y2:0},{x1:0,y1:0,x2:0,y2:0},500,e.anim.inOutSin)),this._linesInterval.push(e.animate(u[2],{x1:-r.nodeCircleMenuButton.radius/2,y1:6,x2:r.nodeCircleMenuButton.radius/2,y2:6},{x1:-7,y1:7,x2:7,y2:-7},500,e.anim.inOutSin))}else this.hide()}},e.circleMenuUI.prototype.hide=function(){for(var t=this._buttonsInterval.length-1;t>=0;t--)clearInterval(this._buttonsInterval[t]),this._buttonsInterval.splice(t,1);for(this._buttonsInterval=[],t=this._linesInterval.length-1;t>=0;t--)clearInterval(this._linesInterval[t]),this._linesInterval.splice(t,1);this._linesInterval=[];var i=this.obj.element.querySelector("["+e.attr.control_node_circle_menu_wrraper_id+"]");if(null!=i){var n=i.getAttribute(e.attr.control_node_circle_menu_wrraper_id),o=this.obj.getNode(n),r=e.t(o.templateName,o.min,this.obj.getScale()),a=this.obj.element.querySelector("["+e.attr.control_node_circle_menu_id+'="'+n+'"]').querySelectorAll("line");a[0].setAttribute("x1",-r.nodeCircleMenuButton.radius/2),a[0].setAttribute("x2",r.nodeCircleMenuButton.radius/2),a[0].setAttribute("y1",-6),a[0].setAttribute("y2",-6),a[1].setAttribute("x1",-r.nodeCircleMenuButton.radius/2),a[1].setAttribute("x2",r.nodeCircleMenuButton.radius/2),a[1].setAttribute("y1",0),a[1].setAttribute("y2",0),a[2].setAttribute("x1",-r.nodeCircleMenuButton.radius/2),a[2].setAttribute("x2",r.nodeCircleMenuButton.radius/2),a[2].setAttribute("y1",6),a[2].setAttribute("y2",6),i.parentElement.removeChild(i),i=null}},e.circleMenuUI.prototype.on=function(t,i){return e.events.on(t,i,this._event_id),this},void 0===e&&(e={}),e.idb={version:1,dbName:"BALKAN",tableName:"orgchart-js",keyPath:"id"},e.idb.db=null,e.idb._open=function(t){if(e._browser().msie)t&&t(!1);else if((navigator.userAgent.toLowerCase().indexOf("safari")>0||navigator.userAgent.toLowerCase().indexOf("firefox")>0)&&window.location!==window.parent.location)t&&t(!1);else{if(!window.indexedDB)return console.error("Your browser doesn't support a stable version of IndexedDB."),void(t&&t(!1));if(null==e.idb.db){var i=indexedDB.open(e.idb.dbName,e.idb.version);i.onerror=function(n){console.error("Cannot open database!"),t&&t(!1)},i.onsuccess=function(n){e.idb.db=n.target.result,t&&t(!0)},i.onupgradeneeded=function(n){var o=n.target.result;o.objectStoreNames.contains(e.idb.tableName)&&o.deleteObjectStore(e.idb.tableName),o.createObjectStore(e.idb.tableName,{keyPath:e.idb.keyPath})}}else t&&t(!0)}},e.idb.read=function(t,i){e.idb._open(function(n){if(n){var o=e.idb.db.transaction([e.idb.tableName]).objectStore(e.idb.tableName).get(t);o.onerror=function(r){console.error("Unable to retrieve data from database!"),i&&i(!1)},o.onsuccess=function(r){o.result?i&&i(!0,o.result):i&&i(null)}}else i&&i(!1)})},e.idb.write=function(t,i){e.idb.read(t.id,function(n){if(null==n){var o=e.idb.db.transaction([e.idb.tableName],"readwrite").objectStore(e.idb.tableName).add(t);o.onerror=function(r){console.error("Unable to add data to database!"),i&&i(!1)},o.onsuccess=function(r){i&&i(!0)}}else i&&i(n)})},e.idb.put=function(t,i){e.idb._open(function(n){if(n){var o=e.idb.db.transaction([e.idb.tableName],"readwrite").objectStore(e.idb.tableName).put(t);o.onerror=function(r){console.error("Unable to put data to database!"),i&&i(!1)},o.onsuccess=function(r){i&&i(!0)}}else i&&i(!1)})},e.idb.delete=function(t,i){e.idb._open(function(n){if(n){var o=e.idb.db.transaction([e.idb.tableName],"readwrite").objectStore(e.idb.tableName).delete(t);o.onerror=function(r){console.error("Unable to retrieve data from database!"),i&&i(!1)},o.onsuccess=function(r){o.error?i&&i(!1):i&&i(!0)}}else i&&i(!1)})},e.toolbarUI=function(){},e.toolbarUI.expandAllIcon='<svg style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="4" markerHeight="4" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#757575" /></marker><line x1="11" y1="11" x2="6" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="11" x2="26" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="21" x2="26" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="11" y1="21" x2="6" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><rect x="12" y="12" width="8" height="8" fill="#757575"></rect></svg>',e.toolbarUI.fitIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><circle cx="16" cy="16" r="5" fill="#757575"></circle></svg>',e.toolbarUI.openFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><line x1="5" y1="5" x2="27" y2="27" stroke-width="3" stroke="#757575"></line><line x1="5" y1="27" x2="27" y2="5" stroke-width="3" stroke="#757575"></line></svg>',e.toolbarUI.closeFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><rect x="11" y="11" width="10" height="10" stroke-width="3" fill="none" stroke="#757575" ></rect></svg>',e.toolbarUI.zoomInIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-top: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line><line x1="16" y1="8" x2="16" y2="24" stroke-width="3" stroke="#757575"></line></g><line x1="4" y1="32" x2="28" y2="32" stroke-width="1" stroke="#cacaca"></line></svg>',e.toolbarUI.zoomOutIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); margin-bottom:7px; border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-bottom: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line></g></svg>',e.toolbarUI.layoutIcon="<svg "+e.attr.tlbr+'="layout" style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M8,24 L16,14 L24,24"></path><path stroke-width="3" fill="none" stroke="#757575" d="M8,16 L16,8 L24,16"></path></svg>',e.toolbarUI.prototype.init=function(t,i){if(i){this.obj=t,this.toolbar=i,this._visible=!1,this.div=document.createElement("div"),this.div.classList.add("boc-toolbar-container"),Object.assign(this.div.style,{position:"absolute",padding:"3px",right:this.obj.config.padding-10+"px",bottom:this.obj.config.padding-10+"px"}),i.expandAll&&(this.div.innerHTML+="<div "+e.attr.tlbr+'="expand">'+e.toolbarUI.expandAllIcon+"</div>"),i.fit&&(this.div.innerHTML+="<div "+e.attr.tlbr+'="fit">'+e.toolbarUI.fitIcon+"</div>"),i.zoom&&(this.div.innerHTML+="<div "+e.attr.tlbr+'="plus">'+e.toolbarUI.zoomInIcon+"</div>",this.div.innerHTML+="<div "+e.attr.tlbr+'="minus">'+e.toolbarUI.zoomOutIcon+"</div>"),i.layout&&(this.div.innerHTML+="<div "+e.attr.tlbr+'="layout">'+e.toolbarUI.layoutIcon+"</div>",this.layouts=document.createElement("div"),this.layouts.classList.add("boc-toolbar-layout"),this.layouts.innerHTML="<svg "+e.attr.layout+'="normal" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="35" y2="41" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="35" y2="41" stroke-width="1"></line></svg><svg '+e.attr.layout+'="treeRightOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="35" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="35" x2="35" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="54" y2="54" stroke-width="1"></line></svg><svg '+e.attr.layout+'="treeLeftOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="85" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="85" x2="85" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="54" y2="54" stroke-width="1"></line></svg><svg '+e.attr.layout+'="mixed" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="41" stroke-width="1"></line><line stroke="#000000" x1="60" x2="60" y1="68" y2="73" stroke-width="1"></line></svg><svg '+e.attr.layout+'="tree" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="73" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="86" stroke-width="1"></line><line stroke="#000000" x1="57" x2="63" y1="54" y2="54" stroke-width="1"></line><line stroke="#000000" x1="57" x2="63" y1="86" y2="86" stroke-width="1"></line></svg>',this.obj.element.appendChild(this.layouts)),i.fullScreen&&(this.div.innerHTML+="<div "+e.attr.tlbr+'="fullScreen">'+e.toolbarUI.openFullScreenIcon+"</div>"),this.obj.element.appendChild(this.div),this.layoutBtn=this.div.querySelector("["+e.attr.tlbr+'="layout"]');var n=this.div.querySelector("["+e.attr.tlbr+'="plus"]'),o=this.div.querySelector("["+e.attr.tlbr+'="minus"]'),r=this.div.querySelector("["+e.attr.tlbr+'="fit"]'),a=this.div.querySelector("["+e.attr.tlbr+'="fullScreen"]'),s=this.div.querySelector("["+e.attr.tlbr+'="expand"]'),c=this;n&&n.addEventListener("click",function(){c.obj.zoom(!0,null,!0)}),o&&o.addEventListener("click",function(){c.obj.zoom(!1,null,!0)}),r&&r.addEventListener("click",function(){c.obj.fit()}),a&&a.addEventListener("click",function(){c.obj.toggleFullScreen()}),s&&s.addEventListener("click",function(){c.obj.expand(null,"all")}),this.layoutBtn&&this.layoutBtn.addEventListener("click",function(){c._visible?c.hideLayout():c.showLayout()}),this.layouts&&this.layouts.addEventListener("click",function(l){for(var p=l.target;p;){if(p.hasAttribute&&p.hasAttribute(e.attr.layout)){p=p.getAttribute(e.attr.layout),c.obj.setLayout(e[p]);break}p=p.parentNode}})}},e.toolbarUI.prototype.showLayout=function(){this._visible=!0,this.layoutBtn.style.transform="rotate(180deg) translateX(0px) translateY(0px)",e.animate(this.div,{bottom:this.obj.config.padding-10},{bottom:this.obj.config.padding+135},this.obj.config.anim.duration,this.obj.config.anim.func),e.animate(this.layouts,{bottom:-145},{bottom:0},this.obj.config.anim.duration,this.obj.config.anim.func)},e.toolbarUI.prototype.hideLayout=function(){this._visible=!1,this.layoutBtn.style.transform="rotate(0deg) translateX(0px) translateY(0px)",e.animate(this.div,{bottom:this.obj.config.padding+135},{bottom:this.obj.config.padding-10},this.obj.config.anim.duration,this.obj.config.anim.func),e.animate(this.layouts,{bottom:0},{bottom:-145},this.obj.config.anim.duration,this.obj.config.anim.func)},e.notifierUI=function(){},e.notifierUI.prototype.init=function(t){this.obj=t},e.notifierUI.prototype.show=function(t,i){if(null==t)return!1;1==t&&(t=e.MAX_NODES_MESS,i="#FFCA28"),2==t&&(t=e.OFFLINE_MESS,i="#FFCA28");var n=document.createElement("div");n.innerHTML=t,Object.assign(n.style,{position:"absolute","background-color":i,color:"#ffffff",padding:"15px","border-radius":"40px",opacity:0,overflow:"hidden","white-space":"nowrap","text-align":"center"}),this.obj.element.appendChild(n);var o=this.obj.width()/2-n.offsetWidth/2,r=this.obj.height()/2-n.offsetHeight/2;n.style.left=o+"px",n.style.top=r+"px";var a=n.offsetWidth;return n.style.width="20px",e.animate(n,{opacity:0,width:10},{opacity:1,width:a},this.obj.config.anim.duration,this.obj.config.anim.func),!0},void 0===e&&(e={}),e.icon={},e.icon.png=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M146.747,276.708c0-13.998-9.711-22.352-26.887-22.352c-6.99,0-11.726,0.675-14.204,1.355v44.927 c2.932,0.676,6.539,0.896,11.52,0.896C135.449,301.546,146.747,292.28,146.747,276.708z"/><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M234.344,335.86v45.831h-31.601V229.524h40.184 l31.611,55.759c9.025,16.031,18.064,34.983,24.825,52.154h0.675c-2.257-20.103-2.933-40.643-2.933-63.44v-44.473h31.614v152.167 h-36.117l-32.516-58.703c-9.049-16.253-18.971-35.892-26.438-53.727l-0.665,0.222C233.906,289.58,234.344,311.027,234.344,335.86z M71.556,381.691V231.56c10.613-1.804,25.516-3.159,46.506-3.159c21.215,0,36.353,4.061,46.509,12.192 c9.698,7.673,16.255,20.313,16.255,35.219c0,14.897-4.959,27.549-13.999,36.123c-11.738,11.063-29.123,16.031-49.441,16.031 c-4.522,0-8.593-0.231-11.736-0.675v54.411H71.556V381.691z M453.601,523.353H97.2V419.302h356.4V523.353z M485.652,374.688 c-10.61,3.607-30.713,8.585-50.805,8.585c-27.759,0-47.872-7.003-61.857-20.545c-13.995-13.1-21.684-32.97-21.452-55.318 c0.222-50.569,37.03-79.463,86.917-79.463c19.644,0,34.783,3.829,42.219,7.446l-7.214,27.543c-8.369-3.617-18.752-6.55-35.458-6.55 c-28.656,0-50.341,16.256-50.341,49.22c0,31.382,19.649,49.892,47.872,49.892c7.895,0,14.218-0.901,16.934-2.257v-31.835h-23.493 v-26.869h56.679V374.688z"/></svg>'},e.icon.pdf=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M160.381,282.225c0-14.832-10.299-23.684-28.474-23.684c-7.414,0-12.437,0.715-15.071,1.432V307.6 c3.114,0.707,6.942,0.949,12.192,0.949C148.419,308.549,160.381,298.74,160.381,282.225z"/><path fill="'+n+'" d="M272.875,259.019c-8.145,0-13.397,0.717-16.519,1.435v105.523c3.116,0.729,8.142,0.729,12.69,0.729 c33.017,0.231,54.554-17.946,54.554-56.474C323.842,276.719,304.215,259.019,272.875,259.019z"/><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M362.359,309.023c0,30.876-11.243,52.165-26.82,65.333 c-16.971,14.117-42.82,20.814-74.396,20.814c-18.9,0-32.297-1.197-41.401-2.389V234.365c13.399-2.149,30.878-3.346,49.304-3.346 c30.612,0,50.478,5.508,66.039,17.226C351.828,260.69,362.359,280.547,362.359,309.023z M80.7,393.499V234.365 c11.241-1.904,27.042-3.346,49.296-3.346c22.491,0,38.527,4.308,49.291,12.928c10.292,8.131,17.215,21.534,17.215,37.328 c0,15.799-5.25,29.198-14.829,38.285c-12.442,11.728-30.865,16.996-52.407,16.996c-4.778,0-9.1-0.243-12.435-0.723v57.67H80.7 V393.499z M453.601,523.353H97.2V419.302h356.4V523.353z M484.898,262.127h-61.989v36.851h57.913v29.674h-57.913v64.848h-36.593 V232.216h98.582V262.127z"/></svg>'},e.icon.svg=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M338.871,225.672L284.545,386.96h-42.591 l-51.69-161.288h39.967l19.617,68.196c5.508,19.143,10.531,37.567,14.36,57.67h0.717c4.061-19.385,9.089-38.527,14.592-56.953 l20.585-68.918h38.77V225.672z M68.458,379.54l7.415-30.153c9.811,5.021,24.888,10.051,40.439,10.051 c16.751,0,25.607-6.935,25.607-17.465c0-10.052-7.662-15.795-27.05-22.734c-26.8-9.328-44.263-24.168-44.263-47.611 c0-27.524,22.971-48.579,61.014-48.579c18.188,0,31.591,3.823,41.159,8.131l-8.126,29.437c-6.465-3.116-17.945-7.657-33.745-7.657 c-15.791,0-23.454,7.183-23.454,15.552c0,10.296,9.089,14.842,29.917,22.731c28.468,10.536,41.871,25.365,41.871,48.094 c0,27.042-20.812,50.013-65.09,50.013C95.731,389.349,77.538,384.571,68.458,379.54z M453.601,523.353H97.2V419.302h356.4V523.353z M488.911,379.54c-11.243,3.823-32.537,9.103-53.831,9.103c-29.437,0-50.73-7.426-65.57-21.779 c-14.839-13.875-22.971-34.942-22.738-58.625c0.253-53.604,39.255-84.235,92.137-84.235c20.81,0,36.852,4.073,44.74,7.896 l-7.657,29.202c-8.859-3.829-19.849-6.95-37.567-6.95c-30.396,0-53.357,17.233-53.357,52.173c0,33.265,20.81,52.882,50.73,52.882 c8.375,0,15.072-0.96,17.94-2.395v-33.745h-24.875v-28.471h60.049V379.54L488.911,379.54z" /></svg>'},e.icon.csv=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 548.29 548.291" ><path fill="'+n+'" d="M486.2,196.121h-13.164V132.59c0-0.399-0.064-0.795-0.116-1.2c-0.021-2.52-0.824-5-2.551-6.96L364.656,3.677 c-0.031-0.034-0.064-0.044-0.085-0.075c-0.629-0.707-1.364-1.292-2.141-1.796c-0.231-0.157-0.462-0.286-0.704-0.419 c-0.672-0.365-1.386-0.672-2.121-0.893c-0.199-0.052-0.377-0.134-0.576-0.188C358.229,0.118,357.4,0,356.562,0H96.757 C84.893,0,75.256,9.649,75.256,21.502v174.613H62.093c-16.972,0-30.733,13.756-30.733,30.73v159.81 c0,16.966,13.761,30.736,30.733,30.736h13.163V526.79c0,11.854,9.637,21.501,21.501,21.501h354.777 c11.853,0,21.502-9.647,21.502-21.501V417.392H486.2c16.966,0,30.729-13.764,30.729-30.731v-159.81 C516.93,209.872,503.166,196.121,486.2,196.121z M96.757,21.502h249.053v110.006c0,5.94,4.818,10.751,10.751,10.751h94.973v53.861 H96.757V21.502z M258.618,313.18c-26.68-9.291-44.063-24.053-44.063-47.389c0-27.404,22.861-48.368,60.733-48.368 c18.107,0,31.447,3.811,40.968,8.107l-8.09,29.3c-6.43-3.107-17.862-7.632-33.59-7.632c-15.717,0-23.339,7.149-23.339,15.485 c0,10.247,9.047,14.769,29.78,22.632c28.341,10.479,41.681,25.239,41.681,47.874c0,26.909-20.721,49.786-64.792,49.786 c-18.338,0-36.449-4.776-45.497-9.77l7.38-30.016c9.772,5.014,24.775,10.006,40.264,10.006c16.671,0,25.488-6.908,25.488-17.396 C285.536,325.789,277.909,320.078,258.618,313.18z M69.474,302.692c0-54.781,39.074-85.269,87.654-85.269 c18.822,0,33.113,3.811,39.549,7.149l-7.392,28.816c-7.38-3.084-17.632-5.939-30.491-5.939c-28.822,0-51.206,17.375-51.206,53.099 c0,32.158,19.051,52.4,51.456,52.4c10.947,0,23.097-2.378,30.241-5.238l5.483,28.346c-6.672,3.34-21.674,6.919-41.208,6.919 C98.06,382.976,69.474,348.424,69.474,302.692z M451.534,520.962H96.757v-103.57h354.777V520.962z M427.518,380.583h-42.399 l-51.45-160.536h39.787l19.526,67.894c5.479,19.046,10.479,37.386,14.299,57.397h0.709c4.048-19.298,9.045-38.352,14.526-56.693 l20.487-68.598h38.599L427.518,380.583z" /></svg>'},e.icon.json=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 32 32" ><polygon fill="'+n+'"  points="31 11 31 21 29 21 27 15 27 21 25 21 25 11 27 11 29 17 29 11 31 11"/><path fill="'+n+'"  d="M21.3335,21h-2.667A1.6684,1.6684,0,0,1,17,19.3335v-6.667A1.6684,1.6684,0,0,1,18.6665,11h2.667A1.6684,1.6684,0,0,1,23,12.6665v6.667A1.6684,1.6684,0,0,1,21.3335,21ZM19,19h2V13H19Z"/><path fill="'+n+'"  d="M13.3335,21H9V19h4V17H11a2.002,2.002,0,0,1-2-2V12.6665A1.6684,1.6684,0,0,1,10.6665,11H15v2H11v2h2a2.002,2.002,0,0,1,2,2v2.3335A1.6684,1.6684,0,0,1,13.3335,21Z"/><path fill="'+n+'"  d="M5.3335,21H2.6665A1.6684,1.6684,0,0,1,1,19.3335V17H3v2H5V11H7v8.3335A1.6684,1.6684,0,0,1,5.3335,21Z"/><rect fill="'+n+'"  id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" style="fill: none;" width="32" height="32"/></svg>'},e.icon.excel=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 512 512"><path fill="#ECEFF1" d="M496,432.011H272c-8.832,0-16-7.168-16-16s0-311.168,0-320s7.168-16,16-16h224 c8.832,0,16,7.168,16,16v320C512,424.843,504.832,432.011,496,432.011z" /><path fill="'+n+'" d="M336,176.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,176.011,336,176.011z" /><path fill="'+n+'" d="M336,240.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,240.011,336,240.011z" /><path fill="'+n+'" d="M336,304.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,304.011,336,304.011z" /><path fill="'+n+'" d="M336,368.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,368.011,336,368.011z" /><path fill="'+n+'" d="M432,176.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,176.011,432,176.011z" /><path fill="'+n+'" d="M432,240.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,240.011,432,240.011z" /><path fill="'+n+'" d="M432,304.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,304.011,432,304.011z" /><path fill="'+n+'" d="M432,368.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,368.011,432,368.011z" /><path fill="'+n+'"  d="M282.208,19.691c-3.648-3.04-8.544-4.352-13.152-3.392l-256,48C5.472,65.707,0,72.299,0,80.011v352 c0,7.68,5.472,14.304,13.056,15.712l256,48c0.96,0.192,1.952,0.288,2.944,0.288c3.712,0,7.328-1.28,10.208-3.68 c3.68-3.04,5.792-7.584,5.792-12.32v-448C288,27.243,285.888,22.731,282.208,19.691z" /><path fill="#FAFAFA" d="M220.032,309.483l-50.592-57.824l51.168-65.792c5.44-6.976,4.16-17.024-2.784-22.464 c-6.944-5.44-16.992-4.16-22.464,2.784l-47.392,60.928l-39.936-45.632c-5.856-6.72-15.968-7.328-22.56-1.504 c-6.656,5.824-7.328,15.936-1.504,22.56l44,50.304L83.36,310.187c-5.44,6.976-4.16,17.024,2.784,22.464 c2.944,2.272,6.432,3.36,9.856,3.36c4.768,0,9.472-2.112,12.64-6.176l40.8-52.48l46.528,53.152 c3.168,3.648,7.584,5.504,12.032,5.504c3.744,0,7.488-1.312,10.528-3.968C225.184,326.219,225.856,316.107,220.032,309.483z" /></svg>'},e.icon.edit=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 528.899 528.899"><path fill="'+n+'" d="M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981 c-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611 C532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069 L27.473,390.597L0.3,512.69z" /></svg>'},e.icon.details=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M447.933,103.629c-0.034-3.076-1.224-6.09-3.485-8.352L352.683,3.511c-0.004-0.004-0.007-0.005-0.011-0.008 C350.505,1.338,347.511,0,344.206,0H89.278C75.361,0,64.04,11.32,64.04,25.237v461.525c0,13.916,11.32,25.237,25.237,25.237 h333.444c13.916,0,25.237-11.32,25.237-25.237V103.753C447.96,103.709,447.937,103.672,447.933,103.629z M356.194,40.931 l50.834,50.834h-49.572c-0.695,0-1.262-0.567-1.262-1.262V40.931z M423.983,486.763c0,0.695-0.566,1.261-1.261,1.261H89.278 c-0.695,0-1.261-0.566-1.261-1.261V25.237c0-0.695,0.566-1.261,1.261-1.261h242.94v66.527c0,13.916,11.322,25.239,25.239,25.239 h66.527V486.763z"/><path fill="'+n+'" d="M362.088,164.014H149.912c-6.62,0-11.988,5.367-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,169.381,368.707,164.014,362.088,164.014z"/><path fill="'+n+'" d="M362.088,236.353H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,241.721,368.707,236.353,362.088,236.353z"/><path fill="'+n+'" d="M362.088,308.691H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.367,11.988-11.988C374.076,314.06,368.707,308.691,362.088,308.691z"/><path fill="'+n+'" d="M256,381.031H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988H256 c6.62,0,11.988-5.367,11.988-11.988C267.988,386.398,262.62,381.031,256,381.031z"/></svg>'},e.icon.remove=function(t,i,n){return'<svg width="'+t+'" height="'+i+'"  viewBox="0 0 900.5 900.5"><path fill="'+n+'" d="M176.415,880.5c0,11.046,8.954,20,20,20h507.67c11.046,0,20-8.954,20-20V232.487h-547.67V880.5L176.415,880.5z M562.75,342.766h75v436.029h-75V342.766z M412.75,342.766h75v436.029h-75V342.766z M262.75,342.766h75v436.029h-75V342.766z"/><path fill="'+n+'" d="M618.825,91.911V20c0-11.046-8.954-20-20-20h-297.15c-11.046,0-20,8.954-20,20v71.911v12.5v12.5H141.874 c-11.046,0-20,8.954-20,20v50.576c0,11.045,8.954,20,20,20h34.541h547.67h34.541c11.046,0,20-8.955,20-20v-50.576 c0-11.046-8.954-20-20-20H618.825v-12.5V91.911z M543.825,112.799h-187.15v-8.389v-12.5V75h187.15v16.911v12.5V112.799z"/></svg>'},e.icon.add=function(t,i,n){return'<svg width="'+t+'" height="'+i+'"   viewBox="0 0 922 922"><path fill="'+n+'" d="M922,453V81c0-11.046-8.954-20-20-20H410c-11.045,0-20,8.954-20,20v149h318c24.812,0,45,20.187,45,45v198h149 C913.046,473.001,922,464.046,922,453z" /><path fill="'+n+'" d="M557,667.001h151c11.046,0,20-8.954,20-20v-174v-198c0-11.046-8.954-20-20-20H390H216c-11.045,0-20,8.954-20,20v149h194 h122c24.812,0,45,20.187,45,45v4V667.001z" /><path fill="'+n+'" d="M0,469v372c0,11.046,8.955,20,20,20h492c11.046,0,20-8.954,20-20V692v-12.501V667V473v-4c0-11.046-8.954-20-20-20H390H196 h-12.5H171H20C8.955,449,0,457.955,0,469z" /></svg>'},e.icon.search=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 485.213 485.213"><path fill="'+n+'" d="M471.882,407.567L360.567,296.243c-16.586,25.795-38.536,47.734-64.331,64.321l111.324,111.324 c17.772,17.768,46.587,17.768,64.321,0C489.654,454.149,489.654,425.334,471.882,407.567z" /><path fill="'+n+'" d="M363.909,181.955C363.909,81.473,282.44,0,181.956,0C81.474,0,0.001,81.473,0.001,181.955s81.473,181.951,181.955,181.951 C282.44,363.906,363.909,282.437,363.909,181.955z M181.956,318.416c-75.252,0-136.465-61.208-136.465-136.46 c0-75.252,61.213-136.465,136.465-136.465c75.25,0,136.468,61.213,136.468,136.465 C318.424,257.208,257.206,318.416,181.956,318.416z" /><path fill="'+n+'" d="M75.817,181.955h30.322c0-41.803,34.014-75.814,75.816-75.814V75.816C123.438,75.816,75.817,123.437,75.817,181.955z" /></svg>'},e.icon.xml=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'"  d="M488.426,197.019H475.2v-63.816c0-0.401-0.063-0.799-0.116-1.205c-0.021-2.534-0.827-5.023-2.562-6.992L366.325,3.691 c-0.032-0.031-0.063-0.042-0.085-0.073c-0.633-0.707-1.371-1.298-2.151-1.804c-0.231-0.158-0.464-0.287-0.706-0.422 c-0.676-0.366-1.393-0.675-2.131-0.896c-0.2-0.053-0.38-0.135-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.87v160.542 c0,17.044,13.824,30.876,30.873,30.876h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87V227.89C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.51c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M369.531,374.53h-32.058l-2.156-55.519 c-0.644-17.434-1.298-38.518-1.298-59.611h-0.633c-4.514,18.516-10.547,39.166-16.137,56.162l-17.645,56.601h-25.618 l-15.494-56.157c-4.725-16.996-9.671-37.658-13.123-56.6h-0.43c-0.854,19.585-1.508,41.961-2.586,60.038l-2.576,55.086h-30.343 l9.26-145.035h43.677l14.207,48.421c4.517,16.774,9.041,34.847,12.258,51.843h0.654c4.081-16.77,9.038-35.923,13.774-52.064 l15.493-48.199h42.82L369.531,374.53z M69.992,374.53l41.955-73.385l-40.444-71.65h37.655l12.688,26.465 c4.316,8.828,7.533,15.928,10.99,24.092h0.422c3.438-9.242,6.23-15.694,9.893-24.092l12.274-26.465h37.434l-40.89,70.796 l43.044,74.239h-37.866l-13.134-26.257c-5.376-10.108-8.817-17.639-12.909-26.04h-0.433c-3.009,8.401-6.674,15.932-11.19,26.04 l-12.042,26.257H69.992z M453.601,523.353H97.2V419.302h356.4V523.353z M485.325,374.53h-90.608V229.495h32.933v117.497h57.682 v27.538H485.325z"/></svg>'},e.icon.link=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 512.092 512.092"  ><path fill="'+n+'" d="M312.453,199.601c-6.066-6.102-12.792-11.511-20.053-16.128c-19.232-12.315-41.59-18.859-64.427-18.859 c-31.697-0.059-62.106,12.535-84.48,34.987L34.949,308.23c-22.336,22.379-34.89,52.7-34.91,84.318 c-0.042,65.98,53.41,119.501,119.39,119.543c31.648,0.11,62.029-12.424,84.395-34.816l89.6-89.6 c1.628-1.614,2.537-3.816,2.524-6.108c-0.027-4.713-3.87-8.511-8.583-8.484h-3.413c-18.72,0.066-37.273-3.529-54.613-10.581 c-3.195-1.315-6.867-0.573-9.301,1.877l-64.427,64.512c-20.006,20.006-52.442,20.006-72.448,0 c-20.006-20.006-20.006-52.442,0-72.448l108.971-108.885c19.99-19.965,52.373-19.965,72.363,0 c13.472,12.679,34.486,12.679,47.957,0c5.796-5.801,9.31-13.495,9.899-21.675C322.976,216.108,319.371,206.535,312.453,199.601z" /><path fill="'+n+'" d="M477.061,34.993c-46.657-46.657-122.303-46.657-168.96,0l-89.515,89.429c-2.458,2.47-3.167,6.185-1.792,9.387 c1.359,3.211,4.535,5.272,8.021,5.205h3.157c18.698-0.034,37.221,3.589,54.528,10.667c3.195,1.315,6.867,0.573,9.301-1.877 l64.256-64.171c20.006-20.006,52.442-20.006,72.448,0c20.006,20.006,20.006,52.442,0,72.448l-80.043,79.957l-0.683,0.768 l-27.989,27.819c-19.99,19.965-52.373,19.965-72.363,0c-13.472-12.679-34.486-12.679-47.957,0 c-5.833,5.845-9.35,13.606-9.899,21.845c-0.624,9.775,2.981,19.348,9.899,26.283c9.877,9.919,21.433,18.008,34.133,23.893 c1.792,0.853,3.584,1.536,5.376,2.304c1.792,0.768,3.669,1.365,5.461,2.048c1.792,0.683,3.669,1.28,5.461,1.792l5.035,1.365 c3.413,0.853,6.827,1.536,10.325,2.133c4.214,0.626,8.458,1.025,12.715,1.195h5.973h0.512l5.12-0.597 c1.877-0.085,3.84-0.512,6.059-0.512h2.901l5.888-0.853l2.731-0.512l4.949-1.024h0.939c20.961-5.265,40.101-16.118,55.381-31.403 l108.629-108.629C523.718,157.296,523.718,81.65,477.061,34.993z" /></svg>'},e.icon.happy=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+n+'" d="M176,176c17.673,0,32,14.327,32,32h32c0-35.346-28.654-64-64-64c-35.346,0-64,28.654-64,64h32 C144,190.327,158.327,176,176,176z"/><path fill="'+n+'" d="M336,144c-35.346,0-64,28.654-64,64h32c0-17.673,14.327-32,32-32c17.673,0,32,14.327,32,32h32 C400,172.654,371.346,144,336,144z"/><path fill="'+n+'" d="M256,368c-53.019,0-96-42.981-96-96h-32c0,70.692,57.308,128,128,128s128-57.308,128-128h-32 C352,325.019,309.019,368,256,368z"/></svg>'},e.icon.sad=function(t,i,n){return'<svg width="'+t+'" height="'+i+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+n+'" d="M336,192c-17.673,0-32-14.327-32-32h-32c0,35.346,28.654,64,64,64c35.346,0,64-28.654,64-64h-32 C368,177.673,353.673,192,336,192z"/><path fill="'+n+'" d="M176,224c35.346,0,64-28.654,64-64h-32c0,17.673-14.327,32-32,32s-32-14.327-32-32h-32C112,195.346,140.654,224,176,224z "/><path fill="'+n+'" d="M256,256c-70.692,0-128,57.308-128,128h32c0-53.019,42.981-96,96-96s96,42.981,96,96h32C384,313.308,326.692,256,256,256 z"/></svg>'},e.icon.share=function(t,i,n,o,r){return null==o&&(o=0),null==r&&(r=0),`<svg width="${t}" height="${i}" x="${o}" y="${r}" viewBox="0 0 512 512">\n                <path fill="${n}" d="M406,332c-29.641,0-55.761,14.581-72.167,36.755L191.99,296.124c2.355-8.027,4.01-16.346,4.01-25.124\n                    c0-11.906-2.441-23.225-6.658-33.636l148.445-89.328C354.307,167.424,378.589,180,406,180c49.629,0,90-40.371,90-90\n                    c0-49.629-40.371-90-90-90c-49.629,0-90,40.371-90,90c0,11.437,2.355,22.286,6.262,32.358l-148.887,89.59\n                    C156.869,193.136,132.937,181,106,181c-49.629,0-90,40.371-90,90c0,49.629,40.371,90,90,90c30.13,0,56.691-15.009,73.035-37.806\n                    l141.376,72.395C317.807,403.995,316,412.75,316,422c0,49.629,40.371,90,90,90c49.629,0,90-40.371,90-90\n                    C496,372.371,455.629,332,406,332z"/>\n                </svg>`},e.icon.user=function(t,i,n,o,r){return e.isNEU(o)&&(o=0),e.isNEU(r)&&(r=0),`<svg width="${t}" height="${i}" x="${o}" y="${r}" viewBox="0 0 24 24">\n                <path fill="${n}" d="M12 11.796C14.7189 11.796 16.9231 9.60308 16.9231 6.89801C16.9231 4.19294 14.7189 2.00005 12 2.00005C9.28106 2.00005 7.07692 4.19294 7.07692 6.89801C7.07692 9.60308 9.28106 11.796 12 11.796Z" fill="#030D45"/>\n                <path fill="${n}" d="M14.5641 13.8369H9.4359C6.46154 13.8369 4 16.2859 4 19.245C4 19.9593 4.30769 20.5716 4.92308 20.8777C5.84615 21.3879 7.89744 22.0001 12 22.0001C16.1026 22.0001 18.1538 21.3879 19.0769 20.8777C19.5897 20.5716 20 19.9593 20 19.245C20 16.1838 17.5385 13.8369 14.5641 13.8369Z" fill="#030D45"/>\n            </svg>`},e.icon.close=function(t,i,n,o,r){return null==o&&(o=0),null==r&&(r=0),`<svg width="${t}" height="${i}" x="${o}" y="${r}" viewBox="0 0 512 512">\n    <path fill="${n}" d="m256 0c-141.49 0-256 114.5-256 256 0 141.49 114.5 256 256 256 141.49 0 256-114.5 256-256 0-141.49-114.5-256-256-256zm-12.284 317.397-58.121 58.132c-6.565 6.553-15.283 10.166-24.557 10.166-19.196 0-34.734-15.526-34.734-34.734 0-9.274 3.612-17.992 10.166-24.557l58.132-58.121c6.785-6.784 6.785-17.783 0-24.568l-58.132-58.121c-6.553-6.565-10.166-15.283-10.166-24.557 0-19.196 15.526-34.734 34.734-34.734 9.274 0 17.992 3.613 24.557 10.166l58.121 58.132c6.785 6.773 17.784 6.773 24.568 0l58.121-58.132c6.565-6.553 15.283-10.166 24.557-10.166 19.196 0 34.734 15.526 34.734 34.734 0 9.274-3.612 17.992-10.166 24.557l-58.132 58.121c-6.785 6.784-6.785 17.783 0 24.568l58.132 58.121c6.553 6.565 10.166 15.283 10.166 24.557 0 19.196-15.526 34.734-34.734 34.734-9.274 0-17.992-3.613-24.557-10.166l-58.121-58.132c-6.784-6.784-17.784-6.773-24.568 0z"/>\n    </svg>`},e.icon.undo=function(t,i,n,o,r){return null==o&&(o=0),null==r&&(r=0),`<svg width="${t}" height="${i}" x="${o}" y="${r}" viewBox="0 0 24 24">\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="${n}" d="M3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.7141 22 12C22 7.28598 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447ZM9.25871 7.97395C9.56308 7.693 9.58205 7.21851 9.3011 6.91414C9.02015 6.60978 8.54565 6.5908 8.24129 6.87175L5.99129 8.94867C5.83748 9.09065 5.75 9.29045 5.75 9.49977C5.75 9.7091 5.83748 9.9089 5.99129 10.0509L8.24129 12.1278C8.54565 12.4088 9.02015 12.3898 9.3011 12.0854C9.58205 11.781 9.56308 11.3065 9.25871 11.0256L8.41824 10.2498H14.0385C14.7376 10.2498 15.2069 10.2506 15.5652 10.2862C15.9116 10.3205 16.0724 10.3813 16.1787 10.4501C16.3272 10.5461 16.4537 10.6726 16.5497 10.8211C16.6184 10.9274 16.6793 11.0882 16.7136 11.4345C16.7491 11.7929 16.75 12.2622 16.75 12.9613C16.75 13.6604 16.7491 14.1298 16.7136 14.4881C16.6793 14.8344 16.6185 14.9952 16.5497 15.1015C16.4537 15.2501 16.3272 15.3765 16.1787 15.4726C16.0724 15.5413 15.9116 15.6021 15.5652 15.6365C15.2069 15.672 14.7376 15.6729 14.0385 15.6729H9.5C9.08579 15.6729 8.75 16.0086 8.75 16.4229C8.75 16.8371 9.08579 17.1729 9.5 17.1729H14.0758C14.7279 17.1729 15.2721 17.1729 15.7133 17.1291C16.1748 17.0834 16.6038 16.9839 16.9931 16.7322C17.3199 16.5209 17.5981 16.2427 17.8094 15.916C18.0611 15.5266 18.1605 15.0976 18.2063 14.6361C18.25 14.195 18.25 13.6508 18.25 12.9987V12.924C18.25 12.2718 18.25 11.7276 18.2063 11.2865C18.1605 10.825 18.0611 10.396 17.8093 10.0067C17.5981 9.6799 17.3199 9.40169 16.9931 9.19042C16.6038 8.9387 16.1748 8.83927 15.7133 8.7935C15.2721 8.74975 14.7279 8.74976 14.0758 8.74977L8.41824 8.74977L9.25871 7.97395Z" />\n    <rect style="opacity: 0" x="2" y="2" width="20" height="20"></rect>\n    </svg>`},e.icon.redo=function(t,i,n,o,r){return null==o&&(o=0),null==r&&(r=0),`<svg width="${t}" height="${i}" x="${o}" y="${r}" viewBox="0 0 24 24" >\n    <path fill="#f9f9f9" fill-rule="evenodd" clip-rule="evenodd" fill="${n}" d="M3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.7141 22 12C22 7.28598 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447ZM15.7587 6.87273C15.4543 6.59177 14.9799 6.61075 14.6989 6.91512C14.4179 7.21948 14.4369 7.69398 14.7413 7.97493L15.5818 8.75075H9.96155C7.63558 8.75075 5.75 10.6363 5.75 12.9623C5.75 15.2883 7.63557 17.1738 9.96154 17.1738H14.5C14.9142 17.1738 15.25 16.838 15.25 16.4238C15.25 16.0096 14.9142 15.6738 14.5 15.6738H9.96154C8.464 15.6738 7.25 14.4598 7.25 12.9623C7.25 11.4647 8.464 10.2508 9.96155 10.2508H15.5818L14.7413 11.0266C14.4369 11.3075 14.4179 11.782 14.6989 12.0864C14.9799 12.3908 15.4543 12.4097 15.7587 12.1288L18.0087 10.0519C18.1625 9.90987 18.25 9.71007 18.25 9.50075C18.25 9.29143 18.1625 9.09163 18.0087 8.94965L15.7587 6.87273Z"/>\n    <rect style="opacity: 0" x="2" y="2" width="20" height="20"></rect>    \n    </svg>`},e.prototype.exportPDFProfile=function(t,i){t=this._defaultExportProfileOptions(t,"pdf"),this._exportProfile(t,i)},e.prototype.exportPDFPreview=function(t){e.pdfPrevUI.show(this,t)},e.prototype.exportPNGProfile=function(t,i){t=this._defaultExportProfileOptions(t,"png"),this._exportProfile(t,i)},e.prototype.shareProfile=function(t){var i;"object"==typeof t?t=(i=t).focusId:i=this.editUI.content(t,!0,!0,"100%",!0);var n=new URL(window.location.href);n.searchParams.append("nodeId",t);var o={title:i.title,text:i.shareText,url:n.href};try{navigator.share(o)}catch(r){console.error("error: "+r)}},e.prototype.exportPDF=function(t,i){t=this._defaultExportOptions(t,"pdf"),this._export(t,i)},e.prototype.exportPNG=function(t,i){t=this._defaultExportOptions(t,"png"),this._export(t,i)},e.prototype.exportSVG=function(t,i){t=this._defaultExportOptions(t,"svg"),this._export(t,i)},e.prototype._defaultExportOptions=function(t,i){return null==t&&(t={}),"svg"==i?(t.ext="svg",t.mime="image/svg+xml"):"pdf"==i?(t.mime="application/pdf",t.ext="pdf"):"png"==i&&(t.mime="image/png",t.ext="png"),null==t.margin&&(t.margin=[50,40,50,40]),null==t.padding&&(t.padding=0),null==t.landscape&&(t.landscape=!1),null==t.filename&&(t.filename="OrgChart."+t.ext),null==t.scale&&(t.scale="fit"),null==t.format&&(t.format="fit"),null==t.header&&(t.header=""),"pdf"==i&&null==t.footer?t.footer="Page {current-page} of {total-pages}":null==t.footer&&(t.footer=""),null==t.openInNewTab&&(t.openInNewTab=!1),null==t.mode&&(t.mode="boc-"+this.config.mode),t},e.prototype._export=function(t,i){var n=this,o={id:t.nodeId,expandChildren:t.expandChildren,min:t.min};t.margin&&t.margin[0]<2&&(t.margin[0]=2),t.margin&&t.margin[1]<2&&(t.margin[1]=2),t.margin&&t.margin[2]<2&&(t.margin[2]=2),t.margin&&t.margin[3]<2&&(t.margin[3]=2),this._draw(!1,e.action.exporting,o,function(r){var a=document.createElement("div");if(a.innerHTML=r,t.padding>0){var s=a.querySelector("svg"),c=e._getViewBox(s);c[0]-=t.padding,c[1]-=t.padding,c[2]+=2*t.padding,c[3]+=2*t.padding,s.setAttribute("viewBox",c.join()),s.setAttribute("width",c[2]),s.setAttribute("height",c[3])}if("svg"==t.ext)if(i)i(t,a.innerHTML);else{(s=a.querySelector("svg")).classList.add("boc-"+n.config.mode);var l={content:a.innerHTML,options:t,styles:""},p=e.events.publish("exportstart",[n,l]),d=n.element.querySelector("[data-boc-styles]");if(d&&(l.styles+=d.outerHTML),l.styles&&(a.childNodes[0].insertAdjacentHTML("afterbegin",l.styles),l.content=a.innerHTML),!1===p||!1===(p=e.events.publish("exportend",[n,l])))return!1;e._downloadFile(t.mime,l.content,l.options.filename,l.options.openInNewTab,l.options.ext)}else n._pages(t,a.querySelector("svg"),function(h){var u={content:a.innerHTML,options:t,pages:h,styles:""},f=e.events.publish("exportstart",[n,u]),v=n.element.querySelector("[data-boc-styles]");if(v&&(u.styles+=v.outerHTML),!1===f)return!1;i||e.loading.show(n),i?i(n,u,a.querySelector("svg")):(u=JSON.stringify(u),e._ajax(n.config.exportUrl+"/v3","POST",u,"arraybuffer",function(x){var _=e.events.publish("exportend",[n,x]);if(e.loading.hide(n),!1===_)return!1;e._downloadFile(t.mime,x,t.filename,t.openInNewTab,t.ext)}))})})},e.prototype.exportCSV=function(t){var i=e._defaultExportProfileOptionsForCSV_SVG_JSON(t,"csv"),n=this.getNode(i.nodeId),o=null;n?e._exportIterateForJSON_XML_CSV(this,n,i,o=[]):!1===i.min||!1===i.expandChildren?e._exportIterateForJSON_XML_CSV(this,this.roots,i,o):o=JSON.parse(JSON.stringify(this.config.nodes));var r={ext:"csv",filename:t,options:i,nodes:o};if(!1===e.events.publish("exportstart",[this,r]))return!1;var a=e._json2csv(r.nodes),s={ext:r.ext,filename:r.filename,options:i,nodes:r.nodes,content:a};if(!1===e.events.publish("exportend",[this,s]))return!1;e._downloadFile("text/csv;charset=utf-8;","\ufeff"+s.content,s.options.filename,s.options.openInNewTab,s.ext)},e.prototype.exportXML=function(t){var i=e._defaultExportProfileOptionsForCSV_SVG_JSON(t,"xml"),n=this.getNode(i.nodeId),o=null;n?e._exportIterateForJSON_XML_CSV(this,n,i,o=[]):!1===i.min||!1===i.expandChildren?e._exportIterateForJSON_XML_CSV(this,this.roots,i,o):o=JSON.parse(JSON.stringify(this.config.nodes));var r={ext:"xml",filename:t,options:i,nodes:o};if(!1===e.events.publish("exportstart",[this,r]))return!1;var a=e._json2xml(r.nodes),s={ext:r.ext,filename:r.filename,options:i,nodes:r.nodes,content:a};if(!1===e.events.publish("exportend",[this,s]))return!1;e._downloadFile("application/xml",s.content,s.options.filename,s.options.openInNewTab,s.ext)},e.prototype.exportJSON=function(t){var i=e._defaultExportProfileOptionsForCSV_SVG_JSON(t,"json"),n=this.getNode(i.nodeId),o=null;n?e._exportIterateForJSON_XML_CSV(this,n,i,o=[]):!1===i.min||!1===i.expandChildren?e._exportIterateForJSON_XML_CSV(this,this.roots,i,o):o=JSON.parse(JSON.stringify(this.config.nodes));var r={ext:"json",filename:i.filename,options:i,nodes:o};if(!1===e.events.publish("exportstart",[this,r]))return!1;var a={ext:r.ext,filename:r.filename,options:i,nodes:r.nodes,content:JSON.stringify(r.nodes)};if(!1===e.events.publish("exportend",[this,a]))return!1;e._downloadFile("application/json",a.content,a.options.filename,a.options.openInNewTab,a.ext)},e._exportIterateForJSON_XML_CSV=function(t,i,n,o){if(Array.isArray(i))for(var r=0;r<i.length;r++)e._exportIterateForJSON_XML_CSV(t,i[r],n,o);else{var a=t.get(i.id);if(o.push(a),n.min)for(r=0;r<i.stChildrenIds.length;r++)e._exportIterateForJSON_XML_CSV(t,t.getNode(i.stChildrenIds[r]),n,o);else for(r=0;r<i.stChildren.length;r++)e._exportIterateForJSON_XML_CSV(t,i.stChildren[r],n,o);if(n.expandChildren)for(r=0;r<i.childrenIds.length;r++)e._exportIterateForJSON_XML_CSV(t,t.getNode(i.childrenIds[r]),n,o);else for(r=0;r<i.children.length;r++)e._exportIterateForJSON_XML_CSV(t,i.children[r],n,o)}},e.prototype._pages=function(t,i,n){"A5"==t.format&&"fit"!=t.scale||"A4"==t.format&&"fit"!=t.scale||"A3"==t.format&&"fit"!=t.scale||"A2"==t.format&&"fit"!=t.scale||"A1"==t.format&&"fit"!=t.scale||"Letter"==t.format&&"fit"!=t.scale||"Legal"==t.format&&"fit"!=t.scale?n(this._pagesA100(t,i,t.scale)):"A5"==t.format&&"fit"==t.scale||"A4"==t.format&&"fit"==t.scale||"A3"==t.format&&"fit"==t.scale||"A2"==t.format&&"fit"==t.scale||"A1"==t.format&&"fit"==t.scale||"Letter"==t.format&&"fit"==t.scale||"Legal"==t.format&&"fit"==t.scale?n(this._pagesAfit(t,i)):"fit"==t.format&&n(this._pagesFit(t,i))},e.prototype._pagesFit=function(t,i){var n=i.getAttribute("width"),o=i.getAttribute("height"),r=e._getViewBox(i),a={w:parseFloat(n),h:parseFloat(o)};return[{vb:r,size:{w:a.w+(t.margin[1]+t.margin[3]),h:a.h+(t.margin[0]+t.margin[2])},innerSize:a}]},e.prototype._pagesAfit=function(t,i){var n=i.getAttribute("width"),o=0,r=0;switch(t.format){case"A5":o=e.A5w,r=e.A5h;break;case"A4":o=e.A4w,r=e.A4h;break;case"A3":o=e.A3w,r=e.A3h;break;case"A2":o=e.A2w,r=e.A2h;break;case"A1":o=e.A1w,r=e.A1h;break;case"Letter":o=e.Letterw,r=e.Letterh;break;case"Legal":o=e.Legalw,r=e.Legalh}return this._pagesA100(t,i,(t.landscape?r-(t.margin[1]+t.margin[3]):o-(t.margin[1]+t.margin[3]))/n*100)},e.prototype._pagesA100=function(t,i,n){var o=e._getViewBox(i),r=0,a=0;switch(t.format){case"A5":r=e.A5w,a=e.A5h;break;case"A4":r=e.A4w,a=e.A4h;break;case"A3":r=e.A3w,a=e.A3h;break;case"A2":r=e.A2w,a=e.A2h;break;case"A1":r=e.A1w,a=e.A1h;break;case"Letter":r=e.Letterw,a=e.Letterh;break;case"Legal":r=e.Legalw,a=e.Legalh}var s=o[0],c=o[1],l=o[2],p=o[3],d={w:t.landscape?a-(t.margin[1]+t.margin[3]):r-(t.margin[1]+t.margin[3]),h:t.landscape?r-(t.margin[0]+t.margin[2]):a-(t.margin[0]+t.margin[2])},h={w:t.landscape?a:r,h:t.landscape?r:a};i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.setAttribute("width",d.w),i.setAttribute("height",d.h);for(var u=d.w*(100/n),f=d.h*(100/n),v=s,x=c,_=[];v<l+s;){for(;x<p+c;){var g=[v,x,u,f];g=g.join(),_.push({vb:g,innerSize:d,size:h}),x+=f}v+=u,x=c}return _},e.prototype._defaultExportProfileOptions=function(t,i){return(e.isNEU(t)||e.isNEU(t.id))&&console.error("options.id is not defilned"),"svg"==i?(t.ext="svg",t.mime="image/svg+xml"):"pdf"==i?(t.mime="application/pdf",t.ext="pdf"):"png"==i&&(t.mime="image/png",t.ext="png"),null==t.margin&&(t.margin=[50,40,50,40]),null==t.padding&&(t.padding=0),null==t.landscape&&(t.landscape=!1),null==t.filename&&(t.filename="Profile."+t.ext),null==t.scale&&(t.scale="fit"),null==t.format&&(t.format="A4"),null==t.header&&(t.header=""),null==t.footer&&(t.footer=""),null==t.openInNewTab&&(t.openInNewTab=!1),null==t.mode&&(t.mode="boc-"+this.config.mode),t},e._defaultExportProfileOptionsForCSV_SVG_JSON=function(t,i){return e.isNEU(t)&&(t={}),"string"==typeof t&&(t={filename:t}),e.isNEU(t.filename)&&(t.filename=`OrgChart.${i}`),e.isNEU(t.expandChildren)&&(t.expandChildren=!0),e.isNEU(t.min)&&(t.min=!0),e.isNEU(t.openInNewTab)&&(t.openInNewTab=!1),t},e.prototype._exportProfile=function(t,i){var n=this,o=0,r=0;switch(t.format){case"A5":o=e.A5w,r=e.A5h;break;case"A4":o=e.A4w,r=e.A4h;break;case"A3":o=e.A3w,r=e.A3h;break;case"A2":o=e.A2w,r=e.A2h;break;case"A1":o=e.A1w,r=e.A1h;break;case"Letter":o=e.Letterw,r=e.Letterh;break;case"Legal":o=e.Legalw,r=e.Legalh}var a={w:t.landscape?r-(t.margin[1]+t.margin[3]):o-(t.margin[1]+t.margin[3]),h:t.landscape?o-(t.margin[0]+t.margin[2]):r-(t.margin[0]+t.margin[2])},s={w:t.landscape?r:o,h:t.landscape?o:r},c=this.editUI.content(t.id,!0,!0,"100%",!0).element;e.input.init(c);var l={content:c.outerHTML,options:t,pages:[{vb:"",innerSize:a,size:s}],styles:""};if(!i){if(!1===e.events.publish("exportstart",[n,l]))return!1;e.loading.show(n)}var p=this.element.querySelector("[data-boc-styles]");p&&(l.styles+=p.outerHTML);var d=this.getSvg().querySelector("defs");if(d)for(var h=0;h<d.children.length;h++)"style"==d.children[h].nodeName.toLowerCase()&&(l.styles+=d.children[h].outerHTML);l=JSON.stringify(l),e._ajax(this.config.exportUrl+"/v3","POST",l,"arraybuffer",function(u){if(i)i(n,u);else{var f=e.events.publish("exportend",[n,u]);if(e.loading.hide(n),!1===f)return!1;e._downloadFile(t.mime,u,t.filename,t.openInNewTab,t.ext)}})},void 0===e&&(e={}),e.events=(t={},{on:function(i,n,o){Array.isArray(t[i])||(t[i]=[]),t[i].push({listener:n,event_id:o})},removeAll:function(i){Array.isArray(t[i])||(t[i]=[]),t[i]=[]},remove:function(i,n,o){var r=!1;if(t[i]&&Array.isArray(t[i])&&t[i].length>0)for(var a=t[i].length-1;a>=0;a--)(!e.isNEU(o)&&!e.isNEU(n)&&t[i][a].event_id==o&&t[i][a].listener==n||!e.isNEU(o)&&e.isNEU(n)&&t[i][a].event_id==o||e.isNEU(o)&&!e.isNEU(n)&&t[i][a].listener==n||e.isNEU(o)&&e.isNEU(n))&&(t[i].splice(a,1),r=!0);return r},has:function(i,n){if(t[i]&&Array.isArray(t[i])&&t[i].length>0){if(e.isNEU(n))return!0;for(var o=0;o<t[i].length;o++)if(t[i][o].event_id==n)return!0}return!1},removeForEventId:function(i){for(var n in t)if(Array.isArray(t[n]))for(var o=t[n].length-1;o>=0;o--)t[n][o].event_id==i&&t[n].splice(o,1)},publish:function(i,n){if(t[i]){for(var o=[],r=0;r<t[i].length;r++){var a=t[i][r];null!=a.event_id&&a.event_id!=n[0]._event_id||o.push(a.listener)}if(o.length>0){var s=!0;for(r=0;r<o.length&&(1==n.length?s=o[r](n[0])&&s:2==n.length?s=o[r](n[0],n[1])&&s:3==n.length?s=o[r](n[0],n[1],n[2])&&s:4==n.length?s=o[r](n[0],n[1],n[2],n[3])&&s:5==n.length&&(s=o[r](n[0],n[1],n[2],n[3],n[4])&&s),!1!==s);r++);return s}}}}),e.prototype.importCSV=function(){var t=this,i=document.createElement("INPUT");i.setAttribute("type","file"),i.setAttribute("accept",".csv"),i.style.display="none",i.onchange=function(n){var o=n.target,r=new FileReader;r.onload=function(){var s=e._csvToArray(r.result),c=[];e._importSetColumnNames(s[0],function(p){for(var d=1;d<s.length;d++){for(var h={},u=0;u<s[d].length;u++){var f=p[u];h[f]=e._convertStringToArray(f,s[d][u])}""!=h.id.trim()&&c.push(h)}var x={nodes:c,columnNames:s[0]};0!=e.events.publish("import",[t,x])&&(t._putInUndoStack(),t.clearRedo(),t.config.nodes=x.nodes,e.events.publish("updated",[t]),t.filterUI.update(),t.draw())})},r.readAsText(o.files[0])},i.click()},e._importSetColumnNames=function(t,i){if(-1==t.indexOf("id")||-1==t.indexOf("pid")){var n=document.createElement("DIV"),o=document.createElement("P");o.style.padding="5px",o.style.color="rgb(122, 122, 122)",o.innerHTML=e.IMPORT_MESSAGE,n.appendChild(o);var r=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div"),c=document.createElement("span");r.setAttribute("id","boc-sampleDialog"),r.style.height="260px",r.style.width="400px",r.style.background="white",r.style.border="0.5px solid grey",r.style.position="fixed",r.style.overflow="hidden",r.style.zIndex="99",a.setAttribute("id","title"),a.style.backgroundColor="#e5e5e5",a.style.fontWeight="bold",a.style.color="rgb(122, 122, 122)",a.style.height="20px",a.style.padding="3px 0 0 7px",c.setAttribute("id","close"),c.style.cursor="pointer",c.style.position="absolute",c.style.color="rgb(122, 122, 122)",c.style.fontWeight="bold",c.style.top="2px",c.style.zIndex=100,s.setAttribute("id","content"),s.style.padding="2px",a.innerHTML="Import Organizational Chart Data",c.innerHTML="&times;";var l=document.createElement("HR");l.style.height="0.1px",l.style.backgroundColor="#aeaeae",l.style.border="none",l.style.margin="0",r.appendChild(a),r.appendChild(l),s.appendChild(n),r.appendChild(s),r.appendChild(c),document.body.appendChild(r),e._importCenter(r),c.style.left=r.offsetWidth-20+"px";var p=document.createElement("div");p.setAttribute("id","overlay"),p.style.width="100%",p.style.height="100%",p.style.left=0,p.style.top=0,p.style.position="fixed",p.style.background="grey",p.style.opacity="0.5",p.style.zIndex=98,document.body.appendChild(p),r._overlay=p;var d=document.createElement("LABEL"),h=document.createTextNode("Name:");d.setAttribute("for","boc-id-select"),d.appendChild(h),d.style.fontSize="16px",d.style.color="rgb(122, 122, 122)",d.style.padding="5px",d.style.margin="5px",d.style.width="30%",d.style.textAlign="right",d.style.display="inline-block",n.appendChild(d);var u=document.createElement("SELECT");u.id="boc-id-select",u.style.fontSize="16px",u.style.color="rgb(122, 122, 122)",u.style.padding="5px",u.style.margin="5px",u.style.width="60%",u.style.border="1px solid #aeaeae",n.appendChild(u);var f=document.createElement("BR");n.appendChild(f);for(var v=0;v<t.length;v++){(b=document.createElement("option")).setAttribute("value",t[v]);var x=document.createTextNode(t[v]);b.appendChild(x),u.appendChild(b)}var _=document.createElement("LABEL"),g=document.createTextNode("Reports to:");_.setAttribute("for","pid-select"),_.appendChild(g),_.style.fontSize="16px",_.style.color="rgb(122, 122, 122)",_.style.padding="5px",_.style.margin="5px",_.style.width="30%",_.style.textAlign="right",_.style.display="inline-block",n.appendChild(_);var y=document.createElement("SELECT");for(y.id="pid-select",y.style.fontSize="16px",y.style.color="rgb(122, 122, 122)",y.style.padding="5px",y.style.margin="5px",y.style.width="60%",y.style.border="1px solid #aeaeae",n.appendChild(y),v=0;v<t.length;v++){var b;(b=document.createElement("option")).setAttribute("value",t[v]),x=document.createTextNode(t[v]),b.appendChild(x),y.appendChild(b)}var m=document.createElement("BUTTON");m.innerHTML="Import",m.style.fontSize="16px",m.style.color="rgb(122, 122, 122)",m.style.padding="5px 20px",m.style.margin="20px auto",m.style.display="block",m.onclick=function(){r.style.display="none",r._overlay&&r._overlay.parentNode.removeChild(r._overlay);var k=t.indexOf(u.options[u.selectedIndex].value);t[k]="id";var A=t.indexOf(y.options[y.selectedIndex].value);t[A]="pid",i(t)};var w=document.createElement("DIV");return w.appendChild(m),n.appendChild(w),c.onclick=function(S){r._overlay&&r._overlay.parentNode.removeChild(r._overlay),r.parentNode.removeChild(r),S.stopPropagation()},a.onmousedown=function(S){S=S||window.event,r._dragging=!0,r._originalLeft=r.offsetLeft,r._originalTop=r.offsetTop,r._mouseLeft=S.clientX,r._mouseTop=S.clientY},document.onmousemove=function(S){S=S||window.event,r._dragging&&(r.style.left=r._originalLeft+S.clientX-r._mouseLeft+"px",r.style.top=r._originalTop+S.clientY-r._mouseTop+"px")},document.onmouseup=function(S){S=S||window.event,r._dragging&&(r.style.left=r._originalLeft+S.clientX-r._mouseLeft+"px",r.style.top=r._originalTop+S.clientY-r._mouseTop+"px",r._dragging=!1)},r}i(t)},e._importCenter=function(t){t&&(t.style.left=(window.innerWidth-t.offsetWidth)/2+"px",t.style.top=(window.innerHeight-t.offsetHeight)/2+"px")},e.prototype.importXML=function(){var t=this,i=document.createElement("INPUT");i.setAttribute("type","file"),i.setAttribute("accept",".xml"),i.style.display="none",i.onchange=function(n){var o=n.target,r=new FileReader;r.onload=function(){var s=e._xml2json(r.result);0!=e.events.publish("import",[t,s])&&(t._putInUndoStack(),t.clearRedo(),t.config.nodes=s,e.events.publish("updated",[t]),t.filterUI.update(),t.draw())},r.readAsText(o.files[0])},i.click()},e.prototype.importJSON=function(){var t=this,i=document.createElement("INPUT");i.setAttribute("type","file"),i.setAttribute("accept",".json"),i.style.display="none",i.onchange=function(n){var o=n.target,r=new FileReader;r.onload=function(){var s=JSON.parse(r.result);0!=e.events.publish("import",[t,s])&&(t._putInUndoStack(),t.clearRedo(),t.config.nodes=s,e.events.publish("updated",[t]),t.filterUI.update(),t.draw())},r.readAsText(o.files[0])},i.click()},e.prototype.expand=function(t,i,n){this._draw(!1,e.action.expand,{id:t,ids:i},n)},e.prototype.collapse=function(t,i,n){this._draw(!1,e.action.collapse,{id:t,ids:i},n)},e.prototype.expandCollapse=function(t,i,n,o){Array.isArray(i)||(i=[]),Array.isArray(n)||(n=[]);var r={id:t,expandIds:i,collapseIds:n,ids:i.concat(n)};this._draw(!1,e.action.collapse,r,o)},e.prototype.changeRoots=function(t,i,n){this.config.roots=i,this._draw(!1,e.action.update,{id:t,changeRoots:i},n)},e.prototype.maximize=function(t,i,n,o){var r=this,a={id:t,options:{}};e.isNEU(a.id)&&(a.id=this.roots[0].id,a.all=!0),a.options.horizontal=!1,a.options.vertical=!1,i&&(a.options.horizontal=i),n&&(a.options.vertical=n),this._draw(!1,e.action.maximize,a,function(){r.ripple(t),o&&o()})},e.prototype.minimize=function(t,i){var n=this,o={id:t};e.isNEU(o.id)&&(o.id=this.roots[0].id,o.all=!0),this._draw(!1,e.action.minimize,o,function(){n.ripple(t),i&&i()})},e.prototype._expCollHandler=function(t){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var i=this.getNode(t),n=this.getCollapsedIds(i);if(n.length){if(!1===e.events.publish("expcollclick",[this,!1,t,n]))return!1;this.expand(t,n,!1)}else{if(!1===e.events.publish("expcollclick",[this,!0,t,i.childrenIds]))return!1;this.collapse(t,i.childrenIds,!1)}},e.prototype._upHandler=function(t){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var i=this._upHandlerCreateArgs(t);if(!1===e.events.publish("up-click",[this,i]))return!1;this.changeRoots(i.id,i.roots,!1)},e.prototype._upHandlerCreateArgs=function(t){var i,n=this.getNode(t),o=Object.assign([],this.config.roots),r=this.getNode(n.pid);if(r&&(i=r),i){if(Array.isArray(o)){var a=o.indexOf(n.id);-1!=a&&o.splice(a,1)}else o=[];o.push(i.id)}return{id:n.id,roots:o}},String.prototype.replaceAll||(String.prototype.replaceAll=function(t,i){return this.replace(new RegExp(t,"g"),i)}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)}),String.prototype.splice||(String.prototype.splice=function(t,i,n){return this.slice(0,t)+n+this.slice(t+Math.abs(i))}),String.prototype.insert||(String.prototype.insert=function(t,i){return t>0?this.substring(0,t)+i+this.substr(t):i+this}),Array.prototype.unique||Object.defineProperty(Array.prototype,"unique",{value:function(){for(var t=this.concat(),i=0;i<t.length;++i)for(var n=i+1;n<t.length;++n)t[i]===t[n]&&t.splice(n--,1);return t},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.has||Object.defineProperty(Array.prototype,"has",{value:function(t){for(var i=0;i<this.length;i++)if(this[i]==t)return!0;return!1},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.compare||Object.defineProperty(Array.prototype,"compare",{value:function(t){if(this.length!=t.length)return!1;for(var i=0;i<this.length;i++)if(!t.has(this[i]))return!1;return!0},writable:!0,configurable:!0,enumerable:!1}),Object.assign||Object.defineProperty(Object,"assign",{value:function(t,i){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1;o<arguments.length;o++){var r=arguments[o];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),e.prototype._globalMouseDownHandler=function(t,i){var n={move:"mousemove",up:"mouseup",leave:"mouseleave"};if(-1!=i.type.indexOf("touch")&&(this._touch=1==i.touches.length?{x:i.touches[0].clientX,y:i.touches[0].clientY}:null,n={move:"touchmove",up:"touchend",touchstart:"touchstart"}),t==i.target)return i.stopPropagation(),i.preventDefault(),void this._mouseDownHandler(t,i,n);if(this.config.nodeMouseClick==e.action.pan){for(var o=i.target;o!=t&&!o.hasAttribute(e.attr.control_expcoll_id)&&!o.hasAttribute(e.attr.control_up_id);)o=o.parentNode;if(!o.hasAttribute(e.attr.control_expcoll_id)&&!o.hasAttribute(e.attr.control_up_id))return i.stopPropagation(),i.preventDefault(),void this._mouseDownHandler(t,i,n)}for(var r=i.target;r!=t;){if(r.hasAttribute(e.attr.node_id))return void this._nodeMouseDownHandler(r,i,n);if(r.hasAttribute(e.attr.control_node_circle_menu_name))return i.stopPropagation(),i.preventDefault(),void this._nodeCircleNodeMenuItemMouseDownHandler(r,i,n);r=r.parentNode}},e.prototype._globalClickHandler=function(t,i){if(-1!=i.type.indexOf("touch")&&this._touch&&1==i.changedTouches.length){if(i.changedTouches.length){var n={x:i.changedTouches[0].clientX,y:i.changedTouches[0].clientY},o=e.t(this.config.template,!1,this.getScale()).size,r=this.getScale(),a=Math.abs(n.x-this._touch.x)/r,s=Math.abs(n.y-this._touch.y)/r;if(this._touch=null,a>o[0]/10||s>o[1]/10)return}}else if(-1!=i.type.indexOf("touch")&&null==this._touch)return;for(var c=i.target;c!=t;){if(c.hasAttribute(e.attr.control_expcoll_id)){var l=c.getAttribute(e.attr.control_expcoll_id),p=this.getNode(l);return void this._expCollHandler(p.id)}if(c.hasAttribute(e.attr.node_id))return l=c.getAttribute(e.attr.node_id),p=this.getNode(l),void this._nodeClickHandler(p.id,i);if(c.hasAttribute(e.attr.control_node_menu_id))return i.stopPropagation(),i.preventDefault(),l=c.getAttribute(e.attr.control_node_menu_id),p=this.getNode(l),void this._nodeMenuClickHandler(p.id,c,i);if(c.hasAttribute(e.attr.control_node_circle_menu_id))return i.stopPropagation(),i.preventDefault(),l=c.getAttribute(e.attr.control_node_circle_menu_id),void this._nodeCircleMenuClickHandler(l);if(c.hasAttribute(e.attr.control_node_circle_menu_name))return i.stopPropagation(),i.preventDefault(),void this._nodeCircleMenuItemClickHandler(c,i);if(c.hasAttribute(e.attr.control_add))return void this._lonelyButtonHandler();if(c.hasAttribute(e.attr.control_up_id))return l=c.getAttribute(e.attr.control_up_id),i.stopPropagation(),i.preventDefault(),void this._upHandler(l);if(c.hasAttribute(e.attr.c_link_from))return void e.events.publish("clink-click",[this,{from:c.getAttribute(e.attr.c_link_from),to:c.getAttribute(e.attr.c_link_to),event:i}]);if(c.hasAttribute(e.attr.s_link_from))return void e.events.publish("slink-click",[this,{from:c.getAttribute(e.attr.s_link_from),to:c.getAttribute(e.attr.s_link_to),event:i}]);c=c.parentNode}},e.prototype._globalContextHandler=function(t,i){for(var n=i.target;n!=t;){if(n.hasAttribute(e.attr.node_id)){var o=n.getAttribute(e.attr.node_id),r=this.getNode(o);return void this._nodeContextHandler(r.id,i)}n=n.parentNode}},e.prototype._nodeContextHandler=function(t,i){i.preventDefault(),e.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var n=this.get(t),o=null;if(null!=n&&Array.isArray(n.tags))for(var r=0;r<n.tags.length;r++){var a=n.tags[r];this.config.tags[a]&&this.config.tags[a].nodeContextMenu&&(o=this.config.tags[a].nodeContextMenu)}var s=this.element.getBoundingClientRect();this.nodeContextMenuUI.show(i.clientX-s.left,i.clientY-s.top,t,null,o)},e.prototype._globalDbClickHandler=function(t,i){for(var n=i.target;n!=t;){if(n.hasAttribute(e.attr.node_id)){var o=n.getAttribute(e.attr.node_id),r=this.getNode(o);return void this._nodeDbClickHandler(r.id,i)}n=n.parentNode}},e.prototype._mouseScrollHandler=function(t,i){this.__mouseScrollHandler(this.getSvg(),i)},e.prototype.__mouseScrollHandler=function(t,i){if(i.ctrlKey){if(this.config.mouseScrool==e.action.zoom)return}else if(this.config.mouseScrool==e.action.ctrlZoom||this.config.mouseScrool!=e.action.zoom)return;var n=this,o=!1,r=this.config.zoom.speed,a=this.config.zoom.smooth,s=0,c=this.getScale(),l=e._centerPointInPercent(t,i.pageX,i.pageY),p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(h){setTimeout(h,20)};i.preventDefault();var d=i.delta||i.wheelDelta;void 0===d&&(d=-i.detail),d=Math.max(-1,Math.min(1,d)),s+=-d*r,o||function h(){o=!0;var u=(s-c)/a;u>0?u++:u--,c+=u,n.zoom(1-u/12/50,l),parseInt(c)==parseInt(s)?o=!1:p(h)}()},e.prototype._nodeCircleNodeMenuItemMouseDownHandler=function(t,i,n){var o=t.parentNode.getAttribute(e.attr.control_node_circle_menu_wrraper_id),r=t.getAttribute(e.attr.control_node_circle_menu_name),a=this.nodeCircleMenuUI._menu[r];if(a.draggable){var s=this,c=e._getClientXY(i),l=this.getNode(o);t._dragEventFired=!1;var p=s.getScale(),d=null,h=null;this._gragStartedId=o,document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var u=this.getSvg(),f={x:c.x,y:c.y},v=t.cloneNode(!0);u.insertBefore(v,u.firstChild);var x=e._getTransform(v),_=x[4],g=x[5],y=function(S){for(;S&&!S.hasAttribute(e.attr.control_node_circle_menu_wrraper_id);)S=S.parentNode;if(S){var k=e._getTransform(S);return{x:k[4],y:k[5]}}console.error("cannot find parent"+e.attr.control_node_circle_menu_wrraper_id)}(t);v.setAttribute("transform","matrix(1,0,0,1,"+(_+y.x)+","+(g+y.y)+")"),v.style.opacity=.7;var b=function(S,k){if(null!=S){k.classList.remove("boc-drag-over");for(var I=e.getStParentNodes(s.getNode(d)),A=0;A<I.length;A++){var M=s.getNodeElement(I[A].id);M&&(M.style.opacity=1)}}},m=function(S){if(f){var k=e._getClientXY(S),I=S.target;e.isMobile()&&(I=document.elementFromPoint(k.x,k.y)),k.x+=y.x*p,k.y+=y.y*p;var A=e._getOffsetXY(s.element,S),M={left:s.width()-(A.x+s.config.padding)<0,right:A.x-s.config.padding<0,up:s.height()-(A.y+s.config.padding)<0,down:A.y-s.config.padding<0};if(M.left||M.right||M.up||M.down){u.classList&&(u.classList.remove("boc-cursor-grab"),u.classList.add("boc-cursor-move"),u.classList.remove("boc-cursor-nodrop"),u.classList.remove("boc-cursor-copy"));var N=x[4],C=x[5],U=f.x,R=f.y,P=k.x,T=k.y;s.moveStart(M,function(B){x[4]=N+B.x,x[5]=C+B.y,f.x=U-B.xWithoutScale,f.y=R-B.yWithoutScale,k.x=P-B.xWithoutScale,k.y=T-B.yWithoutScale,v.setAttribute("transform","matrix("+x.toString()+")")})}else{for(s.moveEnd(),u.classList&&(u.classList.add("boc-cursor-grab"),u.classList.remove("boc-cursor-move"),u.classList.remove("boc-cursor-nodrop"),u.classList.remove("boc-cursor-copy")),b(d,h),d=null,h=null;null!=I&&I!=u;){if(I.hasAttribute&&I.hasAttribute(e.attr.node_id)){var E=I.getAttribute(e.attr.node_id);d=E,h=I;break}I=I.parentNode}if(null!=d){h.classList.add("boc-drag-over");for(var F=s.getNode(d),O=e.getStParentNodes(F),D=0;D<O.length;D++){var Y=s.getNodeElement(O[D].id);Y&&(Y.style.opacity=.1)}u.classList.remove("boc-cursor-grab"),u.classList.remove("boc-cursor-move"),u.classList.add("boc-cursor-copy"),u.classList.remove("boc-cursor-nodrop")}var L=(k.y-f.y)/p;x[4]=_+(k.x-f.x)/p,x[5]=g+L,!t._dragEventFired&&(Math.abs(k.x-f.x)>e.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(k.y-f.y)>e.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(!1===e.events.publish("drag",[s.nodeCircleMenuUI,{from:E,menuItem:a,menuItemName:r}])&&w(),t._dragEventFired=!0),v.setAttribute("transform","matrix("+x.toString()+")")}}},w=function(S){if(s.moveEnd(),u.classList&&(u.classList.remove("boc-cursor-grab"),u.classList.remove("boc-cursor-move"),u.classList.remove("boc-cursor-nodrop"),u.classList.remove("boc-cursor-copy")),u.removeEventListener(n.move,m),u.removeEventListener(n.up,w),n.leave&&u.removeEventListener(n.leave,w),l.id==d||null==d)return u.removeChild(v),s._gragStartedId=null,void(t._dragEventFired&&e.events.publish("drop",[s.nodeCircleMenuUI,{from:l.id,menuItemName:r,menuItem:a,event:S}]));var k=s.getNode(d);e.events.publish("drop",[s.nodeCircleMenuUI,{from:l.id,to:k.id,menuItem:a,menuItemName:r,event:S}]),b(d,h),u.removeChild(v),s._gragStartedId=null};u.addEventListener(n.move,m),u.addEventListener(n.up,w),n.leave&&u.addEventListener(n.leave,w)}},e.prototype._nodeMouseDownHandler=function(t,i,n){this.config.draggable?this._draggableHandler(t,i,n):this.config.enableDragDrop&&this._dragDropHandler(t,i,n)},e.prototype._draggableHandler=function(t,i,n){var o=this,r=t.getAttribute(e.attr.node_id);if(this.roots)for(var a=0;a<this.roots.length;a++)if(this.roots[a].id==r)return;var s=[],c=function(P,T){if(Array.isArray(P))for(var E=0;E<P.length;E++)c(P[E],T);else{for(T.push(P.id),E=0;E<P.stChildren.length;E++)c(P.stChildren[E],T);for(E=0;E<P.children.length;E++)c(P.children[E],T)}};c(this.getNode(r),s);for(var l=this.getSvg(),p=e._getClientXY(i),d=[],h=[],u=[],f=[],v=[],x=[],_=[],g=[],y=0;y<s.length;y++){var b=this.getNode(s[y]);d.push(b),u.push({x:b.x,y:b.y});var m=this.getNodeElement(s[y]);v.push(m);var w=e._getTransform(m);f.push({x:w[4],y:w[5]}),h.push(w);var S=this.element.querySelector(`[data-ctrl-ec-id="${s[y]}"]`);if(S){x.push(S);var k=e._getTransform(S);_.push(k),g.push({x:k[4],y:k[5]})}else x.push(null),_.push(null),g.push(null);if(this.config.draggable==e.draggable.node)break}t._dragEventFired=!1;var I=null,A=null;this._gragStartedId=s[0],document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var M={x:p.x,y:p.y},N=o.getScale(),C=function(P,T){if(null!=P){T.classList.remove("boc-drag-over");for(var E=o.getNode(I),F=e.getStParentNodes(E),O=0;O<F.length;O++){var D=o.getNodeElement(F[O].id);D&&(D.style.opacity=1)}}},U=function(P){if(M){var T=e._getClientXY(P),E=P.target;e.isMobile()&&(E=document.elementFromPoint(T.x,T.y));var F=e._getOffsetXY(o.element,P),O={left:o.width()-(F.x+o.config.padding)<0,right:F.x-o.config.padding<0,up:o.height()-(F.y+o.config.padding)<0,down:F.y-o.config.padding<0};if(O.left||O.right||O.up||O.down){l.classList&&(l.classList.remove("boc-cursor-grab"),l.classList.add("boc-cursor-move"),l.classList.remove("boc-cursor-nodrop"),l.classList.remove("boc-cursor-copy"));for(var D=[],Y=[],Q=[],L=[],B=0;B<h.length;B++)D.push(h[B][4]),Y.push(h[B][5]),_[B]?(Q.push(_[B][4]),L.push(_[B][5])):(Q.push(null),L.push(null));var H=M.x,$=M.y,V=T.x,me=T.y;o.moveStart(O,function(j){for(var X=0;X<h.length;X++){var ie=D[X],re=Y[X],de=Q[X],ve=L[X];h[X][4]=ie+j.x,h[X][5]=re+j.y,M.x=H-j.xWithoutScale,M.y=$-j.yWithoutScale,T.x=V-j.xWithoutScale,T.y=me-j.yWithoutScale,d[X].x=ie+j.x,d[X].y=re+j.y,d[X].movex=j.x,d[X].movey=j.y,_[X]&&(_[X][4]=de+j.x,_[X][5]=ve+j.y);for(var ae=e.ui.link(d[X],o,N,o.response.bordersByRootIdAndLevel,o.nodes,e.action.update,!0),G=0;G<ae.length;G++){var K=ae[G];(ce=o.element.querySelector(`[data-l-id="[${K.id}][${K.childId}]"]`))&&(ce.innerHTML=K.html)}if(d[X].parent)for(ae=e.ui.link(d[X].parent,o,N,o.response.bordersByRootIdAndLevel,o.nodes,e.action.update,!0),G=0;G<ae.length;G++){var ce;(ce=o.element.querySelector(`[data-l-id="[${(K=ae[G]).id}][${K.childId}]"]`))&&(ce.innerHTML=K.html)}v[X].setAttribute("transform","matrix("+h[X].toString()+")"),x[X]&&x[X].setAttribute("transform","matrix("+_[X].toString()+")")}})}else{if(o.moveEnd(),l.classList&&(l.classList.add("boc-cursor-grab"),l.classList.remove("boc-cursor-move"),l.classList.remove("boc-cursor-nodrop"),l.classList.remove("boc-cursor-copy")),C(I,A),I=null,A=null,o.config.enableDragDrop)for(;null!=E&&E!=l;){if(E.hasAttribute&&E.hasAttribute(e.attr.node_id)){var ne=E.getAttribute(e.attr.node_id);if(o._gragStartedId&&ne!=o._gragStartedId){I=ne,A=E;break}}E=E.parentNode}if(null!=I){A.classList.add("boc-drag-over");for(var he=o.getNode(I),Z=e.getStParentNodes(he),z=0;z<Z.length;z++){var le=o.getNodeElement(Z[z].id);le&&(le.style.opacity=.1)}!o.canUpdateLink(d[0].id,I)&&l.classList?(l.classList.remove("boc-cursor-grab"),l.classList.remove("boc-cursor-move"),l.classList.remove("boc-cursor-copy"),l.classList.add("boc-cursor-nodrop")):l.classList&&(l.classList.remove("boc-cursor-grab"),l.classList.remove("boc-cursor-move"),l.classList.add("boc-cursor-copy"),l.classList.remove("boc-cursor-nodrop"))}var ee=(T.x-M.x)/N,te=(T.y-M.y)/N;for(B=0;B<h.length;B++){h[B][4]=f[B].x+ee,h[B][5]=f[B].y+te,_[B]&&(_[B][4]=g[B].x+ee,_[B][5]=g[B].y+te),d[B].x=u[B].x+ee,d[B].y=u[B].y+te,d[B].movex=ee,d[B].movey=te;var se=e.ui.link(d[B],o,N,o.response.bordersByRootIdAndLevel,o.nodes,e.action.update,!0);for(z=0;z<se.length;z++){var oe=se[z];(ue=o.element.querySelector(`[data-l-id="[${oe.id}][${oe.childId}]"]`))&&(ue.innerHTML=oe.html)}if(d[B].parent)for(se=e.ui.link(d[B].parent,o,N,o.response.bordersByRootIdAndLevel,o.nodes,e.action.update,!0),z=0;z<se.length;z++){var ue;(ue=o.element.querySelector(`[data-l-id="[${(oe=se[z]).id}][${oe.childId}]"]`))&&(ue.innerHTML=oe.html)}}if(!t._dragEventFired&&(Math.abs(T.x-M.x)>e.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(T.y-M.y)>e.FIRE_DRAG_NOT_CLICK_IF_MOVE)){if(!1===e.events.publish("drag",[o,r,P,s])&&R(),o.config.enableDragDrop)for(B=0;B<v.length;B++)l.insertBefore(v[B],l.firstChild);t._dragEventFired=!0}for(B=0;B<h.length;B++)v[B].setAttribute("transform","matrix("+h[B].toString()+")"),x[B]&&x[B].setAttribute("transform","matrix("+_[B].toString()+")")}}},R=function(P){for(var T=0;T<d.length;T++)d[T].x=u[T].x,d[T].y=u[T].y;if(o.moveEnd(),l.classList&&(l.classList.remove("boc-cursor-grab"),l.classList.remove("boc-cursor-move"),l.classList.remove("boc-cursor-nodrop"),l.classList.remove("boc-cursor-copy")),l.removeEventListener(n.move,U),l.removeEventListener(n.up,R),n.leave&&l.removeEventListener(n.leave,R),d[0].id!=I&&null!=I){var E=o.getNode(I);if(!1===(F=e.events.publish("drop",[o,d[0].id,E.id,v[0],P])))return C(I,A),void(o._gragStartedId=null);o.canUpdateLink(d[0].id,I)?((O=o.get(d[0].id)).pid=I,O.stpid=null,o.updateNode(O,null,!0)):C(I,A),o._gragStartedId=null}else{if(t._dragEventFired){var F=e.events.publish("drop",[o,d[0].id,void 0,v[0],P]);if(o.config.draggable&&!1!==F){for(T=0;T<d.length;T++){var O;if(O=chart.get(d[T].id)){var D=e._getTransform(v[T]);null!=O.movex?O.movex+=D[4]-d[T].x:O.movex=D[4]-d[T].x,null!=O.movey?O.movey+=D[5]-d[T].y:O.movey=D[5]-d[T].y,chart.update(O)}}chart.draw(e.action.update,{dragNodeIdList:s})}}o._gragStartedId=null}};l.addEventListener(n.move,U),l.addEventListener(n.up,R),n.leave&&l.addEventListener(n.leave,R)},e.prototype._dragDropHandler=function(t,i,n){var o=e._getClientXY(i),r=t.getAttribute(e.attr.node_id),a=this.getNode(r);t._dragEventFired=!1;var s=null,c=null;this._gragStartedId=r,this.element.style.mozUserSelect=this.element.style.webkitUserSelect=this.element.style.userSelect="none";var l=this,p=this.getSvg(),d={x:o.x,y:o.y},h=e._getTransform(t),u=h[4],f=h[5],v=l.getScale(),x=t.cloneNode(!0);x.setAttribute("data-n-id","draging"),p.insertBefore(x,p.firstChild),x.style.opacity=.7;var _=function(b,m){if(null!=b){m.classList.remove("boc-drag-over");for(var w=l.getNode(s),S=e.getStParentNodes(w),k=0;k<S.length;k++){var I=l.getNodeElement(S[k].id);I&&(I.style.opacity=1)}}},g=function(b){if(d){var m=e._getClientXY(b),w=b.target;e.isMobile()&&(w=document.elementFromPoint(m.x,m.y));var S=e._getOffsetXY(l.element,b),k={left:l.width()-(S.x+l.config.padding)<0,right:S.x-l.config.padding<0,up:l.height()-(S.y+l.config.padding)<0,down:S.y-l.config.padding<0};if(k.left||k.right||k.up||k.down){p.classList&&(p.classList.remove("boc-cursor-grab"),p.classList.add("boc-cursor-move"),p.classList.remove("boc-cursor-nodrop"),p.classList.remove("boc-cursor-copy"));var I=h[4],A=h[5],M=d.x,N=d.y,C=m.x,U=m.y;l.moveStart(k,function(Y){h[4]=I+Y.x,h[5]=A+Y.y,d.x=M-Y.xWithoutScale,d.y=N-Y.yWithoutScale,m.x=C-Y.xWithoutScale,m.y=U-Y.yWithoutScale,x.setAttribute("transform","matrix("+h.toString()+")")})}else{if(l.moveEnd(),p.classList&&(p.classList.add("boc-cursor-grab"),p.classList.remove("boc-cursor-move"),p.classList.remove("boc-cursor-nodrop"),p.classList.remove("boc-cursor-copy")),_(s,c),s=null,c=null,l.config.enableDragDrop)for(;null!=w&&w!=p;){if(w.hasAttribute&&w.hasAttribute(e.attr.node_id)){var R=w.getAttribute(e.attr.node_id);if(l._gragStartedId&&R!=l._gragStartedId){s=R,c=w;break}}w=w.parentNode}if("draging"==s&&(s=null,c=null),null!=s){c.classList.add("boc-drag-over");for(var P=l.getNode(s),T=e.getStParentNodes(P),E=0;E<T.length;E++){var F=l.getNodeElement(T[E].id);F&&(F.style.opacity=.1)}!l.canUpdateLink(a.id,s)&&p.classList?(p.classList.remove("boc-cursor-grab"),p.classList.remove("boc-cursor-move"),p.classList.remove("boc-cursor-copy"),p.classList.add("boc-cursor-nodrop")):p.classList&&(p.classList.remove("boc-cursor-grab"),p.classList.remove("boc-cursor-move"),p.classList.add("boc-cursor-copy"),p.classList.remove("boc-cursor-nodrop"))}var D=(m.y-d.y)/v;h[4]=u+(m.x-d.x)/v,h[5]=f+D,!t._dragEventFired&&(Math.abs(m.x-d.x)>e.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(m.y-d.y)>e.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(!1===e.events.publish("drag",[l,R,b])&&y(),t._dragEventFired=!0),x.setAttribute("transform","matrix("+h.toString()+")")}}},y=function(b){if(l.moveEnd(),p.classList&&(p.classList.remove("boc-cursor-grab"),p.classList.remove("boc-cursor-move"),p.classList.remove("boc-cursor-nodrop"),p.classList.remove("boc-cursor-copy")),p.removeEventListener(n.move,g),p.removeEventListener(n.up,y),n.leave&&p.removeEventListener(n.leave,y),a.id==s||null==s)return t._dragEventFired&&e.events.publish("drop",[l,a.id,void 0,x,b]),p.removeChild(x),void(l._gragStartedId=null);var m=l.getNode(s);if(!1===e.events.publish("drop",[l,a.id,m.id,x,b]))return _(s,c),p.removeChild(x),void(l._gragStartedId=null);if(l.canUpdateLink(a.id,s)){var w=l.get(a.id);w.pid=s,w.stpid=null,l.updateNode(w,null,!0)}else p.removeChild(x),_(s,c);l._gragStartedId=null};p.addEventListener(n.move,g),p.addEventListener(n.up,y),n.leave&&p.addEventListener(n.leave,y)},e.prototype._resizeHandler=function(t,i){if(this.isVisible){var n=this.getViewBox(),o=this.getSvg(),r=o.getAttribute("width"),a=o.getAttribute("height"),s=r/n[2],c=a/n[3],l=s>c?c:s;o.setAttribute("width",this.width()),o.setAttribute("height",this.height()),n[2]=this.width()/l,n[3]=this.height()/l,this.setViewBox(n),this.xScrollUI.create(this.width()),this.yScrollUI.create(this.height()),this._draw(!1,e.action.resize)}},e.prototype._nodeDbClickHandler=function(t,i){if(!1===e.events.publish("dbclick",[this,this.get(t)]))return!1;this._commonClickHandler(t,i,this.config.nodeMouseDbClick)},e.prototype._nodeClickHandler=function(t,i){var n=this.getNodeElement(t);if(n&&n._dragEventFired)n._dragEventFired=!1;else{if(!1===e.events.publish("click",[this,{node:this.getNode(t),event:i}]))return!1;this._commonClickHandler(t,i,this.config.nodeMouseClick)}},e.prototype._nodeCircleMenuItemClickHandler=function(t,i){var n=t.parentNode.getAttribute(e.attr.control_node_circle_menu_wrraper_id),o=t.getAttribute(e.attr.control_node_circle_menu_name);e.events.publish("click",[this.nodeCircleMenuUI,{nodeId:n,menuItemName:o,menuItem:this.nodeCircleMenuUI._menu[o],event:i}])},e.prototype._nodeCircleMenuClickHandler=function(t){e.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide();var i=this.getNode(t),n=null;if(Array.isArray(i.tags))for(var o=0;o<i.tags.length;o++){var r=i.tags[o];this.config.tags[r]&&this.config.tags[r].nodeCircleMenu&&(n=this.config.tags[r].nodeCircleMenu)}this.nodeCircleMenuUI.show(t,n)},e.prototype._commonClickHandler=function(t,i,n){var o;e.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide(),n==e.action.expandCollapse&&this.toggleExpandCollapse(t,i),n==e.action.edit&&(o=this.getNode(t))&&(this.editUI.show(o.id),this.ripple(o.id,i.clientX,i.clientY)),n==e.action.details&&(o=this.getNode(t))&&(this.editUI.show(o.id,!0),this.ripple(o.id,i.clientX,i.clientY))},e.prototype._menuHandlerMouseDownHandler=function(t,i){i.stopPropagation(),i.preventDefault()},e.prototype._nodeMenuClickHandler=function(t,i,n){e.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var o=this.getNode(t),r=null;if(Array.isArray(o.tags))for(var a=0;a<o.tags.length;a++){var s=o.tags[a];this.config.tags[s]&&this.config.tags[s].nodeMenu&&(r=this.config.tags[s].nodeMenu)}this.nodeMenuUI.showStickIn(i,t,null,r)},e.prototype._menuClickHandler=function(t,i){i.stopPropagation(),i.preventDefault(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.show(t.offsetLeft,t.offsetTop)},e.prototype._lonelyButtonHandler=function(){var t={id:this.generateId()};!1!==this.addNode(t,null,!0)&&this.center(t.id)},e.prototype.toggleExpandCollapse=function(t,i){var n=this.getNode(t),o=this.getCollapsedIds(n);if(o.length){if(!1===e.events.publish("expcollclick",[this,!1,t,o]))return!1;this.expand(t,o,!1)}else{if(!1===e.events.publish("expcollclick",[this,!0,t,n.childrenIds]))return!1;this.collapse(t,n.childrenIds,!1)}i&&this.ripple(n.id,i.clientX,i.clientY)},e.prototype._move=function(t,i,n){n[0]=i,n[1]=t,this.setViewBox(n),this.xScrollUI.setPosition(),this.yScrollUI.setPosition()},e.prototype.moveStart=function(t,i,n,o){if(t){if(!this._moveInterval){var r=this,a=this.getViewBox().slice(0),s=this.getScale(),c=0,l=0,p=1;e.isNEU(n)&&(n=e.anim.inSin),e.isNEU(o)&&(o=3e3),this._moveInterval=setInterval(function(){var d={x:0,y:0,xWithoutScale:0,yWithoutScale:0};t.left?(c++,d.x=c*e.MOVE_STEP/s,d.xWithoutScale=c*e.MOVE_STEP):t.right&&(c++,d.x=-c*e.MOVE_STEP/s,d.xWithoutScale=-c*e.MOVE_STEP),t.up?(l++,d.y=l*e.MOVE_STEP/s,d.yWithoutScale=l*e.MOVE_STEP):t.down&&(l++,d.y=-l*e.MOVE_STEP/s,d.yWithoutScale=-l*e.MOVE_STEP);var h=n((10*p-10)/o);d.x=d.x*h,d.xWithoutScale=d.xWithoutScale*h,d.y=d.y*h,d.yWithoutScale=d.yWithoutScale*h,r.setViewBox([a[0]+d.x,a[1]+d.y,a[2],a[3]]),i&&i(d),p+=1},10)}}else console.error("movePosition parameter not defined")},e.prototype.moveEnd=function(){this._moveInterval&&(clearInterval(this._moveInterval),this._moveInterval=null)},void 0===e&&(e={}),e.node=function(t,i,n,o){this.templateName=o,this.id=t,this.pid=i,this.children=[],this.childrenIds=[],this.parent=null,this.stpid=null,this.stParent=null,this.stChildren=[],this.stChildrenIds=[],this.tags=n,this.tags||(this.tags=[])},e.prototype._mouseDownHandler=function(t,i,n){var o=this;e.HIDE_EDIT_FORM_ON_PAN&&this.editUI.hide(),e.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var r=this.getViewBox(),a=this.getScale(),s=e._getClientTouchesXY(i,0),c=e._getClientTouchesXY(i,1),l={diffX:0,diffY:0,x0:s.x,y0:s.y,type:"pan",viewBoxLeft:r[0],viewBoxTop:r[1]};i.touches&&i.touches.length>1&&(l.type="pinch",l.dist=Math.sqrt((s.x-c.x)*(s.x-c.x)+(s.y-c.y)*(s.y-c.y))),"pan"==l.type&&(this._hideBeforeAnimation(),this._changeCursorOnPanStart(r,a,i));var p=function(h){var u=e._getClientTouchesXY(h,0);if(l&&"pan"==l.type)o._hideBeforeAnimation(),l.diffX=u.x-l.x0,l.diffY=u.y-l.y0,o._move(-l.diffY/a+l.viewBoxTop,-l.diffX/a+l.viewBoxLeft,r);else if(l&&"pinch"==l.type){var x=e._getClientTouchesXY(h,1),_=Math.sqrt((u.x-x.x)*(u.x-x.x)+(u.y-x.y)*(u.y-x.y)),g=1+(_-l.dist)/(l.dist/100)/100;l.dist=_;var y=e._pinchMiddlePointInPercent(o.element,o.width(),o.height(),h);o.zoom(g,y)}},d=function(){"pan"==l.type&&o.config.sticky?setTimeout(function(){e._moveToBoundaryArea(t,o.getViewBox(),o.response.boundary,function(){o._draw(!0,e.action.pan)})},0):"pan"!=l.type||o.config.sticky||setTimeout(function(){o._draw(!0,e.action.pan)},0),"pan"==l.type&&o._changeCursorOnPanEnd(),l=null,t.removeEventListener(n.move,p),t.removeEventListener(n.up,d),n.leave&&t.removeEventListener(n.leave,d),n.touchstart&&t.removeEventListener(n.touchstart,d)};this.config.enablePan&&(t.addEventListener(n.move,p),t.addEventListener(n.up,d),n.leave&&t.addEventListener(n.leave,d),n.touchstart&&t.addEventListener(n.touchstart,d))},e.prototype._changeCursorOnPanStart=function(t,i,n){var o=this.getPointerElement(),r=e._getOffsetXY(this.element,n),a=r.x/i+t[0]-16/i,s=r.y/i+t[1]-16/i;o.style.display="inherit",o.setAttribute("transform","matrix(0,0,0,0,"+a+","+s+")"),e.animate(o,{transform:[0,0,0,0,a,s],opacity:0},{transform:[1/i,0,0,1/i,a,s],opacity:1},300,e.anim.outBack)},e.prototype._changeCursorOnPanEnd=function(){this.getPointerElement().style.display="none"},e.searchUI=function(){this.lastSearch=[],this._searchAfterEnterPress=!1,this._event_id=e._guid(),this.instance=null},e.searchUI.prototype.init=function(t){this.instance=t,this.obj=this.instance,this._initSearchFields();var i=this,n=this.instance.config.padding-10,o=this.instance.config.padding-10,r=this.instance.getMenuButton();if(r){var a=r.getBoundingClientRect(),s=this.instance.getSvg().getBoundingClientRect();n=s.right-a.left+10,o=a.top-s.top-10}var c=document.createElement("div");c.classList.add("boc-search"),c.style.right=n+"px",c.style.top=o+"px";var l=e.elements.textbox({},{label:e.SEARCH_PLACEHOLDER,btn:"X"},"320px");c.innerHTML+=l.html,this.xBtn=c.querySelector("[data-input-btn]"),this.xBtn.style.display="none",this.searchTableWrapper=document.createElement("div"),c.appendChild(this.searchTableWrapper);var p=this.instance.getSvg().nextSibling;this.instance.element.insertBefore(c,p),e.input.init(c),this.input=document.getElementById(l.id),this.xBtn.addEventListener("click",function(u){u.preventDefault(),i.hide()}),this.input.addEventListener("keypress",function(u){"Enter"==u.key&&u.preventDefault()}),this.input.addEventListener("focus",function(u){i.xBtn.style.display="",i._search()}),this.input.addEventListener("blur",function(u){e.isNEU(i.input.value)&&e.SEARCH_HELP_SYMBOL!=i.input.value&&(i.xBtn.style.display="none")}),this.input.addEventListener("keydown",function(u){("ArrowDown"==u.key||"ArrowUp"==u.key)&&u.preventDefault()}),this.input.addEventListener("keyup",function(u){"ArrowDown"==u.key?d():"ArrowUp"==u.key?h():"Enter"==u.key?i._enterHandler():"Escape"==u.key?i.hide():i._search()});var d=function(){var u=i.instance.element.querySelectorAll("[data-search-item-id]"),f=i.instance.element.querySelector('[data-selected="yes"]');null==f&&u.length>0?u[0].setAttribute("data-selected","yes"):u.length>0&&f.nextSibling&&f.nextSibling.setAttribute&&(f.removeAttribute("data-selected"),f.nextSibling.setAttribute("data-selected","yes"))},h=function(){var u=i.instance.element.querySelectorAll("[data-search-item-id]"),f=i.instance.element.querySelector('[data-selected="yes"]');null==f&&u.length>0?u[u.length-1].setAttribute("data-selected","yes"):u.length>0&&f.previousSibling&&f.previousSibling.setAttribute&&(f.removeAttribute("data-selected"),f.previousSibling.setAttribute("data-selected","yes"))}},e.searchUI.prototype._enterHandler=function(){var t=this.instance.element.querySelector('[data-selected="yes"]');if(t){if(t.hasAttribute("data-search-item-id")){var i=t.getAttribute("data-search-item-id");if(this.input.value!=e.SEARCH_HELP_SYMBOL){var n=e.events.publish("",[this.instance,i]),o=e.events.publish("searchclick",[this,{nodeId:i}]);!1===n&&(o=!1),0!=o&&this.instance.center(i)}else this.input.value=i+" ",this.searchTableWrapper.innerHTML=""}}else this._searchAfterEnterPress=!0,this.__search(),this.searchTableWrapper.innerHTML="",this.instance.draw()},e.searchUI.prototype._initSearchFields=function(){if(null==this.instance.config.searchFields){this._searchFields=[];for(var t=0;t<this.instance.response.allFields.length;t++){var i=this.instance.response.allFields[t];"tags"==i||e._fieldIsImg(this.instance.config,i)||this._searchFields.push(i)}}else this._searchFields=this.instance.config.searchFields;if(null==this.instance.config.searchFieldsAbbreviation)for(this.searchFieldsAbbreviation={},t=0;t<this._searchFields.length;t++){for(var n=this._searchFields[t],o=0,r=n.slice(0,o+1).toLowerCase();this.searchFieldsAbbreviation[r];)o++,r=n.slice(0,o+1).toLowerCase();this.searchFieldsAbbreviation[r]=n}else this.searchFieldsAbbreviation=this.instance.config.searchFieldsAbbreviation;this._searchFieldsAbbreviation=this.searchFieldsAbbreviation},e.searchUI.prototype.find=function(t){this.input&&(this.input.value=t,document.activeElement==this.input?this._search(t):this.input.focus())},e.searchUI.prototype.addMatchTag=function(t){if(this._searchAfterEnterPress){for(var i=0;i<this.lastSearch.length;i++)if(this.lastSearch[i].id==t)return!0;return!1}return null},e.searchUI.prototype.__search=function(){this.lastSearch=e._search.search(this.instance.config.nodes,this.input.value,this._searchFields,this._searchFields,this.instance.config.searchDisplayField,this.instance.config.searchFieldsWeight,this.searchFieldsAbbreviation)},e.searchUI.prototype._search=function(){var t,i=this;if(this._searchAfterEnterPress=!1,this.input.value==e.SEARCH_HELP_SYMBOL)t=this.helpView();else{this.__search();var n=e._getFistImgField(this.instance.config);t=`<table border="0" cellspacing="0" cellpadding="0">\n                        <tbody>\n                            ${function(){for(var a="",s=0;s<i.lastSearch.length&&!(s>=e.SEARCH_RESULT_LIMIT);s++){var c=i.lastSearch[s],l="";if(n){var p=i.instance._get(c.id);"function"==typeof n?l=n(i.instance,i.instance.getNode(c.id),p):p[n]&&(l=p[n])}var d="",h="";i.instance.config.searchDisplayField==c.__searchField?d=c.__searchMarks:i.instance.config.searchDisplayField?(e.isNEU(d=c[i.instance.config.searchDisplayField])&&(d=""),h=c.__searchMarks):d=c.__searchMarks;var u={img:l,nodeId:c.id,first:d,second:h,searchItem:c,html:e.searchUI.createItem(l,c.id,d,h)};e.events.publish("add-item",[i,u]),a+=u.html}return a}()}  \n                        </tbody>\n                    </table>`}this.searchTableWrapper.innerHTML=t;for(var o=this.instance.element.querySelectorAll("[data-search-item-id]"),r=0;r<o.length;r++)o[r].addEventListener("click",function(){if(this.hasAttribute("data-search-item-id")){var a=this.getAttribute("data-search-item-id");if(i.input.value!=e.SEARCH_HELP_SYMBOL){var s=e.events.publish("searchclick",[i.instance,a]),c=e.events.publish("searchclick",[i,{nodeId:a}]);if(!1===s&&(c=!1),!1!==c){i.instance.center(this.getAttribute("data-search-item-id"));var l=i.instance.element.querySelector('[data-selected="yes"]');l&&l.removeAttribute("data-selected"),this.setAttribute("data-selected","yes"),i.input.focus()}}else i.input.value=a+" ",i.searchTableWrapper.innerHTML="",i.input.focus()}});e.events.publish("show-items",[this,{}])},e.searchUI.prototype.helpView=function(){var t='<table border="0" cellspacing="0" cellpadding="0">';for(var i in this.searchFieldsAbbreviation)t+=`<tr data-search-item-id="${i}" style="height: 50px;"><td class="boc-search-image-td" style="text-align: center;">${i}</td><td class="boc-search-text-td">${this.searchFieldsAbbreviation[i]}</td></tr>`;return t+"</table>"},e.searchUI.createItem=function(t,i,n,o){return n&&(n="<b>"+n+"</b>"),`<tr data-search-item-id="${i}">\n                <td class="boc-search-image-td">\n                    ${t=t?`<div class="boc-search-photo" style="background-image: url(${t})"></div>`:`<div class="boc-search-photo">${e.icon.user(32,32,"#aeaeae")}</div>`}\n                </td>\n                <td class="boc-search-text-td">${n} <br/>${o}</td>\n            </tr>`},e.searchUI.prototype.hide=function(){if(!1===e.events.publish("hide",[this]))return!1;this._searchAfterEnterPress&&(this._searchAfterEnterPress=!1,this.instance.draw()),this.lastSearch=[],this.xBtn&&(this.xBtn.style.display="none"),this.searchTableWrapper&&(this.searchTableWrapper.innerHTML=""),this.input&&(this.input.value="",document.activeElement==this.input&&this.input.blur(),document.activeElement==this.xBtn&&e.input.blurHandler(this.input))},e.searchUI.prototype.on=function(t,i){return e.events.on(t,i,this._event_id),this},void 0===e&&(e={}),e.manager=function(t){this.config=t.config,this.layoutConfigs=t._layoutConfigs,this.visibleNodeIds=[],this.viewBox=null,this.action=null,this.actionParams=null,this.nodes={},this.oldNodes={},this.maxX=null,this.maxY=null,this.minX=null,this.minY=null,this.bordersByRootIdAndLevel=null,this.roots=null,this.state=null,this.vbIsInitializedFromState=!1,this.rootList=[],this.instance=t,this._fixAdjustForExport={x:0,y:0}},e.manager.prototype.read=function(t,i,n,o,r,a,s,c){var l=this;e.state._get(this.config.state,i,n,function(p){l.state=p,l.action=r,l.actionParams=a,r!=e.action.init||!l.state||a&&a.method&&"fit"==a.method?(l.viewBox=o,l.vbIsInitializedFromState=!1):(l.viewBox=l.state.vb,l.vbIsInitializedFromState=!0,Array.isArray(l.state.roots)&&(l.config.roots=l.state.roots));var d=l.maxX,h=l.maxY,u=l.minX,f=l.minY,v=l.bordersByRootIdAndLevel,x=l.roots,_=l.nodes;if(t){var g=e.manager._getResponse(i,n,l.visibleNodeIds,l.config,d,h,u,f,l.viewBox,x,l.action,l.actionParams,_,l.oldNodes,l.vbIsInitializedFromState);r!=e.action.exporting&&(l.maxX=d,l.maxY=h,l.minX=u,l.minY=f,l.roots=x,l.nodes=_,l.visibleNodeIds=g.visibleNodeIds),g.bordersByRootIdAndLevel=v,g.roots=x,g.adjustify={x:0,y:0},l.state&&(g.adjustify=l.state.adjustify),s(g)}else l.oldNodes=_||null,l._read(function(y){v=y.bordersByRootIdAndLevel;var b=e.manager._getResponse(i,n,l.visibleNodeIds,l.config,d=y.maxX,h=y.maxY,u=y.minX,f=y.minY,l.viewBox,x=y.roots,l.action,l.actionParams,_=y.nodes,l.oldNodes,l.vbIsInitializedFromState);b.notif=y.limit,b.roots=x,b.bordersByRootIdAndLevel=v,b.adjustify=y.adjustify,r!=e.action.exporting&&(l.maxX=d,l.maxY=h,l.minX=u,l.minY=f,l.roots=x,l.nodes=_,l.visibleNodeIds=b.visibleNodeIds,l.bordersByRootIdAndLevel=v,l.rootList=y.rootList),s(b)},c)})},e.manager.prototype._read=function(t,i){var n=this,o=e.manager._createNodes(this.instance);i(o);var r=o.nodes,a=o.roots,s=e.remote;null==s&&(s=e.local),s._setPositions(a,n.layoutConfigs,function(c){var l=e.manager._doNotChangePositionOfClickedNodeIfAny(a,r,n.action,n.actionParams,n.oldNodes,n.config.orientation);n.state&&n.action==e.action.init&&(l=n.state.adjustify),n.action==e.action.exporting?l=n._fixAdjustForExport:n._fixAdjustForExport=l;for(var p={minX:null,minY:null,maxX:null,maxY:null},d={},h=0;h<a.length;h++)e.manager._setMinMaxXYAdjustifyIterate(a[h],a[h],p,0,d,l,n.config.orientation);t({minX:p.minX,minY:p.minY,maxX:p.maxX,maxY:p.maxY,bordersByRootIdAndLevel:d,nodes:r,roots:a,rootList:o.rootList,limit:c,adjustify:l})},r)},void 0===e&&(e={}),e.manager._initDinamicNode=function(t,i,n){i&&(t.lcn=i),n&&(t.isAssistant=!0);var o=e.t(t.templateName);t.w=o&&o.size?o.size[0]:0,t.h=o&&o.size?o.size[1]:0,t.isSplit="split"==t.templateName,t.isMirror="mirror"==t.templateName,t.isSubLevel="subLevel"==t.templateName},e.manager._setCollpasedProperty=function(t,i,n,o,r,a,s){null==t.collapsed&&i.collapse&&i.collapse.allChildren?t.collapsed=!0:null==t.collapsed&&(t.collapsed=!1),r==e.action.expand&&-1!=n.ids.indexOf(t.id)&&(t.collapsed=!1),r==e.action.collapse&&(n.expandIds||n.collapseIds)?n.expandIds&&-1!=n.expandIds.indexOf(t.id)?t.collapsed=!1:n.collapseIds&&-1!=n.collapseIds.indexOf(t.id)&&(t.collapsed=!0):r==e.action.collapse&&-1!=n.ids.indexOf(t.id)&&(t.collapsed=!0),r==e.action.expand&&"all"==n.ids&&(t.collapsed=!1),r==e.action.exporting&&n.expandChildren&&(t.collapsed=!1),r==e.action.init&&null!=s?t.collapsed=!s.exp.has(t.id):r==e.action.init?t.collapsed=i.collapse&&a>=i.collapse.level-1&&-1==o.indexOf(t.id):r==e.action.centerNode||r==e.action.insert||r==e.action.expand||r==e.action.collapse?o.has(t.id)&&(t.collapsed=!1):r==e.action.update&&n&&n.changeRoots&&n.changeRoots.has(t.id)&&(t.collapsed=!1)},e.manager._initNode=function(t,i,n,o,r,a,s){var c=s.manager.config,p=s.manager.action,d=s.manager.actionParams,h=s.manager.state,u=s.manager.layoutConfigs[n||"base"];null==t.parent&&e.manager._setCollpasedProperty(t,u,d,r,p,o-1,h);for(var f=0;f<t.childrenIds.length;f++){var v=i[t.childrenIds[f]];if(e.manager._setCollpasedProperty(v,u,d,r,p,o,h),!v.collapsed){if(v.parent=t,null!=v.ppid){var x=i[v.ppid];x&&(v.parentPartner=x)}(-1!=v.tags.indexOf("left-partner")||-1!=v.tags.indexOf("right-partner")||-1!=v.tags.indexOf("partner")||v.parentPartner)&&-1==a.indexOf(t.id)&&a.push(t.id),t.children.push(v)}}if(p!=e.action.minimize||t.min?p==e.action.maximize&&!0===t.min?(d.all||d.id==t.id)&&(t.min=!1):p==e.action.exporting&&!1===d.min?t.min=!1:p==e.action.init&&null!=h&&(t.min=h.min.has(t.id)):(d.all||d.id==t.id)&&(t.min=!0),!t.min)for(f=0;f<t.stChildrenIds.length;f++)v=i[t.stChildrenIds[f]],t.tags&&t.tags.has("filter")||(v.stParent=t,t.stChildren.push(v));null!=o&&(t.level=o),n&&(t.lcn=n);var _=e._getSubLevels(t.tags,c.tags);_>0&&(t.subLevels=_),-1!=t.tags.indexOf("assistant")&&null!=t.parent&&(t.isAssistant=!0);var g=e.t(t.templateName,t.min);t.w=g&&g.size?g.size[0]:0,t.h=g&&g.size?g.size[1]:0,t.padding=g&&g.padding?g.padding:[0,0,0,0],e.events.publish("node-initialized",[s,{node:t}]),e.events.publish("node-created",[t])},e.manager._iterate=function(t,i,n,o,r,a,s,c,l,p,d,h){var u=h.manager.layoutConfigs;if(e.manager._initNode(i,n,l,o,p,d,h),i.isAssistant&&(a[i.pid]||(a[i.pid]=[]),a[i.pid].push(i.id)),i.subLevels>0&&s.push(i.id),e.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN&&!i.isAssistant&&i.parent){if(i.parent&&i.parent.children.length&&i.parent.children[i.parent.children.length-1]==i){for(var f=[],v=0,x=0,_=0;_<i.parent.children.length;_++)-1==(g=i.parent.children[_]).tags.indexOf("partner")&&-1==g.tags.indexOf("left-partner")&&-1==g.tags.indexOf("right-partner")&&-1==g.tags.indexOf("assistant")&&0==g.children.length?f.push(g.id):-1!=g.tags.indexOf("assistant")?v++:-1==g.tags.indexOf("partner")&&-1==g.tags.indexOf("left-partner")&&-1==g.tags.indexOf("right-partner")||x++;(e.MIXED_LAYOUT_ALL_NODES&&f.length>1&&f.length==i.parent.children.length-v-x||!e.MIXED_LAYOUT_ALL_NODES&&f.length>1)&&(c[i.pid]=f)}}else if(!i.isAssistant&&0==i.childrenIds.length&&i.parent&&!c[i.pid]){for(f=[],v=0,x=0,_=0;_<i.parent.children.length;_++){var g;-1==(g=i.parent.children[_]).tags.indexOf("partner")&&-1==g.tags.indexOf("left-partner")&&-1==g.tags.indexOf("right-partner")&&-1==g.tags.indexOf("assistant")&&0==g.childrenIds.length?f.push(g.id):-1!=g.tags.indexOf("assistant")?v++:-1==g.tags.indexOf("partner")&&-1==g.tags.indexOf("left-partner")&&-1==g.tags.indexOf("right-partner")||x++}(e.MIXED_LAYOUT_ALL_NODES&&f.length>e.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN&&f.length==i.parent.childrenIds.length-v-x||!e.MIXED_LAYOUT_ALL_NODES&&f.length>e.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN)&&(c[i.pid]=f)}i.stChildren.length&&(t.stContainerNodes||(t.stContainerNodes=[]),t.stContainerNodes.push(i));for(var y=0;y<i.stChildren.length;y++){var b="";for(_=0;_<i.tags.length;_++)if(u[i.tags[_]]){b=i.tags[_];break}r.push(i.stChildren[y].id),e.manager._iterate(t,i.stChildren[y],n,0,r,a,s,c,b,p,d,h)}for(o++,y=0;y<i.children.length;y++)e.manager._iterate(t,i.children[y],n,o,r,a,s,c,l,p,d,h)},e.manager.__createNodes=function(t,i,n,o,r,a,s,c){for(var l=[],p=e._addDottedLines(n),d=0;d<p.length;d++){var h,u=p[d];h=e.STRING_TAGS?u.tags?u.tags.split(","):[]:Array.isArray(u.tags)?u.tags.slice(0):[],c.filterUI.addFilterTag(u)&&h.unshift("filter");var f=c.searchUI.addMatchTag(u.id);!0===f?h.unshift("match"):!1===f&&h.unshift("no-match");var v=e._getTemplate(h,n.tags,n.template),x=new e.node(u.id,u.pid,h,v);e.isNEU(u.ppid)||(x.ppid=u.ppid),e.isNEU(u.stpid)||(x.stpid=u.stpid),null!=n.orderBy&&(x.order=e.manager._getOrderFieldValue(u,n.orderBy)),null!=u.movex&&(x.movex=u.movex),null!=u.movey&&(x.movey=u.movey),t[u.id]=x,l.push(u.id)}for(null!=n.orderBy&&l.sort(function(w,S){var k=t[w].order,I=t[S].order;return"number"==typeof k||"number"==typeof I?(null==k&&(k=-1),null==I&&(I=-1),n.orderBy.desc?I-k:k-I):"string"==typeof k||"string"==typeof I?(null==k&&(k=""),null==I&&(I=""),n.orderBy.desc?I.localeCompare(k):k.localeCompare(I)):void 0}),d=0;d<l.length;d++){var _=l[d],g=(x=t[_],a?a[_]:null),y=t[x.stpid],b=t[x.pid];if(y||(x.stpid=null),b||(x.pid=null),y){var m=a?a[y.id]:null;m&&(y.min=m.min),y.stChildrenIds.push(x.id)}else b?(g&&(x.collapsed=g.collapsed,x.min=g.min),b.childrenIds.push(x.id)):(g&&(x.collapsed=g.collapsed,x.min=g.min),i.push(x),s.push(x.id));o==e.action.init&&(x.min=e._getMin(x,n))}},e.manager._createNodes=function(t){var i=t.manager.config,n=t.manager.layoutConfigs,o=t.manager.action,r=t.manager.actionParams,s=t.manager.state,c={},l=[],p=[];if(e.manager.__createNodes(c,l,i,o,r,t.manager.oldNodes,p,t),null!=i.roots){l=[];for(var d=0;d<i.roots.length;d++){var h=c[i.roots[d]];if(h&&o==e.action.centerNode){for(var u=h;null!=u.pid||null!=u.stpid;)u=null==u.pid&&null!=u.stpid?c[u.stpid]:c[u.pid];for(var f=c[r.id];(null!=f.pid||null!=f.stpid)&&f!=h;)f=null==f.pid&&null!=f.stpid?c[f.stpid]:c[f.pid];u==f&&(h=u)}if(h){for(var v=!1,x=0;x<l.length;x++)if(l[x].id==h.id){v=!0;break}v||(e.isNEU(h.pid)||(ge=(y=c[h.pid]).childrenIds.indexOf(h.id))>-1&&y.childrenIds.splice(ge,1),l.push(h))}}for(i.roots=[],d=0;d<l.length;d++)i.roots.push(l[d].id)}o==e.action.exporting&&null!=r.id&&(g=c[r.id])&&(g.pid=null,l=[g]);var _=[];if(o==e.action.init&&i.expand&&i.expand.nodes&&null==s)for(d=0;d<i.expand.nodes.length;d++){var g=c[i.expand.nodes[d]];for(!0===i.expand.allChildren&&e.manager._addExpandedNodeIdsIterate(g,c,_);g;)_.push(g.id),null==g.pid&&null!=g.stpid?(g=c[g.stpid]).min=!1:g=c[g.pid]}else if(o==e.action.expand&&r.ids&&"all"!=r.ids||o==e.action.collapse&&r&&r.expandIds)for(ie=o==e.action.expand?r.ids:r.expandIds,d=0;d<ie.length;d++)for(var y=c[(g=c[ie[d]]).pid];y;)_.push(y.id),null==y.pid&&null!=y.stpid?(y=c[y.stpid]).min=!1:y=c[y.pid];else if(o==e.action.centerNode){for(var b=c[r.id];b;){if(_.push(b.id),r.options.parentState===e.COLLAPSE_PARENT_NEIGHBORS&&b)for(d=0;d<b.childrenIds.length;d++)(L=c[b.childrenIds[d]]).collapsed=!0;null==b.pid&&null!=b.stpid?(b=c[b.stpid]).min=!1:b=c[b.pid]}if(b=c[r.id],r.options.childrenState===e.COLLAPSE_SUB_CHILDRENS)for(d=0;d<b.childrenIds.length;d++){(w=c[b.childrenIds[d]]).collapsed=!1;for(var m=0;m<w.childrenIds.length;m++)c[w.childrenIds[m]].collapsed=!0}if(r.options.parentState===e.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED&&(y=c[b.pid]))for(d=0;d<y.childrenIds.length;d++){var w;if((w=c[y.childrenIds[d]])!=b)for(w.collapsed=!1,m=0;m<w.childrenIds.length;m++)c[w.childrenIds[m]].collapsed=!0}}else if(o==e.action.insert)for(g=c[r.insertedNodeId];g;)_.push(g.id),null==g.pid&&null!=g.stpid?(g=c[g.stpid]).min=!1:g=c[g.pid];var S=[],k={},I=[],A={},M=[];for(d=0;d<l.length;d++)e.manager._iterate(l[d],l[d],c,0,S,k,I,A,"",_,M,t);if(o==e.action.collapse&&r&&Array.isArray(r.expandIds)&&Array.isArray(r.collapseIds))for(d=0;d<r.ids.length;d++)r.expandIds.has(r.collapseIds[d])?console.error(`id ${r.collapseIds[d]} exist in both collapseIds and expandIds`):(g=c[r.collapseIds[d]])&&(g.collapsed=!0);for(d=l.length-1;d>=0;d--)l[d].collapsed&&l.splice(d,1);for(d=0;d<M.length;d++){g=c[M[d]];var N=[],C=[],U=[],R={},P=0,T=0,E=0,F=[],O=[];for(m=0;m<g.children.length;m++)(L=g.children[m]).isAssistant?N.push(L.id):-1!=L.tags.indexOf("right-partner")?(L.isPartner=1,L.children=[],C.push(L.id)):-1!=L.tags.indexOf("left-partner")?(L.isPartner=2,L.children=[],U.push(L.id)):-1==L.tags.indexOf("partner")||P%2?-1!=L.tags.indexOf("partner")&&P%2?(L.isPartner=2,L.children=[],U.push(L.id),P++):L.parentPartner?(R[L.parentPartner.id]||(R[L.parentPartner.id]=[]),R[L.parentPartner.id].push(L.id)):N.push(L.id):(L.isPartner=1,L.children=[],C.push(L.id),P++);g.children=[];var D=[];for(m=0;m<C.length;m++){R[(L=c[C[m]]).id]?g.children.push(L):g.children.splice(0,0,L);for(var Y=0;Y<L.childrenIds.length;Y++)D.push(L.childrenIds[Y])}var Q=[];for(m=0;m<U.length;m++)for(R[(L=c[U[m]]).id]?g.children.push(L):g.children.splice(0,0,L),Y=0;Y<L.childrenIds.length;Y++)Q.push(L.childrenIds[Y]);for(m=0;m<Q.length;m++)(L=c[Q[m]]).collapsed||(L.parentPartner=L.parent,L.parent=g,L.isChildOfPartner=!0,g.children.push(L));for(m=U.length-1;m>=0;m--)if(R[U[m]])for(x=0;x<R[U[m]].length;x++)g.children.push(c[R[U[m]][x]]),T++,-1==O.indexOf(U[m])&&O.push(U[m]);for(m=0;m<N.length;m++){var L=c[N[m]];g.children.push(L)}for(m=0;m<C.length;m++)if(R[C[m]])for(x=0;x<R[C[m]].length;x++)g.children.push(c[R[C[m]][x]]),E++,-1==F.indexOf(C[m])&&F.push(C[m]);for(m=0;m<D.length;m++)(L=c[D[m]]).collapsed||(L.parentPartner=L.parent,L.parent=g,L.isChildOfPartner=!0,g.children.push(L));g.partnerSeparation=Math.max(O.length,F.length)*i.partnerChildrenSplitSeparation+i.minPartnerSeparation,g.hasPartners=N.length||!T||E?N.length||T||!E?N.length||1!=T||1!=E?N.length||T||E?!N.length||T||E?N.length&&(T||E)?7:1:6:5:4:3:2}for(d=0;d<I.length;d++){var B=n[(g=c[I[d]]).lcn?g.lcn:"base"];for(m=0;m<g.subLevels;m++){var H=new e.node(g.id+"_sub_level_index_"+m,g.pid,[],"subLevel");e.manager._initDinamicNode(H,g.lcn),(y=g.parent)&&((ge=y.children.indexOf(g))>-1&&(y.children.splice(ge,1),y.children.splice(ge,0,H)),H.children.push(g),H.parent=y,g.parent=H,c[H.id]=H)}}for(var $ in k){(y=c[$]).hasAssistants=!0,H=new e.node(y.id+"_split_assitant_0",y.id,["assistant"],"split"),e.manager._initDinamicNode(H,y.lcn,!0),c[H.id]=H;var V=[];for(m=y.children.length-1;m>=0;m--)(L=y.children[m]).isAssistant?(L.parent=null,y.children.splice(m,1),V.splice(0,0,L.id)):L.isPartner||(L.parent&&A[L.parent.id]&&H&&L.parent.id!=H.id&&(Object.defineProperty(A,H.id,Object.getOwnPropertyDescriptor(A,L.parent.id)),delete A[L.parent.id]),L.parent=H,H.children.unshift(L),y.children.splice(m,1));if(V.length%2){var me=c[V[V.length-1]],ne=new e.node(me.id+"_mirror",y.pid,[],"mirror");e.manager._initDinamicNode(ne,me.lcn,!0),ne.isAssistant=!0,ne.w=me.w,ne.h=me.h,c[ne.id]=ne,V.splice(V.length-1,0,ne.id)}var he=1;for(m=V.length-1;m>=0;m--)if(m%2&&m!=V.length-1){var Z=new e.node(y.id+"_split_assitant_"+he,y.pid,[],"split");e.manager._initDinamicNode(Z,y.lcn,!0),c[Z.id]=Z,V.splice(m,0,Z.id),he++}else m%2&&V.splice(m,0,H.id);for(m=0;m<V.length;m+=3){var z=null,le=c[V[m]],ee=c[V[m+1]],te=c[V[m+2]];le.parent=z=0==m?y:c[V[m-2]],ee.parent=z,te.parent=z,z.children.push(le),z.children.push(ee),z.children.push(te)}}var se=!1;for(var oe in n)if((B=n[oe]).layout>0){se=!0;break}var ue=e.events.has("node-layout",t._event_id);if(se||ue){var j={nodes:c,config:i,action:o,actionParams:r};if(I.length){var X=!1;for(var $ in A){var ie=A[$];for(d=0;d<ie.length;d++)if((g=c[ie[d]]).subLevels){X=!0;break}if(X)break}if(X){var re={},de={},ve={};for(var $ in A){ie=A[$];var ae=!1,G=null;for(d=0;d<ie.length;d++){var K=ie[d];(null===G||I.has(K))&&(G=c[K].parent.id,ae||e.isNEU(c[K].subLevels)||(ae=c[K].subLevels>0)),re[G]||(re[G]=[]),re[G].push(K),ae&&(ve[G]=$,de[G]||(de[G]=[]),de[G].push(K))}}for(var $ in A={},de)if(de[$].length>e.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN){var ce=ve[$];for(d=c[ce].children.length-1;d>=0;d--)de[$].has((L=c[ce].children[d]).id)&&c[ce].children.splice(d,1)}for(var $ in re)re[$].length>e.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN&&(A[$]=re[$])}}for(var $ in A){for(var W=y=c[$];W.isSplit;)W=c[W.pid];for(;W.isSubLevel;)W=c[W.pid];if((B=n[y.lcn?y.lcn:"base"]).layout>0||ue){j.pnode=y,j.layout=B.layout,j.childrenIds=A[$],j.lastChildrenPidIds=A,j.subLevels=0,j.layouts=[],e.events.publish("node-layout",[t,j]),e.events.publish("layout",[j]),j.layouts.length||j.layouts.push({layout:j.layout,childrenIds:j.childrenIds,subLevels:j.subLevels});for(var fe=0;fe<j.layouts.length;fe++){var q=j.layouts[fe];for(e.isNEU(q.subLevels)&&(q.subLevels=0),e.isNEU(q.layout)&&(q.layout=B.layout),W=y=c[$];W.isSplit;)W=c[W.pid];for(;W.isSubLevel;)W=c[W.pid];var pe=y;for(m=0;m<q.subLevels;m++)H=new e.node(fe+"_sublevel_layout_"+m,pe.id,[],"subLevel"),e.manager._initDinamicNode(H,pe.lcn),H.parent=pe,pe.children.push(H),c[H.id]=H,pe=H;if(q.subLevels){for(m=0;m<q.childrenIds.length;m++){var ge;-1!=(ge=y.children.indexOf(L=c[q.childrenIds[m]]))&&y.children.splice(ge,1),L.parent=pe,pe.children.push(L)}y=pe}if(q.layout==e.layout.mixed){var ye=q.childrenIds;for(d=ye.length-1;d>=0;d--){for(y=(L=c[ye[d]]).parent,L.layout=e.layout.mixed,m=y.children.length-1;m>=0;m--)if(L.id==y.children[m].id){y.children.splice(m,1);break}if(d>0){var _e=c[ye[d-1]];L.parent=_e,L.layout=e.layout.mixed,_e.children.push(L)}else y.children.push(L)}}else if(q.layout>1){H=new e.node(fe+"_"+y.id+"_split_0",W.id,[],"split"),e.manager._initDinamicNode(H,y.lcn),c[H.id]=H,H.layout=q.layout;var J=[];for(d=q.childrenIds.length-1;d>=0;d--){for(L=c[q.childrenIds[d]],m=0;m<y.children.length;m++)y.children[m].id==L.id&&y.children.splice(m,1);if(L.parent=null,L.layout=q.layout,q.layout!=e.layout.treeRightOffset&&q.layout!=e.layout.treeRight||J.splice(0,0,L.id),q.layout>2){var be=new e.node(fe+"_"+L.id+"_mirror",W.id,[],"mirror");e.manager._initDinamicNode(be,L.lcn),be.layout=q.layout,c[be.id]=be,J.splice(0,0,be.id)}q.layout!=e.layout.treeRightOffset&&q.layout!=e.layout.treeRight&&J.splice(0,0,L.id)}for(he=1,m=J.length-1;m>=0;m--)m%2&&m!=J.length-1?(Z=new e.node(fe+"_"+y.id+"_split_"+he,W.id,[],"split"),e.manager._initDinamicNode(Z,y.lcn),Z.layout=q.layout,c[Z.id]=Z,J.splice(m,0,Z.id),he++):m%2&&J.splice(m,0,H.id);for(m=0;m<J.length;m+=3)z=null,0==m&&(z=y),ee=c[J[m+1]],te=c[J[m+2]],0!=m&&(z=c[J[m-3]]),0==m||ee||(z=c[J[m-2]]),(le=c[J[m]]).parent=z,z.children.push(le),ee&&(0!=m&&(z=c[J[m-2]]),ee.parent=z,z.children.push(ee)),te&&(0!=m&&(z=c[J[m-1]]),te.parent=z,z.children.push(te))}}}}}if(e.VERTICAL_CHILDREN_ASSISTANT)for(d=0;d<l.length;d++)e.manager._verticalAssistantIterate(l[d],c);return e.events.publish("nodes-initialized",[t,j={nodes:c,roots:l}]),{nodes:j.nodes,roots:j.roots,rootList:p}},e.manager._getOrderFieldValue=function(t,i){var n=i;return i.field&&(n=i.field),t[n]},e.manager._getNodeWidth=function(t,i){switch(i.orientation){case e.orientation.top:case e.orientation.top_left:case e.orientation.bottom:case e.orientation.bottom_left:return t.w;case e.orientation.right:case e.orientation.right_top:case e.orientation.left:case e.orientation.left_top:return t.h}return 0},e.manager._isVisible=function(t,i,n,o){if(null!=t.x&&null!=t.y){if(i.lazyLoading&&o!==e.action.exporting){let s=function(c,l){var p=c.x,d=c.y,g=p+c.w>l[0]-e.LAZY_LOADING_FACTOR&&l[2]+e.LAZY_LOADING_FACTOR+l[0]>p;return g&&(g=d+c.h>l[1]-e.LAZY_LOADING_FACTOR&&l[3]+e.LAZY_LOADING_FACTOR+l[1]>d),g};if(s(t,n))return!0;for(var r=0;r<t.children.length;r++)if(s(t.children[r],n))return!0;return!1}return!0}},e.manager.getAllFields=function(t){var i=[e.TAGS];for(var n in t.nodeBinding)i.push(t.nodeBinding[n]);for(n=0;n<t.nodes.length;n++)for(var o in t.nodes[n])o!==e.ID&&o!==e.TAGS&&o!==e.NODES&&o!==e.PID&&o!==e.STPID&&"movex"!==o&&"movey"!==o&&(t.nodeBinding[o]||i.has(o)||i.push(o));return i},e.manager._getMostDeepChild=function(t){if(t){var i=t;return function n(o){o.sl>i.sl&&(i=o);for(var r=0;r<o.children.length;r++)n(o.children[r])}(t),i}},e.manager._getResponse=function(t,i,n,o,r,a,s,c,l,p,d,h,u,f,v){var x=p[0],_=[],g={top:null,left:null,bottom:null,right:null,minX:null,maxX:null,minY:null,maxY:null},y=[[],[],[]],w=e.getScale(l,t,i,o.scaleInitial,o.scaleMax,o.scaleMin,r-s+2*o.padding,a-c+2*o.padding);if(g.top=c-o.padding,g.left=s-o.padding,g.bottom=a+o.padding-i/w,g.right=r+o.padding-t/w,g.maxX=r,g.minX=s,g.maxY=a,g.minY=c,0==p.length||null==l&&!v&&o.align==e.CENTER){var S=Math.ceil(t/w),k=Math.ceil(i/w),I=0,A=0;if(S-2*o.padding>=r-s)switch(I=(r+s)/2-S/2,o.orientation){case e.orientation.right:case e.orientation.right_top:I=(s-r)/2-S/2}else switch(I=x.x-S/2+e.manager._getNodeWidth(x,o)/2,o.orientation){case e.orientation.right:case e.orientation.right_top:(I=-(S/2-(s-r)/2))<o.padding-S&&(I=o.padding-S);break;case e.orientation.left:case e.orientation.bottom_left:case e.orientation.top_left:case e.orientation.left_top:(I=-(S/2-(r-s)/2))>-o.padding&&(I=-o.padding)}if(k-2*o.padding>=a-c)switch(A=(a+c)/2-k/2,o.orientation){case e.orientation.bottom:case e.orientation.bottom_left:A=(c-a)/2-k/2}else switch((A=-(k/2-(a-c)/2))>-o.padding&&(A=-o.padding),o.orientation){case e.orientation.bottom:case e.orientation.bottom_left:(A=-(k/2-(c-a)/2))<o.padding-k&&(A=o.padding-k);break;case e.orientation.left:case e.orientation.right:A=x.y-k/2+e.manager._getNodeWidth(x,o)/2}l=[I,A,S,k]}else if(null==l&&!v&&o.align==e.ORIENTATION){switch(S=Math.ceil(t/w),k=Math.ceil(i/w),I=0,A=0,o.orientation){case e.orientation.top:I=x.x-S/2+e.manager._getNodeWidth(x,o)/2,A=-o.padding;break;case e.orientation.bottom:I=x.x-S/2+e.manager._getNodeWidth(x,o)/2,A=o.padding-k;break;case e.orientation.left:I=-o.padding,A=x.y-k/2+e.manager._getNodeWidth(x,o)/2;break;case e.orientation.right:I=o.padding-S,A=x.y-k/2+e.manager._getNodeWidth(x,o)/2;break;case e.orientation.top_left:I=-o.padding,A=-o.padding;break;case e.orientation.right_top:I=o.padding-S,A=-o.padding;break;case e.orientation.left_top:I=-o.padding,A=-o.padding;break;case e.orientation.bottom_left:I=-o.padding,A=o.padding-k}l=[I,A,S,k],o.sticky&&(l[0]<g.left&&l[0]<g.right&&(l[0]=g.left>g.right?g.right:g.left),l[0]>g.right&&l[0]>g.left&&(l[0]=g.left>g.right?g.left:g.right),l[1]<g.top&&l[1]<g.bottom&&(l[1]=g.top>g.bottom?g.bottom:g.top),l[1]>g.bottom&&l[1]>g.top&&(l[1]=g.top>g.bottom?g.top:g.bottom))}if(d==e.action.centerNode||d==e.action.maximize){var M=u[h.id];1==h.options.horizontal&&(l[0]=M.x+M.w/2-l[2]/2),1==h.options.vertical&&(l[1]=M.y+M.h/2-l[3]/2),o.sticky&&(l[0]<g.left&&l[0]<g.right&&(l[0]=g.left>g.right?g.right:g.left),l[0]>g.right&&l[0]>g.left&&(l[0]=g.left>g.right?g.left:g.right),l[1]<g.top&&l[1]<g.bottom&&(l[1]=g.top>g.bottom?g.bottom:g.top),l[1]>g.bottom&&l[1]>g.top&&(l[1]=g.top>g.bottom?g.top:g.bottom))}if(d==e.action.insert||d==e.action.expand||d==e.action.collapse||d==e.action.update||d==e.action.centerNode||d==e.action.maximize){var N=null;if(d==e.action.insert&&h&&null!=h.insertedNodeId&&null!=h.insertedNodeId)N=u[h.insertedNodeId];else if(d==e.action.update&&h&&null!=h.visId&&null!=h.visId)N=u[h.visId];else if(d!=e.action.expand&&d!=e.action.collapse&&d!=e.action.maximize||!h||null==h.id||null==h.id){if(d==e.action.centerNode||d==e.action.maximize){switch(o.orientation){case e.orientation.top:case e.orientation.top_left:case e.orientation.bottom:case e.orientation.bottom_left:h.options.vertical||(N=u[h.id]);break;case e.orientation.right:case e.orientation.right_top:case e.orientation.left:case e.orientation.left_top:h.options.horizontal||(N=u[h.id])}N&&(N=e.manager._getMostDeepChild(N,u))}}else N=e.manager._getMostDeepChild(N=u[h.id],u);if(!e.FIXED_POSITION_ON_CLICK&&N)switch(o.orientation){case e.orientation.top:case e.orientation.top_left:var C=N.y+N.h-l[3]+o.padding;l[1]<C&&(l[1]=C);break;case e.orientation.bottom:case e.orientation.bottom_left:l[1]>(C=N.y-o.padding)&&(l[1]=C);break;case e.orientation.right:case e.orientation.right_top:l[0]>(C=N.x-o.padding)&&(l[0]=C);break;case e.orientation.left:case e.orientation.left_top:l[0]<(C=N.x+N.w-l[2]+o.padding)&&(l[0]=C)}}for(var U=0;U<p.length;U++)e.manager._iterate2(p[U],u,o,l,d,h,_,f,n,y);return{animations:y,boundary:g,viewBox:l,visibleNodeIds:_,nodes:u,allFields:e.manager.getAllFields(o)}},e.manager._iterate2=function(t,i,n,o,r,a,s,c,l,p){if(e.manager._isVisible(t,n,o,r)){s.push(t.id);var d=null;if((r==e.action.expand||r==e.action.collapse||r==e.action.maximize)&&c&&c[t.id]&&"expandCollapseToLevel"==a.method){if(d={x:(v=c[t.id]).x,y:v.y},v){d={x:v.x,y:v.y};for(var h=t,u=null;null!=h;)c[h.id]&&c[h.id].collapsed&&(u=h),h=h.parent;u&&u.parent&&(d={x:u.parent.x,y:u.parent.y})}if(x=i[a.id]){for(h=t.parent;null!=h;)h=h.parent;h&&(d={x:x.x+x.w/2-t.w/2,y:x.y+x.h/2-t.h/2})}}else if((r==e.action.expand||r==e.action.collapse)&&c&&c[t.id]){if(d={x:(v=c[t.id]).x,y:v.y},"all"==a.ids&&v){for(d={x:v.x,y:v.y},h=t,u=null;null!=h;)c[h.id]&&c[h.id].collapsed&&(u=h),h=h.parent;u&&u.parent&&(d={x:u.parent.x,y:u.parent.y})}if(x=i[a.id]){for(h=t.parent;null!=h&&-1==a.ids.indexOf(t.id)&&-1==a.ids.indexOf(h.id);)h=h.parent;h&&(d={x:x.x+x.w/2-t.w/2,y:x.y+x.h/2-t.h/2})}}else if(r==e.action.centerNode&&c&&c[t.id])null!=(v=c[t.id]).x&&null!=v.y&&(d={x:v.x,y:v.y}),(f=i[a.id])&&f==t&&(h=t.parent)&&h.id==a.id&&(d={x:f.x+f.w/2-t.w/2,y:f.y+f.h/2-t.h/2});else if(r==e.action.maximize&&c&&c[t.id]){var f;null!=(v=c[t.id]).x&&null!=v.y&&(d={x:v.x,y:v.y}),(f=i[a.id])&&f==t&&(h=t.parent)&&h.id==a.id&&(d={x:f.x+f.w/2-t.w/2,y:f.y+f.h/2-t.h/2})}else if(r==e.action.minimize&&c&&c[t.id])d={x:(v=c[t.id]).x,y:v.y};else if(r==e.action.insert&&a&&a.insertedNodeId==t.id&&t.parent)d={x:t.parent.x,y:t.parent.y};else if(r!=e.action.update&&r!=e.action.insert||!c)r!==e.action.exporting&&r!==e.action.init&&-1==l.indexOf(t.id)&&(p[0].push(t.id),p[1].push({opacity:0}),p[2].push({opacity:1}));else{var v,x;if((!(v=c[t.id])||e.isNEU(v.x)&&e.isNEU(v.y))&&a){if(x=i[a.id]){for(h=x;h&&h.id==t.id;)h=h.parent;h&&(d={x:x.x,y:x.y})}}else v&&(d={x:v.x,y:v.y})}null!=d&&null!=d.x&&null!=d.y&&(d.x!=t.x||d.y!=t.y)&&(a&&a.dragNodeIdList&&-1!=a.dragNodeIdList.indexOf(t.id)||(p[0].push(t.id),p[1].push({transform:[1,0,0,1,d.x,d.y]}),p[2].push({transform:[1,0,0,1,t.x,t.y]})))}for(var _=0;_<t.stChildren.length;_++)e.manager._iterate2(t.stChildren[_],i,n,o,r,a,s,c,l,p);for(_=0;_<t.children.length;_++)e.manager._iterate2(t.children[_],i,n,o,r,a,s,c,l,p)},e.manager._addExpandedNodeIdsIterate=function(t,i,n){for(var o=0;o<t.childrenIds.length;o++)n.push(t.childrenIds[o]),e.manager._addExpandedNodeIdsIterate(i[t.childrenIds[o]],i,n)},e.manager._setMinMaxXYAdjustifyIterate=function(t,i,n,o,r,a,s){t.x+=a.x,t.y+=a.y;for(var c=0;c<t.stChildren.length;c++)e.manager._setMinMaxXYAdjustifyIterate(t.stChildren[c],t.stChildren[c],n,0,r,a,s);for(t.sl=t.isPartner?o-1:o,null==r[i.id]&&(r[i.id]={}),null==r[i.id][t.sl]&&(r[i.id][t.sl]={minX:null,minY:null,maxX:null,maxY:null}),t.layout||e._setMinMaxXY(t,r[i.id][t.sl]),null!=t.movex&&(t.x+=t.movex),null!=t.movey&&(t.y+=t.movey),e._setMinMaxXY(t,n),o++,c=0;c<t.children.length;c++)e.manager._setMinMaxXYAdjustifyIterate(t.children[c],i,n,o,r,a,s)},e.manager._doNotChangePositionOfClickedNodeIfAny=function(t,i,n,o,r,a){if(n!=e.action.expand&&n!=e.action.collapse&&n!=e.action.minimize&&n!=e.action.maximize&&n!=e.action.centerNode&&n!=e.action.update&&n!=e.action.insert)return{x:0,y:0};if(n==e.action.update&&(!o||null==o.id)){if(!t||!t.length)return{x:0,y:0};o={id:t[0].id}}if(null==o.id)return{x:0,y:0};var s=o.id;(n==e.action.minimize&&i[s].parent||n==e.action.maximize&&i[s].parent)&&(s=i[s].pid);var c=i[s],l=r[s];return l?{x:(l.x?l.x-(null!=l.movex?l.movex:0):0)-c.x,y:(l.y?l.y-(null!=l.movey?l.movey:0):0)-c.y}:{x:0,y:0}},e.manager._verticalAssistantIterate=function(t,i){for(var n=0;n<t.stChildren.length;n++)e.manager._verticalAssistantIterate(t.stChildren[n],i);if(3==t.children.length)e.manager._verticalAssistantIterate(t.children[0],i),e.manager._verticalAssistantIterate(t.children[2],i),e.manager._verticalAssistantIterate(t.children[1],i);else for(n=0;n<t.children.length;n++)e.manager._verticalAssistantIterate(t.children[n],i);if(t.isAssistant&&t.isSplit&&t.children.length){for(var o=t.parent.children[0],r=t.parent.children[2],a=t.parent;!a.hasAssistants;)a=a.parent;var s={max:0},c={max:0};e.manager._verticalAssistantLevelCountIterate(o,0,s),e.manager._verticalAssistantLevelCountIterate(r,0,c);var l=Math.max(s.max,c.max),p=[];for(n=0;n<l;n++){var d=new e.node(t.parent.id+"_split_assitant_level_"+n,t.pid,[],"subLevel");e.manager._initDinamicNode(d,t.lcn,!0),n>0&&(p[n-1].children.push(d),d.parent=p[n-1]),i[d.id]=d,p.push(d)}if(p.length){for(var h=p[p.length-1],u=p[0],f=t.children.length-1;f>=0;f--){var v=t.children[f];h.children.unshift(v),v.parent=h,t.children.splice(f,1)}t.children.push(u),u.parent=t}}},e.manager._verticalAssistantLevelCountIterate=function(t,i,n){n.max<i&&(n.max=i),i++;for(var o=0;o<t.children.length;o++)e.manager._verticalAssistantLevelCountIterate(t.children[o],i,n)},e._addDottedLines=function(t){var i=t.nodes;if((t.groupDottedLines.length||t.dottedLines.length)&&(i=JSON.parse(JSON.stringify(i))),t.groupDottedLines.length)for(var n=[],o=0;o<t.groupDottedLines.length;o++){var r=t.groupDottedLines[o];null==r.rootId&&(r.rootId=r.to);var a=`balkan_group_dotted_${r.rootId}`;if(!n.has(a))for(var s=0;s<i.length;s++)if(i[s].id==r.rootId){(d=JSON.parse(JSON.stringify(i[s]))).id=`balkan_group_dotted_${r.rootId}_balkan_id_${i[s].id}`,d.pid=void 0,d.stpid=i[s].id,i.push(d),n.push(a),i[s].tags||(i[s].tags=[]),i[s].tags.push("group-dotted-lines"),i[s].tags.push("group-dotted-lines-"+a);break}for(s=0;s<i.length;s++)if(i[s].id==r.from){if((d=JSON.parse(JSON.stringify(i[s]))).id=`balkan_group_dotted_${r.rootId}_balkan_id_${i[s].id}`,d.pid=`balkan_group_dotted_${r.rootId}_balkan_id_${r.to}`,d.tags){var c=d.tags.indexOf("group-dotted-lines");-1!=c&&d.tags.splice(c,1)}if(d.tags||(d.tags=[]),d.tags.push("boc-dotted-connector"),r.tags)for(var l=0;l<r.tags.length;l++)d.tags.push(r.tags[l]);i.push(d);break}}if(t.dottedLines.length)for(o=0;o<t.dottedLines.length;o++){var p=t.dottedLines[o];for(null==p.rootId&&(p.rootId=p.to),s=0;s<i.length;s++)if(i[s].id==p.from){var d;if((d=JSON.parse(JSON.stringify(i[s]))).id=`balkan_dotted_${p.rootId}_balkan_id_${i[s].id}`,d.pid=p.rootId==p.to?p.to:`balkan_dotted_${p.rootId}_balkan_id_${p.to}`,d.tags||(d.tags=[]),d.tags.push("boc-dotted-connector"),p.tags)for(l=0;l<p.tags.length;l++)d.tags.push(p.tags[l]);i.push(d);break}}return i},void 0===e&&(e={}),e.templates={},e.templates.base={defs:"",size:[250,120],expandCollapseSize:30,linkAdjuster:{fromX:0,fromY:0,toX:0,toY:0},ripple:{radius:0,color:"#e6e6e6",rect:null},assistanseLink:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="2px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} {xd},{yd} L{xe},{ye}"/>',svg:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',link:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="1px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} L{xd},{yd}"/>',pointer:'<g data-pointer="pointer" transform="matrix(0,0,0,0,100,100)"><radialGradient id="pointerGradient"><stop stop-color="#ffffff" offset="0" /><stop stop-color="#C1C1C1" offset="1" /></radialGradient><circle cx="16" cy="16" r="16" stroke-width="1" stroke="#acacac" fill="url(#pointerGradient)"></circle></g>',node:'<rect x="0" y="0" height="120" width="250" fill="none" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',plus:'<circle cx="15" cy="15" r="15" fill="#ffffff" stroke="#aeaeae" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#aeaeae"></line><line x1="15" y1="4" x2="15" y2="26" stroke-width="1" stroke="#aeaeae"></line>',minus:'<circle cx="15" cy="15" r="15" fill="#ffffff" stroke="#aeaeae" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#aeaeae"></line>',nodeMenuButton:'<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',menuButton:'<div style="position:absolute;right:{p}px;top:{p}px; width:30px;height:50px;cursor:pointer;" '+e.attr.control_export_menu+'=""><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"></div>',img_0:'<clipPath id="{randId}"><circle cx="60" cy="60" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="20" y="20"  width="80" height="80"></image>',link_field_0:'<text text-anchor="middle" fill="#aeaeae" '+e.attr.width+'="290" x="0" y="0" style="font-size:10px;">{val}</text>',editFormHeaderColor:"#039BE5"},e.templates.ana={defs:"",size:[250,120],linkAdjuster:{fromX:0,fromY:0,toX:0,toY:0},ripple:{radius:0,color:"#e6e6e6",rect:null},expandCollapseSize:30,svg:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  style="display:block;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',link:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="1px" fill="none" d="{rounded}" />',assistanseLink:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="2px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} {xd},{yd} L{xe},{ye}"/>',pointer:'<g data-pointer="pointer" transform="matrix(0,0,0,0,100,100)"><radialGradient id="pointerGradient"><stop stop-color="#ffffff" offset="0" /><stop stop-color="#C1C1C1" offset="1" /></radialGradient><circle cx="16" cy="16" r="16" stroke-width="1" stroke="#acacac" fill="url(#pointerGradient)"></circle></g>',node:'<rect x="0" y="0" height="{h}" width="{w}" fill="#039BE5" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',plus:'<circle cx="15" cy="15" r="15" class="boc-fill" stroke="#aeaeae" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#aeaeae"></line><line x1="15" y1="4" x2="15" y2="26" stroke-width="1" stroke="#aeaeae"></line>',minus:'<circle cx="15" cy="15" r="15" class="boc-fill" stroke="#aeaeae" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#aeaeae"></line>',up:'<rect x="20" y="-25" width="30" height="17" fill="#aeaeae" rx="3" ry="3"></rect><line x1="35" x2="35" y1="0" y2="-8" stroke="#aeaeae" stroke-width="1"></line>',nodeMenuButton:'<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',menuButton:e.templates.base.menuButton,img_0:'<clipPath id="{randId}"><circle cx="50" cy="30" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="10" y="-10"  width="80" height="80"></image>',link_field_0:'<text text-anchor="middle" fill="#aeaeae" '+e.attr.width+'="290" x="0" y="0" style="font-size:10px;">{val}</text>',field_0:"<text "+e.attr.width+'="230" style="font-size: 18px;" fill="#ffffff" x="125" y="95" text-anchor="middle">{val}</text>',field_1:"<text "+e.attr.width+'="130" '+e.attr.text_overflow+'="multiline" style="font-size: 14px;" fill="#ffffff" x="230" y="30" text-anchor="end">{val}</text>',padding:[50,20,35,20],editFormHeaderColor:"#039BE5"},e.templates.split=Object.assign({},e.templates.ana),e.templates.split.size=[10,10],e.templates.split.node='<circle cx="5" cy="5" r="5" fill="none" stroke-width="1" stroke="#aeaeae"></circle>',e.templates.split.field_0="",e.templates.split.field_1="",e.templates.split.img_0="",e.templates.dot=Object.assign({},e.templates.split),e.templates.group=Object.assign({},e.templates.ana),e.templates.group.size=[250,120],e.templates.group.node='<rect rx="50" ry="50" x="0" y="0" height="{h}" width="{w}" fill="#f2f2f2" stroke-width="0"></rect>',e.templates.group.link='<path stroke="#aeaeae" stroke-width="1px" fill="none" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}"/>',e.templates.group.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,{ew},25)" '+e.attr.control_node_menu_id+'="{id}"><g transform="matrix(1,0,0,1,-22,-8)"><rect x="0" y="0" fill="red" fill-opacity="0" width="18" height="22"></rect><line x1="0" y1="2" x2="9" y2="2" stroke="#aeaeae" stroke-width="1"></line><line x1="0" y1="9" x2="18" y2="9" stroke="#aeaeae" stroke-width="1"></line><line x1="0" y1="16" x2="22" y2="16" stroke="#aeaeae" stroke-width="1"></line></g></g>',e.templates.group.field_0="<text "+e.attr.width+'="230" style="font-size: 18px;" fill="#aeaeae" x="{cw}" y="30" text-anchor="middle">{val}</text>',e.templates.group.field_1="",e.templates.group.ripple={radius:50,color:"#aeaeae"},e.templates.invisibleGroup=Object.assign({},e.templates.group),e.templates.invisibleGroup.node="",e.templates.invisibleGroup.padding=[0,0,0,0],e.templates.invisibleGroup.field_0="",e.templates.invisibleGroup.nodeMenuButton="",e.templates.mirror={linkAdjuster:{},link:"",node:"",nodeMenuButton:"",size:[0,0]},e.templates.ula=Object.assign({},e.templates.ana),e.templates.ula.field_0="<text "+e.attr.width+'="145" style="font-size: 18px;" fill="#039BE5" x="100" y="55">{val}</text>',e.templates.ula.field_1="<text "+e.attr.width+'="145" '+e.attr.text_overflow+'="multiline" style="font-size: 14px;" fill="#afafaf" x="100" y="76">{val}</text>',e.templates.ula.node='<rect x="0" y="0" height="{h}" width="{w}" fill="#ffffff" stroke-width="1" stroke="#aeaeae"></rect><line x1="0" y1="0" x2="250" y2="0" stroke-width="2" stroke="#039BE5"></line>',e.templates.ula.img_0='<clipPath id="{randId}"><circle cx="50" cy="60" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="10" y="20" width="80" height="80" ></image>',e.templates.ula.menu='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,12)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#ffffff" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#039BE5"></circle><circle cx="7" cy="0" r="2" fill="#039BE5"></circle><circle cx="14" cy="0" r="2" fill="#039BE5"></circle></g>',e.templates.ula.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#AEAEAE"></circle><circle cx="7" cy="0" r="2" fill="#AEAEAE"></circle><circle cx="14" cy="0" r="2" fill="#AEAEAE"></circle></g>',e.templates.olivia=Object.assign({},e.templates.ana),e.templates.olivia.defs='<style>\n                                    #olivia_gradient {\n                                        --color-stop-1: #ffffff;\n                                        --color-stop-2: #eeeeee;\n                                        --opacity-stop: 1;\n                                    }\n                                    .olivia-f0{\n                                        font-size: 18px;\n                                        fill: #757575;\n                                    }\n                                    .olivia-f1{\n                                        font-size: 14px;\n                                        fill: #757575;\n                                    }\n                                    .boc-dark .olivia-f0,.boc-dark .olivia-f1{\n                                        fill: #aeaeae;\n                                    }\n                                    .boc-dark #olivia_gradient {\n                                        --color-stop-1: #646464;\n                                        --color-stop-2: #363636;\n                                        --opacity-stop: 1;\n                                    }\n                                </style>\n                                \'<linearGradient id="olivia_gradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="var(--color-stop-1)" stop-opacity="var(--opacity-stop)"/><stop offset="100%" stop-color="var(--color-stop-2)" stop-opacity="var(--opacity-stop)" /></linearGradient>',e.templates.olivia.field_0="<text "+e.attr.width+'="135" class="olivia-f0" x="100" y="55">{val}</text>',e.templates.olivia.field_1="<text "+e.attr.width+'="135" class="olivia-f1" x="100" y="76">{val}</text>',e.templates.olivia.node='<rect fill="url(#olivia_gradient)" x="0" y="0" height="{h}" width="{w}" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',e.templates.olivia.img_0='<clipPath id="{randId}"><circle cx="50" cy="60" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="10" y="20" width="80" height="80" ></image>',e.templates.olivia.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#AEAEAE"></circle><circle cx="7" cy="0" r="2" fill="#AEAEAE"></circle><circle cx="14" cy="0" r="2" fill="#AEAEAE"></circle></g>',e.templates.belinda=Object.assign({},e.templates.ana),e.templates.belinda.size=[180,180],e.templates.belinda.ripple={radius:90,color:"#e6e6e6",rect:null},e.templates.belinda.node='<circle cx="90" cy="90" r="90" fill="#039BE5" stroke-width="1" stroke="#aeaeae"></circle>',e.templates.belinda.img_0='<clipPath id="{randId}"><circle cx="90" cy="45" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="50" y="5" width="80" height="80" ></image>',e.templates.belinda.field_0="<text "+e.attr.width+'="170" style="font-size: 18px;" text-anchor="middle" fill="#ffffff"  x="90" y="105">{val}</text>',e.templates.belinda.field_1="<text "+e.attr.width+'="160" style="font-size: 14px;" text-anchor="middle" fill="#ffffff"  x="90" y="125">{val}</text>',e.templates.belinda.link='<path stroke="#aeaeae" stroke-width="1px" fill="none" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}"/>',e.templates.belinda.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,79,5)" '+e.attr.control_node_menu_id+'="{id}"><rect x="0" y="0" fill="#000000" fill-opacity="0" width="22" height="22"></rect><line stroke-width="2" stroke="#000" x1="0" y1="3" x2="22" y2="3"></line><line stroke-width="2" stroke="#000" x1="0" y1="9" x2="22" y2="9"></line><line stroke-width="2" stroke="#000" x1="0" y1="15" x2="22" y2="15"></line></g>',e.templates.rony=Object.assign({},e.templates.ana),e.templates.rony.svg='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="background-color:#E8E8E8;display:block;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',e.templates.rony.defs='<filter id="{randId}" x="0" y="0" width="200%" height="200%"><feOffset result="offOut" in="SourceAlpha" dx="5" dy="5"></feOffset><feGaussianBlur result="blurOut" in="offOut" stdDeviation="5"></feGaussianBlur><feBlend in="SourceGraphic" in2="blurOut" mode="normal"></feBlend></filter>',e.templates.rony.size=[180,250],e.templates.rony.ripple={color:"#F57C00",radius:5,rect:null},e.templates.rony.img_0='<clipPath id="{randId}"><circle cx="90" cy="160" r="60"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="30" y="100"  width="120" height="120"></image>',e.templates.rony.node='<rect filter="url(#{randId})" x="0" y="0" height="250" width="180" fill="#ffffff" stroke-width="0" rx="7" ry="7"></rect>',e.templates.rony.field_0="<text "+e.attr.width+'="165" style="font-size: 18px;" fill="#039BE5" x="90" y="40" text-anchor="middle">{val}</text>',e.templates.rony.field_1="<text "+e.attr.width+'="165" style="font-size: 14px;" fill="#F57C00" x="90" y="60" text-anchor="middle">{val}</text>',e.templates.rony.field_2="<text "+e.attr.width+'="165" style="font-size: 14px;" fill="#FFCA28" x="90" y="80" text-anchor="middle">{val}</text>',e.templates.rony.link='<path stroke="#039BE5" stroke-width="1px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} L{xd},{yd}"/>',e.templates.rony.plus='<circle cx="15" cy="15" r="15" fill="#ffffff" stroke="#039BE5" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#039BE5"></line><line x1="15" y1="4" x2="15" y2="26" stroke-width="1" stroke="#039BE5"></line>',e.templates.rony.minus='<circle cx="15" cy="15" r="15" fill="#ffffff" stroke="#039BE5" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#039BE5"></line>',e.templates.rony.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,155,235)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#F57C00"></circle><circle cx="7" cy="0" r="2" fill="#F57C00"></circle><circle cx="14" cy="0" r="2" fill="#F57C00"></circle></g>',e.templates.mery=Object.assign({},e.templates.ana),e.templates.mery.ripple={color:"#e6e6e6",radius:50,rect:null},e.templates.mery.node='<rect x="0" y="0" height="120" width="250" fill="#ffffff" stroke-width="1" stroke="#686868" rx="50" ry="50"></rect><rect x="0" y="45" height="30" width="250" fill="#039BE5" stroke-width="1"></rect>',e.templates.mery.link='<path stroke="#aeaeae" stroke-width="1px" fill="none" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}" />',e.templates.mery.img_0='<clipPath id="{randId}"><circle cx="125" cy="60" r="24"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="95" y="33"  width="60" height="60"></image>',e.templates.mery.field_0="<text "+e.attr.width+'="220" style="font-size: 18px;" fill="#039BE5" x="125" y="30" text-anchor="middle">{val}</text>',e.templates.mery.field_1="<text "+e.attr.width+'="220" style="font-size: 14px;" fill="#039BE5" x="125" y="100" text-anchor="middle">{val}</text>',e.templates.mery.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,60)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',e.templates.polina=Object.assign({},e.templates.ana),e.templates.polina.size=[300,80],e.templates.polina.ripple={color:"#e6e6e6",radius:40,rect:null},e.templates.polina.node='<rect x="0" y="0" height="80" width="300" fill="#039BE5" stroke-width="1" stroke="#686868" rx="40" ry="40"></rect>',e.templates.polina.img_0='<clipPath id="{randId}"><circle  cx="40" cy="40" r="35"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="0" y="0"  width="80" height="80"></image>',e.templates.polina.field_0="<text "+e.attr.width+'="210" style="font-size: 18px;" fill="#ffffff" x="80" y="30" text-anchor="start">{val}</text>',e.templates.polina.field_1="<text "+e.attr.width+'="210" style="font-size: 14px;" fill="#ffffff" x="80" y="55" text-anchor="start">{val}</text>',e.templates.polina.link='<path stroke="#686868" stroke-width="1px" fill="none" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}" />',e.templates.polina.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,285,33)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="0" cy="7" r="2" fill="#ffffff"></circle><circle cx="0" cy="14" r="2" fill="#ffffff"></circle></g>',e.templates.mila=Object.assign({},e.templates.ana),e.templates.mila.node='<rect x="0" y="0" height="120" width="250" fill="#039BE5" stroke-width="1" stroke="#aeaeae"></rect><rect x="-5" y="70" height="30" width="260" fill="#ffffff" stroke-width="1" stroke="#039BE5"></rect><line x1="-5" x2="0" y1="100" y2="105" stroke-width="1" stroke="#039BE5"/><line x1="255" x2="250" y1="100" y2="105" stroke-width="1" stroke="#039BE5"/>',e.templates.mila.img_0='<image preserveAspectRatio="xMidYMid slice" xlink:href="{val}" x="20" y="5"  width="64" height="64"></image>',e.templates.mila.field_0="<text "+e.attr.width+'="240" style="font-size: 18px;" fill="#039BE5" x="125" y="92" text-anchor="middle">{val}</text>',e.templates.mila.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,110)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',e.templates.diva=Object.assign({},e.templates.ana),e.templates.diva.size=[200,170],e.templates.diva.node='<rect x="0" y="80" height="90" width="200" fill="#039BE5"></rect><circle cx="100" cy="50" fill="#ffffff" r="50" stroke="#039BE5" stroke-width="2"></circle>',e.templates.diva.img_0='<clipPath id="{randId}"><circle cx="100" cy="50" r="45"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="50" y="0"  width="100" height="100"></image>',e.templates.diva.field_0="<text "+e.attr.width+'="185" style="font-size: 18px;" fill="#ffffff" x="100" y="125" text-anchor="middle">{val}</text>',e.templates.diva.field_1="<text "+e.attr.width+'="185" style="font-size: 14px;" fill="#ffffff" x="100" y="145" text-anchor="middle">{val}</text>',e.templates.diva.pointer='<g data-pointer="pointer" transform="matrix(0,0,0,0,100,100)"><radialGradient id="pointerGradient"><stop stop-color="#ffffff" offset="0" /><stop stop-color="#039BE5" offset="1" /></radialGradient><circle cx="16" cy="16" r="16" stroke-width="1" stroke="#acacac" fill="url(#pointerGradient)"></circle></g>',e.templates.diva.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,175,155)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',e.templates.luba=Object.assign({},e.templates.ana),e.templates.luba.svg='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block;background-color: #2E2E2E;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',e.templates.luba.defs='<linearGradient id="{randId}" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#646464;stop-opacity:1" /><stop offset="100%" style="stop-color:#363636;stop-opacity:1" /></linearGradient>',e.templates.luba.node='<rect fill="url(#{randId})" x="0" y="0" height="120" width="250" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',e.templates.luba.img_0='<clipPath id="{randId}"><circle cx="50" cy="25" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="10" y="-15"  width="80" height="80"></image>',e.templates.luba.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#aeaeae"></circle><circle cx="7" cy="0" r="2" fill="#aeaeae"></circle><circle cx="14" cy="0" r="2" fill="#aeaeae"></circle></g>',e.templates.luba.field_0="<text "+e.attr.width+'="235" style="font-size: 18px;" fill="#aeaeae" x="125" y="90" text-anchor="middle">{val}</text>',e.templates.luba.field_1="<text "+e.attr.width+'="140" style="font-size: 14px;" fill="#aeaeae" x="240" y="30" text-anchor="end">{val}</text>',e.templates.luba.plus='<rect x="0" y="0" width="36" height="36" rx="12" ry="12" fill="#2E2E2E" stroke="#aeaeae" stroke-width="1"></rect><line x1="4" y1="18" x2="32" y2="18" stroke-width="1" stroke="#aeaeae"></line><line x1="18" y1="4" x2="18" y2="32" stroke-width="1" stroke="#aeaeae"></line>',e.templates.luba.minus='<rect x="0" y="0" width="36" height="36" rx="12" ry="12" fill="#2E2E2E" stroke="#aeaeae" stroke-width="1"></rect><line x1="4" y1="18" x2="32" y2="18" stroke-width="1" stroke="#aeaeae"></line>',e.templates.luba.expandCollapseSize=36,e.templates.isla=Object.assign({},e.templates.ana),e.templates.isla.defs='<filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="isla-shadow"><feOffset dx="0" dy="4" in="SourceAlpha" result="shadowOffsetOuter1" /><feGaussianBlur stdDeviation="10" in="shadowOffsetOuter1" result="shadowBlurOuter1" /><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1" /><feMerge><feMergeNode in="shadowMatrixOuter1" /><feMergeNode in="SourceGraphic" /></feMerge></filter>',e.templates.isla.size=[180,120],e.templates.isla.node='<rect filter="url(#isla-shadow)" x="0" y="20" rx="7" ry="7" height="100" width="180" fill="#FFF" stroke-width="1" stroke="#039BE5" ></rect><rect x="25" y="75" rx="10" ry="10" height="20" width="130" fill="#039BE5" stroke-width="3" stroke="#039BE5"></rect><rect fill="#ffffff" stroke="#039BE5" stroke-width="1" x="70" y="0" rx="13" ry="13" width="40" height="40"></rect><circle stroke="#FFCA28" stroke-width="3" fill="none" cx="90" cy="12" r="8"></circle><path d="M75,34 C75,17 105,17 105,34" stroke="#FFCA28" stroke-width="3" fill="none"></path>',e.templates.isla.field_0="<text "+e.attr.width+'="120" style="font-size: 12px;" fill="#fff" x="90" y="90" text-anchor="middle">{val}</text>',e.templates.isla.field_1="<text "+e.attr.width+'="160" style="font-size: 13px;" fill="#039BE5" x="90" y="64" text-anchor="middle">{val}</text>',e.templates.isla.img_0='<clipPath id="{randId}"><rect filter="url(#isla-shadow)" fill="#ffffff" stroke="#039BE5" stroke-width="1" x="70" y="0" rx="13" ry="13" width="40" height="40"></rect></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="70" y="0"  width="40" height="40"></image>',e.templates.isla.minus='<circle cx="15" cy="15" r="15" fill="#F57C00" stroke="#F57C00" stroke-width="1"></circle><line x1="8" y1="15" x2="22" y2="15" stroke-width="1" stroke="#ffffff"></line>',e.templates.isla.plus='<circle cx="15" cy="15" r="15" fill="#ffffff" stroke="#039BE5" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#039BE5"></line><line x1="15" y1="4" x2="15" y2="26" stroke-width="1" stroke="#039BE5"></line>',e.templates.isla.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,83,45)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#F57C00"></circle><circle cx="7" cy="0" r="2" fill="#F57C00"></circle><circle cx="14" cy="0" r="2" fill="#F57C00"></circle></g>',e.templates.isla.ripple={radius:0,color:"#F57C00",rect:{x:0,y:20,width:180,height:100}},e.templates.deborah=Object.assign({},e.templates.polina),e.templates.deborah.size=[150,150],e.templates.deborah.node='<rect x="0" y="0" height="150" width="150" fill="#039BE5" stroke-width="1" stroke="#686868" rx="15" ry="15"></rect>',e.templates.deborah.img_0='<clipPath id="{randId}"><rect fill="#ffffff" stroke="#039BE5" stroke-width="1" x="5" y="5" rx="15" ry="15" width="140" height="140"></rect></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="5" y="5"  width="140" height="140"></image><rect x="3" y="5" height="30" width="144" fill="#039BE5" opacity="0.5" rx="3" ry="3"></rect><rect x="3" y="115" height="30" width="144" fill="#039BE5" opacity="0.5" rx="3" ry="3"></rect>',e.templates.deborah.field_0="<text "+e.attr.width+'="125" '+e.attr.text_overflow+'="ellipsis" style="font-size: 18px;" fill="#ffffff" x="15" y="25" text-anchor="start">{val}</text>',e.templates.deborah.field_1="<text "+e.attr.width+'="105" '+e.attr.text_overflow+'="ellipsis" style="font-size: 11px;" fill="#ffffff" x="15" y="135" text-anchor="start">{val}</text>',e.templates.deborah.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,125,130)" '+e.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',e.templates.subLevel=Object.assign({},e.templates.base),e.templates.subLevel.size=[0,0],e.templates.subLevel.node="",e.templates.subLevel.plus="",e.templates.subLevel.minus="",e.templates.subLevel.nodeMenuButton="",e.templates.group_dotted_lines=Object.assign({},e.templates.group),e.templates.group_dotted_lines.size=[250,120],e.templates.group_dotted_lines.link='<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="1px" fill="none" d="{rounded}" />',e.templates.group_dotted_lines.node='<rect rx="5" ry="5" x="0" y="0" height="{h}" width="{w}" fill="#e5e5e5" stroke-width="0"></rect>',e.templates.group_dotted_lines.nodeGroupDottedCloseButton='<g transform="matrix(1,0,0,1,{ew},0)"><circle cx="0.5" cy="21.5" r="12" fill="#F57C00"></circle>'+e.icon.close(25,25,"#fff",-13,8)+"</g>",e.templates.group_dotted_lines.field_0='<text data-width="230" style="font-size: 18px;" fill="#F57C00" x="20" y="30" text-anchor="start">Dotted Lines</text>',e.templates.group_dotted_lines.field_1="",e.templates.group_dotted_lines.img_0="",e.templates.group_dotted_lines.ripple.radius=5,e.templates.group_dotted_lines.min=Object.assign({},e.templates.olivia),e.templates.group_dotted_lines.min.nodeGroupDottedOpenButton='<g transform="matrix(1,0,0,1,220,10)"><rect x="0" y="0" width="22" height="22" stroke="#aeaeae" stroke-width="1" fill="#ffffff" rx="5" ry="5"></rect><text x="11" y="16" text-anchor="middle" style="font-size: 14px;" fill="#2A292E">{children-total-count}</text><rect x="0" y="0" width="22" height="22" style="opacity: 0" stroke="#aeaeae" stroke-width="1" fill="red" rx="5" ry="5"></rect></g>',e.ui={_defsIds:{},defs:function(t){var i="";for(var n in e.templates){var o=e.templates[n];o.defs&&(e.ui._defsIds[n]=e.randomId(),i+=o.defs.replaceAll("{randId}",e.ui._defsIds[n]))}return"<defs>"+i+t+"</defs>"},lonely:function(t){return t.nodes&&t.nodes.length?"":e.IT_IS_LONELY_HERE.replace("{link}",e.RES.IT_IS_LONELY_HERE_LINK)},pointer:function(t,i,n){return i===e.action.exporting?"":e.t(t.template,!1,n).pointer},node:function(t,i,n,o,r,a,s,c,l,p){var d=e.t(t.templateName,t.min,l),h=d.node.replaceAll("{w}",t.w).replaceAll("{h}",t.h);d.defs&&(h=h.replaceAll("{randId}",e.ui._defsIds[t.templateName])),null==s&&(s=o.nodeBinding);var u={node:t,data:i};for(var f in s){var v,x=s[f];i&&(v=i[x]);var _=e._lblIsImg(o,f);if(u.value=v,u.element=d[f],u.name=x,u.field=f,!1!==e.events.publish("field",[p,u])&&null!=u.value&&null!=u.value&&null!=u.element&&(!_||_&&!e.isNEU(u.value))){if(!_&&"string"==typeof u.value){var g=u.element;g&&(g=g.replaceAll("{ew}",t.w-(t.padding?t.padding[1]:0)).replaceAll("{cw}",t.w/2)),u.value=e.wrapText(u.value,g)}var y=u.element.replace("{val}",u.value);h+=y=y.replaceAll("{ew}",t.w-(t.padding?t.padding[1]:0)).replaceAll("{cw}",t.w/2).replaceAll("{randId}",e.randomId()).replaceAll("{randId2}",e.randomId())}}var b=e._getPosition(n,t,r,a),m="node";Array.isArray(t.tags)&&t.tags.length&&(m+=" "+t.tags.join(" ")),t.layout&&(m+=" tree-layout");var w="";t.lcn&&(w='lcn="'+t.lcn+'"');var S=e.nodeOpenTag.replace("{lcn}",w).replace("{id}",t.id).replace("{class}",m).replace("{sl}",t.sl).replace("{level}",t.level).replace("{x}",b.x).replace("{y}",b.y),k=e._getOpacity(n,t);return(S=S.replace("{opacity}",k))+(h+=e.ui.nodeBtns(o,t,c,d,p))+e.grCloseTag},nodeBtns:function(t,i,n,o,r){var a="";return null==t.nodeMenu||i.isSplit||n===e.action.exporting||(a+=o.nodeMenuButton.replace("{id}",i.id).replace("{cw}",i.w/2).replace("{ch}",i.h/2).replace("{ew}",i.w-(i.padding?i.padding[1]:0)).replace("{eh}",i.h-(i.padding?i.padding[2]:0))),null==t.nodeCircleMenu||i.isSplit||n===e.action.exporting||e.isNEU(o.nodeCircleMenuButton)||(a+='<g style="cursor:pointer;" transform="matrix(1,0,0,1,'+o.nodeCircleMenuButton.x+","+o.nodeCircleMenuButton.y+')" '+e.attr.control_node_circle_menu_id+'="'+i.id+'"><circle cx="0" cy="0" fill="'+o.nodeCircleMenuButton.color+'" r="'+o.nodeCircleMenuButton.radius+'" stroke-width="1" stroke="'+o.nodeCircleMenuButton.stroke+'"></circle><line x1="-'+o.nodeCircleMenuButton.radius/2+'" y1="-6" x2="'+o.nodeCircleMenuButton.radius/2+'" y2="-6" stroke-width="2" stroke="'+o.nodeCircleMenuButton.stroke+'"></line><line x1="-'+o.nodeCircleMenuButton.radius/2+'" y1="0" x2="'+o.nodeCircleMenuButton.radius/2+'" y2="0" stroke-width="2" stroke="'+o.nodeCircleMenuButton.stroke+'"></line><line x1="-'+o.nodeCircleMenuButton.radius/2+'" y1="6" x2="'+o.nodeCircleMenuButton.radius/2+'" y2="6" stroke-width="2" stroke="'+o.nodeCircleMenuButton.stroke+'"></line></g>'),a},expandCollapseBtn:function(t,i,n,o,r){var a="";if(o!==e.action.exporting&&!i.isSplit){var s=n[i.lcn?i.lcn:"base"],c=0,l=0,p=e.t(i.templateName,i.min,r);if(i.childrenIds.length>0){if(i.hasPartners){for(var d=!1,h=0;h<i.childrenIds.length;h++){var u=t.getNode(i.childrenIds[h]);!u||u.parentPartner||u.isPartner||(d=!0)}if(!d)return""}switch(s.orientation){case e.orientation.top:case e.orientation.top_left:c=i.x+i.w/2,l=i.y+i.h;break;case e.orientation.bottom:case e.orientation.bottom_left:c=i.x+i.w/2,l=i.y;break;case e.orientation.right:case e.orientation.right_top:c=i.x,l=i.y+i.h/2;break;case e.orientation.left:case e.orientation.left_top:c=i.x+i.w,l=i.y+i.h/2}if(c-=p.expandCollapseSize/2,l-=p.expandCollapseSize/2,t.getCollapsedIds(i).length?(a+=e.expcollOpenTag.replace("{id}",i.id).replace("{x}",c).replace("{y}",l),a+=p.plus,a+=e.grCloseTag):(a+=e.expcollOpenTag.replace("{id}",i.id).replace("{x}",c).replace("{y}",l),a+=p.minus,a+=e.grCloseTag),-1!=a.indexOf("{collapsed-children-count}")){var f=e.collapsedChildrenCount(t,i);a=a.replace("{collapsed-children-count}",f)}if(-1!=a.indexOf("{collapsed-children-total-count}")){var v=e.collapsedChildrenTotalCount(t,i);a=a.replace("{collapsed-children-total-count}",v)}if(-1!=a.indexOf("{children-count}")){var x=e.childrenCount(t,i);a=a.replace("{children-count}",x)}if(-1!=a.indexOf("{children-total-count}")){var _=e.childrenTotalCount(t,i);a=a.replace("{children-total-count}",_)}}t._nodeHasHiddenParent(i)&&(a+=e.upOpenTag.replace("{id}",i.id).replace("{x}",i.x).replace("{y}",i.y),a+=p.up,a+=e.grCloseTag)}var g={html:a,node:i};return e.events.publish("renderbuttons",[t,g]),g.html},link:function(t,i,n,o,r,a,s){var l=i._layoutConfigs[t.lcn?t.lcn:"base"],p=e.t(t.templateName,t.min,n),d=[],h=[],u=l.levelSeparation/2;t.layout>0&&(u=l.mixedHierarchyNodesSeparation/2);var f=0,v=e.getRootOf(t).id,x=o[v][t.sl],_=void 0;if(t.hasPartners){_={ids:[],indexes:{},ppnodes:{},lastLeft:null,firstRight:null,maxSidePartnersWithChildren:0,rightIds:[],leftIds:[],partnerChildrenSplitSeparation:i.config.partnerChildrenSplitSeparation};for(var g=0;g<t.children.length;g++)(b=t.children[g]).parentPartner?(_.ppnodes[b.id]=b.parentPartner,_.ids.push(b.id),1==b.parentPartner.isPartner?(-1==_.rightIds.indexOf(b.parentPartner.id)&&_.rightIds.push(b.parentPartner.id),_.indexes[b.id]=_.rightIds.indexOf(b.parentPartner.id),_.firstRight||(_.firstRight=b)):2==b.parentPartner.isPartner&&(-1==_.leftIds.indexOf(b.parentPartner.id)&&_.leftIds.push(b.parentPartner.id),_.indexes[b.id]=_.leftIds.indexOf(b.parentPartner.id),_.lastLeft=b)):b.isPartner||(_.lastLeft=b,_.firstRight||(_.firstRight=b));_.maxSidePartnersWithChildren=Math.max(_.leftIds.length,_.rightIds.length),f=0==_.maxSidePartnersWithChildren?i.config.minPartnerSeparation/2:i.config.minPartnerSeparation/2+_.partnerChildrenSplitSeparation*_.maxSidePartnersWithChildren+_.partnerChildrenSplitSeparation/2}for(g=0;g<t.children.length;g++){var y,b=t.children[g],m=o[v][b.sl],w={xa:0,ya:0,xb:0,yb:0,xc:0,yc:0,xd:0,yd:0,x:0,y:0,rotate:0},S=(p=e.t(b.templateName,b.min,n)).link;if(b.isChildOfPartner)switch(l.orientation){case e.orientation.top:case e.orientation.top_left:var k=1==b.layout?void 0:m.minY-(m.minY-x.maxY)/2;w=e.ui._linkTopToBottom(b.parentPartner,b,p,u,k);break;case e.orientation.bottom:case e.orientation.bottom_left:w=e.ui._linkBottomToTop(b.parentPartner,b,p,u,k=1==b.layout?void 0:m.maxY-(m.maxY-x.minY)/2);break;case e.orientation.right:case e.orientation.right_top:w=e.ui._linkRightToLeft(b.parentPartner,b,p,u,k=1==b.layout?void 0:m.maxX-(m.maxX-x.minX)/2);break;case e.orientation.left:case e.orientation.left_top:w=e.ui._linkLeftToRight(b.parentPartner,b,p,u,k=1==b.layout?void 0:m.minX-(m.minX-x.maxX)/2)}else if(_&&-1!=_.ids.indexOf(b.id))switch(l.orientation){case e.orientation.top:case e.orientation.top_left:w=e.ui._linkPpTop(_,t,b,m,x,p);break;case e.orientation.bottom:case e.orientation.bottom_left:w=e.ui._linkPpBottom(_,t,b,m,x,p);break;case e.orientation.right:case e.orientation.right_top:w=e.ui._linkPpRight(_,t,b,m,x,p);break;case e.orientation.left:case e.orientation.left_top:w=e.ui._linkPpLeft(_,t,b,m,x,p)}else{var A=b.isAssistant&&b.leftNeighbor&&b.leftNeighbor.isAssistant&&b.parent==b.leftNeighbor.parent;if((b.isAssistant&&b.rightNeighbor&&b.rightNeighbor.isAssistant&&b.parent==b.rightNeighbor.parent||b.layout>1)&&b.rightNeighbor&&b.rightNeighbor.isSplit)switch(l.orientation){case e.orientation.top:case e.orientation.top_left:case e.orientation.bottom:case e.orientation.bottom_left:w=e.ui._linkRightToLeft(b.rightNeighbor,b,p,u);break;case e.orientation.right:case e.orientation.right_top:case e.orientation.left:case e.orientation.left_top:w=e.ui._linkBottomToTop(b.rightNeighbor,b,p,u)}else if((A||b.layout>1)&&b.leftNeighbor&&b.leftNeighbor.isSplit)switch(l.orientation){case e.orientation.top:case e.orientation.top_left:case e.orientation.bottom:case e.orientation.bottom_left:w=e.ui._linkLeftToRight(b.leftNeighbor,b,p,u);break;case e.orientation.right:case e.orientation.right_top:case e.orientation.left:case e.orientation.left_top:w=e.ui._linkTopToBottom(b.leftNeighbor,b,p,u)}else switch(l.orientation){case e.orientation.top:case e.orientation.top_left:w=1==b.isPartner?e.ui._linkLeftToRight(t,b,p,f):2==b.isPartner?e.ui._linkRightToLeft(t,b,p,f):e.ui._linkTopToBottom(t,b,p,u,k=1==b.layout?void 0:m.minY-(m.minY-x.maxY)/2);break;case e.orientation.bottom:case e.orientation.bottom_left:w=1==b.isPartner?e.ui._linkLeftToRight(t,b,p,f):2==b.isPartner?e.ui._linkRightToLeft(t,b,p,f):e.ui._linkBottomToTop(t,b,p,u,k=1==b.layout?void 0:m.maxY-(m.maxY-x.minY)/2);break;case e.orientation.right:case e.orientation.right_top:w=1==b.isPartner?e.ui._linkTopToBottom(t,b,p,f):2==b.isPartner?e.ui._linkBottomToTop(t,b,p,f):e.ui._linkRightToLeft(t,b,p,u,k=1==b.layout?void 0:m.maxX-(m.maxX-x.minX)/2);break;case e.orientation.left:case e.orientation.left_top:w=1==b.isPartner?e.ui._linkTopToBottom(t,b,p,f):2==b.isPartner?e.ui._linkBottomToTop(t,b,p,f):e.ui._linkLeftToRight(t,b,p,u,k=1==b.layout?void 0:m.minX-(m.minX-x.maxX)/2)}}var M=e.ui._draggableLinkPath(i,t,b,w,u,l.orientation);if(M)y=M,S=S.replace("{rounded}",M).replace("{edge}",M).replace("{curve}",y);else if(-1!=S.indexOf("{rounded}"))if(w.xa==w.xb&&w.xa==w.xc&&w.xa==w.xd||w.ya==w.yb&&w.ya==w.yc&&w.ya==w.yd)S=S.replace("{rounded}",y="M"+w.xa+","+w.ya+" L"+w.xd+","+w.yd);else if(Math.abs(w.xa-w.xd)<=e.LINK_ROUNDED_CORNERS&&Math.abs(w.xa-w.xc)<=e.LINK_ROUNDED_CORNERS&&Math.abs(w.xa-w.xb)<=e.LINK_ROUNDED_CORNERS)S=S.replace("{rounded}",y="M"+w.xa+","+w.ya+" L"+w.xa+","+w.yd);else if(Math.abs(w.ya-w.yd)<=e.LINK_ROUNDED_CORNERS&&Math.abs(w.ya-w.yc)<=e.LINK_ROUNDED_CORNERS&&Math.abs(w.ya-w.yb)<=e.LINK_ROUNDED_CORNERS)S=S.replace("{rounded}",y="M"+w.xa+","+w.ya+" L"+w.xd+","+w.ya);else{var N=e.ui._roundedEdge(w.xa,w.ya,w.xb,w.yb,w.xc,w.yc),C=e.ui._roundedEdge(w.xb,w.yb,w.xc,w.yc,w.xd,w.yd);S=S.replace("{rounded}",y="M"+N.x1+","+N.y1+" "+N.x2+","+N.y2+" Q"+N.qx1+","+N.qy1+" "+N.qx2+","+N.qy2+" L"+C.x2+","+C.y2+" Q"+C.qx1+","+C.qy1+" "+C.qx2+","+C.qy2+" L"+C.x3+","+C.y3)}else-1!=S.indexOf("{edge}")?S=S.replace("{edge}",y="M"+w.xa+","+w.ya+" "+w.xb+","+w.yb+" "+w.xc+","+w.yc+" L"+w.xd+","+w.yd):-1!=S.indexOf("{curve}")?S=S.replace("{curve}",y="M"+w.xa+","+w.ya+" C"+w.xb+","+w.yb+" "+w.xc+","+w.yc+" "+w.xd+","+w.yd):(y=S.replaceAll("{xa}",w.xa).replaceAll("{ya}",w.ya).replaceAll("{xb}",w.xb).replaceAll("{yb}",w.yb).replaceAll("{xc}",w.xc).replaceAll("{yc}",w.yc).replaceAll("{xd}",w.xd).replaceAll("{yd}",w.yd),S=y);d.push(e.linkOpenTag.replace("{id}",t.id).replace("{class}","link "+b.tags.join(" ")).replace("{child-id}",b.id));var U={node:t,cnode:b,p:w,html:S,action:a};e.events.publish("render-link",[i,U]),d.push(U.html),s&&h.push({id:t.id,childId:b.id,html:U.html});var R="";for(var P in i.config.linkBinding){var T=i.config.linkBinding[P],E=i._get(b.id);E&&(U.value=E[T],U.element=p[P],U.name=T,!1!==e.events.publish("label",[i,U])&&(e.isNEU(U.value)||e.isNEU(U.element)||(R+=U.element.replace("{val}",U.value))))}""!=R&&(R=e.linkFieldsOpenTag.replace("{x}",w.x).replace("{y}",w.y).replace("{rotate}",0)+R+e.grCloseTag,d.push(R)),d.push(e.grCloseTag)}return s?h:d.join("")},svg:function(t,i,n,o,r,a){return e.t(o.template,!1,a).svg.replace("{w}",t).replace("{h}",i).replace("{viewBox}",n).replace("{randId}",e.ui._defsIds[o.template]).replace("{mode}",o.mode).replace("{template}",o.template).replace("{content}",function(){return r})},menuButton:function(t){return null==t.menu?"":e.t(t.template,!1).menuButton.replaceAll("{p}",t.padding)},_roundedEdge:function(t,i,n,o,r,a){var s,c,l,p=e.LINK_ROUNDED_CORNERS,d=0;return t==n&&t==r||i==o&&i==a?(s=l=n,c=d=o):(t!=r&&n==r&&(s=l=n,c=o,i<a?d=o+p:i>a&&(d=o-p)),t<r&&n==r?n-=p:t>r&&n==r&&(n+=p),i!=a&&o==a&&(s=n,c=d=o,t<r?l=n+p:t>r&&(l=n-p)),i<a&&o==a?o-=p:i>a&&o==a&&(o+=p)),{x1:t,y1:i,x2:n,y2:o,x3:r,y3:a,qx1:s,qy1:c,qx2:l,qy2:d}},_linkTopToBottom:function(t,i,n,o,r){var a,s,c,l,p,d;return l=c=i.x+i.w/2+n.linkAdjuster.fromX,p=i.y+n.linkAdjuster.fromY,{xa:a=t.x+t.w/2+n.linkAdjuster.toX,ya:s=t.y+t.h+n.linkAdjuster.toY,xb:a,yb:d=t.rightNeighbor&&t.rightNeighbor.isAssistant&&"split"==i.templateName?t.rightNeighbor.y+t.rightNeighbor.h+o:"split"==t.templateName&&(i.isAssistant||i.layout>1)?p:"split"==i.templateName?s+o:r??p-o,xc:c,yc:d,xd:l,yd:p,x:c,y:e.isNEU(i.parentPartner)?d+16:d,rotate:0}},_linkBottomToTop:function(t,i,n,o,r){var a,s,c,l,p,d;return l=c=i.x+i.w/2+n.linkAdjuster.fromX,p=i.y+i.h+n.linkAdjuster.fromY,{xa:a=t.x+t.w/2+n.linkAdjuster.toX,ya:s=t.y+n.linkAdjuster.toY,xb:a,yb:d=t.rightNeighbor&&t.rightNeighbor.isAssistant&&"split"==i.templateName?t.rightNeighbor.y-o:"split"==t.templateName&&(i.isAssistant||i.layout>1)?p:"split"==i.templateName?s-o:r??p+o,xc:c,yc:d,xd:l,yd:p,x:c,y:d-14,rotate:0}},_linkRightToLeft:function(t,i,n,o,r){var a,s,l,p,d,h;return p=i.x+i.w+n.linkAdjuster.fromX,d=l=i.y+i.h/2+n.linkAdjuster.fromY,{xa:a=t.x+n.linkAdjuster.toX,ya:s=t.y+t.h/2+n.linkAdjuster.toY,xb:h=t.rightNeighbor&&t.rightNeighbor.isAssistant&&"split"==i.templateName?t.rightNeighbor.x-o:"split"==t.templateName&&(i.isAssistant||i.layout>1)?p:"split"==i.templateName?a-o:r??p+o,yb:s,xc:h,yc:l,xd:p,yd:d,x:h-16,y:l,rotate:90}},_linkLeftToRight:function(t,i,n,o,r){var a,s,l,p,d,h;return p=i.x+n.linkAdjuster.fromX,d=l=i.y+i.h/2+n.linkAdjuster.fromY,{xa:a=t.x+t.w+n.linkAdjuster.toX,ya:s=t.y+t.h/2+n.linkAdjuster.toY,xb:h=t.rightNeighbor&&t.rightNeighbor.isAssistant&&"split"==i.templateName?t.rightNeighbor.x+t.rightNeighbor.w+o:"split"==t.templateName&&(i.isAssistant||i.layout>1)?p:"split"==i.templateName?a+o:r??p-o,yb:s,xc:h,yc:l,xd:p,yd:d,x:h+14,y:l,rotate:270}},_linkPpTop:function(t,i,n,o,r,a){var s=t.ppnodes[n.id],c=s.y+s.h/2,l=o.minY-(o.minY-r.maxY)/2,d=e.ui.__linkPpBottomTop(t,i,n,l,(o.minY-r.maxY)/t.maxSidePartnersWithChildren/4,s);return e.ui._linkTopToBottom({x:d.x,y:c,w:0,h:0},n,a,0,l=d.mid)},_linkPpBottom:function(t,i,n,o,r,a){var s=t.ppnodes[n.id],c=s.y+s.h/2,l=o.maxY-(o.maxY-r.minY)/2,d=e.ui.__linkPpBottomTop(t,i,n,l,(o.maxY-r.minY)/t.maxSidePartnersWithChildren/4,s);return e.ui._linkBottomToTop({x:d.x,y:c,w:0,h:0},n,a,0,l=d.mid)},_linkPpLeft:function(t,i,n,o,r,a){var s=t.ppnodes[n.id],c=o.minX-(o.minX-r.maxX)/2,p=s.x+s.w/2,d=e.ui.__linkPpLeftRight(t,i,n,c,(o.minX-r.maxX)/t.maxSidePartnersWithChildren/4,s);return e.ui._linkLeftToRight({x:p,y:d.y,w:0,h:0},n,a,0,c=d.mid)},_linkPpRight:function(t,i,n,o,r,a){var s=t.ppnodes[n.id],c=o.maxX-(o.maxX-r.minX)/2,p=s.x+s.w/2,d=e.ui.__linkPpLeftRight(t,i,n,c,(o.maxX-r.minX)/t.maxSidePartnersWithChildren/4,s);return e.ui._linkRightToLeft({x:p,y:d.y,w:0,h:0},n,a,0,c=d.mid)},__linkPpBottomTop:function(t,i,n,o,r,a){var s=0;return 1==a.isPartner?(s=a.x-i.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.rightIds.length-1)*t.partnerChildrenSplitSeparation/2,t.lastLeft&&s<t.lastLeft.x+t.lastLeft.w/2?o-=s<n.x+n.w/2?(t.indexes[n.id]+1)*r:(t.rightIds.length-t.indexes[n.id])*r:o+=s<n.x+n.w/2?(t.rightIds.length-t.indexes[n.id])*r:(t.indexes[n.id]+1)*r):2==a.isPartner&&(s=a.x+a.w+i.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.leftIds.length-1)*t.partnerChildrenSplitSeparation/2,t.firstRight&&s>t.firstRight.x+t.firstRight.w/2?o-=s<n.x+n.w/2?(t.indexes[n.id]+1)*r:(t.leftIds.length-t.indexes[n.id])*r:o+=s<n.x+n.w/2?(t.leftIds.length-t.indexes[n.id])*r:(t.indexes[n.id]+1)*r),{x:s,mid:o}},__linkPpLeftRight:function(t,i,n,o,r,a){var s=0;return 1==a.isPartner?(s=a.y-i.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.rightIds.length-1)*t.partnerChildrenSplitSeparation/2,t.lastLeft&&s<t.lastLeft.y+t.lastLeft.h/2?o-=s<n.y+n.h/2?(t.indexes[n.id]+1)*r:(t.rightIds.length-t.indexes[n.id])*r:o+=s<n.y+n.h/2?(t.rightIds.length-t.indexes[n.id])*r:(t.indexes[n.id]+1)*r):2==a.isPartner&&(s=a.y+a.h+i.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.leftIds.length-1)*t.partnerChildrenSplitSeparation/2,t.firstRight&&s>t.firstRight.y+t.firstRight.h/2?o-=s<n.y+n.h/2?(t.indexes[n.id]+1)*r:(t.leftIds.length-t.indexes[n.id])*r:o+=s<n.y+n.h/2?(t.leftIds.length-t.indexes[n.id])*r:(t.indexes[n.id]+1)*r),{y:s,mid:o}},_draggableLinkPath:function(t,i,n,o,r,a){if(n.isPartner||n.isAssistant)return null;if(e._isMoved(n)&&!e._isMoved(i)){var s=[];switch(a){case e.orientation.top:case e.orientation.top_left:if(o.yb+r/2<o.yd)return null;l=o.xa<o.xd?n.x-r/2:n.x+n.w+r/2,p=n.y-r/2;break;case e.orientation.bottom:case e.orientation.bottom_left:if(o.yb-r/2>o.yd)return null;l=o.xa<o.xd?n.x-r/2:n.x+n.w+r/2,p=n.y+n.h+r/2;break;case e.orientation.right:case e.orientation.right_top:if(o.xb-r/2>o.xd)return null;p=o.ya<o.yd?n.y-r/2:n.y+n.h+r/2,l=n.x+n.w+r/2;break;case e.orientation.left:case e.orientation.left_top:if(o.xb+r/2<o.xd)return null;p=o.ya<o.yd?n.y-r/2:n.y+n.h+r/2,l=n.x-r/2}switch(a){case e.orientation.top:case e.orientation.top_left:case e.orientation.bottom:case e.orientation.bottom_left:s.push(["M",o.xa,o.ya]),s.push(["L",o.xb,o.yb]),s.push(["L",l,o.yb]),s.push(["L",l,p]),s.push(["L",o.xd,p]),s.push(["L",o.xd,o.yd]);break;case e.orientation.right:case e.orientation.right_top:case e.orientation.left:case e.orientation.left_top:(s=[]).push(["M",o.xa,o.ya]),s.push(["L",o.xb,o.yb]),s.push(["L",o.xb,p]),s.push(["L",l,p]),s.push(["L",l,o.yd]),s.push(["L",o.xd,o.yd])}return e.roundPathCorners(s,e.LINK_ROUNDED_CORNERS,!1)}if(!e._isMoved(n)&&e._isMoved(i)){var c=!1;switch(s=[],a){case e.orientation.top:case e.orientation.top_left:if(o.ya+r/2>o.yb)c=!0,l=o.xa<o.xd?i.x+i.w+r/2:i.x-r/2,p=i.y+i.h+r;else{if(o.yb+r/2<o.yd)return null;l=o.xa<o.xd?n.x-r/2:n.x+n.w+r/2,p=n.y-r/2}break;case e.orientation.bottom:case e.orientation.bottom_left:if(o.ya-r/2<o.yb)c=!0,l=o.xa<o.xd?i.x+i.w+r/2:i.x-r/2,p=i.y-r;else{if(o.yb-r/2>o.yd)return null;l=o.xa<o.xd?n.x-r/2:n.x+n.w+r/2,p=n.y+n.h+r/2}break;case e.orientation.right:case e.orientation.right_top:if(o.xa-r/2<o.xb)c=!0,p=o.ya<o.yd?i.y+i.h+r/2:i.y-r/2,l=i.x-r;else{if(o.xb-r/2>o.xd)return null;p=o.ya<o.yd?n.y-r/2:n.y+n.h+r/2,l=n.x+n.w+r/2}break;case e.orientation.left:case e.orientation.left_top:if(o.xa+r/2>o.xb)c=!0,p=o.ya<o.yd?i.y+i.h+r/2:i.y-r/2,l=i.x+i.w+r;else{if(o.xb+r/2<o.xd)return null;p=o.ya<o.yd?n.y-r/2:n.y+n.h+r/2,l=n.x-r/2}}if(c)switch(a){case e.orientation.top:case e.orientation.top_left:case e.orientation.bottom:case e.orientation.bottom_left:s.push(["M",o.xa,o.ya]),s.push(["L",o.xa,p]),s.push(["L",l,p]),s.push(["L",l,o.yc]),s.push(["L",o.xc,o.yc]),s.push(["L",o.xd,o.yd]);break;case e.orientation.right:case e.orientation.right_top:case e.orientation.left:case e.orientation.left_top:s.push(["M",o.xa,o.ya]),s.push(["L",l,o.ya]),s.push(["L",l,p]),s.push(["L",o.xc,p]),s.push(["L",o.xc,o.yc]),s.push(["L",o.xd,o.yd])}else switch(a){case e.orientation.top:case e.orientation.top_left:case e.orientation.bottom:case e.orientation.bottom_left:s.push(["M",o.xa,o.ya]),s.push(["L",o.xb,o.yb]),s.push(["L",l,o.yb]),s.push(["L",l,p]),s.push(["L",o.xd,p]),s.push(["L",o.xd,o.yd]);break;case e.orientation.right:case e.orientation.right_top:case e.orientation.left:case e.orientation.left_top:s.push(["M",o.xa,o.ya]),s.push(["L",o.xb,o.yb]),s.push(["L",o.xb,p]),s.push(["L",l,p]),s.push(["L",l,o.yd]),s.push(["L",o.xd,o.yd])}return e.roundPathCorners(s,e.LINK_ROUNDED_CORNERS,!1)}if(e._isMoved(n)&&e._isMoved(i)){switch(s=[],a){case e.orientation.top:case e.orientation.top_left:if(o.ya+r>o.yd){var l=o.xa<o.xd?i.x+i.w+r/2:i.x-r/2,p=i.y+i.h+r,d=n.y-r;s.push(["M",o.xa,o.ya]),s.push(["L",o.xa,p]),s.push(["L",l,p]),s.push(["L",l,d]),s.push(["L",o.xc,d]),s.push(["L",o.xd,o.yd])}else s.push(["M",o.xa,o.ya]),s.push(["L",o.xa,i.y+i.h+r]),s.push(["L",o.xc,i.y+i.h+r]),s.push(["L",o.xd,o.yd]);break;case e.orientation.bottom:case e.orientation.bottom_left:o.ya-r<o.yd?(l=o.xa<o.xd?i.x+i.w+r/2:i.x-r/2,p=i.y-r,d=n.y+n.h+r,s.push(["M",o.xa,o.ya]),s.push(["L",o.xa,p]),s.push(["L",l,p]),s.push(["L",l,d]),s.push(["L",o.xc,d]),s.push(["L",o.xd,o.yd])):(s.push(["M",o.xa,o.ya]),s.push(["L",o.xa,i.y-r]),s.push(["L",o.xc,i.y-r]),s.push(["L",o.xd,o.yd]));break;case e.orientation.right:case e.orientation.right_top:if(o.xa-r<o.xd){p=o.ya<o.yd?i.y+i.h+r/2:i.y-r/2,l=i.x-r;var h=n.x+n.w+r;s.push(["M",o.xa,o.ya]),s.push(["L",l,o.ya]),s.push(["L",l,p]),s.push(["L",h,p]),s.push(["L",h,o.yc]),s.push(["L",o.xd,o.yd])}else s.push(["M",o.xa,o.ya]),s.push(["L",i.x-r,o.ya]),s.push(["L",i.x-r,o.yc]),s.push(["L",o.xd,o.yd]);break;case e.orientation.left:case e.orientation.left_top:o.xa+r>o.xd?(p=o.ya<o.yd?i.y+i.h+r/2:i.y-r/2,l=i.x+i.w+r,h=n.x-r,s.push(["M",o.xa,o.ya]),s.push(["L",l,o.ya]),s.push(["L",l,p]),s.push(["L",h,p]),s.push(["L",h,o.yc]),s.push(["L",o.xd,o.yd])):(s.push(["M",o.xa,o.ya]),s.push(["L",i.x+i.w+r,o.ya]),s.push(["L",i.x+i.w+r,o.yc]),s.push(["L",o.xd,o.yd]))}return e.roundPathCorners(s,e.LINK_ROUNDED_CORNERS,!1)}return null}},void 0===e&&(e={}),e._validateConfig=function(t){return!!t||(console.error("config is not defined"),!1)},e._arrayContains=function(t,i){if(t&&Array.isArray(t))for(var n=t.length;n--;)if(t[n]===i)return!0;return!1},e._interceptions=function(t,i){if(!t)return[];if(!i)return[];var n=[];if(Array.isArray(t)&&Array.isArray(i))for(var o in t)for(var r in i)t[o]==i[r]&&n.push(t[o]);else if(Array.isArray(t)&&!Array.isArray(i))for(var o in t)for(var r in i)t[o]==r&&n.push(t[o]);else if(!Array.isArray(t)&&Array.isArray(i))for(var o in t)for(var r in i)o==i[r]&&n.push(i[r]);return n},e._getTags=function(t){return t.tags&&!Array.isArray(t.tags)?t.tags.split(","):t.tags&&Array.isArray(t.tags)?t.tags:[]},e._centerPointInPercent=function(t,i,n){var o=t.getBoundingClientRect();return[(i-o.left)/(o.width/100),(n-o.top)/(o.height/100)]},e._trim=function(t){return t.replace(/^\s+|\s+$/g,"")},e._getTransform=function(t){var i=t.getAttribute("transform");return i=i.replace("matrix","").replace("(","").replace(")",""),e._browser().msie&&(i=i.replace(/ /g,",")),i="["+(i=e._trim(i))+"]",JSON.parse(i)},e.getScale=function(t,i,n,o,r,a,s,c){var l=1;if(t||o!==e.match.boundary)if(t||o!==e.match.width)if(t||o!==e.match.height)if(t){var p,d;l=(p=i/t[2])>(d=n/t[3])?d:p}else l=o;else l=n/c;else l=i/s;else l=(p=i/s)>(d=n/c)?d:p;return l&&l>r&&(l=r),l&&l<a&&(l=a),l},e.isObject=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&null!==t},e.fileUploadDialog=function(t){var i=document.createElement("INPUT");i.setAttribute("type","file"),i.style.display="none",i.onchange=function(){t(this.files[0])},document.body.appendChild(i),i.click()},e.mergeDeep=function(t,i){if(e.isObject(t)&&e.isObject(i))for(var n in i)e.isObject(i[n])?(t[n]||Object.assign(t,{[n]:{}}),e.mergeDeep(t[n],i[n])):Object.assign(t,{[n]:i[n]});return t},e._lblIsImg=function(t,i){return!(!t.nodeBinding||"string"!=typeof i||-1==i.indexOf("img")||!t.nodeBinding[i])},e._getFistImgField=function(t){if(t.nodeBinding)for(var i in t.nodeBinding)if(-1!=i.indexOf("img"))return t.nodeBinding[i];return!1},e._fieldIsImg=function(t,i){if(t.nodeBinding)for(var n in t.nodeBinding)if(t.nodeBinding[n]==i)return e._lblIsImg(t,n);return!1},e._guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.htmlRipple=function(t){var i=document.createElement("style");i.type="text/css",i.innerHTML=" .boc-ripple-container {position: absolute; top: 0; right: 0; bottom: 0; left: 0; } .boc-ripple-container span {transform: scale(0);border-radius:100%;position:absolute;opacity:0.75;background-color:#fff;animation: boc-ripple 1000ms; }@-moz-keyframes boc-ripple {to {opacity: 0;transform: scale(2);}}@-webkit-keyframes boc-ripple {to {opacity: 0;transform: scale(2);}}@-o-keyframes boc-ripple {to {opacity: 0;transform: scale(2);}}@keyframes boc-ripple {to {opacity: 0;transform: scale(2);}}",document.head.appendChild(i);var n,r,a=document.createElement("div");a.className="boc-ripple-container",t.addEventListener("mousedown",function(s){var c,l,p,d;return l=document.createElement("span"),p=this.offsetWidth,c=this.getBoundingClientRect(),d="top:"+(s.pageY-c.top-p/2)+"px; left: "+(s.pageX-c.left-p/2)+"px; height: "+p+"px; width: "+p+"px;",t.rippleContainer.appendChild(l),l.setAttribute("style",d)}),t.addEventListener("mouseup",(n=function(){for(;this.rippleContainer.firstChild;)this.rippleContainer.removeChild(this.rippleContainer.firstChild)},r=void 0,function(){var s,c;return c=this,s=arguments,clearTimeout(r),r=setTimeout(function(){return n.apply(c,s)},2e3)})),t.rippleContainer=a,t.appendChild(a)},e._moveToBoundaryArea=function(t,i,n,o){var r=i.slice(0);i[0]<n.left&&i[0]<n.right&&(r[0]=n.left>n.right?n.right:n.left),i[0]>n.right&&i[0]>n.left&&(r[0]=n.left>n.right?n.left:n.right),i[1]<n.top&&i[1]<n.bottom&&(r[1]=n.top>n.bottom?n.bottom:n.top),i[1]>n.bottom&&i[1]>n.top&&(r[1]=n.top>n.bottom?n.top:n.bottom),i[0]!==r[0]||i[1]!==r[1]?e.animate(t,{viewBox:i},{viewBox:r},300,e.anim.outPow,function(){o&&o()}):o&&o()},e.randomId=function(){return"_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4)},e._getClientXY=function(t){return-1==t.type.indexOf("touch")?{x:t.clientX,y:t.clientY}:t.changedTouches.length?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:void 0},e._getClientTouchesXY=function(t,i){return-1!=t.type.indexOf("touch")?t.touches.length<i+1?{x:null,y:null}:{x:t.touches[i].clientX,y:t.touches[i].clientY}:{x:t.clientX,y:t.clientY}},e._getOffset=function(t,i){t&&(i.x+=t.offsetLeft,i.y+=t.offsetTop,e._getOffset(t.offsetParent,i))},e._getTopLeft=function(t){var i={x:0,y:0};return e._getOffset(t,i),i},e._getOffsetXY=function(t,i){if(-1==i.type.indexOf("touch"))return{x:i.offsetX,y:i.offsetY};if(i.touches.length){var n=e._getTopLeft(t);return{x:i.touches[0].pageX-n.x,y:i.touches[0].pageY-n.y}}return i.changedTouches.length?(n=e._getTopLeft(t),{x:i.changedTouches[0].pageX-n.x,y:i.changedTouches[0].pageY-n.y}):void 0},e._pinchMiddlePointInPercent=function(t,i,n,o){var r=e._getTopLeft(t),c=o.touches[1].pageX-r.x,l=o.touches[1].pageY-r.y;return[((o.touches[0].pageX-r.x-c)/2+c)/(i/100),((o.touches[0].pageY-r.y-l)/2+l)/(n/100)]},e._browser=function(){var t=!!window.opr&&!!window.opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,i=typeof InstallTrigger<"u",n=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||void 0!==window.safari&&safari.pushNotification).toString(),o=!!document.documentMode,r=!o&&!!window.StyleMedia,a=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);return{opera:t,firefox:i,safari:n,msie:o,edge:r,chrome:a,blink:(a||t)&&!!window.CSS}},e._menuPosition=function(t,i,n){var o=t.getBoundingClientRect(),r=n.getBoundingClientRect(),a=i.getBoundingClientRect(),s=o.left-r.left,c=o.top-r.top;return o.top+a.height>r.top+r.height&&(c-=a.height),o.left-a.width<r.left&&(s+=a.width),{x:s,y:c}},e._getTemplate=function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++){var r=i[t[o]];if(r&&r.template)return r.template}return n},e._getMin=function(t,i){if(t.tags&&t.tags.length&&i.tags)for(var n=0;n<t.tags.length;n++){var o=i.tags[t.tags[n]];if(o&&!0===o.min)return!0}return i.min},e._getSubLevels=function(t,i){if(t&&t.length)for(var n=0;n<t.length;n++){var o=i[t[n]];if(o&&o.subLevels)return o.subLevels}return 0},e._isHTML=function(t){var i=(new DOMParser).parseFromString(t,"text/html");return Array.from(i.body.childNodes).some(n=>1===n.nodeType)},e._getTestDiv=function(){var t=document.getElementById("orgchart_js_test_div");return t||((t=document.createElement("div")).id="orgchart_js_test_div",t.style.position="fixed",t.style.top="-10000px",t.style.left="-10000px",document.body.appendChild(t)),t},e._getLabelSize=function(t){var i=e._getTestDiv();return i.innerHTML="<svg>"+t+"</svg>",i.querySelector("text").getBoundingClientRect()},e.wrapText=function(t,i){var n=i.toLowerCase();if(-1==n.indexOf("<text")||-1==n.indexOf(e.attr.width)||-1!=n.indexOf("foreignobject")||-1==i.indexOf(e.attr.width)||e.ESCAPE_HTML&&"string"==typeof str&&e._isHTML(t))return e._escapeHtml(t);if(!e.ESCAPE_HTML&&e._isHTML(t))return t;var o=e._getTestDiv();i=i.replaceAll("{cw}",0),o.innerHTML="<svg>"+i+"</svg>";var r,a,s=(new DOMParser).parseFromString(i,"text/xml").getElementsByTagName("text")[0],c=parseFloat(s.getAttribute("x")),l=parseFloat(s.getAttribute("y")),p=s.getAttribute("text-anchor"),d=s.getAttribute(e.attr.width),h=s.getAttribute(e.attr.text_overflow),u="http://www.w3.org/2000/svg",f=o.getElementsByTagName("svg")[0].getElementsByTagName("text")[0];h||(h="ellipsis");var v=h.split("-");if(v.length>1&&(r=parseInt(h.split("-")[1]),v.length>2&&"ellipsis"==v[2]&&(a=!0)),!d)return e._escapeHtml(t);if(d=parseFloat(d),c||(c=0),l||(l=0),c||(p="start"),"ellipsis"==h){f.removeChild(f.firstChild),f.textContent=t;for(var x=f.getComputedTextLength(),_=2;x>d;)f.textContent=t.substring(0,t.length-_),f.textContent+="...",x=f.getComputedTextLength(),_++;return _>2?`<title>${e._escapeHtml(t)}</title>${f.textContent}`:e._escapeHtml(t)}if(-1!=h.indexOf("multiline")){var g=t.split(" "),y=f.getBBox().height;f.textContent="";var b=document.createElementNS(u,"tspan"),m=document.createTextNode(g[0]);b.setAttributeNS(null,"x",c),b.setAttributeNS(null,"y",l),b.setAttributeNS(null,"text-anchor",p),b.appendChild(m),f.appendChild(b),_=1;for(var w=1,S=1;S<g.length;S++){var k=b.firstChild.data.length;if(b.firstChild.data+=" "+g[S],b.getComputedTextLength()>d){if(b.firstChild.data=b.firstChild.data.slice(0,k),w++,r&&w>r){if(a&&f.children.length==r){var I=f.children[r-1].textContent;f.children[r-1].textContent=I.substring(0,I.length-3)+"..."}break}(b=document.createElementNS(u,"tspan")).setAttributeNS(null,"x",c),b.setAttributeNS(null,"y",l+y*_),b.setAttributeNS(null,"text-anchor",p),m=document.createTextNode(g[S]),b.appendChild(m),f.appendChild(b),_++}}var A="";if(null!=f.innerHTML)A=f.innerHTML,f.innerHTML="";else{var M="";for(S=f.childNodes.length-1;S>=0;S--)M=XMLSerializer().serializeToString(f.childNodes[S])+M,f.removeChild(f.childNodes[S]);A=M}return A}},e._downloadFile=function(t,i,n,o,r){var a=new Blob([i],{type:t});if(1==o){var s=URL.createObjectURL(a);window.open(s,"_blank").focus()}else if(navigator.msSaveBlob)navigator.msSaveBlob(a,n);else{var c=document.createElement("a");if(void 0!==c.download){s=URL.createObjectURL(a),c.setAttribute("href",s);var l=n;l.toLowerCase().endsWith(r.toLowerCase())||(l=l+"."+r),c.setAttribute("download",l),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}}},e._getPosition=function(t,i,n,o){var r={x:i.x,y:i.y};if(null!=n&&(r.x=n),null!=o&&(r.y=n),t&&3==t.length){var a=t[0].indexOf(i.id);-1!=a&&null!=t[1][a].transform&&(null==n&&(r.x=t[1][a].transform[4]),null==o&&(r.y=t[1][a].transform[5]))}return r},e._getOpacity=function(t,i){var n=1;if(t&&3==t.length){var o=t[0].indexOf(i.id);-1!=o&&null!=t[1][o].opacity&&(n=t[1][o].opacity)}return n},e.t=function(t,i,n){var o=e.templates[t];null==o&&console.error(`Template "${t}" does not exist!`);var r=null;if(null!=n&&o.scaleLessThen){var a=[];for(var s in o.scaleLessThen){var c=parseFloat(s);n<c&&a.push(c)}if(a.length>0){a.sort(function(d,h){return d-h});var l=o.scaleLessThen[a[0]];for(var p in l)null==r&&(r=Object.assign({},o)),r[p]=l[p]}}return i?null==r?o.min?o.min:o:r.min?r.min:r:r??o},e.setNodeSize=function(t){var i=e.t(t.templateName,t.min);t.w=i&&i.size?i.size[0]:0,t.h=i&&i.size?i.size[1]:0},e._imgs2base64=function(t,i,n,o){var r=t.getElementsByTagName(i),a=r.length;0==a&&o();for(var s=0;s<a;s++)!function(){var c=s,l=r[c];e._getDataUri(l.getAttribute(n),function(p){p.success&&l.setAttribute(n,p.result),c==a-1&&o()})}()},e._getDataUri=function(t,i){if(-1!=t.indexOf("base64"))i({success:!1});else{var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){200===n.status?o.readAsDataURL(n.response):404===n.status&&i({success:!1,result:n.status})};var o=new FileReader;o.onloadend=function(){i({success:!0,result:o.result})},n.send()}},e._convertStringToArray=function(t,i){return-1!=e.ARRAY_FIELDS.indexOf(t)?e.isNEU(i)?[]:i.split(","):i},e._convertArrayToString=function(t){return!e.isNEU(t)&&Array.isArray(t)?t.join():t},e._csvToArray=function(t,i){i=i||e.CSV_DELIMITER;for(var n=new RegExp("(\\"+i+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+i+"\\r\\n]*))","gi"),o=[[]],r=null;r=n.exec(t);){var a,s=r[1];s.length&&s!==i&&o.push([]),a=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],o[o.length-1].push(a)}return o},e._json2xml=function(t){for(var i=document.implementation.createDocument("","",null),n=i.createElement("nodes"),o=0;o<t.length;o++){var r=i.createElement("node"),a=t[o];for(var s in a)r.setAttribute(s,e._convertArrayToString(a[s]));n.appendChild(r)}return i.appendChild(n),'<?xml version="1.0" encoding="utf-8" ?>'+(new XMLSerializer).serializeToString(i.documentElement)},e._xml2json=function(t){for(var i=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("node"),n=[],o=0;o<i.length;o++){for(var r=i[o],a={},s=0;s<r.attributes.length;s++){var c=r.attributes[s];a[c.name]=e._convertStringToArray(c.name,c.value)}n.push(a)}return n},e.convertNodesToCsv=function(t){return e._json2csv(t)},e._json2csv=function(t){for(var i=[],n=function(s){for(var c="",l=0;l<i.length;l++){var p;(p="reportsTo"==i[l]?null:null==s[i[l]]?"":s[i[l]])instanceof Date&&(p=p.toLocaleString());var d=(p=null===p?"":p.toString()).replace(/"/g,'""'),h=new RegExp('("|;|\n)',"g");d.search(h)>=0&&(d='"'+d+'"'),l>0&&(c+=e.CSV_DELIMITER),c+=d}return c+"\n"},o="",r=0;r<t.length;r++)for(var a in t[r])e._arrayContains(i,a)||(i.push(a),o+=a+e.CSV_DELIMITER);for(o=o.substring(0,o.length-1),o+="\n",r=0;r<t.length;r++)o+=n(t[r]);return o.substring(0,o.length-1)},e.accentFold=function(t){return(t=t.toString().toLowerCase()).replace(/([\xe0\xe1\xe2\xe3\xe4\xe5])|([\xe7])|([\xe8\xe9\xea\xeb])|([\xec\xed\xee\xef])|([\xf1])|([\xf2\xf3\xf4\xf5\xf6\xf8])|([\xdf])|([\xf9\xfa\xfb\xfc])|([\xff])|([\xe6])/g,function(i,n,o,r,a,s,c,l,p,d,h){return n?"a":o?"c":r?"e":a?"i":s?"n":c?"o":l?"s":p?"u":d?"y":h?"ae":void 0})},e.copy=function(t){if(null===t||"object"!=typeof t||"isActiveClone"in t)return t;if(t instanceof Date)var i=new t.constructor;else i=t.constructor();for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t.isActiveClone=null,i[n]=e.copy(t[n]),delete t.isActiveClone);return i},e._getScrollSensitivity=function(){var t=e._browser();return t.msie&&e.scroll.ie?e.scroll.ie:t.edge&&e.scroll.edge?e.scroll.edge:t.safari&&e.scroll.safari?e.scroll.safari:t.chrome&&e.scroll.chrome?e.scroll.chrome:t.firefox&&e.scroll.firefox?e.scroll.firefox:t.opera&&e.scroll.opera?e.scroll.opera:{smooth:e.scroll.smooth,speed:e.scroll.speed}},e.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},e.isTrial=function(){return void 0!==e.remote},e.childrenCount=function(t,i){for(var n=0,o=0;o<i.childrenIds.length;o++)t.nodes[i.childrenIds[o]]&&n++;return n},e.childrenTotalCount=function(t,i){for(var n=0,o=0;o<i.childrenIds.length;o++){var r=t.nodes[i.childrenIds[o]];r&&(n++,n+=e.childrenTotalCount(t,r))}return n},e.collapsedChildrenCount=function(t,i){for(var n=0,o=0;o<i.childrenIds.length;o++){var r=t.nodes[i.childrenIds[o]];r&&!0===r.collapsed&&n++}return n},e.collapsedChildrenTotalCount=function(t,i,n){for(var o=0,r=0;r<i.childrenIds.length;r++){var a=t.nodes[i.childrenIds[r]];a&&((n||!0===a.collapsed)&&o++,o+=e.collapsedChildrenTotalCount(t,a,!0))}return o},e._setMinMaxXY=function(t,i){(null==i.minX||null!=t.x&&t.x<i.minX)&&(i.minX=t.x),(null==i.minY||null!=t.y&&t.y<i.minY)&&(i.minY=t.y),(null==i.maxX||null!=t.x&&t.x+t.w>i.maxX)&&(i.maxX=t.x+t.w),(null==i.maxY||null!=t.y&&t.y+t.h>i.maxY)&&(i.maxY=t.y+t.h)},e.getStParentNodes=function(t,i){for(i||(i=[]);t.parent;)t=t.parent;return t.stParent&&(i.push(t.stParent),e.getStParentNodes(t.stParent,i)),i},e.getRootOf=function(t){for(;t&&t.parent;)t=t.parent;return t},e._getViewBox=function(t){var i=null;return t?(i=(i="["+(i=t.getAttribute("viewBox"))+"]").replace(/\ /g,","),i=JSON.parse(i)):null},e.isNEU=function(t){return null==t||""===t},e.gradientCircleForDefs=function(t,i,n,o){function r(s,c,l,p){var d=(p-90)*Math.PI/180;return{x:s+l*Math.cos(d),y:c+l*Math.sin(d)}}function a(s,c,l,p,d){var h=r(s,c,l,d),u=r(s,c,l,p);return["M",h.x,h.y,"A",l,l,0,d-p<=180?"0":"1",0,u.x,u.y].join(" ")}return Array.isArray(i)||(i=[i,i,i,i,i,i]),`<linearGradient id="${t}_linearColors1" x1="0" y1="0" x2="1" y2="1">\n            <stop offset="0%" stop-color="${i[0]}"></stop>\n            <stop offset="100%" stop-color="${i[1]}"></stop>\n        </linearGradient>\n        <linearGradient id="${t}_linearColors2" x1="0.5" y1="0" x2="0.5" y2="1">\n            <stop offset="0%" stop-color="${i[1]}"></stop>\n            <stop offset="100%" stop-color="${i[2]}"></stop>\n        </linearGradient>\n        <linearGradient id="${t}_linearColors3" x1="1" y1="0" x2="0" y2="1">\n            <stop offset="0%" stop-color="${i[2]}"></stop>\n            <stop offset="100%" stop-color="${i[3]}"></stop>\n        </linearGradient>\n        <linearGradient id="${t}_linearColors4" x1="1" y1="1" x2="0" y2="0">\n            <stop offset="0%" stop-color="${i[3]}"></stop>\n            <stop offset="100%" stop-color="${i[4]}"></stop>\n        </linearGradient>\n        <linearGradient id="${t}_linearColors5" x1="0.5" y1="1" x2="0.5" y2="0">\n            <stop offset="0%" stop-color="${i[4]}"></stop>\n            <stop offset="100%" stop-color="${i[5]}"></stop>\n        </linearGradient>\n        <linearGradient id="${t}_linearColors6" x1="0" y1="1" x2="1" y2="0">\n            <stop offset="0%" stop-color="${i[5]}"></stop>\n            <stop offset="100%" stop-color="${i[0]}"></stop>\n        </linearGradient>        \n        <g id="${t}">\n            <path stroke-width="${o}" fill="none" stroke="url(#${t}_linearColors1)" d="${a(n,n,n,1,60)}"  />\n            <path stroke-width="${o}" fill="none" stroke="url(#${t}_linearColors2)" d="${a(n,n,n,60,120)}"/>\n            <path stroke-width="${o}" fill="none" stroke="url(#${t}_linearColors3)" d="${a(n,n,n,120,180)}" />\n            <path stroke-width="${o}" fill="none" stroke="url(#${t}_linearColors4)" d="${a(n,n,n,180,240)}" />\n            <path stroke-width="${o}" fill="none" stroke="url(#${t}_linearColors5)" d="${a(n,n,n,240,300)}" />\n            <path stroke-width="${o}" fill="none" stroke="url(#${t}_linearColors6)" d="${a(n,n,n,300,1)}"/>\n        </g>`},e._intersectionObserver=function(t,i){"function"==typeof IntersectionObserver?new IntersectionObserver(function(n,o){n.forEach(function(r){var a=r.intersectionRatio>0;0==r.intersectionRatio&&(a=r.isIntersecting),i(a)})}).observe(t):i(!0)},e.convertCsvToNodes=function(t){for(var i=e._csvToArray(t),n=i[0],o=[],r=1;r<i.length;r++){for(var a={},s=0;s<i[r].length;s++)a[n[s]]=e._convertStringToArray(n[s],i[r][s]);""!=a.id.trim()&&o.push(a)}return o},e._escapeHtml=function(t){return e.ESCAPE_HTML&&"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):t},e._escapeDoubleQuotes=function(t){return"string"==typeof t?t.replace(/"/g,"&quot;"):t},e._escapeGreaterLessSign=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},e.roundPathCorners=function(t,i,n){function o(k,I,A){var M=I.x-k.x,N=I.y-k.y,C=Math.sqrt(M*M+N*N);return r(k,I,Math.min(1,A/C))}function r(k,I,A){return{x:k.x+(I.x-k.x)*A,y:k.y+(I.y-k.y)*A}}function a(k,I){k.length>2&&(k[k.length-2]=I.x,k[k.length-1]=I.y)}function s(k){return{x:parseFloat(k[k.length-2]),y:parseFloat(k[k.length-1])}}Array.isArray(t)||(t=(t=t.split(/[,\s]/).reduce(function(k,I){var A=I.match("([a-zA-Z])(.+)");return A?(k.push(A[1]),k.push(A[2])):k.push(I),k},[])).reduce(function(k,I){return parseFloat(I)==I&&k.length?k[k.length-1].push(I):k.push([I]),k},[]));var c=[];if(t.length>1){var l=s(t[0]),p=null;"Z"==t[t.length-1][0]&&t[0].length>2&&(t[t.length-1]=p=["L",l.x,l.y]),c.push(t[0]);for(var d=1;d<t.length;d++){var h=c[c.length-1],u=t[d],f=u==p?t[1]:t[d+1];if(f&&h&&h.length>2&&"L"==u[0]&&f.length>2&&"L"==f[0]){var v,x,_=s(h),g=s(u),y=s(f);n?(v=r(g,h.origPoint||_,i),x=r(g,f.origPoint||y,i)):(v=o(g,_,i),x=o(g,y,i)),a(u,v),u.origPoint=g,c.push(u);var b=r(v,g,.5),m=r(g,x,.5),w=["C",b.x,b.y,m.x,m.y,x.x,x.y];w.origPoint=g,c.push(w)}else c.push(u)}if(p){var S=s(c[c.length-1]);c.push(["Z"]),a(c[0],S)}}else c=t;return c.reduce(function(k,I){return k+I.join(" ")+" "},"")},e._isMoved=function(t){return null!=t.movex||null!=t.movey},e.xScrollUI=function(t,i,n,o,r){this.element=t,this.requestParams=n,this.config=i,this.onSetViewBoxCallback=o,this.onDrawCallback=r,this.pos=0,this.bar=null},e.xScrollUI.prototype.addListener=function(t){var i=this;if((this.config.mouseScrool==e.action.xScroll||this.config.mouseScrool==e.action.scroll)&&this.bar){var n=-1!==navigator.userAgent.indexOf("Mac OS"),o=e._getScrollSensitivity();!function(r,a,s){var c=!1;function l(){c=!0;var d=(i.pos-i.bar.scrollLeft)/s;if(d>0)d++;else{if(0==d)return void(c=!1);d--}Math.ceil(i.bar.scrollLeft)==Math.ceil(i.pos)?c=!1:(i.bar.scrollLeft+=d,p(l))}r.addEventListener("wheel",function(d){if(!d.ctrlKey){var h=0;if(i.config.mouseScrool==e.action.xScroll)(h=d.deltaX||d.wheelDeltaX)||(h=d.deltaY||d.wheelDeltaY);else if(i.config.mouseScrool==e.action.scroll&&!(h=n||!d.shiftKey?d.deltaX||d.wheelDeltaX:d.deltaY||d.wheelDeltaY))return;h=-h,h=Math.max(-1,Math.min(1,h)),i.pos+=-h*a;var u=parseFloat(i.innerBar.clientWidth)-parseFloat(i.bar.clientWidth);i.pos<0&&(i.pos=0),i.pos>u&&(i.pos=u),c||l()}},{passive:!0});var p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d){setTimeout(d,20)}}(t,o.speed,o.smooth)}},e.xScrollUI.prototype.create=function(t){if(this.config.showXScroll===e.scroll.visible||this.config.mouseScrool===e.action.scroll||this.config.mouseScrool===e.action.xScroll){var i=this;this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.innerBar=document.createElement("div"),this.requestParams(),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",left:0,bottom:0,width:t+"px","overflow-x":"scroll",height:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",function(){if(this.ignore)this.ignore=!1;else{var n=i.requestParams(),o=(parseFloat(i.innerBar.clientWidth)-parseFloat(i.bar.clientWidth))/100;n.viewBox[0]=this.scrollLeft/o*((n.boundary.right-n.boundary.left)/100)+n.boundary.left,i.onSetViewBoxCallback(n.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout(function(){i.onDrawCallback()},500)}})}},e.xScrollUI.prototype.setPosition=function(){if(this.bar){var t=this.requestParams(),i=(Math.abs(t.boundary.maxX-t.boundary.minX)+2*this.config.padding)*t.scale;switch(this.config.orientation){case e.orientation.right:case e.orientation.right_top:i=Math.abs(t.boundary.minX*t.scale)}this.innerBar.style.width=i+"px";var o=(t.viewBox[0]-t.boundary.left)/((t.boundary.right-t.boundary.left)/100);o<0?o=0:o>100&&(o=100);var r=(parseFloat(this.innerBar.clientWidth)-parseFloat(this.bar.clientWidth))/100,a=o*r;this.bar.ignore=!0,this.bar.scrollLeft=a,this.pos=this.bar.scrollLeft,this.bar.style.visibility=r<=0?"hidden":"",this.config.showXScroll!==e.scroll.visible&&(this.bar.style.visibility="hidden")}},e.yScrollUI=function(t,i,n,o,r){this.element=t,this.requestParams=n,this.config=i,this.onSetViewBoxCallback=o,this.onDrawCallback=r,this.pos=0,this.bar=null},e.yScrollUI.prototype.addListener=function(t){var i=this;if((this.config.mouseScrool==e.action.yScroll||this.config.mouseScrool==e.action.scroll)&&this.bar){var n=-1!==navigator.userAgent.indexOf("Mac OS"),o=e._getScrollSensitivity();!function(r,a,s){var c=!1;function l(){c=!0;var d=(i.pos-i.bar.scrollTop)/s;if(d>0)d++;else{if(0==d)return void(c=!1);d--}Math.ceil(i.bar.scrollTop)==Math.ceil(i.pos)?c=!1:(i.bar.scrollTop+=d,p(l))}r.addEventListener("wheel",function(d){if(!d.ctrlKey){var h=0;if(i.config.mouseScrool==e.action.yScroll)(h=d.deltaY||d.wheelDeltaY)||(h=d.deltaX||d.wheelDeltaX);else if(i.config.mouseScrool==e.action.scroll&&!(h=n||!d.shiftKey?d.deltaY||d.wheelDeltaY:d.deltaX||d.wheelDeltaX))return;h=-h,h=Math.max(-1,Math.min(1,h)),i.pos+=-h*a;var u=parseFloat(i.innerBar.clientHeight)-parseFloat(i.bar.clientHeight);i.pos<0&&(i.pos=0),i.pos>u&&(i.pos=u),c||l()}},{passive:!0});var p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d){setTimeout(d,20)}}(t,o.speed,o.smooth)}},e.yScrollUI.prototype.create=function(t){if(this.config.showYScroll===e.scroll.visible||this.config.mouseScrool===e.action.scroll||this.config.mouseScrool===e.action.yScroll){var i=this;this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.innerBar=document.createElement("div"),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",right:0,bottom:0,height:t+"px","overflow-y":"scroll",width:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",function(){if(this.ignore)this.ignore=!1;else{var n=i.requestParams(),o=(parseFloat(i.innerBar.clientHeight)-parseFloat(i.bar.clientHeight))/100;n.viewBox[1]=this.scrollTop/o*((n.boundary.bottom-n.boundary.top)/100)+n.boundary.top,i.onSetViewBoxCallback(n.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout(function(){i.onDrawCallback()},500)}})}},e.yScrollUI.prototype.setPosition=function(){if(this.bar){var t=this.requestParams(),i=(Math.abs(t.boundary.maxY-t.boundary.minY)+2*this.config.padding)*t.scale;switch(this.config.orientation){case e.orientation.bottom:case e.orientation.bottom_left:i=Math.abs(t.boundary.minY*t.scale)}this.innerBar.style.height=i+"px";var o=(t.viewBox[1]-t.boundary.top)/Math.abs((t.boundary.bottom-t.boundary.top)/100);o<0?o=0:o>100&&(o=100);var r=(parseFloat(this.innerBar.clientHeight)-parseFloat(this.bar.clientHeight))/100,a=o*r;this.bar.ignore=!0,this.bar.scrollTop=a,this.pos=this.bar.scrollTop,this.bar.style.visibility=r<=0?"hidden":"",this.config.showYScroll!==e.scroll.visible&&(this.bar.style.visibility="hidden")}},e.prototype.zoom=function(t,i,n,o){var r=this.getViewBox().slice(0),a=r,s=r[2],c=r[3];!0===t?(r[2]=r[2]/e.SCALE_FACTOR,r[3]=r[3]/e.SCALE_FACTOR):!1===t?(r[2]=r[2]*e.SCALE_FACTOR,r[3]=r[3]*e.SCALE_FACTOR):(r[2]=r[2]/t,r[3]=r[3]/t),i||(i=[50,50]),r[0]=a[0]-(r[2]-s)/(100/i[0]),r[1]=a[1]-(r[3]-c)/(100/i[1]);var l=this.getScale(r);if(r[2]=this.width()/l,r[3]=this.height()/l,!0===t&&l<this.config.scaleMax||!1===t&&l>this.config.scaleMin||0!=t&&1!=t&&l<this.config.scaleMax&&l>this.config.scaleMin){this._hideBeforeAnimation();var p=this;n?(clearTimeout(p._timeout),e.animate(this.getSvg(),{viewbox:this.getViewBox()},{viewbox:r},this.config.anim.duration,this.config.anim.func,function(){clearTimeout(p._timeout),p._timeout=setTimeout(function(){p._draw(!0,e.action.zoom,null,o)},500)})):(this.setViewBox(r),clearTimeout(p._timeout),p._timeout=setTimeout(function(){p._draw(!0,e.action.zoom,null,o)},500))}},e.loading={},e.loading.show=function(t){var i=document.createElement("div");i.id="boc-loading",i.innerHTML='<style>@-webkit-keyframes dot-keyframes {0% { opacity: .4; -webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}@keyframes dot-keyframes {0% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}.boc-loading-dots div {margin: 10px;}      .boc-dot-1 {background-color: #039BE5;}.boc-dot-2 {background-color: #F57C00;}.boc-dot-3 {background-color: #FFCA28;}      .boc-loading-dots {text-align: center;width: 100%; position: absolute; top: 0;}.boc-loading-dots--dot {-webkit-animation: dot-keyframes 1.5s infinite ease-in-out;animation: dot-keyframes 1.5s infinite ease-in-out;        border-radius: 10px;display: inline-block;height: 10px;width: 10px;}.boc-loading-dots--dot:nth-child(2) {-webkit-animation-delay: .5s;animation-delay: .5s;}.boc-loading-dots--dot:nth-child(3) {-webkit-animation-delay: 1s;animation-delay: 1s;}</style><div class="boc-loading-dots"><div class="boc-loading-dots--dot boc-dot-1"></div><div class="boc-loading-dots--dot boc-dot-2"></div><div class="boc-loading-dots--dot boc-dot-3"></div></div>',t.element.appendChild(i)},e.loading.hide=function(t){var i=t.element.querySelector("#boc-loading");i&&i.parentNode.removeChild(i)},e.pdfPrevUI={},e.loc||(e.loc={}),e.loc.ppdfCmdTitle="PDF Preview",e.loc.ppdfSave="Save",e.loc.ppdfCancel="Cancel",e.loc.ppdfFormat="Format",e.loc.ppdfFitToDrwaing="Fit",e.loc.ppdfA4="A4",e.loc.ppdfA3="A3",e.loc.ppdfA2="A2",e.loc.ppdfA1="A1",e.loc.ppdfLetter="Letter",e.loc.ppdfLegal="Legal",e.loc.ppdfLayout="Layout",e.loc.ppdfPortrait="Portrait",e.loc.ppdfLandscape="Landscape",e.loc.ppdfFittopagewidth="Fit to page width",e.loc.ppdfMargin="Margin",e.loc.ppdfHeader="Header",e.loc.ppdfFooter="Footer",e.loc.ppdfScale="Scale",e.pdfPrevUI.show=function(t,i){e.pdfPrevUI.hide(t),i=t._defaultExportOptions(i,"pdf");var n=document.createElement("div");n.classList.add(t.config.mode),n.id="boc-ppdf-btns",Object.assign(n.style,{position:"absolute",top:0,left:0,"background-color":"#fff","z-index":5,margin:"0 0 0 -265px","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",width:"265px",height:"100%","font-family":"Roboto,Helvetica",color:"#757575","text-align":"right",padding:"10px"}),t.element.appendChild(n),n.innerHTML="<h1>"+e.loc.ppdfCmdTitle+'</h1><div><button type="button" id="boc-prev-save" style="font-size: 14px; width: 90px;">'+e.loc.ppdfSave+'</button>&nbsp;<button type="button" id="boc-prev-cancel" style="width: 90px;font-size: 14px;">'+e.loc.ppdfCancel+'</button></div><div style="margin-top:30px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:30px;"><label for="boc-size">'+e.loc.ppdfFormat+': </label><select id="boc-ppdf-size" style="color: #757575; width: 150px; font-size: 14px;" id="boc-size"><option value="fit">'+e.loc.ppdfFitToDrwaing+'</option><option value="A4">'+e.loc.ppdfA4+'</option><option value="A3">'+e.loc.ppdfA3+'</option><option value="A2">'+e.loc.ppdfA2+'</option><option value="A1">'+e.loc.ppdfA1+'</option><option value="Letter">'+e.loc.ppdfLetter+'</option><option value="Legal">'+e.loc.ppdfLegal+'</option></select></div><div style="padding-top:10px;"><label for="boc-ppdf-layout">'+e.loc.ppdfLayout+': </label><select id="boc-ppdf-layout" style="color: #757575; width: 150px;font-size: 14px;" ><option value="false">'+e.loc.ppdfPortrait+'</option><option value="true">'+e.loc.ppdfLandscape+'</option></select></div><div style="padding-top:10px;"><label for="boc-scale">'+e.loc.ppdfScale+': </label><select id="boc-ppdf-scale" style="color: #757575; width: 150px;font-size: 14px;" id="boc-scale"><option value="fit">'+e.loc.ppdfFittopagewidth+'</option><option value="10">10%</option><option value="20">20%</option><option value="30">30%</option><option value="40">40%</option><option value="50">50%</option><option value="60">60%</option><option value="70">70%</option><option value="80">80%</option><option value="90">90%</option><option value="100">100%</option><option value="110">110%</option><option value="120">120%</option><option value="130">130%</option><option value="140">140%</option><option value="150">150%</option><option value="160">160%</option><option value="170">170%</option><option value="180">180%</option><option value="190">190%</option><option value="200">200%</option></select></div><div style="margin-top:10px;margin-bottom:10px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:10px;"><label for="boc-ppdf-header">'+e.loc.ppdfHeader+': </label><input id="boc-ppdf-header" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="boc-ppdf-footer">'+e.loc.ppdfFooter+': </label><input id="boc-ppdf-footer" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="boc-ppdf-margin">'+e.loc.ppdfMargin+': </label><input id="boc-ppdf-margin" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div>';var o=document.createElement("div");o.id="boc-ppdf-wrapper",Object.assign(o.style,{"overflow-y":"scroll","z-index":11,position:"absolute",top:0,left:"285px","background-color":"#eee",width:t.width()-270+"px",height:"100%"}),t.element.appendChild(o),o.innerHTML='<div id="boc-ppdf-content" style="width: 100%;margin-top:10px;margin-bottom:10px;opacity:0;"></div>';var r,a,s,c=t.element.querySelector("#boc-ppdf-size"),l=t.element.querySelector("#boc-ppdf-layout"),p=t.element.querySelector("#boc-ppdf-scale"),d=t.element.querySelector("#boc-ppdf-margin"),h=t.element.querySelector("#boc-ppdf-header"),u=t.element.querySelector("#boc-ppdf-footer");c.value=i.format,l.value=i.landscape,p.value=i.scale,d.value=i.margin,h.value=i.header,u.value=i.footer,e.animate(t.element.querySelector("#boc-ppdf-btns"),{margin:[0,0,0,-250]},{margin:[0,0,0,0]},300,e.anim.outSin,function(){t.exportPDF(i,e.pdfPrevUI._handler)}),t.element.querySelector("#boc-prev-cancel").addEventListener("click",function(){e.pdfPrevUI.hide(t)}),t.element.querySelector("#boc-prev-save").addEventListener("click",function(){t.exportPDF(i),e.pdfPrevUI.hide(t)}),e.pdfPrevUI._showHide(c,l,p),c.addEventListener("change",function(){e.animate(t.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,e.anim.inSin,function(){t.element.querySelector("#boc-ppdf-content").innerHTML="",i.format=c.value,t.exportPDF(i,e.pdfPrevUI._handler),e.pdfPrevUI._showHide(c,l,p)})}),l.addEventListener("change",function(){e.animate(t.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,e.anim.inSin,function(){t.element.querySelector("#boc-ppdf-content").innerHTML="",i.landscape="true"==l.value,t.exportPDF(i,e.pdfPrevUI._handler),e.pdfPrevUI._showHide(c,l,p)})}),p.addEventListener("change",function(){e.animate(t.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,e.anim.inSin,function(){t.element.querySelector("#boc-ppdf-content").innerHTML="",i.scale=p.value,t.exportPDF(i,e.pdfPrevUI._handler),e.pdfPrevUI._showHide(c,l,p)})}),d.addEventListener("keyup",function(){clearTimeout(r),r=setTimeout(function(){e.animate(t.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,e.anim.inSin,function(){t.element.querySelector("#boc-ppdf-content").innerHTML="";var f=d.value.split(",");if(4==f.length){for(var v=0;v<f.length;v++)f[v]=parseInt(f[v]);i.margin=f,t.exportPDF(i,e.pdfPrevUI._handler)}})},1e3)}),h.addEventListener("keyup",function(){clearTimeout(a),a=setTimeout(function(){e.animate(t.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,e.anim.inSin,function(){t.element.querySelector("#boc-ppdf-content").innerHTML="",i.header=h.value,t.exportPDF(i,e.pdfPrevUI._handler)})},1e3)}),u.addEventListener("keyup",function(){clearTimeout(s),s=setTimeout(function(){e.animate(t.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,e.anim.inSin,function(){t.element.querySelector("#boc-ppdf-content").innerHTML="",i.footer=u.value,t.exportPDF(i,e.pdfPrevUI._handler)})},1e3)})},e.pdfPrevUI._showHide=function(t,i,n){"A4"==t.value||"A3"==t.value||"A2"==t.value||"A1"==t.value||"Letter"==t.value||"Legal"==t.value?(i.parentNode.style.display="block",n.parentNode.style.display="block"):(i.parentNode.style.display="none",n.parentNode.style.display="none")},e.pdfPrevUI._handler=function(t,i,n){var o=i.options,r=i.pages,a=o.margin[0],s=o.margin[2],c=document.createElement("div");c.classList.add(t.config.mode),c.innerHTML=n.outerHTML,e._browser().msie&&(c.innerHTML=(new XMLSerializer).serializeToString(n));for(var l=c.querySelector("svg"),p=t.element.querySelector("#boc-ppdf-content"),d=0;d<r.length;d++){var h=document.createElement("iframe");Object.assign(h.style,{display:"block",margin:"10px auto",border:"1px solid #eeeeee","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}),p.appendChild(h),h.style.backgroundColor=l&&l.style.backgroundColor?l.style.backgroundColor:"#fff";var u=h.contentWindow.document;u.open(),h.style.width=r[d].size.w+"px",h.style.height=r[d].size.h+"px",h.style.margin="10 auto",r[d].backgroundColor&&(h.style.backgroundColor=r[d].backgroundColor);var f=o.header;r[d].header&&(f=r[d].header),f&&(f=f.replace("{current-page}",d+1).replace("{total-pages}",r.length));var v=o.footer;r[d].footer&&(v=r[d].footer),v&&(v=v.replace("{current-page}",d+1).replace("{total-pages}",r.length)),r[d].html?u.write(e._exportHtml(r[d].html,i.styles,o,r[d].innerSize.w,r[d].innerSize.h,f,v,t.config.mode)):(l.setAttribute("viewBox",r[d].vb),u.write(e._exportHtml(c.innerHTML,i.styles,o,r[d].innerSize.w,r[d].innerSize.h,f,v,t.config.mode)));var x=u.getElementById("boc-header"),_=u.getElementById("boc-footer");x&&(x.style.top=a-x.offsetHeight-7+"px"),_&&(_.style.bottom=s-_.offsetHeight-7+"px"),u.close()}var b=t.element.querySelector("#boc-ppdf-content");e.animate(b,{opacity:0},{opacity:1},300,e.anim.outSin)},e.pdfPrevUI._getViewBox=function(t){var i=null;return t?(i=(i="["+(i=t.getAttribute("viewBox"))+"]").replace(/\ /g,","),i=JSON.parse(i)):null},e._exportHtml=function(t,i,n,o,r,a,s,c){for(var l="",p=0;p<n.margin.length;p++)l+=n.margin[p]+"px ";var d='<!DOCTYPE html><html style="margin:0;padding:0;"><head></head>'+i+'<body class="boc-'+c+'" style="margin:0; padding:0;"><div style="margin: '+l+";overflow:hidden;width:"+o+"px;height:"+r+'px">';return a&&(d+='<div id="boc-header" style="width:'+o+"px;color:#757575;position:absolute;left:"+n.margin[3]+'px;top:0;">'+a+"</div>"),d+=t,s&&(d+='<div id="boc-footer" style="width:'+o+"px;color:#757575;position:absolute;left:"+n.margin[3]+'px;bottom:0;">'+s+"</div>"),(d+="</div>")+"</body></html>"},e.pdfPrevUI.hide=function(t){var i=t.element.querySelector("#boc-ppdf-wrapper");if(i){i.parentNode.removeChild(i),i.style.opacity=0;var n=t.element.querySelector("#boc-ppdf-btns");n.parentNode.removeChild(n)}},void 0===e&&(e={}),e.events.on("renderdefs",function(t,i){for(var n=0;n<t.config.clinks.length;n++){var o=t.config.clinks[n].template;o||(o="orange"),i.defs+=e.clinkTemplates[o].defs}}),e.events.on("render",function(t,i){t._clink(t,i)}),e.events.on("drag",function(t,i,n,o){if(t instanceof e&&t.config.draggable)for(var r=0;r<o.length;r++){for(var a=o[r],s=t.element.querySelectorAll(`[data-c-l-from="${a}"]`),c=t.element.querySelectorAll(`[data-c-l-to="${a}"]`),l=0;l<s.length;l++)s[l].parentNode.removeChild(s[l]);for(l=0;l<c.length;l++)c[l].parentNode.removeChild(c[l])}}),e.prototype._clink=function(t,i){for(var n="",o=0;o<this.config.clinks.length;o++){let I=function(A,M,N){null==N&&(N=1);var C=M.x-A.x,U=M.y-A.y,R=Math.sqrt(Math.pow(M.x-A.x,2)+Math.pow(M.y-A.y,2))/3;return R=R/(Math.sqrt(C*C+U*U)*N)*e.clinkCurve(r),{x:A.x+C/2-U*R,y:A.y+U/2+C*R}};var r=this.config.clinks[o],a=t.getNode(r.from),s=t.getNode(r.to);if(a&&-1!=i.res.visibleNodeIds.indexOf(a.id)&&s&&-1!=i.res.visibleNodeIds.indexOf(s.id)){var c=a.x,l=a.y,p=s.x,d=s.y,h={},u={},f=c+a.w/2,v=p+s.w/2,x=l+a.h/2,_=d+s.h/2,g=1;switch(this.config.orientation){case e.orientation.top:case e.orientation.top_left:f<=v?(g=1,h.x=f+a.w/10,u.x=v-s.w/10):(g=-1,h.x=f-a.w/10,u.x=v+s.w/10),l==d?(g=1,h.y=l,u.y=d):l>d?(h.y=l,u.y=d+s.h):(h.y=l+a.h,u.y=d);break;case e.orientation.bottom:case e.orientation.bottom_left:f<=v?(g=-1,h.x=f+a.w/10,u.x=v+s.w/10):(g=1,h.x=f-a.w/10,u.x=v+s.w/10),l==d?(g=-1,h.y=l+a.h,u.y=d+s.h):l>d?(h.y=l,u.y=d+s.h):(h.y=l+a.h,u.y=d);break;case e.orientation.left:case e.orientation.left_top:x<=_?(g=-1,h.y=x+a.h/5,u.y=_+s.h/5):(g=1,h.y=x-a.h/5,u.y=_+s.h/5),c==p?(g=-1,h.x=c,u.x=p):c>p?(h.x=c,u.x=p+s.w):(h.x=c+a.w,u.x=p);break;case e.orientation.right:case e.orientation.right_top:x<=_?(g=1,h.y=x+a.h/5,u.y=_+s.h/5):(g=-1,h.y=x-a.h/5,u.y=_+s.h/5),c==p?(g=1,h.x=c+a.w,u.x=p+s.w):c>p?(h.x=c,u.x=p+s.w):(h.x=c+a.w,u.x=p)}var y=I(h,u,g),b=r.template;b||(b="orange");var m=e.clinkTemplates[b];if(r.label){var w=e.clinkLabelPosition(r,h,u,y);n+=m.label.replace("{x}",w.x).replace("{y}",w.y).replace("{val}",r.label)}var S="M"+h.x+","+h.y+"C"+h.x+","+h.y+" "+y.x+","+y.y+" "+u.x+","+u.y;n+=("<g "+e.attr.c_link_from+'="{from}" '+e.attr.c_link_to+'="{to}">').replace("{from}",a.id).replace("{to}",s.id)+m.link.replaceAll("{d}",S)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+S+'" />',n+=e.grCloseTag}}i.content+=n},e.clinkLabelPosition=function(t,i,n,o){return{x:((n.x-i.x)/2+i.x-o.x)/2+o.x,y:((n.y-i.y)/2+i.y-o.y)/2+o.y}},e.clinkCurve=function(t){return e.CLINK_CURVE},e.prototype.addClink=function(t,i,n,o){this._putInUndoStack(),this.clearRedo();for(var r=this.config.clinks.length-1;r>=0;r--){var a=this.config.clinks[r];a.from==t&&a.to==i&&this.config.clinks.splice(r,1)}return this.config.clinks.push({from:t,to:i,label:n,template:o}),e.events.publish("updated",[this]),this},e.prototype.removeClink=function(t,i){this._putInUndoStack(),this.clearRedo();for(var n=this.config.clinks.length-1;n>=0;n--){var o=this.config.clinks[n];o.from==t&&o.to==i&&this.config.clinks.splice(n,1)}return e.events.publish("updated",[this]),this},e.clinkTemplates={},e.clinkTemplates.orange={defs:'<marker id="arrowOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path marker-start="url(#dotOrange)" marker-end="url(#arrowOrange)" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#F57C00" text-anchor="middle" x="{x}" y="{y}">{val}</text>'},e.clinkTemplates.blue={defs:'<marker id="arrowBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path marker-start="url(#dotBlue)" marker-end="url(#arrowBlue)" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},e.clinkTemplates.yellow={defs:'<marker id="arrowYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path marker-start="url(#dotYellow)" marker-end="url(#arrowYellow)" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#FFCA28"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},void 0===e&&(e={}),e.events.on("renderdefs",function(t,i){for(var n=0;n<t.config.slinks.length;n++){var o=t.config.slinks[n].template;o||(o="orange"),i.defs+=e.slinkTemplates[o].defs}}),e.events.on("render",function(t,i){t._slinks(t,i)}),e.events.on("drag",function(t,i,n,o){if(t instanceof e&&t.config.draggable)for(var r=0;r<o.length;r++){for(var a=o[r],s=t.element.querySelectorAll(`[data-s-l-from="${a}"]`),c=t.element.querySelectorAll(`[data-s-l-to="${a}"]`),l=0;l<s.length;l++)s[l].parentNode.removeChild(s[l]);for(l=0;l<c.length;l++)c[l].parentNode.removeChild(c[l])}}),e.prototype._slinks=function(t,i){var n="",o=this.getScale(),r=i.res.boundary;function a(d,h,u){var f=[],v=null,x="left",g=t._layoutConfigs[d.lcn?d.lcn:"base"];switch(g.orientation){case e.orientation.top:case e.orientation.top_left:case e.orientation.bottom:case e.orientation.bottom_left:h.x>d.x&&(x="right");break;case e.orientation.left:case e.orientation.left_top:case e.orientation.right:case e.orientation.right_top:x="top",h.y>d.y&&(x="bottom")}var y=e.t(d.templateName,d.min,o),b=g.levelSeparation;d.parent&&d.parent.layout&&(b=g.mixedHierarchyNodesSeparation);var m={p:d.x+d.w/2+y.expandCollapseSize,q:d.y,r:d.x+d.w/2+y.expandCollapseSize,s:r.minY+b};if(d.sl==h.sl)switch(v=h,g.orientation){case e.orientation.top:case e.orientation.top_left:f.push([m.p,m.q]),f.push([m.p,m.q-b/3]),y=e.t(v.templateName,v.min,o),f.push([v.x+v.w/2+y.expandCollapseSize,f[f.length-1][1]]),f.push([f[f.length-1][0],v.y]);break;case e.orientation.bottom:case e.orientation.bottom_left:m.q=d.y+d.h,m.s=r.maxY-b,f.push([m.p,m.q]),f.push([m.r,d.y+d.h+b/3]),y=e.t(v.templateName,v.min,o),f.push([v.x+v.w/2+y.expandCollapseSize,f[f.length-1][1]]),f.push([f[f.length-1][0],v.y+v.h]);break;case e.orientation.left:case e.orientation.left_top:m.p=d.x,m.q=d.y+d.h/2+y.expandCollapseSize,m.r=r.minX-b,m.s=d.y+d.h/2+y.expandCollapseSize,f.push([m.p,m.q]),f.push([d.x-b/3,m.q]),y=e.t(v.templateName,v.min,o),f.push([f[f.length-1][0],v.y+v.h/2+y.expandCollapseSize]),f.push([v.x,f[f.length-1][1]]);break;case e.orientation.right:case e.orientation.right_top:m.p=d.x+d.w,m.q=d.y+d.h/2+y.expandCollapseSize,m.r=r.maxX+b,m.s=d.y+d.h/2+y.expandCollapseSize,f.push([m.p,m.q]),f.push([d.x+d.w+b/3,m.q]),y=e.t(v.templateName,v.min,o),f.push([f[f.length-1][0],v.y+v.h/2+y.expandCollapseSize]),f.push([v.x+v.w,f[f.length-1][1]])}else{switch(g.orientation){case e.orientation.top:case e.orientation.top_left:f.push([m.p,m.q]),f.push([m.r,d.y-b/3]);break;case e.orientation.bottom:case e.orientation.bottom_left:m.q=d.y+d.h,m.s=r.maxY-b,f.push([m.p,m.q]),f.push([m.r,d.y+d.h+b/3]);break;case e.orientation.left:case e.orientation.left_top:m.p=d.x,m.q=d.y+d.h/2+y.expandCollapseSize,m.r=r.minX-b,m.s=d.y+d.h/2+y.expandCollapseSize,f.push([m.p,m.q]),f.push([d.x-b/3,m.q]);break;case e.orientation.right:case e.orientation.right_top:m.p=d.x+d.w,m.q=d.y+d.h/2+y.expandCollapseSize,m.r=r.maxX+b,m.s=d.y+d.h/2+y.expandCollapseSize,f.push([m.p,m.q]),f.push([d.x+d.w+b/3,m.q])}for(var w=d,S=d;S.parent;)S=S.parent;for(;null==v;){var k=!1,I=w.parent,A=I.leftNeighbor,M=I.rightNeighbor;if(I.id==h.id?v=I:e._intersects(I,m,g)&&(m=e._addPoint(I,f,g,m,x),k=!0),I.id!=h.id){for(;A;){if(A.id==h.id){v=A;break}e._intersects(A,m,g)&&(m=e._addPoint(A,f,g,m,x),k=!0),A=A.leftNeighbor}for(;M;){if(M.id==h.id){v=M;break}e._intersects(M,m,g)&&(m=e._addPoint(M,f,g,m,x),k=!0),M=M.rightNeighbor}}if(!k){var N=f[f.length-1][0],C=0;if(I.parent){b=g.levelSeparation,I.parent.layout&&(b=g.mixedHierarchyNodesSeparation);var U=t.manager.bordersByRootIdAndLevel[S.id][I.parent.sl];switch(g.orientation){case e.orientation.top:case e.orientation.top_left:C=U.maxY+b*(2/3);break;case e.orientation.bottom:case e.orientation.bottom_left:C=U.minY-b*(2/3);break;case e.orientation.left:case e.orientation.left_top:N=U.maxX+b*(2/3),C=f[f.length-1][1];break;case e.orientation.right:case e.orientation.right_top:N=U.minX-b*(2/3),C=f[f.length-1][1]}}f.push([N,C])}w=I}switch(y=e.t(v.templateName,v.min,o),f.splice(f.length-1,1),g.orientation){case e.orientation.top:case e.orientation.top_left:f.push([v.x+v.w/2+y.expandCollapseSize,f[f.length-1][1]]),f.push([f[f.length-1][0],v.y+v.h]);break;case e.orientation.bottom:case e.orientation.bottom_left:f.push([v.x+v.w/2+y.expandCollapseSize,f[f.length-1][1]]),f.push([f[f.length-1][0],v.y]);break;case e.orientation.left:case e.orientation.left_top:f.push([f[f.length-1][0],v.y+v.h/2+y.expandCollapseSize]),f.push([v.x+v.w,f[f.length-1][1]]);break;case e.orientation.right:case e.orientation.right_top:f.push([f[f.length-1][0],v.y+v.h/2+y.expandCollapseSize]),f.push([v.x,f[f.length-1][1]])}}var R=c.template;R||(R="orange");var P,T,E=null;switch((y=e.slinkTemplates[R]).labelPosition){case"start":E={x:f[1][0],y:f[1][1]};break;case"middle":var F=Math.ceil(f.length/2);E={x:((P=f[F])[0]+(T=f[F-1])[0])/2,y:(P[1]+T[1])/2};break;case"end":E={x:f[f.length-2][0],y:f[f.length-2][1]}}u&&(f=f.reverse()),f[0].unshift("M");for(var O=1;O<f.length;O++)f[O].unshift("L");if(pathStr=e.roundPathCorners(f,e.LINK_ROUNDED_CORNERS,!1),c.label){var D=y.label.replace("{x}",E.x).replace("{y}",E.y).replace("{val}",c.label),Y=e._getLabelSize(D),Q=-Y.height/2;switch(g.orientation){case e.orientation.bottom:case e.orientation.bottom_left:Q=Y.height}n+=y.label.replace("{x}",E.x).replace("{y}",E.y+Q).replace("{val}",c.label)}var L=d.id,B=h.id;u&&(L=h.id,B=d.id),n+=("<g "+e.attr.s_link_from+'="{from}" '+e.attr.s_link_to+'="{to}">').replace("{from}",L).replace("{to}",B)+y.link.replaceAll("{d}",pathStr)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+pathStr+'" />',n+=e.grCloseTag}for(var s=0;s<this.config.slinks.length;s++){var c=this.config.slinks[s],l=t.getNode(c.from),p=t.getNode(c.to);l&&p&&-1!=i.res.visibleNodeIds.indexOf(p.id)&&-1!=i.res.visibleNodeIds.indexOf(l.id)&&(l.sl>=p.sl?a(l,p,!1):a(p,l,!0))}i.content+=n},e.prototype.addSlink=function(t,i,n,o){this._putInUndoStack(),this.clearRedo();for(var r=this.config.slinks.length-1;r>=0;r--){var a=this.config.slinks[r];a.from==t&&a.to==i&&this.config.slinks.splice(r,1)}return this.config.slinks.push({from:t,to:i,label:n,template:o}),e.events.publish("updated",[this]),this},e.prototype.removeSlink=function(t,i){this._putInUndoStack(),this.clearRedo();for(var n=this.config.slinks.length-1;n>=0;n--){var o=this.config.slinks[n];o.from==t&&o.to==i&&this.config.slinks.splice(n,1)}return e.events.publish("updated",[this]),this},e.slinkTemplates={},e.slinkTemplates.orange={defs:'<marker id="arrowSlinkOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkOrange)" marker-end="url(#arrowSlinkOrange)" stroke-linejoin="round" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text dominant-baseline="middle" fill="#F57C00" alignment-baseline="middle" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},e.slinkTemplates.blue={defs:'<marker id="arrowSlinkBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkBlue)" marker-end="url(#arrowSlinkBlue)" stroke-linejoin="round" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},e.slinkTemplates.yellow={defs:'<marker id="arrowSlinkYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkYellow)" marker-end="url(#arrowSlinkYellow)" stroke-linejoin="round" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text  fill="#FFCA28" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},e.events.on("renderbuttons",function(t,i){if(i.node&&i.node.tags&&i.node.tags.has("group-dotted-lines")){var n=t.getScale(),o=e.t(i.node.templateName,i.node.min,n),r="";i.node.min?(o.nodeGroupDottedOpenButton||console.error(`[${i.node.templateName}].nodeGroupDottedOpenButton is not defined`),r+=`<g style="cursor:pointer;"  data-ctrl-n-dotted-open="${i.node.id}" transform="matrix(1,0,0,1,${i.node.x},${i.node.y})">`,r+=o.nodeGroupDottedOpenButton):(o.nodeGroupDottedCloseButton||console.error(`[${i.node.templateName}].nodeGroupDottedCloseButton is not defined`),r+=`<g style="cursor:pointer;" transform="matrix(1,0,0,1,${i.node.x},${i.node.y})" data-ctrl-n-dotted-close="${i.node.id}">`,r+=o.nodeGroupDottedCloseButton),r=(r+="</g>").replaceAll("{cw}",i.node.w/2).replaceAll("{ch}",i.node.h/2).replaceAll("{ew}",i.node.w-(i.node.padding?i.node.padding[1]:0)).replaceAll("{eh}",i.node.h-(i.node.padding?i.node.padding[2]:0));var a=t.getNode(i.node.stChildrenIds[0]);if(-1!=r.indexOf("{collapsed-children-count}")){var s=e.collapsedChildrenCount(t,a);r=r.replace("{collapsed-children-count}",s)}if(-1!=r.indexOf("{collapsed-children-total-count}")){var c=e.collapsedChildrenTotalCount(t,a);r=r.replace("{collapsed-children-total-count}",c)}if(-1!=r.indexOf("{children-count}")){var l=e.childrenCount(t,a);r=r.replace("{children-count}",l)}if(-1!=r.indexOf("{children-total-count}")){var p=e.childrenTotalCount(t,a);r=r.replace("{children-total-count}",p)}i.html+=r}}),e.events.on("redraw",function(t,i){if(t.config.groupDottedLines.length){for(var n=t.element.querySelectorAll("[data-ctrl-n-dotted-close]"),o=0;o<n.length;o++)n[o].addEventListener("click",function(){var a=this.getAttribute("data-ctrl-n-dotted-close");t.minimize(a)});var r=t.element.querySelectorAll("[data-ctrl-n-dotted-open]");for(o=0;o<r.length;o++)r[o].addEventListener("click",function(){var a=this.getAttribute("data-ctrl-n-dotted-open");t.maximize(a)})}}),void 0===e&&(e={}),e.prototype.undo=function(t){if(this.config.undoRedoStorageName){var i=this.undoStepsCount();if(0!=i){this._putInRedoStack();var n=`${this.config.undoRedoStorageName}_undo_`+(i-1),o=sessionStorage.getItem(n);sessionStorage.removeItem(n);var r=JSON.parse(o);this.config.nodes=r.nodes,this.config.clinks=r.clinks,this.config.slinks=r.slinks,this.config.groupDottedLines=r.groupDottedLines,this.config.dottedLines=r.dottedLines,e.events.publish("updated",[this]),this.filterUI.update(),this.draw(e.action.update,void 0,t),this.undoRedoUI.refresh()}}},e.prototype.redo=function(t){if(this.config.undoRedoStorageName){var i=this.redoStepsCount();if(0!=i){this._putInUndoStack();var n=`${this.config.undoRedoStorageName}_redo_`+(i-1),o=sessionStorage.getItem(n);sessionStorage.removeItem(n);var r=JSON.parse(o);this.config.nodes=r.nodes,this.config.clinks=r.clinks,this.config.slinks=r.slinks,this.config.groupDottedLines=r.groupDottedLines,this.config.dottedLines=r.dottedLines,e.events.publish("updated",[this]),this.filterUI.update(),this.draw(e.action.update,void 0,t),this.undoRedoUI.refresh()}}},e.prototype.clearRedo=function(){if(this.config.undoRedoStorageName){for(var t=`${this.config.undoRedoStorageName}_redo_`,i=Object.keys(sessionStorage),n=0;-1!=i.indexOf(t+n);)sessionStorage.removeItem(t+n),n++;this.undoRedoUI.refresh()}},e.prototype.clearUndo=function(){if(this.config.undoRedoStorageName){for(var t=`${this.config.undoRedoStorageName}_undo_`,i=Object.keys(sessionStorage),n=0;-1!=i.indexOf(t+n);)sessionStorage.removeItem(t+n),n++;this.undoRedoUI.refresh()}},e.prototype.undoStepsCount=function(){for(var t=`${this.config.undoRedoStorageName}_undo_`,i=Object.keys(sessionStorage),n=0;-1!=i.indexOf(t+n);)n++;return n},e.prototype.redoStepsCount=function(){for(var t=`${this.config.undoRedoStorageName}_redo_`,i=Object.keys(sessionStorage),n=0;-1!=i.indexOf(t+n);)n++;return n},e.prototype._putInUndoStack=function(){if(this.config.undoRedoStorageName){var t=`${this.config.undoRedoStorageName}_undo_`+this.undoStepsCount();sessionStorage.setItem(t,JSON.stringify({nodes:this.config.nodes,clinks:this.config.clinks,slinks:this.config.slinks,groupDottedLines:this.config.groupDottedLines,dottedLines:this.config.dottedLines}))}},e.prototype._putInRedoStack=function(){if(this.config.undoRedoStorageName){var t=`${this.config.undoRedoStorageName}_redo_`+this.redoStepsCount();sessionStorage.setItem(t,JSON.stringify({nodes:this.config.nodes,clinks:this.config.clinks,slinks:this.config.slinks,groupDottedLines:this.config.groupDottedLines,dottedLines:this.config.dottedLines}))}},void 0===e&&(e={}),e.undoRedoUI=function(){this.instance=null,this._event_id=e._guid()},e.undoRedoUI.prototype.init=function(t){t.config.undoRedoStorageName&&(this.instance=t,this.refresh())},e.undoRedoUI.prototype.refresh=function(){var t=this;if(this.instance.config.undoRedoStorageName){var i={undoStepsCount:this.instance.undoStepsCount(),redoStepsCount:this.instance.redoStepsCount()};if(!1!==e.events.publish("change",[this,i])){var n=this.instance.element.querySelector("[data-undo]"),o=this.instance.element.querySelector("[data-redo]");if(!n||!o){var r=document.createElement("div");r.classList.add("boc-undo-redo"),r.innerHTML=`<span data-undo>${e.icon.undo(50,50,"")}<span class="boc-undo-i"></span></span>\n                            <span data-redo>${e.icon.redo(50,50,"")}<span class="boc-redo-i"></span></span>`,this.instance.element.appendChild(r),n=this.instance.element.querySelector("[data-undo]"),o=this.instance.element.querySelector("[data-redo]"),n.addEventListener("click",function(){t.instance.undo()}),o.addEventListener("click",function(){t.instance.redo()})}i.undoStepsCount>0?(n.classList.add("boc-ur-clickable"),n.querySelector(".boc-undo-i").innerHTML=i.undoStepsCount,n.querySelector(".boc-undo-i").style.display="inline-block"):(n.classList.remove("boc-ur-clickable"),n.querySelector(".boc-undo-i").style.display="none"),i.redoStepsCount>0?(o.classList.add("boc-ur-clickable"),o.querySelector(".boc-redo-i").innerHTML=i.redoStepsCount,o.querySelector(".boc-redo-i").style.display="inline-block"):(o.classList.remove("boc-ur-clickable"),o.querySelector(".boc-redo-i").style.display="none")}}},e.undoRedoUI.prototype.on=function(t,i){return e.events.on(t,i,this._event_id),this},e.undoRedoUI.prototype.onChange=function(t){return this.on("change",function(i,n){return t.call(i,n)})},e.events.on("redraw",function(t,i){if(t.config.miniMap){if(t.manager.action!=e.action.move){e.miniMap._settings._scale=Math.min(e.miniMap.width/(t.response.boundary.maxX-t.response.boundary.minX),e.miniMap.height/(t.response.boundary.maxY-t.response.boundary.minY)),e.miniMap._settings._translateX=-t.response.boundary.minX*e.miniMap._settings._scale+(e.miniMap.width-(t.response.boundary.maxX-t.response.boundary.minX)*e.miniMap._settings._scale)/2,e.miniMap._settings._translateY=-t.response.boundary.minY*e.miniMap._settings._scale+(e.miniMap.height-(t.response.boundary.maxY-t.response.boundary.minY)*e.miniMap._settings._scale)/2;var n=t.getViewBox();e.miniMap._init(t),e.miniMap._drawMainCanvas(t),e.miniMap._drawRectSelectorCanvas(t,n);var o,r,a,s,c=t.element.querySelector('[data-id="mini-map-focus"]'),l=!1,p=null;c.onmousedown=function(h){var f,v,x=c.getBoundingClientRect(),g=x.top;if(o=parseInt(h.clientX-x.left),v=((r=parseInt(h.clientY-g))-e.miniMap._settings._translateY)/e.miniMap._settings._scale,(f=(o-e.miniMap._settings._translateX)/e.miniMap._settings._scale)>n[0]&&f<n[0]+n[2]&&v>n[1]&&v<n[1]+n[3])return h.preventDefault(),h.stopPropagation(),void(l=!0)},c.onmousemove=function(h){if(l){h.preventDefault(),h.stopPropagation();var u=c.getBoundingClientRect(),v=u.top;a=parseInt(h.clientX-u.left);var _=((s=parseInt(h.clientY-v))-r)/e.miniMap._settings._scale;n[0]=(a-o)/e.miniMap._settings._scale+n[0],n[1]=_+n[1],t.setViewBox(n),p&&(clearTimeout(p),p=null),p=setTimeout(function(){t._draw(!0,e.action.move)},300),e.miniMap._drawRectSelectorCanvas(t,n),o=a,r=s}},c.onmouseup=function(h){l&&(h.preventDefault(),h.stopPropagation(),l=!1)},c.onmouseout=function(h){l&&(h.preventDefault(),h.stopPropagation(),l=!1)}}}else{var d=t.element.querySelector('[data-id="mini-map"]');d&&d.parentNode.removeChild(d)}}),e.miniMap={},e.miniMap._settings={_translateX:0,_translateY:0,_scale:1},e.miniMap._drawMainCanvas=function(t){var i=t.element.querySelector('[data-id="mini-map-main"]'),n=i.getContext("2d");e.miniMap._initCtx(t,i,1);var o=0,r=[];!function a(s,c){if(Array.isArray(c))for(var l=0;l<c.length;l++)a(s,c[l]);else{for(n.fillStyle=e.miniMap.colors[3],n.beginPath(),n.lineWidth="0.5",n.fillRect(c.x,c.y,c.w,c.h),n.strokeRect(c.x,c.y,c.w,c.h),l=0;l<c.stChildrenIds.length;l++)o++,r.includes(c.id)||(1==o?n.fillStyle=e.miniMap.colors[0]:2==o?n.fillStyle=e.miniMap.colors[1]:3==o&&(n.fillStyle=e.miniMap.colors[2]),n.beginPath(),n.fillRect(c.x,c.y,c.w,c.h),n.strokeRect(c.x,c.y,c.w,c.h),r.push(c.id)),a(s,s.getNode(c.stChildrenIds[l])),o--;for(l=0;l<c.childrenIds.length;l++)a(s,s.getNode(c.childrenIds[l]))}}(t,t.roots)},e.miniMap._drawRectSelectorCanvas=function(t,i){var n=t.element.querySelector('[data-id="mini-map-focus"]'),o=n.getContext("2d");e.miniMap._initCtx(t,n,e.miniMap.opacity);var r=i[0],a=i[1],s=i[2],c=i[3];o.lineWidth=.5/e.miniMap._settings._scale,o.strokeStyle=e.miniMap.focusStroke,o.globalAlpha=1,o.clearRect(r,a,s,c),o.strokeRect(r,a,s,c)},e.miniMap._initCtx=function(t,i,n){var o=i.getContext("2d");i.width=i.width,i.height=i.height,o.clearRect(0,0,e.miniMap.width,e.miniMap.height),o.globalAlpha=n,1!=n&&(o.fillStyle=e.miniMap.selectorBackgroundColor,o.fillRect(0,0,e.miniMap.width,e.miniMap.height)),o.translate(e.miniMap._settings._translateX,e.miniMap._settings._translateY),o.scale(e.miniMap._settings._scale,e.miniMap._settings._scale)},e.miniMap._init=function(t){if(!t.element.querySelector('[data-id="mini-map"]')){var i=document.createElement("canvas");i.width=e.miniMap.width,i.height=e.miniMap.height,i.setAttribute("data-id","mini-map-main"),i.style.display="inline-block",i.style.backgroundColor=e.miniMap.backgroundColor,i.style.position="absolute",i.style.top=0,i.style.left=0;var n=document.createElement("canvas");n.width=e.miniMap.width,n.height=e.miniMap.height,n.setAttribute("data-id","mini-map-focus"),n.style.display="inline-block",n.style.position="absolute",n.style.top=0,n.style.left=0;var o=document.createElement("div");o.setAttribute("data-id","mini-map"),o.style.position="absolute";for(var r=["top","right","left","bottom"],a=0;a<r.length;a++){var s=r[a];e.isNEU(e.miniMap.position[s])||(o.style[s]="padding"==e.miniMap.position[s]?t.config.padding+"px":e.miniMap.position[s]+"px")}o.style.border=e.miniMap.border,o.style.padding=e.miniMap.padding+"px",o.style.backgroundColor=e.miniMap.backgroundColor;var c=document.createElement("div");c.style.position="relative",c.style.width=e.miniMap.width+"px",c.style.height=e.miniMap.height+"px",c.appendChild(i),c.appendChild(n),o.appendChild(c),t.element.appendChild(o);var l=function(f,v){t.__mouseScrollHandler(o,v)};t._addEvent(o,"DOMMouseScroll",l),t._addEvent(o,"mousewheel",l);var p=0,d=0,h=function(f){var v=f.clientX-p,x=f.clientY-d;if(!e.isNEU(o.style.left)){var _=parseFloat(o.style.left)+v;o.style.left=`${_}px`}if(!e.isNEU(o.style.right)){var g=parseFloat(o.style.right)-v;o.style.right=`${g}px`}if(!e.isNEU(o.style.bottom)){var y=parseFloat(o.style.bottom)-x;o.style.bottom=`${y}px`}if(!e.isNEU(o.style.top)){var b=parseFloat(o.style.top)+x;o.style.top=`${b}px`}p=f.clientX,d=f.clientY},u=function(){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",u)};e.miniMap.draggable&&o.addEventListener("mousedown",function(f){p=f.clientX,d=f.clientY,document.addEventListener("mousemove",h),document.addEventListener("mouseup",u)})}},e.miniMap.colors=["#E0E0E0","#BDBDBD","#9E9E9E","#757575"],e.miniMap.selectorBackgroundColor="white",e.miniMap.backgroundColor="white",e.miniMap.focusStroke="#f57c00",e.miniMap.opacity=.4,e.miniMap.border="1px solid #aeaeae",e.miniMap.width=250,e.miniMap.height=140,e.miniMap.padding=5,e.miniMap.position={top:void 0,left:"padding",right:void 0,bottom:"padding"},e.miniMap.draggable=!0,e._search={},e._search.search=function(t,i,n,o,r,a,s){var c=[],l=i.toLowerCase(),p=l.split(" ");if(s&&p.length>1){var d=p[0];s[d]&&(n=[s[d]],p=(l=l.replace(d,"").trim()).split(" "))}p=p.filter(function(b,m,w){return w.indexOf(b)===m});for(var h={},u=0;u<t.length;u++)for(var f=t[u],v=0;v<n.length;v++){var x=n[v];if(!e.isNEU(f[x])&&null!=(i=e._search.searchAndComputeScore(p,f[x],x,a))){var g=f.id;if(h[g]){if(h[g]&&h[g]<i.__score){h[g]=i.__score;for(var y=c.length-1;y>=0;y--)c[y].id==g&&c.splice(y,1);e._search.addNodeToResult(c,o,f,i,x,r)}}else h[g]=i.__score,e._search.addNodeToResult(c,o,f,i,x,r)}}return c.sort(function(b,m){return b.__score<m.__score?1:b.__score>m.__score?-1:0}),c},e._search.addNodeToResult=function(t,i,n,o,r,a){var s={};s.id=n.id,e.isNEU(n[a])||(s[a]=n[a]);for(var c=0;c<i.length;c++){var l=i[c];e.isNEU(n[l])||e.isNEU(s[l])&&(s[l]=n[l])}null!=o&&(e.isNEU(s.__score)&&(s.__score=o.__score),e.isNEU(s.__searchField)&&(s.__searchField=r),e.isNEU(s.__searchMarks)&&(s.__searchMarks=o.__searchMarks)),t.push(s)},e._search.searchAndComputeScore=function(t,i,n,o){if(e.isNEU(i)||e.isNEU(t)||!t.length)return null;"string"!=typeof i&&(i=i.toString());var r=i.toLowerCase(),a=e._search.searchIndexesOf(r,t);if(!a.length)return null;for(var s=r.length/100,c=0,l=0,p=c>0?100:0,d=0,h=0;h<t.length;h++)for(var u=t[h],f=0;f<a.length;f++)if(-1!=u.indexOf(a[f].searchPhrase)){d++;break}var v=100/(t.length/d);if(a.length)for(l=a[0].start,f=0;f<a.length;f++)if(c+=a[f].length,a[f].start<l&&(l=a[f].start),f>=1&&a[f-1].start>a[f].start){p=0;break}var x=0;0!=c&&(x=c/s);var _=c>0?100:0;0!=l&&(_=100-l/s);var g=0;o&&o[n]&&(g=o[n]),v&&(v=v/100*50),x>0&&(x=x/100*10),_>0&&(_=_/100*10),p>0&&(p=p/100*10),g>0&&(g=g/100*20);var y=Math.round(1e4*(v+x+_+p+g));a.sort(function(m,w){return m.start<w.start?-1:m.start>w.start?1:0});var b=i;for(f=a.length-1;f>=0;f--)b=(b=b.insert(a[f].start+a[f].length,"</mark>")).insert(a[f].start,"<mark>");return{__searchMarks:b,__score:y}},e._search.searchIndexesOf=function(t,i){var n=[];if(!e.isNEU(t))for(var o=0;o<i.length;o++){var r=i[o];if(!e.isNEU(r))for(var a=0;(a=t.indexOf(r,a))>-1;)n.push({length:r.length,start:a,searchPhrase:r}),a+=r.length}return n.sort(function(s,c){return s.length<c.length?1:s.length>c.length||s.start<c.start?-1:s.start>c.start?1:0}),n=n.filter(function(s){for(var c=!1,l=0;l<n.length;l++){var p=n[l].start,d=n[l].start+n[l].length-1,h=s.start,u=s.start+s.length-1;if(p==h&&d==u){c=!1;break}if(p>=h&&d<=u){c=!0;break}if(p<=h&&d>=u){c=!0;break}}return!c})},e.events.on("redraw",function(t,i){if(t.config.state){var n=[],o=[];(function r(a){if(Array.isArray(a))for(var s=0;s<a.length;s++)r(a[s]);else{for(("string"!=typeof a.id||"string"==typeof a.id&&-1==a.id.indexOf("split")&&-1==a.id.indexOf("mirror"))&&(n.push(a.id),1==a.min&&o.push(a.id)),s=0;s<a.stChildren.length;s++)r(a.stChildren[s]);for(s=0;s<a.children.length;s++)r(a.children[s])}})(t.roots),e.state._put(t.config.roots,t.width(),t.height(),t.response.viewBox,n,o,t.response.adjustify,t.config.state)}}),e.state={},e.state._buildStateNames=function(t){return{paramScale:t+"-scale",paramX:t+"-x",paramY:t+"-y",paramExp:t+"-exp",paramMin:t+"-min",paramRoots:t+"-roots",paramAdjustify:t+"-adjustify"}},e.state._put=function(t,i,n,o,r,a,s,c){if(c&&!e.isNEU(r)&&0!=r.length){var l=e.state._buildStateNames(c.name),p={roots:t,scale:Math.min(i/o[2],n/o[3]),x:o[0],y:o[1],exp:r,min:a,adjustify:s};if(c.writeToUrlParams){var d=new URLSearchParams(window.location.search);d.has(l.paramScale)?d.set(l.paramScale,p.scale):d.append(l.paramScale,p.scale),d.has(l.paramX)?d.set(l.paramX,p.x):d.append(l.paramX,p.x),d.has(l.paramY)?d.set(l.paramY,p.y):d.append(l.paramY,p.y),d.has(l.paramExp)?d.set(l.paramExp,p.exp.join("*")):d.append(l.paramExp,p.exp.join("*")),d.has(l.paramRoots)&&Array.isArray(p.roots)?d.set(l.paramRoots,p.roots.join("*")):Array.isArray(p.roots)&&d.append(l.paramRoots,p.roots.join("*")),d.has(l.paramMin)?d.set(l.paramMin,p.min.join("*")):d.append(l.paramMin,p.min.join("*")),d.has(l.paramAdjustify)?d.set(l.paramAdjustify,p.adjustify.x+"*"+p.adjustify.y):d.append(l.paramAdjustify,p.adjustify.x+"*"+p.adjustify.y),window.history.replaceState(null,null,"?"+d)}c.writeToIndexedDB&&(p.id=c.name,e.idb.put(p,function(h){0==h&&console.error("Cannot write row - "+c.name)})),c.writeToLocalStorage&&e.localStorage.setItem(c.name,JSON.stringify(p))}},e.state._get=function(t,i,n,o){if(t){var r=e.state._buildStateNames(t.name);if(t.readFromUrlParams){var a=new URLSearchParams(window.location.search);if(a.has(r.paramScale)&&a.has(r.paramX)&&a.has(r.paramY)&&a.has(r.paramExp)&&a.has(r.paramMin)&&a.has(r.paramAdjustify)){var s={},c=parseFloat(a.get(r.paramScale)),l=parseFloat(a.get(r.paramX)),p=parseFloat(a.get(r.paramY));(h=[])[0]=l,h[1]=p,h[2]=i/c,h[3]=n/c,s.vb=h,s.scale=c,s.x=l,s.y=p,s.roots=null,a.has(r.paramRoots)&&(s.roots=a.get(r.paramRoots).split("*")),s.exp=a.get(r.paramExp).split("*"),s.min=a.get(r.paramMin).split("*");var d=a.get(r.paramAdjustify).split("*");return s.adjustify={x:parseFloat(d[0]),y:parseFloat(d[1])},void o(s)}if(!t.readFromIndexedDB&&!t.readFromLocalStorage)return void o(null)}if(t.readFromLocalStorage){var h;if(null!=(s=e.localStorage.getItem(t.name)))return s=JSON.parse(s),(h=[])[0]=s.x,h[1]=s.y,h[2]=i/s.scale,h[3]=n/s.scale,s.vb=h,void o(s);if(!t.readFromIndexedDB)return void o(null)}t.readFromIndexedDB&&e.idb.read(t.name,function(u,f){if(0==u)console.error("Cannot read from - "+t.name),o(null);else if(null==u)o(null);else{var v=[];v[0]=f.x,v[1]=f.y,v[2]=i/f.scale,v[3]=n/f.scale,f.vb=v,o(f)}})}else o(null)},e.state.clear=function(t){if(!t)return!1;try{localStorage.removeItem(t);var i=e.state._buildStateNames(t),n=new URLSearchParams(window.location.search);n.has(i.paramScale)&&n.delete(i.paramScale),n.has(i.paramX)&&n.delete(i.paramX),n.has(i.paramY)&&n.delete(i.paramY),n.has(i.paramExp)&&n.delete(i.paramExp),n.has(i.paramRoots)&&n.delete(i.paramRoots),n.has(i.paramMin)&&n.delete(i.paramMin),n.has(i.paramAdjustify)&&n.delete(i.paramAdjustify),window.history.replaceState(null,null,"?"+n),e.idb.delete(t,function(o){0==o&&console.error("Cannot delete row - "+t)})}catch{}},e._magnify={},e.prototype.magnify=function(t,i,n,o,r){o||(o=this.config.anim);var a=this.getNode(t),s=this.getNodeElement(t);if(a||s){var c=e._magnify[t];c&&(null!=c.timer&&clearInterval(c.timer),null!=c.timerBack&&clearInterval(c.timerBack),s.setAttribute("transform","matrix("+c.transformStart.toString()+")"),e._magnify[t]=null),n&&(s=s.cloneNode(!0),this.getSvg().appendChild(s));var l=e._getTransform(s),p=JSON.parse(JSON.stringify(l));p[0]=i,p[3]=i;var h=a.h+a.h*(i-1);p[4]+=(a.w-(a.w+a.w*(i-1)))/2,p[5]+=(a.h-h)/2;var u=e.animate(s,{transform:l},{transform:p},o.duration,o.func);e._magnify[t]={timer:u,transformStart:l,nodeElement:s,front:n},r&&r(s)}},e.prototype.magnifyBack=function(t,i,n){i||(i=this.config.anim);var o=e._magnify[t];if(o){null!=o.timer&&clearInterval(o.timer),null!=o.timerBack&&clearInterval(o.timerBack);var r=e._getTransform(o.nodeElement);o.timerBack=e.animate(o.nodeElement,{transform:r},{transform:o.transformStart},i.duration,i.func,function(a){var s=a[0].getAttribute(e.attr.node_id);e._magnify[s]&&e._magnify[s].front&&(a[0].parentNode.removeChild(a[0]),e._magnify[s]=null),n&&n(a[0])})}},void 0===e&&(e={}),e.events.on("init",function(t,i){if(t.config.keyNavigation&&(t._addEvent(window,"keydown",t._windowKeyDownHandler),e.isNEU(t._keyNavigationActiveNodeId)&&t.roots&&t.roots.length)){var n=t.roots[0].id;e.isNEU(t.config.keyNavigation.focusId)||(n=t.config.keyNavigation.focusId),t._keyNavigationActiveNodeId=n,t.center(t._keyNavigationActiveNodeId)}}),e.prototype._windowKeyDownHandler=function(t,i){for(var n=i.target,o=null;n&&n!=this.element;){if(n.hasAttribute&&n.hasAttribute(e.attr.node_id)){o=n.getAttribute(e.attr.node_id);break}n=n.parentNode}if(n){var r=o?this.getNode(o):null,a={node:r,data:o?this.get(o):null,event:i};if(!1!==e.events.publish("key-down",[this,a])&&r)if("KeyF"==i.code)this.searchUI.find("");else if("ArrowRight"==i.code||r.isAssistant&&"ArrowDown"==i.code||r.isPartner&&"ArrowDown"==i.code){if(l=this.getNode(r.pid)){var s=l.childrenIds.indexOf(r.id);if(++s<l.childrenIds.length){var c=l.childrenIds[s];this._keyNavigationActiveNodeId=c,this.center(c)}}}else if("ArrowLeft"==i.code)(l=this.getNode(r.pid))&&(s=l.childrenIds.indexOf(r.id),--s>=0&&(this._keyNavigationActiveNodeId=c=l.childrenIds[s],this.center(c)));else if("ArrowUp"==i.code){var l;(l=this.getNode(r.pid))&&(c=l.id,(r.isAssistant||l.hasAssistants||r.isPartner||l.hasPartners)&&(s=l.childrenIds.indexOf(r.id),--s>=0&&(c=l.childrenIds[s])),this._keyNavigationActiveNodeId=c,this.center(c))}else if("ArrowDown"==i.code)r.childrenIds.length&&(this._keyNavigationActiveNodeId=r.childrenIds[0],this.center(r.childrenIds[0]));else if("Space"==i.code){var p=n.getAttribute(e.attr.node_id);return void this.toggleExpandCollapse(p,i)}}},e.events.on("redraw",function(t,i){t.config.keyNavigation&&e._keyNavigation(t)}),e.events.on("click",function(t,i){t.config&&t.config.keyNavigation&&(t._keyNavigationActiveNodeId=i.node.id,t.center(i.node.id))}),e._keyNavigation=function(t){var i=t.element.querySelector(":focus");if(i&&i.parentElement&&i.parentElement.hasAttribute(e.attr.node_id)){var n=i.parentElement;(r=(o=i).querySelector("title"))&&r.parentNode.removeChild(r),o.removeAttribute("tabindex")}if(!e.isNEU(t._keyNavigationActiveNodeId)&&(n=t.getNodeElement(t._keyNavigationActiveNodeId))&&n.children.length){var o;(o=n.children[0]).setAttribute("tabindex",2);var r,a={text:"",id:t._keyNavigationActiveNodeId};e.events.publish("screen-reader-text",[t,a]),!e.isNEU(a.text)&&((r=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML=a.text,o.appendChild(r)),e.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&t.searchUI.hide(),o.focus()}},e.elements={},e.elements.textbox=function(t,i,n,o){var r=e.elements._vidrf(t,i,o);if(r.doNotRender)return{html:""};var a="";return i.btn&&(a=`<a href="#" data-input-btn="" class="boc-link boc-link-boc-button">${i.btn}</a>`),{html:`<div class="boc-form-field" style="min-width: ${n};">\n                    <div class="boc-input" data-boc-input="" ${r.disabledAttribute} ${r.vlidators}>\n                        <label for="${r.id}">${e._escapeGreaterLessSign(r.label)}</label>\n                        <input ${r.readOnlyAttribute} data-binding="${e._escapeDoubleQuotes(r.binding)}" maxlength="256" id="${r.id}" name="${r.id}" type="text" value="${e._escapeDoubleQuotes(r.value)}" autocomplete="off">\n                        ${a}\n                    </div>\n                </div>`,id:r.id,value:r.value}},e.elements.checkbox=function(t,i,n,o){var r=e.elements._vidrf(t,i,o);if(r.doNotRender)return{html:""};var a=r.value?"checked":"";return{html:`<div class="boc-form-field"  style="min-width: ${n};" >\n                        <label class="boc-checkbox" data-boc-input="" ${r.disabledAttribute}>\n                            <input ${a} ${o?'onclick="return false;"':""} data-binding="${e._escapeDoubleQuotes(r.binding)}" type="checkbox"><span class="boc-checkbox-checkmark" type="checkbox"></span>${e._escapeGreaterLessSign(r.label)}\n                        </label>\n                    </div>`,id:r.id,value:a}},e.elements.select=function(t,i,n,o){if(o)return e.elements.textbox(t,i,n,o);var r=e.elements._vidrf(t,i,o);return r.doNotRender?{html:""}:{html:`<div class="boc-form-field" style="min-width: ${n};">\n                    <div class="boc-input" data-boc-input="" ${r.disabledAttribute} ${r.vlidators}>\n                        <label for="${r.id}">${e._escapeGreaterLessSign(r.label)}</label>\n                        <select data-binding="${e._escapeDoubleQuotes(r.binding)}" ${r.readOnlyAttribute} id="${r.id}" name="${r.id}">\n                            ${function(){for(var a="",s=0;s<r.options.length;s++){var c=r.options[s];a+=`<option ${c.value==r.value?"selected":""} value="${e._escapeDoubleQuotes(c.value)}">${e._escapeGreaterLessSign(c.text)}</option>`}return a}()}                           \n                        </select>\n                    </div>\n                </div>`,id:r.id,value:r.value}},e.elements.date=function(t,i,n,o){var r=e.elements._vidrf(t,i,o);return r.doNotRender?{html:""}:{html:`<div class="boc-form-field" style="min-width: ${n};">\n                    <div class="boc-input" data-boc-input="" ${r.disabledAttribute} ${r.vlidators}>\n                        <label for="${r.id}" class="hasval">${e._escapeGreaterLessSign(r.label)}</label>\n                        <input data-binding="${e._escapeDoubleQuotes(r.binding)}" ${r.readOnlyAttribute} maxlength="256" id="${r.id}" name="${r.id}" type="date" value="${e._escapeDoubleQuotes(r.value)}" autocomplete="off">\n                    </div>\n                </div>`,id:r.id,value:r.value}},e.elements._vidrf=function(t,i,n){var o={};if(i.binding||(i.binding=""),i.label||(i.label=""),o.options="select"!=i.type||Array.isArray(i.options)?i.options:[],o.value=t&&!e.isNEU(t[i.binding])?t[i.binding]:"",n&&o.options)for(var r=0;r<o.options.length;r++)if(o.options[r].value==o.value){o.value=o.options[r].text;break}if(o.id=e.elements.generateId(),o.disabledAttribute=n?"data-boc-input-disabled":"",o.readOnlyAttribute=n?"readonly":"",o.id=o.id,n&&e.isNEU(o.value)&&(o.doNotRender=!0),n&&"photo"==i.binding&&(o.id=null,o.doNotRender=!0),o.binding=i.binding,o.label=i.label,o.vlidators="",i.vlidators)for(var a in i.vlidators)o.vlidators+=`data-v-${a}="${i.vlidators[a]}" `;return o},e.elements.ids=[],e.elements.generateId=function(){for(;;){var t="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(!e.elements.ids.has(t))return e.elements.ids.push(t),t}},e.input={},e.input._timeout=null,e.input.initWithTimeout=function(){e.input._timeout&&(clearTimeout(e.input._timeout),e.input._timeout=null),e.input._timeout=setTimeout(e.input.init,200)},e.input.init=function(t){var i;i=t?t.querySelectorAll("[data-boc-input]"):document.querySelectorAll("[data-boc-input]");for(var n=0;n<i.length;n++){var o=i[n],r=null;o.type&&"hidden"==o.type.toLowerCase()&&(r=o),r||(r=o.querySelector("input")),r||(r=o.querySelector("select"));var a=o.querySelector("label");a&&(r.value||"select-one"==r.type&&r.selectedOptions&&r.selectedOptions.length&&""==r.selectedOptions[0].value&&r.selectedOptions[0].innerHTML)&&a.classList.add("hasval"),"checkbox"!=r.type.toLowerCase()&&r.addEventListener("focus",function(){this.classList.remove("boc-validation-error");var s=this.parentNode.querySelector("label");s.classList.add("focused");var c=s.querySelector(".boc-validation-error-message");c&&c.parentNode.removeChild(c)}),"checkbox"!=r.type.toLowerCase()&&r.addEventListener("blur",function(){e.input.blurHandler(this)})}},e.input.blurHandler=function(t){var i=t.parentNode.querySelector("label");i.classList.remove("focused"),t.value||"date"==t.type?i.classList.add("hasval"):i.classList.remove("hasval")},e.input.validate=function(t){var i=null;t.type&&"hidden"==t.type.toLowerCase()&&(i=t),i||(i=t.querySelector("input")),i||(i=t.querySelector("select"));var n=t.querySelector("label");if(i.classList.remove("boc-validation-error"),n){var o=n.querySelector(".boc-validation-error-message");o&&o.parentNode.removeChild(o)}i.value&&(i.value=i.value.trim());var r=t.getAttribute("data-v-required"),a=t.getAttribute("data-v-password"),s=t.getAttribute("data-v-email"),c=t.getAttribute("data-v-emails");return r&&""==i.value?(n.innerHTML+='<span class="boc-validation-error-message">&nbsp;'+r+"</span>",i.classList.add("boc-validation-error"),!1):a&&!e.input.validatePassword(i.value)?(n.innerHTML+='<span class="boc-validation-error-message">&nbsp;'+a+"</span>",i.classList.add("boc-validation-error"),!1):s&&!e.input.isValidEmail(i.value)?(n.innerHTML+='<span class="boc-validation-error-message">&nbsp;'+s+"</span>",i.classList.add("boc-validation-error"),!1):!(c&&!e.input.isValidEmails(i.value)&&(n.innerHTML+='<span class="boc-validation-error-message">&nbsp;'+c+"</span>",i.classList.add("boc-validation-error"),1))},e.input.validateAndGetData=function(t){for(var i=t.querySelectorAll("[data-boc-input]"),n=!0,o=0;o<i.length;o++)e.input.validate(i[o])||(n=!1);if(!n)return!1;var a=t.querySelectorAll("[data-binding]"),s={};for(o=0;o<a.length;o++){var c=a[o];s[c.getAttribute("data-binding")]="checkbox"==c.type.toLowerCase()?c.checked:c.value}return s},e.input.validatePassword=function(t){return t&&(t=t.trim()),!(t.length<5||t.length>18||-1!=t.indexOf(" "))},e.input.isValidEmails=function(t){if(t)for(var i=t.split(","),n=0;n<i.length;n++){var o=i[n].trim();if(!e.input.isValidEmail(o))return!1}return!0},e.input.isValidEmail=function(t){return t&&(t=t.trim()),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())},e.ui.css=function(){return'<style data-boc-styles>.boc-button{background-color:#039be5;cursor:pointer;width:calc(100%);height:50px;color:#fff;padding-top:5px;padding-left:7px;padding-right:7px;text-align:center;text-transform:uppercase;border:1px solid #3fc0ff;display:inline-block;border-radius:5px}.boc-button.orange{background-color:#f57c00;border:1px solid #ffa03e}.boc-button.yellow{background-color:#ffca28;border:1px solid #ffdf7c}.boc-button.lower{text-transform:unset}.boc-button.transparent{background-color:transparent}.boc-button:hover{background-color:#35afea}.boc-button.orange:hover{background-color:#f79632}.boc-button.yellow:hover{background-color:#ffd452}.boc-button:active{transform:matrix(.98,0,0,.98,0,0)}.boc-button-icon{text-align:initial;cursor:pointer;margin-bottom:15px;color:#039be5}.boc-dark .boc-button-icon:hover{background-color:#2d2d2d}.boc-light .boc-button-icon:hover{background-color:#ececec}.boc-button-icon>img{height:24px;width:24px;vertical-align:middle;padding:7px}.boc-button:focus{outline:0}.boc-button-icon>img{filter:invert(46%) sepia(66%) saturate(2530%) hue-rotate(171deg) brightness(95%) contrast(98%)}.boc-light .boc-button.transparent{color:#039be5}.boc-light .boc-button.transparent:hover{color:#fff}.boc-button-loading{background-color:transparent;cursor:pointer;width:calc(100% - 2px);height:50px;color:#fff;text-align:center;text-transform:uppercase;border:1px solid #027cb7;display:inline-block;display:flex;justify-content:center;align-items:center;display:none}.boc-button-loading .boc-loading-dots div{margin:0 10px}.boc-link-boc-button{position:absolute;right:10px;top:-1px}@media screen and (max-width:1000px){.boc-link-boc-button{right:50px}}[data-boc-input-disabled] .boc-link-boc-button{display:none}[dir=rtl] .boc-link-boc-button{left:10px;right:unset}.boc-img-button{width:48px;height:48px;cursor:pointer;border-radius:50%;background-color:#039be5;background-repeat:no-repeat;background-size:24px 24px;background-position:center center;margin:3px;display:inline-block}.boc-img-button:hover{background-color:#f57c00}.boc-checkbox{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.boc-checkbox input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.boc-checkbox-checkmark{position:absolute;top:0;left:0;height:25px;width:25px;border-radius:5px}.boc-dark [data-boc-input-disabled] .boc-checkbox-checkmark,.boc-dark [data-boc-input-disabled].boc-checkbox input:checked~.boc-checkbox-checkmark,.boc-light [data-boc-input-disabled] .boc-checkbox-checkmark,.boc-light [data-boc-input-disabled].boc-checkbox input:checked~.boc-checkbox-checkmark{background-color:#aeaeae!important}[data-boc-input-disabled].boc-checkbox{cursor:default}[dir=rtl] .boc-checkbox-checkmark{right:0}[dir=rtl] .boc-checkbox{padding-left:unset;padding-right:35px}.boc-dark .boc-checkbox-checkmark{background-color:#333;border:1px solid #5b5b5b}.boc-light .boc-checkbox-checkmark{background-color:#fff;border:1px solid #c7c7c7}.boc-dark .boc-checkbox:hover input~.boc-checkbox-checkmark{background-color:#3c3c3c}.boc-light .boc-checkbox:hover input~.boc-checkbox-checkmark{background-color:#f8f9f9}.boc-dark .boc-checkbox input:checked~.boc-checkbox-checkmark{background-color:#039be5}.boc-light .boc-checkbox input:checked~.boc-checkbox-checkmark{background-color:#039be5}.boc-checkbox-checkmark:after{content:"";position:absolute;display:none}.boc-checkbox input:checked~.boc-checkbox-checkmark:after{display:block}.boc-checkbox .boc-checkbox-checkmark:after{left:9px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.boc-filter{user-select:none}.boc-light .boc-filter{color:#757575}.boc-dark .boc-filter{color:#ccc}.boc-filter>div>div{display:inline-block;padding:3px 10px;cursor:pointer}.boc-filter-menu fieldset,.boc-filter>div,.filter-field-selected{border-radius:5px}.boc-filter-menu fieldset{overflow-y:auto;max-height:300px}.boc-filter>div.boc-filter-menu{padding:10px}.boc-light .boc-filter>div.boc-filter-menu,.boc-light .filter-field-selected{background-color:#f8f9f9}.boc-dark .boc-filter>div.boc-filter-menu,.boc-dark .filter-field-selected{background-color:#3c3c3c}.boc-light .boc-filter>div{background-color:#eee}.boc-dark .boc-filter>div{background-color:#333}.boc-form-perspective{transform-style:preserve-3d;perspective:500px;position:absolute;top:32px}.boc-form{box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;padding:14px;transform-origin:top center;user-select:none;display:none;position:relative;max-height:calc(100vh - 100px);overflow-y:auto;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.boc-form-bottom{border-bottom-left-radius:unset;border-bottom-right-radius:unset;border-top-left-radius:5px;border-top-right-radius:5px}.boc-form .separator{margin:0 10px}@media screen and (max-width:1000px){.boc-form-perspective{min-width:100%;max-height:calc(100% - 32px);left:unset!important;right:unset!important;transform:none!important}.boc-form .set{max-height:calc(100vh - 74px)}.boc-form-fieldset{max-width:unset!important}}.boc-light .boc-form .separator{border-bottom:1px solid #c7c7c7}.boc-dark .boc-form .separator{border-bottom:1px solid #5b5b5b}.boc-light .boc-form{background-color:#fff}.boc-dark .boc-form{background-color:#252526}.boc-item{padding:6px 12px 6px 12px;display:flex;flex-direction:row}.boc-light .boc-form .boc-item.selected,.boc-light .boc-form .boc-item:hover{background-color:#0074e8;color:#fff}.boc-dark .boc-form .boc-item.selected,.boc-dark .boc-form .boc-item:hover{background-color:#094771;color:#fff}.boc-item.selected img,.boc-item:hover img{filter:invert(100%)}.boc-item.selected img{visibility:visible!important}.boc-form-fieldset{display:flex;flex-wrap:wrap;margin:0!important}.boc-form-field{flex:1 0 21%;margin:3px;min-width:200px}.boc-form-field-100{flex:1 0 96%;margin:3px;min-width:200px}.boc-input{position:relative}.boc-input>input,.boc-input>select{height:50px;padding:18px 10px 2px 9px;width:100%;box-sizing:border-box;border-style:solid;border-width:1px}.boc-input select{height:50px;padding:20px 5px 4px 5px}[data-boc-input-disabled].boc-input>input,[data-boc-input-disabled].boc-input>select{border-color:transparent!important}.boc-light [data-boc-input-disabled]>input,.boc-light [data-boc-input-disabled]>select{background-color:#fff!important}.boc-dark [data-boc-input-disabled]>input,.boc-dark [data-boc-input-disabled]>select{background-color:#252526!important}[data-boc-input-disabled]>select{appearance:none;padding-left:8px}.boc-input>label{display:inline-block;position:absolute;padding-left:10px;padding-right:10px;color:#acacac;cursor:text;-webkit-transition:all .1s ease-out;-moz-transition:all .1s ease-out;-ms-transition:all .1s ease-out;-o-transition:all .1s ease-out;transition:all .1 ease-out;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:initial;text-align:initial;white-space:nowrap}.boc-input>label{top:12px;overflow:hidden;text-overflow:ellipsis;max-width:calc(100% - 14px)}.boc-input>label.focused,.boc-input>label.hasval{top:-1px}.boc-input>input,.boc-input>select{outline:0;border-radius:5px}.boc-dark .boc-input>label.focused,.boc-light .boc-input>label.focused{color:#039be5}.boc-dark .boc-input>input,.boc-dark .boc-input>select{color:#ccc;background-color:#333;border-color:#5b5b5b}.boc-light .boc-input>input,.boc-light .boc-input>select{color:#757575;background-color:#fff;border-color:#c7c7c7}.boc-light .boc-input>input:focus,.boc-light .boc-input>select:focus{border-color:#039be5;background-color:#f8f9f9}.boc-dark .boc-input>input:focus,.boc-dark .boc-input>select:focus{border-color:#039be5;background-color:#3c3c3c}.boc-dark .boc-input>input.boc-validation-error,.boc-dark .boc-input>select.boc-validation-error,.boc-light .boc-input>input.boc-validation-error,.boc-light .boc-input>select.boc-validation-error{border-color:#ca2a2a}.boc-dark .boc-validation-error-message,.boc-light .boc-validation-error-message{color:#ca2a2a}.boc-link{color:#039be5;cursor:pointer;text-decoration:underline}.boc-link:hover{color:#f57c00}.boc-dark ::-webkit-scrollbar,.boc-light ::-webkit-scrollbar{width:15px;height:15px}.boc-dark ::-webkit-scrollbar-corner{background:#1e1e1e}.boc-dark ::-webkit-scrollbar-track{background:#1e1e1e;border-left:1px solid #333;border-top:1px solid #333}.boc-dark ::-webkit-scrollbar-thumb{background:#424242}.boc-dark ::-webkit-scrollbar-thumb:hover{background:#4f4f4f}.boc-dark ::-webkit-scrollbar-thumb:active{background:#5e5e5e}.boc-light ::-webkit-scrollbar-corner{background:#fff}.boc-light ::-webkit-scrollbar-track{background:#fff;border-left:1px solid #ddd;border-top:1px solid #ddd}.boc-light ::-webkit-scrollbar-thumb{background:#c1c1c1}.boc-light ::-webkit-scrollbar-thumb:hover{background:#929292}.boc-light ::-webkit-scrollbar-thumb:active{background:#666}.boc-edit-form{position:fixed;top:0;right:0;height:100%;width:100%;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;display:flex;flex-direction:column;height:100%;width:400px}@media screen and (max-width:1000px){.boc-edit-form{width:100%}}.boc-dark .boc-edit-form{background-color:#252526}.boc-light .boc-edit-form{background-color:#fff}.boc-edit-form-header{height:200px;text-align:center;border-radius:10px}.export-service .boc-edit-form-header{border-radius:unset}.boc-edit-form-title{color:#fff;margin:0;padding:14px 17px 7px 17px}.boc-edit-form-avatar{border-radius:50%;width:150px;height:150px;position:absolute;top:75px;border:5px solid #fff;left:50%;transform:translateX(-50%);background-color:#cacaca;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0}.boc-edit-form-close{position:absolute;right:14px;top:14px;width:34px;height:34px;cursor:pointer}.boc-edit-form-fields{flex-grow:1;overflow-y:auto;overflow-x:hidden}.boc-edit-form-fields-inner{margin:0 7px 20px 7px}.boc-chart-menu{opacity:0;display:inline-block;position:absolute;text-align:left;user-select:none;min-width:270px;box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif;border-radius:10px}.boc-chart-menu>div:hover img{filter:invert(100%)}.boc-chart-menu [data-item]{text-align:start;padding:7px 10px}.boc-dark .boc-chart-menu [data-item]{background-color:#252526;color:#acacac;border-bottom:1px solid #333}.boc-dark .boc-chart-menu [data-item]:hover{background-color:#094771!important;color:#fff!important}.boc-dark .boc-chart-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.boc-light .boc-chart-menu [data-item]{background-color:#fff;color:#333;border-bottom:1px solid #c7c7c7}.boc-light .boc-chart-menu [data-item]:hover{background-color:#0074e8!important;color:#fff!important}.boc-light .boc-chart-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.boc-chart-menu [data-item] svg{vertical-align:middle}.boc-chart-menu [data-item]:first-child{border-top-left-radius:7px;border-top-right-radius:7px}.boc-chart-menu [data-item]:last-child{border-bottom-width:0;border-bottom-style:none;border-bottom-left-radius:7px;border-bottom-right-radius:7px}.boc-search{position:absolute}@media screen and (max-width:500px){.boc-search{width:calc(100% - 30px);left:15px}}.boc-search .boc-input{margin-bottom:0}.boc-search-input{color:#7a7a7a;width:100%;border:none;outline:0;padding-top:10px;padding-right:47px}.boc-search-image-td{width:43px}.boc-search-text-td{padding-inline-end:7px;line-height:15px;text-align:start}.boc-search table{box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;margin:0 3.5px 0 3.5px;width:calc(100% - 7px);border-radius:7px}.boc-search table tr:first-child td:first-child{border-top-left-radius:7px}.boc-search table tr:first-child td:last-child{border-top-right-radius:7px}[dir=rtl] .boc-search table tr:first-child td:first-child{border-top-left-radius:unset;border-top-right-radius:7px}[dir=rtl] .boc-search table tr:first-child td:last-child{border-top-right-radius:unset;border-top-left-radius:7px}.boc-search table tr:last-child td:first-child{border-bottom-left-radius:7px}.boc-search table tr:last-child td:last-child{border-bottom-right-radius:7px}[dir=rtl] .boc-search table tr:last-child td:first-child{border-bottom-left-radius:unset;border-bottom-right-radius:7px}[dir=rtl] .boc-search table tr:last-child td:last-child{border-bottom-right-radius:unset;border-bottom-left-radius:7px}.boc-dark .boc-search table{background-color:#252526;color:#acacac}.boc-search [data-search-item-id]{cursor:pointer}.boc-search-photo{margin:7px 7px 0 7px;width:32px;height:32px;background-size:cover;background-position:top center;border-radius:50%;display:inline-block;border:1px solid #8c8c8c}.boc-search [data-search-item-id]:hover .boc-link{color:#ffca28}.boc-search [data-search-item-id]:hover .boc-link:hover{color:#f57c00}.boc-dark .boc-search [data-search-item-id] td{border-top:1px solid #333}.boc-dark .boc-search [data-search-item-id]:hover,.boc-dark .boc-search [data-selected=yes]{background-color:#094771;color:#fff}.boc-light .boc-search table{background-color:#fff;color:#333}.boc-light .boc-search [data-search-item-id] td{border-top:1px solid #c7c7c7}.boc-light .boc-search [data-search-item-id]:hover,.boc-light .boc-search [data-selected=yes]{background-color:#0074e8;color:#fff}.boc-search [data-search-item-id]:first-child td{border-top:unset}.boc-ripple-container{position:absolute;top:0;right:0;bottom:0;left:0}.boc-drag-over rect{opacity:.5}.boc-ripple-container span{transform:scale(0);border-radius:100%;position:absolute;opacity:.75;background-color:#fff;animation:boc-ripple 1s}@-moz-keyframes boc-ripple{to{opacity:0;transform:scale(2)}}@-webkit-keyframes boc-ripple{to{opacity:0;transform:scale(2)}}@-o-keyframes boc-ripple{to{opacity:0;transform:scale(2)}}@keyframes boc-ripple{to{opacity:0;transform:scale(2)}}.boc-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.boc-slider:before{position:absolute;content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.boc-slider.round{border-radius:24px}.boc-slider.round:before{border-radius:50%}svg text:hover{cursor:default}svg.boc-cursor-grab,svg.boc-cursor-grab text:hover{cursor:grab}svg.boc-cursor-nodrop,svg.boc-cursor-nodrop text:hover{cursor:no-drop}svg.boc-cursor-copy,svg.boc-cursor-copy text:hover{cursor:copy}svg.boc-cursor-move,svg.boc-cursor-move text:hover{cursor:move}#boc-close-btn:focus,#boc-close-btn:hover{color:#000;text-decoration:none;cursor:pointer}#boc-id-select:focus{outline:.5px solid #aeaeae}#boc-sampleDialog #title:hover{cursor:default;background:gray}.boc-light{background-color:#fff;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.boc-dark{background-color:#1e1e1e;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.boc-light .boc-fill{fill:#fff}.boc-dark .boc-fill{fill:#1e1e1e}.boc-dark input,.boc-dark select,.boc-light input,.boc-light select{font:16px Helvetica,"Segoe UI",Arial,sans-serif}.boc-dark h1,.boc-light h1{font-size:30px;line-height:1}.boc-edit-form{position:absolute;border-radius:10px}.export-service .boc-edit-form{border-radius:unset}.boc-dark .boc-edit-form{color:#acacac}.boc-light .boc-edit-form{color:#333}.boc-dark ::-webkit-calendar-picker-indicator{filter:invert(70%)}.boc-light ::-webkit-calendar-picker-indicator{filter:invert(50%)}.boc-edit-form-instruments{margin:42px 10px 0 10px;text-align:center;min-height:70px}.boc-img-button svg{position:relative;top:12px}.boc-light .boc-toolbar-container svg circle,.boc-light .boc-toolbar-container svg line,.boc-light .boc-toolbar-container svg path{stroke:#8c8c8c!important}.boc-dark .boc-toolbar-container svg circle,.boc-dark .boc-toolbar-container svg line,.boc-dark .boc-toolbar-container svg path{stroke:#8c8c8c!important}.boc-dark .boc-toolbar-container svg rect{fill:#252526!important}.boc-dark .boc-toolbar-container [data-tlbr=minus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-bottom:1px solid #5b5b5b!important}.boc-dark .boc-toolbar-container [data-tlbr=plus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-top:1px solid #5b5b5b!important}.boc-dark .boc-toolbar-container [data-tlbr]>svg{border:1px solid #5b5b5b!important;background-color:#252526!important}.boc-toolbar-layout{height:123px;padding-top:20px;position:absolute;width:100%;left:"0";bottom:"-145px"}.boc-light .boc-toolbar-layout{border-top:1px solid #c7c7c7;background-color:#f9f9f9}.boc-dark .boc-toolbar-layout{border-top:1px solid #5b5b5b;background-color:#2b2b2b}.boc-dotted-connector path{stroke-dasharray:7}.boc-undo-redo{position:absolute;top:23px;left:23px}@media screen and (max-width:500px){.boc-undo-redo{position:absolute;top:83px;left:23px}}.boc-light .boc-undo-redo path{fill:#cacaca}.boc-dark .boc-undo-redo path{fill:#5b5b5b}.boc-light .boc-undo-redo .boc-ur-clickable path{fill:#9c9c9c}.boc-dark .boc-undo-redo .boc-ur-clickable path{fill:#8c8c8c}.boc-undo-redo .boc-ur-clickable rect{cursor:pointer}.boc-undo-redo>span{position:relative;display:inline-block;user-select:none}.boc-undo-redo .boc-undo-i{left:-6px;top:-6px}.boc-undo-redo .boc-redo-i{right:-6px;bottom:6px}.boc-undo-redo>span>span{color:#fff;position:absolute;display:inline-block;min-width:20px;min-height:20px;border-radius:50%;line-height:20px;text-align:center;padding:1px;user-select:none;cursor:pointer}.boc-light .boc-undo-redo>span>span{background-color:#9c9c9c}.boc-dark .boc-undo-redo>span>span{background-color:#8c8c8c}</style>'},void 0===e&&(e={}),e.prototype.onField=function(t){return this.on("field",function(i,n){return t.call(i,n)})},e.prototype.onInit=function(t){return this.on("init",function(i){return t.call(i)})},e.prototype.onRedraw=function(t){return this.on("redraw",function(i){return t.call(i)})},e.prototype.onUpdateNode=function(t){return this.on("update",function(i,n,o){return t.call(i,{oldData:n,newData:o})})},e.prototype.onUpdated=function(t){return this.on("updated",function(i){return t.call(i)})},e.prototype.onRemoveNode=function(t){return this.on("remove",function(i,n,o){return t.call(i,{id:n,newPidsAndStpidsForIds:o})})},e.prototype.onAddNode=function(t){return this.on("add",function(i,n){return t.call(i,{data:n})})},e.prototype.onDrop=function(t){return this.on("drop",function(i,n,o,r,a){return t.call(i,{dragId:n,dropId:o,dragNodeElement:r,event:a})})},e.prototype.onDrag=function(t){return this.on("drag",function(i,n,o,r){return t.call(i,{dragId:n,event:o,nodeIds:r})})},e.prototype.onExpandCollpaseButtonClick=function(t){return this.on("expcollclick",function(i,n,o,r){return t.call(i,{collapsing:n,id:o,ids:r})})},e.prototype.onExportStart=function(t){return this.on("exportstart",function(i,n){return t.call(i,n)})},e.prototype.onExportEnd=function(t){return this.on("exportend",function(i,n){return t.call(i,n)})},e.prototype.onNodeClick=function(t){return this.on("click",function(i,n){return t.call(i,n)})},e.prototype.onNodeDoubleClick=function(t){return this.on("dbclick",function(i,n){return t.call(i,{data:n})})},e.filterUI=function(){},e.filterUI.prototype.init=function(t){this.instance=t,this.element=null,this.filterBy=null,this._event_id=e._guid()},e.filterUI.prototype.addFilterTag=function(t){if(!this.instance.config.filterBy||e.isNEU(t))return!1;if(null!==this.filterBy||"object"!=typeof this.instance.config.filterBy||Array.isArray(this.instance.config.filterBy)||(this.filterBy=JSON.parse(JSON.stringify(this.instance.config.filterBy))),null!=this.filterBy)for(var i in this.filterBy){var n=t[i];if(null!=n){var o=this.filterBy[i];if(null!=o){var r=o[n];if(null!=r&&!1===r.checked)return!0}}}return!1},e.filterUI.prototype.show=function(t){var i=this.element.querySelector('[data-filter-field="'+t+'"]');i&&i.click()},e.filterUI.prototype.hide=function(){var t=this.instance.element.querySelector("[data-filter-close]");t&&t.click()},e.filterUI.prototype.update=function(){if(this.instance.config.filterBy){var t={};if("all"==this.instance.config.filterBy)for(var i=e.manager.getAllFields(this.instance.config),n=0;n<i.length;n++){var o=i[n];"tags"!=o&&"id"!=o&&"pid"!=o&&"ppid"!=o&&"stpid"!=o&&(t[o]={})}else if(Array.isArray(this.instance.config.filterBy))for(n=0;n<this.instance.config.filterBy.length;n++)t[this.instance.config.filterBy[n]]={};else if("object"==typeof this.instance.config.filterBy)for(var r in this.instance.config.filterBy)t[r]={};for(var a in t){var s=t[a];for(n=0;n<this.instance.config.nodes.length;n++){var c=this.instance.config.nodes[n][a];null!=c&&(s[c]||(s[c]={checked:!0,text:c}))}}if(null!=this.filterBy)for(var l in t)if(this.filterBy[l])for(var p in t[l])this.filterBy[l][p]&&(t[l][p]=this.filterBy[l][p]);this.filterBy=t;var d=this;this.element=this.instance.element.querySelector("[data-filter]"),this.element&&this.element.parentNode.removeChild(this.element),this.element=document.createElement("div"),this.element.setAttribute("data-filter",""),this.element.style.position="absolute",this.element.setAttribute("class","boc-filter"),this.instance.config.undoRedoStorageName?(this.element.style.top=0,this.element.style.left="50%",this.element.style.transform="translate(-50%)"):(this.element.style.top=this.instance.config.padding+"px",this.element.style.left=this.instance.config.padding+"px");var h="";for(var l in this.filterBy){var u={name:l,html:`<div data-filter-field="${l}">${l}</div>`};e.events.publish("add-filter",[d,u]),h+=u.html}this.element.innerHTML=`<div>${h}</div>`,this.element.addEventListener("click",function(f){if(f.target.hasAttribute("data-filter-close")||f.target.hasAttribute("data-filter-field")){for(var v=f.target.getAttribute("data-filter-field"),x=d.instance.element.querySelectorAll("[data-filter-menu]"),_=0;_<x.length;_++)x[_].style.display="none";var g=d.instance.element.querySelectorAll(".filter-field-selected");for(_=0;_<g.length;_++)g[_].classList.remove("filter-field-selected");var y=d.instance.element.querySelector("[data-filter-close]");if(y&&y.parentNode.removeChild(y),f.target.hasAttribute("data-filter-close")||!f.target.hasAttribute("data-filter-field"))return;var b=d.instance.element.querySelector(`[data-filter-menu="${v}"]`);if(!b){var m={name:v,text:"[All]",value:v,checked:!0,html:`<div>\n                        <input data-all type="checkbox" id="${v}" name="${v}" checked>\n                        <label for="${v}">[All]</label>\n                    </div>`};e.events.publish("add-item",[d,m]);var w=m.html;for(var S in d.filterBy[v]){var k=d.filterBy[v][S],I=k.text;null==I&&(I=S),e.events.publish("add-item",[d,m={name:v,text:I,value:S,checked:k.checked,html:`<div>\n                            <input  type="checkbox" id="${S}" name="${S}" ${k.checked?"checked":""}>\n                            <label for="${S}">${I}</label>\n                        </div>`}]),w+=m.html}(b=document.createElement("div")).innerHTML=`<fieldset>\n                                                    <legend>Filter by ${v}:</legend>\n                                                    ${w}\n                                                </fieldset>`,b.setAttribute("data-filter-menu",v),b.classList.add("boc-filter-menu"),f.target.parentNode.parentNode.appendChild(b);var A=b.querySelectorAll("input");for(_=0;_<A.length;_++)A[_].addEventListener("change",function(M){for(var N=M.target;N&&!N.hasAttribute("data-filter-menu");)N=N.parentNode;if(N){var C=N.getAttribute("data-filter-menu");if(M.target.hasAttribute("data-all")){for(var U=M.target.parentNode.parentNode.querySelectorAll("input"),R=0;R<U.length;R++)if(U[R]!=M.target)for(var P in U[R].checked=M.target.checked,d.filterBy[C])d.filterBy[C][P].checked=M.target.checked}else if(null!=d.filterBy[C][this.name]&&(d.filterBy[C][this.name].checked=this.checked),this.checked)for(var T=d.instance.config.nodes,E=0;E<T.length;E++)if(T[E][C]==this.name)for(var F=T[E];F;)if(e.isNEU(F.stpid))F=e.isNEU(F.pid)?null:d.instance._get(F.pid);else if((F=d.instance._get(F.stpid))[C]){var O=M.target.parentNode.parentNode.querySelector('[name="'+F[C]+'"]');O?(O.checked=this.checked,d.filterBy[C][F[C]].checked=this.checked):console.error('Cannot find element with selector: [name="'+F[C]+'"]')}d.instance.draw()}})}b.style.display="block",f.target.classList.add("filter-field-selected"),(y=document.createElement("div")).classList.add("close"),y.innerHTML="x",y.setAttribute("data-filter-close",""),f.target.parentNode.appendChild(y),e.events.publish("show-items",[d,{name:v}])}}),this.instance.element.appendChild(this.element),e.events.publish("update",[this,{}])}},e.filterUI.prototype.on=function(t,i){return e.events.on(t,i,this._event_id),this},void 0===e&&(e={}),void 0===e.remote&&(e.remote={}),e.LIMIT_NODES=!0,e.remote._fromResDTO=function(t,i,n,o,r){var a=i[t.id];t.x=a.p[0],t.y=a.p[1],t.w=a.p[2],t.h=a.p[3],null!=a.ln&&(t.leftNeighbor=r[a.ln]),null!=a.rn&&(t.rightNeighbor=r[a.rn]);for(var s=0;s<t.stChildren.length;s++)e.remote._fromResDTO(t.stChildren[s],i,n,o,r);for(s=0;s<t.children.length;s++)e.remote._fromResDTO(t.children[s],i,n,o,r)},e.remote._toReqDTO=function(t,i){var n={p:[t.id,null!=t.parent?t.parent.id:null,null!=t.stParent?t.stParent.id:null,t.w,t.h]};t.children.length>0&&(n.c=e.remote._convertToIdArray(t.children)),t.stChildren.length>0&&(n.v=e.remote._convertToIdArray(t.stChildren)),null!=t.layout&&0!=t.layout&&(n.l=t.layout),t.isAssistant&&(n.a=1),t.isSplit&&(n.s=t.isSplit),t.isMirror&&(n.im=t.isMirror),t.padding&&(n.q=t.padding),t.lcn&&(n.k=t.lcn),t.stContainerNodes&&(n.b=e.remote._convertToIdArray(t.stContainerNodes)),t.isPartner&&(n.i=t.isPartner),t.hasPartners&&(n.g=t.hasPartners),t.partnerSeparation&&(n.e=t.partnerSeparation),i.push(n);for(var o=0;o<t.stChildren.length;o++)e.remote._toReqDTO(t.stChildren[o],i);for(o=0;o<t.children.length;o++)e.remote._toReqDTO(t.children[o],i)},e.remote._toReqLayoutConfigsDTO=function(t){var i={};for(var n in t){var o=t[n];i[n]||(i[n]=[]),i[n][0]=o.orientation,i[n][1]=o.levelSeparation,i[n][2]=o.mixedHierarchyNodesSeparation,i[n][3]=o.subtreeSeparation,i[n][4]=o.siblingSeparation,i[n][5]=o.layout,i[n][6]=o.columns,i[n][7]=o.collapse,i[n][8]=o.assistantSeparation,i[n][9]=o.partnerNodeSeparation}return i},e.remote._convertToIdArray=function(t){for(var i=[],n=0;n<t.length;n++)i.push(t[n].id);return i},e.remote._setPositions=function(t,i,n,o){for(var r=[],a=[],s=e.remote._toReqLayoutConfigsDTO(i),c=0;c<t.length;c++)a.push(t[c].id),e.remote._toReqDTO(t[c],r);var l={n:r,c:s,r:a,v:"8.12.02"};if(e.LIMIT_NODES||(l.l=!0),null!=e.remote._fromReqDTO)e.remote._fromReqDTO(l.n,l.r,l.c,function(d){for(var h=0;h<t.length;h++)e.remote._fromResDTO(t[h],d,0,t,o);n()});else{l=JSON.stringify(l);var p=e.localStorage.getItem(l);p&&(p=JSON.parse(p)),p&&!p.limit?e.remote._proceed(t,p,o,n):e.remote._findRegion(function(d){e._ajax(d,"post",l,"json",function(h){h.error?n(2):(e.remote._proceed(t,h,o,n),e.localStorage.setItem(l,JSON.stringify(h)))})})}},e.remote._proceed=function(t,i,n,o){if("string"==typeof i&&(i=JSON.parse(i)),i.limit&&1==i.limit)o(i.limit);else{for(var r=0;r<t.length;r++)e.remote._fromResDTO(t[r],i,0,t,n);o()}},e.remote._findRegion=function(t){var i=e.localStorage.getItem("funcUrl");if(i)t(i);else{for(var n=["au-e","au-se","brs","ca","ca-e","easia","eus-2","eus","fr","ind","jp-e","jp-w","kr","n-eu","se-asia","s-ind","uk-s","uk-w","us","us-n-c","us-s-c","w-c-us","w-eu","w-ind","w-us-2","wus"],o=[],r=0;r<n.length;r++)o.push(new XMLHttpRequest);for(r=0;r<n.length;r++)!function(){var a="https://"+n[r]+"-balkangraph.azurewebsites.net/api/OrgChartJS",s=o[r];s.onreadystatechange=function(){if(4==this.readyState&&200==this.status){e.localStorage.setItem("funcUrl",a),t(a);for(var c=0;c<o.length;c++)o[c].abort()}},s.open("GET",a,!0),s.send()}()}}}}]);