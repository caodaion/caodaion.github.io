<div class="add-event-bottom-sheet">
  <div class="header">
    <h3>{{ isEditMode ? 'Chỉnh sửa sự kiện' : 'Thêm sự kiện mới' }}</h3>
    <button mat-icon-button (click)="onCancel()" class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="content">
    <div class="date-display">
      <mat-icon>event</mat-icon>
      <span>{{ formattedDate }}</span>
    </div>

    <form [formGroup]="eventForm" (ngSubmit)="onSave()">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Tiêu đề sự kiện</mat-label>
        <input matInput formControlName="title" placeholder="Nhập tiêu đề sự kiện" required>
        <mat-error *ngIf="eventForm.get('title')?.hasError('required')">
          Tiêu đề là bắt buộc
        </mat-error>
        <mat-error *ngIf="eventForm.get('title')?.hasError('minlength')">
          Tiêu đề phải có ít nhất 1 ký tự
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Mô tả</mat-label>
        <textarea matInput formControlName="description" 
                placeholder="Nhập mô tả sự kiện (tùy chọn)" 
                rows="3"></textarea>
      </mat-form-field>

    <div class="time-fields">
      <mat-form-field appearance="outline" class="time-field">
        <mat-label>Thời gian bắt đầu</mat-label>
        <mat-select formControlName="startTime">
          <mat-option *ngFor="let time of timeOptions" [value]="time">
            {{ time }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="time-field">
        <mat-label>Thời gian kết thúc</mat-label>
        <mat-select formControlName="endTime">
          <mat-option *ngFor="let time of timeOptions" [value]="time">
            {{ time }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

      <div class="actions">
        <button mat-button type="button" (click)="onCancel()" class="cancel-button">
          Hủy
        </button>
        <button mat-raised-button type="submit" 
                [disabled]="!eventForm.valid" 
                color="primary" 
                class="save-button">
          <mat-icon>{{ isEditMode ? 'save' : 'add' }}</mat-icon>
          {{ isEditMode ? 'Cập nhật' : 'Tạo sự kiện' }}
        </button>
      </div>
    </form>
  </div>
</div>
