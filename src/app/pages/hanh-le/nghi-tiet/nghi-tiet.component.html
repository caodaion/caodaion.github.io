<div class="wrapper-container">
  <app-header
    class="header"
    [prevPage]="{
      navigate: { link: 'tac-vu/hanh-le' }
    }"
  >
    <div class="kinh-header">
      <app-header-title>{{ nghiTiet?.name }}</app-header-title>
    </div>
  </app-header>
  <div class="flex-1 max-h-full overflow-hidden">
    <div class="wrapper-container">
      <div class="flex flex-col justify-center items-center">
        Lướt qua <mat-icon>navigate_next</mat-icon>
        <mat-radio-group
          *ngIf="nghiTiet?.activeToggle"
          [(ngModel)]="nghiTietToggle"
          (change)="filterNghiTiet()"
        >
          <mat-radio-button [value]="'down'">Lễ sanh đổ xuống</mat-radio-button>
          <mat-radio-button [value]="'up'">Trên Lễ sanh</mat-radio-button>
        </mat-radio-group>
      </div>
      <div class="flex-1 overflow-hidden">
        <mat-tab-group class="h-full">
          <mat-tab [label]="'Bổn xướng'">
            <swiper-container class="h-full" appSwiper>
              <swiper-slide
                *ngFor="let item of filteredNghiTiet?.steps; let index = index"
              >
                <div
                  class="h-full w-full flex items-center justify-center flex-col"
                >
                  <div class="text-center">
                    {{ index + 1 | number : "2.0-0" }}
                  </div>
                  <div class="text-3xl text-center">{{ item?.xuong }}</div>
                  <div class="text-center">{{ item?.description }}</div>
                </div>
              </swiper-slide>
            </swiper-container>
          </mat-tab>
          <mat-tab [label]="'In'">
            <mat-form-field class="w-full">
              <mat-label>Cỡ chữ</mat-label>
              <mat-select [(ngModel)]="fontSize">
                <mat-option *ngFor="let item of fontSizeRange" [value]="item"
                  >{{ item }}px</mat-option
                >
              </mat-select>
            </mat-form-field>
            <button
              mat-flat-button
              (click)="onPrint(printArea)"
              [color]="'primary'"
              class="w-full"
            >
              <mat-icon>print</mat-icon>In
            </button>
            <div #printArea class="p-4">
              <h1>{{ nghiTiet?.name }}</h1>
              <p
                *ngFor="let item of filteredNghiTiet?.steps; let index = index"
                [ngStyle]="{ fontSize: fontSize ? fontSize + 'px' : '16px' }"
              >
                {{ index + 1 | number : "2.0-0" }}.
                <strong>{{ item?.xuong }}: </strong>
                {{ item?.description }}
              </p>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>
  </div>
</div>
