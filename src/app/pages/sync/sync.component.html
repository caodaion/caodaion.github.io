<div class="container-fluid">
  <h1>ƒê·ªìng b·ªô d·ªØ li·ªáu</h1>
  <div *ngIf="syncData">
    <div *ngIf="syncData?.type === 'journey'">
      <p>
        D·ªØ li·ªáu ƒë∆∞·ª£c ƒë·ªìng b·ªô l√† d·ªØ li·ªáu: <strong> S·ªï tay h√†nh tr√¨nh</strong>
      </p>
      <div *ngIf="syncData.data">
        <button
          mat-flat-button
          [color]="'primary'"
          *ngIf="!isSyncSavedLoccaly"
          (click)="onSyncJourneyData()"
        >
          <mat-icon>sync</mat-icon>
          ƒê·ªìng b·ªô ngay
        </button>
        <div *ngIf="isSyncSavedLoccaly" class="text-center">
          <span
            [ngStyle]="{
              fontSize: isShowPhoneLayout ? '100px' : '200px'
            }"
            >üéâ</span
          >
          <h2>D·ªØ li·ªáu S·ªï tay h√†nh tr√¨nh ƒë√£ ƒë∆∞·ª£c ƒë·ªìng b·ªô gi·ªëng nhau</h2>
        </div>
        <table
          mat-table
          [dataSource]="syncData.data"
          *ngIf="!isShowPhoneLayout"
        >
          <ng-container matColumnDef="timestamp">
            <th mat-header-cell *matHeaderCellDef>Th·ªùi gian</th>
            <td mat-cell *matCellDef="let element">
              {{ element.timestamp | date : "dd/MM/YYYY hh:mm:ss" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef>Lo·∫°i</th>
            <td mat-cell *matCellDef="let element">
              {{ getRowData(element, "type") }}
            </td>
          </ng-container>
          <ng-container matColumnDef="location">
            <th mat-header-cell *matHeaderCellDef>ƒê·ªãa ƒëi·ªÉm</th>
            <td mat-cell *matCellDef="let element">
              {{ getRowData(element, "location") }}
            </td>
          </ng-container>
          <ng-container matColumnDef="rating">
            <th mat-header-cell *matHeaderCellDef>ƒê√°nh gi√°</th>
            <td mat-cell *matCellDef="let element">
              {{ ratingPieChartLabels[element.rating - 1] || "Ch∆∞a ƒë√°nh gi√°" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="device">
            <th mat-header-cell *matHeaderCellDef>Thi·∫øt b·ªã</th>
            <td mat-cell *matCellDef="let element">
              {{ element.method }} tr√™n {{ element.device }}
            </td>
          </ng-container>
          <ng-container matColumnDef="comment">
            <th mat-header-cell *matHeaderCellDef>Ghi ch√∫</th>
            <td mat-cell *matCellDef="let element">
              {{ element.comment }}
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <mat-list *ngIf="isShowPhoneLayout">
          <mat-list-item *ngFor="let item of syncData.data; let index = index">
            <span matListItemTitle>{{ getRowData(item, "type") }} </span>
            <span matListItemLine
              ><strong>ƒê·ªãa ƒëi·ªÉm:</strong>
              {{ getRowData(item, "location") }}</span
            >
            <span matListItemLine
              ><strong>Th·ªùi gian:</strong>
              {{ item.timestamp | date : "dd/MM/YYYY hh:mm:ss" }}</span
            >
            <span matListItemLine
              ><strong>ƒê√°nh gi√°: </strong
              >{{ ratingPieChartLabels[item.rating - 1] }}</span
            >
            <span matListItemLine
              ><strong>Ph∆∞∆°ng th·ª©c: </strong>{{ item.method }} tr√™n
              {{ item.device }}</span
            >
            <span matListItemLine
              ><strong>Ghi ch√∫: </strong>{{ item.comment }}</span
            >
            <mat-divider matListItemLine></mat-divider>
          </mat-list-item>
        </mat-list>
      </div>
    </div>
  </div>
  <div *ngIf="!syncData">
    <button
      mat-flat-button
      [color]="'primary'"
      (click)="onGoToGenerate()"
      class="w-100"
    >
      <mat-icon>add</mat-icon>
      T·∫°o m√£ ƒë·ªìng b·ªô ngay
    </button>
  </div>
</div>
<ng-template #confirmSyncJourneyDialog>
  <div mat-dialog-title>X√°c nh·∫≠n ƒë·ªìng b·ªô S·ªï tay h√†nh tr√¨nh</div>
  <mat-dialog-content>
    <strong>L∆ØU √ù:</strong>
    <p>
      N·∫•u ch·∫•p nh·∫≠n, S·ªï tay h√†nh tr√¨nh hi·ªán t·∫°i c·ªßa b·∫°n s·∫Ω ƒë∆∞·ª£c l√†m m·ªõi theo d·ªØ
      li·ªáu ƒë·ªìng b·ªô.
    </p>
    <p>B·∫°n c√≥ mu·ªën ti·∫øp t·ª•c?</p>
  </mat-dialog-content>
  <mat-dialog-actions>
    <button mat-flat-button mat-dialog-close="true">H·ªßy</button>
    <button
      mat-flat-button
      mat-dialog-close="true"
      [color]="'primary'"
      (click)="storeJourney()"
    >
      Ch·∫•p nh·∫≠n
    </button>
  </mat-dialog-actions>
</ng-template>
