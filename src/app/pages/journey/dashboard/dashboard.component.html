<div
  class="dashboard-welcome"
  *ngIf="!localStorageData || localStorageData?.length == 0"
>
  <span class="dashboard-welcome-icon">ü§î</span>
  <h2>C√≥ v·∫ª nh∆∞ b·∫°n ch∆∞a th·ª±c hi·ªán ghi d·∫•u v√†o s·ªï tay h√†nh tr√¨nh c·ªßa m√¨nh</h2>
  <button
    mat-flat-button
    [color]="'primary'"
    class="w-100"
    (click)="onShowLog()"
  >
    <mat-icon>add</mat-icon>
    Ghi d·∫•u h√†nh tr√¨nh ngay!
  </button>
</div>
<div class="dashboard-chart rating-pie-chart" *ngIf="isShowChart">
  <h2>
    Bi·ªÉu ƒë·ªì ƒë·ªô h√†i l√≤ng
    <button
      mat-icon-button
      [matTooltip]="'T·∫£i l·∫°i th·ªëng k√™'"
      (click)="getData()"
    >
      <mat-icon>replay</mat-icon>
    </button>
  </h2>
  <canvas
    baseChart
    [type]="'pie'"
    [datasets]="ratingPieChartDatasets"
    [labels]="ratingPieChartLabels"
    [options]="ratingPieChartOptions"
    [plugins]="ratingPieChartPlugins"
    [legend]="ratingPieChartLegend"
  >
  </canvas>
</div>
<div class="dashboard-chart type-pie-chart" *ngIf="isShowChart">
  <h2>
    Bi·ªÉu ƒë·ªì lo·∫°i ghi d·∫•u
    <button
      mat-icon-button
      [matTooltip]="'T·∫£i l·∫°i th·ªëng k√™'"
      (click)="getData()"
    >
      <mat-icon>replay</mat-icon>
    </button>
  </h2>
  <canvas
    baseChart
    [type]="'pie'"
    [datasets]="typePieChartDatasets"
    [labels]="typePieChartLabels"
    [options]="typePieChartOptions"
    [plugins]="typePieChartPlugins"
    [legend]="typePieChartLegend"
  >
  </canvas>
</div>
<div *ngIf="isShowChart" class="view-data">
  <h2>
    Danh s√°ch chi ti·∫øt
    <button
      mat-icon-button
      [matTooltip]="'T·∫£i l·∫°i th·ªëng k√™'"
      (click)="getData()"
    >
      <mat-icon>replay</mat-icon>
    </button>
  </h2>
  <table mat-table [dataSource]="localStorageData" *ngIf="!isShowPhoneLayout">
    <ng-container matColumnDef="timestamp">
      <th mat-header-cell *matHeaderCellDef>Th·ªùi gian</th>
      <td mat-cell *matCellDef="let element">
        {{ element.timestamp | date : "dd/MM/YYYY hh:mm:ss" }}
      </td>
    </ng-container>
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef>Lo·∫°i</th>
      <td mat-cell *matCellDef="let element">
        {{ getRowData(element, "type") }}
      </td>
    </ng-container>
    <ng-container matColumnDef="location">
      <th mat-header-cell *matHeaderCellDef>ƒê·ªãa ƒëi·ªÉm</th>
      <td mat-cell *matCellDef="let element">
        {{ getRowData(element, "location") }}
      </td>
    </ng-container>
    <ng-container matColumnDef="rating">
      <th mat-header-cell *matHeaderCellDef>ƒê√°nh gi√°</th>
      <td mat-cell *matCellDef="let element">
        {{ ratingPieChartLabels[element.rating - 1] || "Ch∆∞a ƒë√°nh gi√°" }}
      </td>
    </ng-container>
    <ng-container matColumnDef="comment">
      <th mat-header-cell *matHeaderCellDef>Ghi ch√∫</th>
      <td mat-cell *matCellDef="let element">
        {{ element.comment }}
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-list *ngIf="isShowPhoneLayout">
    <mat-list-item *ngFor="let item of localStorageData">
      <span matListItemTitle>{{ getRowData(item, "type") }} </span>
      <span matListItemLine
        ><strong>ƒê·ªãa ƒëi·ªÉm:</strong> {{ getRowData(item, "location") }}</span
      >
      <span matListItemLine
        ><strong>Th·ªùi gian:</strong>
        {{ item.timestamp | date : "dd/MM/YYYY hh:mm:ss" }}</span
      >
      <span matListItemLine
        ><strong>ƒê√°nh gi√°: </strong
        >{{ ratingPieChartLabels[item.rating - 1] }}</span
      >
      <span matListItemLine><strong>Ghi ch√∫: </strong>{{ item.comment }}</span>
      <mat-divider matListItemLine></mat-divider>
    </mat-list-item>
  </mat-list>
</div>
