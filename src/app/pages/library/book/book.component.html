<div class="wrapper-container book-content-container">
  <app-header
    class="header"
    [prevPage]="{
      navigate: {
        link: getBackLink()
      }
    }"
  >
    <div class="book-header">
      <app-header-title>{{ contentName }}</app-header-title>
    </div>
  </app-header>
  <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>
  <div class="book-container-wrapper" *ngIf="!isShowTableContent">
    <mat-drawer-container>
      <mat-drawer-content>
        <div class="w-full sticky top-0 flex items-center">
          <mat-form-field class="w-full">
            <mat-label>Cỡ chữ</mat-label>
            <mat-select
              [(ngModel)]="fontSize"
              (ngModelChange)="updateFontSize()"
            >
              <mat-option *ngFor="let item of fontSizeRange" [value]="item">{{
                item
              }}</mat-option>
            </mat-select>
          </mat-form-field>
          <button
            mat-flat-button
            (click)="libradianDrawer.toggle()"
            [matTooltip]="'Mục lục'"
            [color]="'primary'"
          >
            <mat-icon>list</mat-icon>
          </button>
        </div>
        <div
          *ngIf="content"
          class="h-100 px-3"
          [ngStyle]="{
            fontSize: fontSize + 'px'
          }"
        >
          <markdown
            *ngIf="content"
            class="variable-binding w-full text-justify bg-white select-text"
            [data]="content"
          ></markdown>
          <ng-container *ngFor="let item of tableContent">
            <markdown
              *ngIf="item?.content"
              class="variable-binding w-full text-justify bg-white select-text"
              [data]="item?.content"
              [id]="item?.key"
            ></markdown>
            <mat-divider class="!my-11"></mat-divider>
          </ng-container>
        </div>
      </mat-drawer-content>
      <mat-drawer [mode]="'side'" [position]="'end'" #libradianDrawer>
        <ul>
          <li *ngFor="let item of tableContent">
            <a
              [href]="'trang-chu/thu-vien/' + key + '#' + item?.key"
              class="block p-3"
            >
              {{ item?.description }}
            </a>
          </li>
        </ul>
      </mat-drawer>
    </mat-drawer-container>
  </div>
  <app-bottom-navigator
    *ngIf="content?.type == 'block'"
    [prev]="{ text: 'Trước đó', navigate: { link: navigate.prev.link } }"
    [next]="{ text: 'Tiếp theo', navigate: { link: navigate.next.link } }"
  ></app-bottom-navigator>
</div>
