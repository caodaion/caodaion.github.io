<div
  class="flex items-center justify-between border-b p-3 sticky top-0 z-20 bg-white"
>
  <div
    *ngIf="prev"
    class="w-full cursor-pointer flex items-center justify-start"
    [routerLink]="'/game/purify/' + prev.key"
  >
    <mat-icon>arrow_back_ios</mat-icon>
    {{ prev?.key }}. {{ prev?.name }}
  </div>
  <div class="w-[1px] h-6 bg-[#e5e7eb]"></div>
  <div
    *ngIf="next"
    class="w-full cursor-pointer flex items-center justify-end"
    [routerLink]="'/game/purify/' + next.key"
  >
    {{ next?.key }}. {{ next?.name }}
    <mat-icon>arrow_forward_ios</mat-icon>
  </div>
</div>
<div class="container-fluid">
  <div class="text-center pt-3">
    <p>{{ purify?.key }}</p>
    <h1>{{ purify?.name || "???" }}</h1>
  </div>
  <audio
    [src]="purify?.audio"
    [controls]="true"
    class="w-100"
    [autoplay]="true"
  ></audio>
  <div class="w-full flex flex-wrap py-8 relative">
    <div class="w-full lg:w-1/3">
      <app-purify-card [purify]="purify" (click)="saveCard()"></app-purify-card>
    </div>
    <div class="w-full lg:w-2/3 lg:sticky top-0">
      <div class="flex h-full">
        <textarea
          *ngIf="contentEditable"
          class="variable-textarea w-1/2 h-full p-3"
          [(ngModel)]="purify.article"
          placeholder="Update the article content"
        ></textarea>
        <markdown
          *ngIf="purify.article"
          class="variable-binding w-full lg:w-1/2 p-3 text-justify bg-white"
          [data]="purify.article"
          [ngClass]="{ 'lg:w-full': !contentEditable }"
        ></markdown>
      </div>
      <div #videoFrame class="aspect-video"></div>
    </div>
  </div>
</div>

<ng-template #saveCardDialog>
  <app-purify-card [purify]="purify" [saveCard]="true"></app-purify-card>
</ng-template>
