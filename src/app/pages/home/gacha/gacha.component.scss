@use "../../../../sass/variables.scss";
@import url('https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Fleur+De+Leah&display=swap');


.gachaContainer {
    @apply p-6 relative flex flex-col justify-center items-center;
    h1 {
        font-family: Dancing Script;
        color: #ca3b2e;
    }
    h3 {
        font-family: Dancing Script;
    }
}
.lixi {
    @apply w-80 lg:w-96 h-80 lg:h-96 cursor-pointer relative bg-[#ca3b2e] overflow-hidden;
    transition: 0.3s;
    box-shadow: 0px 25px 20px -20px rgba(0,0,0,0.45);
    border-radius: 30px;
    &::before {
        content: "";
        position: absolute;
        bottom: -40px;
        width: 80%;
        height: 28px;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 50%;
    }
    .lixiSide {
        @apply absolute w-0 h-0;
        border-left: 192px solid transparent;
        border-right: 192px solid transparent;
        border-bottom: 192px solid #ea4335;
        top: 50%;
        left: 50%;
        transform-style: preserve-3d;
        transition: 0.3s;
        z-index: 1;
        &.topSide {
            transform-origin: bottom center;
            transform: perspective(75em) translate(-50%, -200%) rotateX(180deg);
            border-bottom: 192px solid #ca3b2e;
            &::before {
                content: '';
                transform-origin: bottom center;
                transform: perspective(75em) translate(-50%, -200%) rotateX(180deg);
            }
        }
        &.rightSide {
            transform: translate(-0%, -100%) rotate(-90deg);
            transform-origin: bottom center;
        }
        &.bottomSide {
            transform: translate(-50%, -0%) rotate(0deg);
            transform-origin: bottom center;
        }
        &.leftSide {
            transform-origin: bottom center;
            transform: translate(-100%, -100%) rotate(90deg);
        }
        &.middleSide {
            transform-origin: center center;
            transform: translate(-50%, -50%) rotate(45deg);
            background-color: #f3c52a;
            height: 150px;
            width: 150px;
            border: none;
            border-radius: 12px;
            div {
                font-family: Dancing Script;
                transform: translate(-50%, -50%) rotate(-45deg);
                font-size: 3rem;
                text-align: center;
                position: absolute;
                top: 50%;
                left: 50%;
                font-weight: bold;
                line-height: 2rem;
            }
        }
    }

    &.active {
        animation: 5s openLixiBox forwards;
        overflow: visible;
        border-top-left-radius: 0;
        border-top-right-radius: 0;
        .topSide {
            transform: perspective(75em) translate(-50%, -200%) rotateX(0deg);
            z-index: 0;
        }
        .lixiSide {
            animation: 5s hideLixiBoxSide forwards;    
            pointer-events: none;
        }
        .gachaResult {
            animation: 5s getGachaResult forwards;   
        }
    }
    
}

.frame-selector {
    font-family: Roboto;
}

@keyframes openLixiBox {
    0% {
        transform: translateY(0%) scale(1);
    }
    25% {
        transform: translateY(90%) scale(1.5);
    }
    50% {
        transform: translateY(150%) scale(1.5);
    }
    75% {
        transform: translateY(150%) scale(1.5);
    }
    100% {
        transform: translateY(0%) scale(1);
    }
}

@keyframes getGachaResult {
    0% {
        transform: translateY(0%);
    }
    25% {
        transform: translateY(0%);
    }
    50% {
        transform: translateY(-150%);
    }
    75% {
        transform: translateY(-100%);
    }
    100% {
        transform: translateY(0%);
    }
}

@keyframes hideLixiBoxSide {
    0% {
        opacity: 1;
        display: block;
        visibility: visible;
    }
    74% {
        opacity: 1;
        display: block;
        visibility: visible;
    }
    75% {
        opacity: 0;
        display: block;
        visibility: visible;
    }
    100% {
        opacity: 0;
        display: block;
        visibility: visible;
    }
}

.gachaFrameWrapper {
    @apply w-80 lg:w-96 h-80 lg:h-96 overflow-hidden absolute;
    font-family: Dancing Script;
}

.gachaFrameContainer {
    @apply w-fit absolute top-1/2 left-1/2;
    transform: translate(-50%, -50%)
}

.gachaResult {
    @apply flex justify-center items-center flex-col absolute top-0 right-0 bottom-0 left-0;
}

.gachaFrame {
    @apply h-[2048px] w-[2048px] bg-white cursor-pointer relative;
    .gachaContent {
        @apply absolute top-0 left-0 text-justify;
        .gachaSrc {
            @apply whitespace-break-spaces;
        }
        .gachaAuthor {
            @apply text-right;
            font-size: 80%;
        }
    }
}