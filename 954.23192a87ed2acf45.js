"use strict";(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[954],{1954:(de,x,r)=>{r.r(x),r.d(x,{CalendarModule:()=>y});var m=r(6895),p=r(9299),e=r(4650),J=r(7154),k=r(5604),Y=r(2729),g=r(5559),I=r(2289),C=r(3683),D=r(9818),T=r(7392),M=r(8455),Z=r(4850),S=r(6289),U=r(4363),b=r(8377),w=r(9982),L=r(3238),A=r(7462),_=r(4006);function O(l,n){if(1&l&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&l){const t=n.$implicit;e.Q6J("value",null==t?null:t.key),e.xp6(1),e.Oqu(null==t?null:t.name)}}function H(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"div")(1,"mat-form-field")(2,"mat-select",11),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.monthSelectValue=i)})("selectionChange",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onChangeSelectedCalendar(i.calendarMode,i.monthSelectValue))}),e.YNc(3,O,2,2,"mat-option",12),e.qZA()()()}if(2&l){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.monthSelectValue),e.xp6(1),e.Q6J("ngForOf",t.commonDateTimeValue.month)}}function N(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onChangeSelectedCalendar("before"))}),e.TgZ(1,"mat-icon"),e._uU(2,"navigate_before"),e.qZA()()}if(2&l){const t=e.oxw();e.Q6J("matTooltip","day"===t.calendarMode?"ng\xe0y tr\u01b0\u1edbc":"th\xe1ng tr\u01b0\u1edbc")}}function P(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onChangeSelectedCalendar("next"))}),e.TgZ(1,"mat-icon"),e._uU(2,"navigate_next"),e.qZA()()}if(2&l){const t=e.oxw();e.Q6J("matTooltip","day"===t.calendarMode?"ng\xe0y sau":"th\xe1ng sau")}}function q(l,n){if(1&l&&(e.TgZ(0,"span",15),e._uU(1),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.AsE(" ","day"===t.calendarMode||"month"===t.calendarMode?"th\xe1ng "+((null==t.selectedDate.solar?null:t.selectedDate.solar.getMonth())+1):""," ",t.selectedDate.solar.getFullYear(),"")}}function Q(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"mat-list-item",27),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw().$implicit,c=e.oxw(2),h=e.MAs(14);return e.KtG(c.openEventSummaryDialog(s,a,h))}),e._uU(1),e.qZA()}if(2&l){const t=n.$implicit;e.Q6J("ngClass","yearly-monthly-daily"===t.event.date?"yearly-monthly-daily":"yearly-monthly-daily"!==t.event.date&&t.event.date.includes("yearly-monthly-")?"yearly-monthly-special":"yearly-monthly-daily"!==t.event.date&&!t.event.date.includes("yearly-monthly-")&&t.event.date.includes("yearly-")?"yearly-special-special":""),e.xp6(1),e.hij(" ",t.event.name," ")}}const z=function(l,n){return{height:l,maxHeight:n}};function K(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"mat-card",21)(1,"button",22),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onChangeCalendarMode("day",a))}),e.TgZ(2,"div",23),e._uU(3),e.qZA(),e.TgZ(4,"div",24),e._uU(5),e.qZA()(),e.TgZ(6,"div",25)(7,"mat-list"),e.YNc(8,Q,2,2,"mat-list-item",26),e.qZA()()()}if(2&l){const t=n.$implicit,o=e.oxw(2);e.Q6J("ngStyle",e.WLB(6,z,o.selectedMonth.length%6==0?"calc(100%/6)":"calc(100%/5)",o.selectedMonth.length%6==0?"calc(100%/6)":"calc(100%/5)")),e.xp6(1),e.Q6J("ngClass",o.getCurrentDate(t)?"current-date":""),e.xp6(2),e.Oqu(null==t||null==t.solar?null:t.solar.getDate()),e.xp6(2),e.AsE(" ",null==t||null==t.lunar||null==t.lunar.convertSolar2Lunar?null:t.lunar.convertSolar2Lunar.lunarDay,"/",null==t||null==t.lunar||null==t.lunar.convertSolar2Lunar?null:t.lunar.convertSolar2Lunar.lunarMonth," "),e.xp6(3),e.Q6J("ngForOf",t.event)}}function R(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("touchstart",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.swipe(i,"start"))})("touchend",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.swipe(i,"end"))}),e.TgZ(1,"div",17)(2,"div",18),e._uU(3,"T2"),e.qZA(),e.TgZ(4,"div",18),e._uU(5,"T3"),e.qZA(),e.TgZ(6,"div",18),e._uU(7,"T4"),e.qZA(),e.TgZ(8,"div",18),e._uU(9,"T5"),e.qZA(),e.TgZ(10,"div",18),e._uU(11,"T6"),e.qZA(),e.TgZ(12,"div",18),e._uU(13,"T7"),e.qZA(),e.TgZ(14,"div",18),e._uU(15,"CN"),e.qZA()(),e.TgZ(16,"div",19),e.YNc(17,K,9,9,"mat-card",20),e.qZA()()}if(2&l){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.selectedMonth)}}function $(l,n){if(1&l&&(e.TgZ(0,"div",44),e._uU(1),e.qZA()),2&l){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",t.hour<10?"0"+t.hour:t.hour,":",t.munite<10?"0"+t.munite:t.munite," ")}}function B(l,n){1&l&&e._UZ(0,"mat-divider",45)}function G(l,n){if(1&l&&(e.TgZ(0,"div",41),e.ALo(1,"number"),e.ALo(2,"number"),e.ALo(3,"number"),e.ALo(4,"number"),e.YNc(5,$,2,2,"div",42),e.YNc(6,B,1,0,"mat-divider",43),e.qZA()),2&l){const t=n.$implicit,o=e.oxw(2);e.Q6J("id","h"+e.xi3(1,4,t.hour,"2.0")+"m"+e.xi3(2,7,t.munite,"2.0"))("matTooltip","desktop"===o.viewPortMode?e.xi3(3,10,t.hour,"2.0")+":"+e.xi3(4,13,t.munite,"2.0"):""),e.xp6(5),e.Q6J("ngIf",0===t.munite||23!==t.hour&&0===t.munite),e.xp6(1),e.Q6J("ngIf",0===t.munite||23!==t.hour&&0===t.munite)}}const V=function(l,n){return{height:l,top:n}};function j(l,n){if(1&l&&e._UZ(0,"div",46),2&l){const t=n.$implicit;e.Q6J("ngStyle",e.WLB(1,V,(null==t?null:t.height)+"px",(null==t?null:t.position)+"px"))}}function W(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"div",49),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(3),c=e.MAs(14);return e.KtG(s.openEventSummaryDialog(s.selectedDate,a,c))}),e._uU(1),e.qZA()}if(2&l){const t=n.$implicit;e.Q6J("ngClass","yearly-monthly-daily"===t.event.date?"yearly-monthly-daily":"yearly-monthly-daily"!==t.event.date&&t.event.date.includes("yearly-monthly-")?"yearly-monthly-special":"yearly-monthly-daily"!==t.event.date&&!t.event.date.includes("yearly-monthly-")&&t.event.date.includes("yearly-")?"yearly-special-special":""),e.xp6(1),e.hij(" ",t.event.name," ")}}const F=function(l){return{top:l}};function X(l,n){if(1&l&&(e.TgZ(0,"div",47),e.YNc(1,W,2,2,"div",48),e.qZA()),2&l){const t=n.$implicit,o=e.oxw(2);e.Q6J("ngStyle",e.VKq(2,F,o.getPosition(t.timeZone.start)+"px")),e.xp6(1),e.Q6J("ngForOf",t.event)}}function ee(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"div",28),e.NdJ("touchstart",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.swipe(i,"start"))})("touchend",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.swipe(i,"end"))}),e.TgZ(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",32),e._uU(5),e.qZA(),e.TgZ(6,"div",33),e._uU(7),e.qZA()()(),e._UZ(8,"mat-divider"),e.qZA(),e.TgZ(9,"div",34),e.YNc(10,G,7,16,"div",35),e.TgZ(11,"div",36),e.ALo(12,"async"),e.ALo(13,"async"),e.TgZ(14,"div",37),e._uU(15),e.ALo(16,"date"),e.ALo(17,"async"),e.qZA(),e._UZ(18,"div",38),e.qZA(),e.YNc(19,j,1,4,"div",39),e.YNc(20,X,2,4,"div",40),e.qZA()()}if(2&l){const t=e.oxw();e.xp6(5),e.hij(" ",t.selectedDate.solar.getDate()," "),e.xp6(2),e.AsE(" ",t.selectedDate.lunar.convertSolar2Lunar.lunarDay,"/",t.selectedDate.lunar.convertSolar2Lunar.lunarMonth," "),e.xp6(3),e.Q6J("ngForOf",t.dateRange),e.xp6(1),e.Q6J("ngStyle",e.VKq(17,F,t.getPosition(e.lcZ(12,8,t.time.time))?t.getPosition(e.lcZ(13,10,t.time.time))+"px":"")),e.xp6(4),e.Oqu(e.xi3(16,12,e.lcZ(17,15,t.time.time),"HH:mm:ss")),e.xp6(4),e.Q6J("ngForOf",t.tuThoiZone),e.xp6(1),e.Q6J("ngForOf",t.dateEvents)}}function te(l,n){if(1&l&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&l){const t=n.$implicit;e.xp6(1),e.Oqu(null==t?null:t.name)}}function ne(l,n){if(1&l&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&l){const t=n.$implicit;e.xp6(1),e.Oqu(null==t?null:t.name)}}function ae(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"div",50)(1,"h2",51),e._uU(2),e.qZA(),e.TgZ(3,"div",52)(4,"mat-icon"),e._uU(5,"event"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",52)(8,"mat-icon"),e._uU(9,"schedule"),e.qZA(),e.YNc(10,te,2,1,"span",53),e.qZA(),e.TgZ(11,"div",52)(12,"mat-icon"),e._uU(13,"location_pin"),e.qZA(),e.YNc(14,ne,2,1,"span",53),e.qZA(),e.TgZ(15,"mat-dialog-actions")(16,"button",54),e._uU(17,"\u0110\xf3ng"),e.qZA(),e.TgZ(18,"button",55),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onGetKinhFromSummaryEvent())}),e._uU(19," Xem kinh "),e.qZA()()()}if(2&l){const t=e.oxw();e.xp6(2),e.Oqu(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.name),e.xp6(4),e.hij(" ","yearly-monthly-daily"===(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date)?"M\u1ed7i ng\xe0y":"yearly-monthly-daily"!==(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date)&&null!=t.shownDate&&null!=t.shownDate.event&&null!=t.shownDate.event.event&&t.shownDate.event.event.date.includes("yearly-monthly-")?"Ng\xe0y "+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[2])+" m\u1ed7i th\xe1ng":"yearly-monthly-daily"===(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date)||null!=t.shownDate&&null!=t.shownDate.event&&null!=t.shownDate.event.event&&t.shownDate.event.event.date.includes("yearly-monthly-")||null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event||!t.shownDate.event.event.date.includes("yearly-")?"yearly-monthly-daily"===(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date)||null!=t.shownDate&&null!=t.shownDate.event&&null!=t.shownDate.event.event&&t.shownDate.event.event.date.includes("yearly-monthly-")||null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event||!t.shownDate.event.event.date.includes("yearly-")?"":"Ng\xe0y "+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[2])+" th\xe1ng "+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[1])+" n\u0103m"+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[0]):"Ng\xe0y "+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[2])+" th\xe1ng "+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[1])+" m\u1ed7i n\u0103m"," "),e.xp6(4),e.Q6J("ngForOf",t.getTimes(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.time)),e.xp6(4),e.Q6J("ngForOf",t.getLocationTypes(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.locationType)),e.xp6(4),e.Q6J("color","primary")("mat-dialog-close",!0)}}class v{constructor(n,t,o,i,a,s,c,h){this.calendarService=n,this.commonService=t,this.eventService=o,this.matDialog=i,this.router=a,this.route=s,this.breakpointObserver=c,this.changeDetector=h,this.selectedDate=new le,this.selectedMonth=[],this.currentDate={solar:new Date},this.dateRange=[],this.eventList=this.eventService.eventList,this.calendarMode="month",this.viewPortMode="desktop",this.commonDateTimeValue=this.commonService.commonDates,this.monthSelectValue=this.selectedDate.solar?.getMonth(),this.time=this.commonService.time,this.tuThoiZone=[],this.dateEvents=[]}ngOnInit(){this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(n=>{this.viewPortMode=n.matches?"mobile":"desktop"}),this.route.queryParams.subscribe(n=>{this.calendarMode=n.m?n.m:"month",n.s?(this.selectedDate.solar=new Date(n.s),new Date(n.s)||(this.selectedDate.solar=new Date),this.selectedDate.lunar=this.calendarService.getConvertedFullDate(this.selectedDate.solar)):(this.selectedDate.solar=new Date,this.selectedDate.lunar=this.calendarService.getConvertedFullDate(this.selectedDate.solar)),this.calendarService.calendarViewMode=this.calendarMode,this.onChangeCalendarMode(this.calendarMode,this.selectedDate),this.getCalendarEvent(),(new Date).getHours()>22&&this.currentDate?.solar.setDate(this.currentDate?.solar.getDate()+1),this.monthSelectValue=this.selectedDate.solar?.getMonth()+1<10?"0"+(this.selectedDate.solar?.getMonth()+1):(this.selectedDate.solar?.getMonth()+1).toString()})}ngAfterViewInit(){this.getTuThoiTimes(),this.changeDetector.detectChanges()}getTuThoiTimes(){if("day"===this.calendarMode){this.tuThoiZone=[];const n=new Date((new Date).setHours(23,0,0)),t=new Date((new Date).setHours(0,59,59)),o=new Date((new Date).setHours(5,0,0)),i=new Date((new Date).setHours(6,59,59)),a=new Date((new Date).setHours(11,0,0)),s=new Date((new Date).setHours(12,59,59)),c=new Date((new Date).setHours(17,0,0)),h=new Date((new Date).setHours(18,59,59));this.tuThoiZone=[{startTime:n,position:this.getPosition(n),height:this.getPosition(t)-this.getPosition(n)},{startTime:o,position:this.getPosition(o),height:this.getPosition(i)-this.getPosition(o)},{startTime:a,position:this.getPosition(a),height:this.getPosition(s)-this.getPosition(a)},{startTime:c,position:this.getPosition(c),height:this.getPosition(h)-this.getPosition(c)}]}}onChangeSelectedCalendar(n,t){"month"===this.calendarMode&&("next"===n&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setMonth(this.selectedDate.solar.getMonth()+1)),this.monthSelectValue=this.selectedDate.solar?.getMonth()+1<10?"0"+(this.selectedDate.solar?.getMonth()+1):(this.selectedDate.solar?.getMonth()+1).toString()),"before"===n&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setMonth(this.selectedDate.solar.getMonth()-1)),this.monthSelectValue=this.selectedDate.solar?.getMonth()+1<10?"0"+(this.selectedDate.solar?.getMonth()+1):(this.selectedDate.solar?.getMonth()+1).toString()),parseInt(t)&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setMonth(parseInt(t)-1)))),"day"===this.calendarMode&&(parseInt(t)&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setMonth(parseInt(t)-1))),"next"===n&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setDate(this.selectedDate.solar.getDate()+1))),"before"===n&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setDate(this.selectedDate.solar.getDate()-1)))),"current"===n&&(this.selectedDate.solar=new Date),this.selectedMonth=this.calendarService.getSelectedMonthCalendar(this.selectedDate.solar.getMonth()+1,this.selectedDate.solar.getFullYear()),this.router.navigate([],{relativeTo:this.route,queryParams:{s:this.selectedDate.solar.toDateString()},queryParamsHandling:"merge"}),this.getCalendarEvent()}getCalendarEvent(){let n=[],t=[],o=[];this.eventList.forEach(a=>{a.event.forEach(s=>{"yearly-monthly-daily"===s.date&&s.key.includes("cung-thoi")&&n.push({mainEventKey:a.key,event:s}),"yearly-monthly-daily"!==s.date&&s.date?.includes("yearly-monthly-")&&t.push({mainEventKey:a.key,event:s}),"yearly-monthly-daily"!==s.date&&!s.date?.includes("yearly-monthly-")&&s.date?.includes("yearly-")&&o.push({mainEventKey:a.key,event:s})})});let i=new Date;if((new Date).getHours()>22&&(i=new Date((new Date).setDate((new Date).getDate()+1))),"month"===this.calendarMode&&this.selectedMonth.forEach(a=>{a.solar.getDate()===i.getDate()&&a.solar.getMonth()===i.getMonth()&&a.solar.getFullYear()===i.getFullYear()&&(a.event=n);let s=t.filter(u=>parseInt(u.event.date.split("-")[2])===a.lunar.convertSolar2Lunar.lunarDay&&"lunar"===u.event.dateType);s?.length>0&&(a.event=s);let c=t.filter(u=>parseInt(u.event.date.split("-")[2])===a.solar.getDate()&&"solar"===u.event.dateType);c?.length>0&&(a.event=c);let h=o.filter(u=>parseInt(u.event.date.split("-")[1])===a.lunar.convertSolar2Lunar.lunarMonth&&parseInt(u.event.date.split("-")[2])===a.lunar.convertSolar2Lunar.lunarDay&&"lunar"===u.event.dateType);h?.length>0&&(a.event=h);let d=o.filter(u=>parseInt(u.event.date.split("-")[1])===a.solar.getUTCMonth()+1&&parseInt(u.event.date.split("-")[2])===a.solar.getDate()&&"solar"===u.event.dateType);d?.length>0&&(a.event=d)}),"day"===this.calendarMode){this.dateEvents=[],this.selectedDate.event=[],this.selectedDate.solar.getDate()===i.getDate()&&this.selectedDate.solar.getMonth()===i.getMonth()&&this.selectedDate.solar.getFullYear()===i.getFullYear()&&(this.selectedDate.event=n);let a=t.filter(d=>parseInt(d.event.date.split("-")[2])===this.selectedDate.lunar.convertSolar2Lunar.lunarDay&&"lunar"===d.event.dateType);a?.length>0&&(this.selectedDate.event=a);let s=t.filter(d=>parseInt(d.event.date.split("-")[2])===this.selectedDate.solar.getDate()&&"solar"===d.event.dateType);s?.length>0&&(this.selectedDate.event=s);let c=o.filter(d=>parseInt(d.event.date.split("-")[1])===this.selectedDate.lunar.convertSolar2Lunar.lunarMonth&&parseInt(d.event.date.split("-")[2])===this.selectedDate.lunar.convertSolar2Lunar.lunarDay&&"lunar"===d.event.dateType);c?.length>0&&(this.selectedDate.event=c);let h=o.filter(d=>parseInt(d.event.date.split("-")[1])===this.selectedDate.solar.getUTCMonth()+1&&parseInt(d.event.date.split("-")[2])===this.selectedDate.solar.getDate()&&"solar"===d.event.dateType);h?.length>0&&(this.selectedDate.event=h),this.selectedDate.event?.forEach(d=>{let u=new Date;u.setHours(parseInt(d.event.time[0].split("-")[1].substring(0,2))),u.setMinutes(0);let se={timeZone:{key:d.event.time[0],start:u,end:d.event.time[0].split("-")[1].substring(2,2)},event:[d]},E=this.dateEvents.find(re=>re.timeZone.key===d.event.time[0]);E?E.event.push(d):this.dateEvents.push(se)})}console.log(this.dateEvents)}openEventSummaryDialog(n,t,o){this.shownDate={date:n,event:t},this.eventSummaryDialogRef=this.matDialog.open(o)}getTimes(n){return n.map(t=>this.commonService.commonTimes.find(o=>o.key===t))}getLocationTypes(n){return n.includes("all")&&(n=["all"]),n.map(t=>this.commonService.commonLocationTypes.find(o=>o.key===t))}onGetKinhFromSummaryEvent(){this.router.navigate(["/trang-chu/kinh"],{queryParams:{me:this.shownDate.event.mainEventKey,e:this.shownDate.event.event.key}})}getCurrentDate(n){return n?.solar?.getDate()===this.currentDate?.solar?.getDate()&&n?.solar?.getMonth()===this.currentDate?.solar?.getMonth()&&n?.solar?.getFullYear()===this.currentDate?.solar?.getFullYear()}onChangeCalendarMode(n,t){if(this.calendarMode=n,"month"===this.calendarMode&&(this.selectedMonth=this.calendarService.getSelectedMonthCalendar(this.selectedDate.solar.getMonth()+1,this.selectedDate.solar.getFullYear()),this.calendarService.calendarViewMode=n),"day"===this.calendarMode){this.selectedDate=t,console.log(this.selectedDate);let o=new Date(this.selectedDate.solar);o.setDate(o.getDate()-1),o.setHours(23,0,0,0);let i=new Date(this.selectedDate.solar);i.setHours(22,59,59,999),this.dateRange=[];for(let a=o;a<=i;a.setMinutes(a.getMinutes()+1)){const s={year:a.getFullYear(),month:a.getMonth()+1,date:a.getDate(),hour:a.getHours(),munite:a.getMinutes()};this.dateRange.push(s)}this.calendarService.calendarViewMode=n,console.log(this.dateRange),setTimeout(()=>{this.getTuThoiTimes()},0)}this.router.navigate([],{relativeTo:this.route,queryParams:{m:n,s:this.selectedDate.solar.toDateString()},queryParamsHandling:"merge"})}swipe(n,t){const o=[n.changedTouches[0].clientX,n.changedTouches[0].clientY],i=(new Date).getTime();if("start"===t)this.swipeCoord=o,this.swipeTime=i;else if("end"===t){let s,a=[];this.swipeCoord&&(a=[o[0]-this.swipeCoord[0],o[1]-this.swipeCoord[1]]),this.swipeTime&&(s=i-this.swipeTime),s<1e3&&Math.abs(a[0])>30&&Math.abs(a[0])>Math.abs(3*a[1])&&this.onChangeSelectedCalendar(a[0]<0?"next":"before")}}getPosition(n){const t=`h${n?.getHours()<10?"0"+n?.getHours():n?.getHours()}m${n?.getMinutes()<10?"0"+n?.getMinutes():n?.getMinutes()}`,i=document.getElementById("dateRange")?.getBoundingClientRect();return document.getElementById(t)?.getBoundingClientRect().top-i?.top}static#e=this.\u0275fac=function(t){return new(t||v)(e.Y36(J.o),e.Y36(k.v),e.Y36(Y.P),e.Y36(g.on),e.Y36(p.F0),e.Y36(p.gz),e.Y36(I.Yg),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:v,selectors:[["app-lunar-calendar"]],decls:15,vars:8,consts:[[1,"wrapper-container","lunar-calendar-container"],[1,"lunar-calendar-toolbar","justify-content-between"],[1,"d-flex","align-items-center","w-100"],[1,"d-flex","align-items-center","justify-content-between",3,"ngClass"],[4,"ngIf"],["mat-stroked-button","",3,"matTooltip","click"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["class","selected-date",4,"ngIf"],["class","flex-1 h-100 wrapper-container selected-month-calendar",3,"touchstart","touchend",4,"ngIf"],["class","flex-1 h-100 wrapper-container selected-date-calendar",3,"touchstart","touchend",4,"ngIf"],["eventSummayDialog",""],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-icon-button","",3,"matTooltip","click"],[1,"selected-date"],[1,"flex-1","h-100","wrapper-container","selected-month-calendar",3,"touchstart","touchend"],[1,"days"],[1,"day","text-center"],[1,"flex-1","dates","h-100"],["class","date wrapper-container align-items-center",3,"ngStyle",4,"ngFor","ngForOf"],[1,"date","wrapper-container","align-items-center",3,"ngStyle"],["mat-flat-button","",3,"ngClass","click"],[1,"solar-date"],[1,"lunar-date"],[1,"flex-1","date-event","w-100"],["class","date-event-item","matRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"date-event-item",3,"ngClass","click"],[1,"flex-1","h-100","wrapper-container","selected-date-calendar",3,"touchstart","touchend"],[1,"current-selected-date"],[1,"date-wraper"],[1,"date","text-center"],[1,"date-solar"],[1,"date-lunar"],["id","dateRange",1,"date-hours"],["class","munite d-flex",3,"id","matTooltip",4,"ngFor","ngForOf"],["id","now",1,"now-time",3,"ngStyle"],[1,"time-now"],[1,"clock"],["class","tu-thoi-zone",3,"ngStyle",4,"ngFor","ngForOf"],["class","selected-date-events",3,"ngStyle",4,"ngFor","ngForOf"],[1,"munite","d-flex",3,"id","matTooltip"],["class","start-time-hour",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"start-time-hour"],[1,"w-100"],[1,"tu-thoi-zone",3,"ngStyle"],[1,"selected-date-events",3,"ngStyle"],["class","selected-date-event",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"selected-date-event",3,"ngClass","click"],[1,"event-summary-dialog"],["mat-dialog-title",""],[1,"d-flex","details-item"],[4,"ngFor","ngForOf"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"color","mat-dialog-close","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),e.YNc(4,H,4,2,"div",4),e.TgZ(5,"button",5),e.NdJ("click",function(){return o.onChangeSelectedCalendar("current")}),e._uU(6," H\xf4m nay "),e.qZA()(),e.YNc(7,N,3,1,"button",6),e.YNc(8,P,3,1,"button",6),e.YNc(9,q,2,2,"span",7),e.qZA()(),e._UZ(10,"mat-divider"),e.YNc(11,R,18,1,"div",8),e.YNc(12,ee,21,19,"div",9),e.qZA(),e.YNc(13,ae,20,6,"ng-template",null,10,e.W1O)),2&t&&(e.xp6(3),e.Q6J("ngClass","mobile"===o.viewPortMode?"w-100":""),e.xp6(1),e.Q6J("ngIf","mobile"===o.viewPortMode),e.xp6(1),e.Q6J("matTooltip",o.currentDate.solar.getDate()+" th\xe1ng "+o.currentDate.solar.getMonth()+" n\u0103m "+o.currentDate.solar.getFullYear()),e.xp6(2),e.Q6J("ngIf","desktop"===o.viewPortMode),e.xp6(1),e.Q6J("ngIf","desktop"===o.viewPortMode),e.xp6(1),e.Q6J("ngIf","desktop"===o.viewPortMode),e.xp6(2),e.Q6J("ngIf","month"===o.calendarMode),e.xp6(1),e.Q6J("ngIf","day"===o.calendarMode))},dependencies:[m.mk,m.sg,m.O5,m.PC,C.Ye,D.eB,T.Hw,M.v_,Z.d,S.x8,U.CK,b.S$,w.Zj,w.oh,L.wG,A.Kd,g.aO,g.YS,g.ev,_.JJ,_.On,m.Ov,m.JJ,m.uU],styles:[".lunar-calendar-container .lunar-calendar-toolbar{background-color:#fff}  .lunar-calendar-container .yearly-monthly-daily{background-color:#dadce0}  .lunar-calendar-container .yearly-monthly-special{background-color:#4086f4;color:#fff}  .lunar-calendar-container .yearly-special-special{background-color:#eb4132;color:#fff}  .event-summary-dialog .details-item{margin-bottom:.5rem}  .event-summary-dialog .details-item mat-icon{margin-right:1rem}",".lunar-calendar-container .selected-date-calendar{background-color:#fff;overflow:auto}  .lunar-calendar-container .selected-date-calendar .current-selected-date{position:sticky;top:0;z-index:2;background-color:#fff}  .lunar-calendar-container .selected-date-calendar .current-selected-date .date-wrapper{width:-moz-fit-content;width:fit-content}  .lunar-calendar-container .selected-date-calendar .current-selected-date .date{margin:.5rem;background-color:#6750a4;color:#fff;padding:.25rem;font-size:16px;width:62px;height:45px;border-radius:12px}  .lunar-calendar-container .selected-date-calendar .current-selected-date .date-lunar{font-size:12px}",".lunar-calendar-container .selected-date-calendar .date-hours{position:relative;padding-top:.5rem;padding-left:3rem;z-index:1}  .lunar-calendar-container .selected-date-calendar .date-hours .munite{min-height:1px;height:1px;position:relative}  .lunar-calendar-container .selected-date-calendar .date-hours .munite .start-time{margin-left:1rem;margin-right:0;flex:0 50px;margin-top:-9px}  .lunar-calendar-container .selected-date-calendar .date-hours .munite .hour-details{height:-moz-fit-content;height:fit-content}  .lunar-calendar-container .selected-date-calendar .date-hours .munite .start-time-hour{position:absolute;font-size:12px;top:0;transform:translate(-2.5rem,-50%);background-color:#fff;border-radius:3px;padding:2px 5px}  .lunar-calendar-container .selected-date-calendar .date-hours .now-time{position:absolute;left:0;width:100%;height:2px;transform-origin:left center;background-color:#eb4132}  .lunar-calendar-container .selected-date-calendar .date-hours .now-time .clock{position:absolute;top:0;left:0;transform:translateY(-50%);height:10px;width:10px;border-radius:10px;background-color:#eb4132}  .lunar-calendar-container .selected-date-calendar .date-hours .now-time .time-now{position:absolute;bottom:100%;left:10px;font-size:12px}  .lunar-calendar-container .selected-date-calendar .date-hours .tu-thoi-zone{position:absolute;left:0;width:100%;background-color:#dadce0;z-index:-1}  .lunar-calendar-container .selected-date-calendar .date-hours .selected-date-events{position:absolute;left:5rem;width:-moz-fit-content;width:fit-content}  .lunar-calendar-container .selected-date-calendar .date-hours .selected-date-events .selected-date-event{padding:3px;border-radius:3px;margin:0 .5rem .5rem;display:inline-block}",".lunar-calendar-container .selected-month-calendar{background-color:#fff;overflow:hidden}  .lunar-calendar-container .selected-month-calendar .days{display:flex}  .lunar-calendar-container .selected-month-calendar .days .day{width:14.2857142857%;border-right:#dadce0 1px solid;border-bottom:#dadce0 1px solid;padding:.25rem}  .lunar-calendar-container .selected-month-calendar mat-card{padding:0;border-radius:0}",".lunar-calendar-container .selected-month-calendar .dates{display:flex;flex-wrap:wrap}  .lunar-calendar-container .selected-month-calendar .dates .date{width:14.2857142857%;border-right:#dadce0 1px solid;border-bottom:#dadce0 1px solid;overflow:hidden}  .lunar-calendar-container .selected-month-calendar .dates .date button{padding:3px;line-height:1;min-width:0;width:62px;height:36px;border-radius:6px}@media only screen and (max-width: 600px){  .lunar-calendar-container .selected-month-calendar .dates .date button{width:32px;height:32px}}  .lunar-calendar-container .selected-month-calendar .dates .date .solar-date{font-size:14px}@media only screen and (max-width: 600px){  .lunar-calendar-container .selected-month-calendar .dates .date .solar-date{font-size:12px}}  .lunar-calendar-container .selected-month-calendar .dates .date .lunar-date{font-size:11px}@media only screen and (max-width: 600px){  .lunar-calendar-container .selected-month-calendar .dates .date .lunar-date{font-size:10px}}  .lunar-calendar-container .selected-month-calendar .dates .date .current-date{background-color:#6750a4;color:#fff}  .lunar-calendar-container .selected-month-calendar .dates .date .date-event{height:100%;overflow:auto}  .lunar-calendar-container .selected-month-calendar .dates .date .date-event .mat-list-base .mat-list-item,   .lunar-calendar-container .selected-month-calendar .dates .date .date-event .mat-list-base .mat-list-option{height:auto;padding:3px;border-radius:3px;margin-bottom:3px;font-size:12px}@media only screen and (max-width: 600px){  .lunar-calendar-container .selected-month-calendar .dates .date .date-event .mat-list-base .mat-list-item,   .lunar-calendar-container .selected-month-calendar .dates .date .date-event .mat-list-base .mat-list-option{font-size:10px}}"]})}class le{}const oe=[{path:"",children:[{path:"",component:v}]}];class f{static#e=this.\u0275fac=function(t){return new(t||f)};static#t=this.\u0275mod=e.oAB({type:f});static#n=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(oe),p.Bz]})}var ie=r(782);class y{static#e=this.\u0275fac=function(t){return new(t||y)};static#t=this.\u0275mod=e.oAB({type:y});static#n=this.\u0275inj=e.cJS({providers:[m.uU],imports:[m.ez,f,C.g0,D.yu,T.Ps,M.wp,Z.t,S.uw,ie.N6,b.IF,D.yu,w.gR,L.si,A.AA,g.yj,_.u5]})}}}]);