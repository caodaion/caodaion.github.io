"use strict";(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[281],{8281:(ie,U,x)=>{x.d(U,{o:()=>X});var j=x(5592),O=x(5879),V=x(9862),W=x(7022),z=x(6814);let X=(()=>{var F;class Y{constructor(h,p,m){this.http=h,this.commonService=p,this.datePipe=m,this.commonTimes=[],this.commonLocationTypes=[],this.calendarViewMode="day",this.tuThoiTimeRange={"ty-23-01":{start:"23:00:00",end:"01:00:00"},"meo-05-07":{start:"05:00:00",end:"07:00:00"},"ngo-11-13":{start:"11:00:00",end:"13:00:00"},"dau-17-19":{start:"17:00:00",end:"19:00:00"}}}getConvertedFullDate(h){let p=null;p=h||new Date((new Date).setMonth((new Date).getMonth()+1));const m=Math.PI,o=f=>Math.floor(f),r=f=>{let n,i,e,a=new Date;return h&&(a=h),i=[{key:"canh",name:"Canh"},{key:"tan",name:"T\xe2n"},{key:"nham",name:"Nh\xe2m"},{key:"quy",name:"Qu\xfd"},{key:"giap",name:"Gi\xe1p"},{key:"at",name:"\u1ea4t"},{key:"binh",name:"B\xednh"},{key:"dinh",name:"\u0110inh"},{key:"mau",name:"M\u1eadu"},{key:"ky",name:"K\u1ef7"}][f%10],e=[{key:"than",name:"Th\xe2n"},{key:"dau",name:"D\u1eadu"},{key:"tuat",name:"Tu\u1ea5t"},{key:"hoi",name:"H\u1ee3i"},{key:"ti",name:"T\xfd"},{key:"suu",name:"S\u1eedu"},{key:"dan",name:"D\u1ea7n"},{key:"mao",name:"M\xe3o"},{key:"thin",name:"Th\xecn"},{key:"ty",name:"T\u1ef5"},{key:"ngo",name:"Ng\u1ecd"},{key:"mui",name:"M\xf9i"}][f%12],n={key:`${i.key}-${e.key}`,name:`${i.name} ${e.name}`},n},v=(f,a,n)=>{let i,e,c,u;return i=o((14-a)/12),e=n+4800-i,c=a+12*i-3,u=f+o((153*c+2)/5)+365*e+o(e/4)-o(e/100)+o(e/400)-32045,u<2299161&&(u=f+o((153*c+2)/5)+365*e+o(e/4)-32083),u},g=f=>{let a,n,i,e,c,u,d,M,T;return f>2299160?(a=f+32044,n=o((4*a+3)/146097),i=a-o(146097*n/4)):(n=0,i=f+32082),e=o((4*i+3)/1461),c=i-o(1461*e/4),u=o((5*c+2)/153),d=c-o((153*u+2)/5)+1,M=u+3-12*o(u/10),T=100*n+e-4800+o(u/10),new Array(d,M,T)},w=(f,a)=>o((f=>{let a,n,i,e,c,u,d;return a=(f-2451545)/36525,n=a*a,i=m/180,e=357.5291+35999.0503*a-1559e-7*n-48e-8*a*n,c=280.46645+36000.76983*a+3032e-7*n,u=(1.9146-.004817*a-14e-6*n)*Math.sin(i*e),u=u+(.019993-101e-6*a)*Math.sin(2*i*e)+29e-5*Math.sin(3*i*e),d=c+u,d*=i,d-=2*m*o(d/(2*m)),d})(f-.5-a/24)/m*6),C=(f,a)=>o((f=>{let a,n,i,e,c,u,d,M,T,L,k;return a=f/1236.85,n=a*a,i=n*a,e=m/180,c=2415020.75933+29.53058868*f+1178e-7*n-155e-9*i,c+=33e-5*Math.sin((166.56+132.87*a-.009173*n)*e),u=359.2242+29.10535608*f-333e-7*n-347e-8*i,d=306.0253+385.81691806*f+.0107306*n+1236e-8*i,M=21.2964+390.67050646*f-.0016528*n-239e-8*i,T=(.1734-393e-6*a)*Math.sin(u*e)+.0021*Math.sin(2*e*u),T=T-.4068*Math.sin(d*e)+.0161*Math.sin(2*e*d),T-=4e-4*Math.sin(3*e*d),T=T+.0104*Math.sin(2*e*M)-.0051*Math.sin(e*(u+d)),T=T-.0074*Math.sin(e*(u-d))+4e-4*Math.sin(e*(2*M+u)),T=T-4e-4*Math.sin(e*(2*M-u))-6e-4*Math.sin(e*(2*M+d)),T=T+.001*Math.sin(e*(2*M-d))+5e-4*Math.sin(e*(2*d+u)),L=a<-11?.001+839e-6*a+2261e-7*n-845e-8*i-81e-9*a*i:265e-6*a-278e-6+262e-6*n,k=c+T-L,k})(f)+.5+a/24),S=(f,a)=>{let n,i,e,c;return i=v(31,12,f)-2415021,n=o(i/29.530588853),e=C(n,a),c=w(e,a),c>=9&&(e=C(n-1,a)),e},D=(f,a)=>{let n,i,e,c;n=o((f-2415021.076998695)/29.530588853+.5),i=0,c=1,e=w(C(n+c,a),a);do{i=e,c++,e=w(C(n+c,a),a)}while(e!=i&&c<14);return c-1};let P={convertSolar2Lunar:{lunarDay:0,lunarMonth:0,lunarYear:0,lunarYearName:"",lunarMonthName:"",lunarTime:0,lunarLeap:0},convertLunar2Solar:g(-1)};return Date.parse(p)?P.convertSolar2Lunar=((f,a,n,i,e)=>{let c,u,d,M,T,L,k,$,B;u=v(f,a,n),c=o((u-2415021.076998695)/29.530588853),d=C(c+1,e),d>u&&(d=C(c,e)),M=S(n,e),T=M,M>=d?($=n,M=S(n-1,e)):($=n+1,T=S(n+1,e));const G=new Date(i);L=u-d+1;let E=o((d-M)/29);if(G>new Date(new Date(i).setHours(22,59,59))){const y=this.datePipe.transform(new Date(new Date(i).setDate(new Date(i).getDate()+1)),"dd/MM/YYYY");let N,b;N=v(parseInt(y?.split("/")[0]||""),parseInt(y?.split("/")[1]||""),parseInt(y?.split("/")[2]||""));let I=o((N-2415021.076998695)/29.530588853);b=C(I+1,e),b>N&&(b=C(I,e));let _=N-b+1;M=S(parseInt(y?.split("/")[2]||""),e),T=M,M>=b?($=parseInt(y?.split("/")[2]||""),M=S(parseInt(y?.split("/")[2]||"")-1,e)):($=parseInt(y?.split("/")[2]||"")+1,T=S(parseInt(y?.split("/")[2]||"")+1,e)),L=_,E=o((b-M)/29)}if(B=0,k=E+11,T-M>365){let y=D(M,e);E>=y&&(k=E+10,E==y&&(B=1))}k>12&&(k-=12),k>=11&&E<4&&($-=1);const J=this.commonService.getTimeLunarTime(G);let R=function ne(y,N,b){const I=Math.floor((14-N)/12),_=b+4800-I;return y+Math.floor((153*(N+12*I-3)+2)/5)+365*_+Math.floor(_/4)-Math.floor(_/100)+Math.floor(_/400)-32045}(f,a,n);const re=Math.floor((R+9)%10),se=Math.floor((R+1)%12),oe=`${["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"][re]} ${["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"][se]}`;let A="";switch($%10){case 3:case 8:A=["Gi\xe1p D\u1ea7n","\u1ea4t M\xe3o","B\xednh Th\xecn","\u0110inh T\u1ef5","M\u1eadu Ng\u1ecd","K\u1ef7 M\xf9i","Canh Th\xe2n","T\xe2n D\u1eadu","Nh\xe2m Tu\u1ea5t","Qu\xfd H\u1ee3i","Gi\xe1p T\xfd","\u1ea4t S\u1eedu"][k-1];break;case 4:case 9:A=["B\xednh D\u1ea7n","\u0110inh M\xe3o","M\u1eadu Th\xecn","K\u1ef7 T\u1ef5","Canh Ng\u1ecd","T\xe2n M\xf9i","Nh\xe2m Th\xe2n","Qu\xfd D\u1eadu","Gi\xe1p Tu\u1ea5t","\u1ea4t H\u1ee3i","B\xednh T\xfd","\u0110inh S\u1eedu"][k-1];break;case 5:case 0:A=["M\u1eadu D\u1ea7n","K\u1ef7 M\xe3o","Canh Th\xecn","T\xe2n T\u1ef5","Nh\xe2m Ng\u1ecd","Qu\xfd M\xf9i","Gi\xe1p Th\xe2n","\u1ea4t D\u1eadu","B\xednh Tu\u1ea5t","\u0110inh H\u1ee3i","M\u1eadu T\xfd","K\u1ef7 S\u1eedu"][k-1];break;case 6:case 1:A=["Canh D\u1ea7n","T\xe2n M\xe3o","Nh\xe2m Th\xecn","Qu\xfd T\u1ef5","Gi\xe1p Ng\u1ecd","\u1ea4t M\xf9i","B\xednh Th\xe2n","\u0110inh D\u1eadu","M\u1eadu Tu\u1ea5t","K\u1ef7 H\u1ee3i","Canh T\xfd","T\xe2n S\u1eedu"][k-1];break;case 7:case 2:A=["Nh\xe2m D\u1ea7n","Qu\xfd M\xe3o","Gi\xe1p Th\xecn","\u1ea4t T\u1ef5","B\xednh Ng\u1ecd","\u0110inh M\xf9i","M\u1eadu Th\xe2n","K\u1ef7 D\u1eadu","Canh Tu\u1ea5t","T\xe2n H\u1ee3i","Nh\xe2m T\xfd","Qu\xfd S\u1eedu"][k-1]}return{lunarDay:L,lunarMonth:k,lunarYear:$,lunarYearName:r($).name,lunarMonthName:A,lunarDayName:oe,lunarTime:J?.kanji||J?.tuThoiUpcoming?.name.split("|")[0],lunarLeap:B}})(p.getDate()||(new Date).getDate(),p.getMonth()+1||(new Date).getMonth(),p.getFullYear()||(new Date).getFullYear(),p.getTime()||(new Date).getTime(),"+7"):P.convertLunar2Solar=(f=p.lunarDay,n=p.lunarYear,e="+7",(a=p.lunarMonth)<11?(u=S(n-1,e),d=S(n,e)):(u=S(n,e),d=S(n+1,e)),c=o(.5+(u-2415021.076998695)/29.530588853),(M=a-11)<0&&(M+=12),d-u>365&&(T=D(u,e),M>=T&&(M+=1)),k=C(c+M,e),g(k+f-1)),P;var f,a,n,e,c,u,d,M,T,k}getSelectedMonthCalendar(h,p){let m=(new Date).getMonth()+1,o=(new Date).getFullYear(),r=[];h&&(m=h),p&&(o=p);let g={};for(let s=(s=>{var t=s.getDay()||7;return 1!==t&&s.setHours(-24*(t-1)),s})(new Date(`${o}-${m}-01`));s<=new Date(o,m-1,new Date(o,m,0).getDate()+(7-new Date(o,m,0).getDay()));s.setDate(s.getDate()+1)){const t={solar:new Date(s),lunar:this.getConvertedFullDate(s),d:this.datePipe.transform(s,"yyyy-MM-dd")};switch(this.getConvertedFullDate(s).convertSolar2Lunar.lunarDay){case 1:case 8:case 14:case 15:case 23:t.six=!0,t.ten=!0,t.fifteen=!0;break;case 4:case 6:case 9:case 16:case 19:case 25:t.fifteen=!0;break;case 18:case 24:t.ten=!0,t.fifteen=!0}(!g[this.getConvertedFullDate(s).convertSolar2Lunar.lunarMonth]||0===g[this.getConvertedFullDate(s).convertSolar2Lunar.lunarMonth]?.length)&&(g[this.getConvertedFullDate(s).convertSolar2Lunar.lunarMonth]=[]),g[this.getConvertedFullDate(s).convertSolar2Lunar.lunarMonth].push(t),r.push(t)}return Object.keys(g).forEach(s=>{const t=g[s][g[s]?.length-1],w=g[s][g[s]?.length-2],C=g[s][g[s]?.length-3];30===t.lunar.convertSolar2Lunar.lunarDay&&(r.find(D=>D.solar==t?.solar)&&(r.find(D=>D.solar==t?.solar).six=!0),r.find(D=>D.solar==t?.solar)&&(r.find(D=>D.solar==t?.solar).ten=!0),r.find(D=>D.solar==w?.solar)&&(r.find(D=>D.solar==w?.solar).ten=!0),r.find(D=>D.solar==t?.solar)&&(r.find(D=>D.solar==t?.solar).fifteen=!0),r.find(D=>D.solar==w?.solar)&&(r.find(D=>D.solar==w?.solar).fifteen=!0),r.find(D=>D.solar==C?.solar)&&(r.find(D=>D.solar==C?.solar).fifteen=!0));const S=new Date(t.d);if(29===t.lunar.convertSolar2Lunar.lunarDay){const D=this.getConvertedFullDate(new Date(S.setDate(S.getDate()+1)));1===D.convertSolar2Lunar.lunarDay&&(r.find(l=>l.solar==t?.solar)&&(r.find(l=>l.solar==t?.solar).six=!0),r.find(l=>l.solar==w?.solar)&&(r.find(l=>l.solar==w?.solar).ten=!0),r.find(l=>l.solar==w?.solar)&&(r.find(l=>l.solar==w?.solar).fifteen=!0),r.find(l=>l.solar==C?.solar)&&(r.find(l=>l.solar==C?.solar).fifteen=!0)),30===D.convertSolar2Lunar.lunarDay&&r.find(l=>l.solar==w?.solar)&&(r.find(l=>l.solar==w?.solar).fifteen=!0),r.find(l=>l.solar==t?.solar)&&(r.find(l=>l.solar==t?.solar).ten=!0),r.find(l=>l.solar==t?.solar)&&(r.find(l=>l.solar==t?.solar).fifteen=!0)}28===t.lunar.convertSolar2Lunar.lunarDay&&1===this.getConvertedFullDate(new Date(S.setDate(S.getDate()+2))).convertSolar2Lunar.lunarDay&&r.find(l=>l.solar==t?.solar)&&(r.find(l=>l.solar==t?.solar).ten=!0,r.find(l=>l.solar==t?.solar).fifteen=!0,r.find(l=>l.solar==w?.solar).fifteen=!0),27===t.lunar.convertSolar2Lunar.lunarDay&&1===this.getConvertedFullDate(new Date(S.setDate(S.getDate()+3))).convertSolar2Lunar.lunarDay&&r.find(l=>l.solar==t?.solar)&&(r.find(l=>l.solar==t?.solar).fifteen=!0)}),console.log(r),r}getTuanCuuEvents(h){let p=[],o=h;return Array.from({length:9},(r,v)=>{switch(++v){case 1:{const g=new Date(o.setDate(o.getDate()+8));p.push({solar:g,lunar:this.getConvertedFullDate(g).convertSolar2Lunar,eventName:"Khai C\u1eedu"});break}default:{const g=new Date(o.setDate(o.getDate()+9));p.push({solar:g,lunar:this.getConvertedFullDate(g).convertSolar2Lunar,eventName:v<9?`${this.commonService.convertNumberToText(v)} C\u1eedu`:"Chung C\u1eedu"});break}}}),new j.y(r=>{r.next(p)})}getGoogleCalendarEventEditUrl(h){let p="https://calendar.google.com/calendar/u/0/r/eventedit";h?.text&&(p+=`?text=${encodeURI(h?.text+" | "+h?.subTitle)}`);const m=[];let o="",r="";if(h?.dates.length>0)if("ty-23-01"===h?.dates[0]||"meo-05-07"===h?.dates[0]||"ngo-11-13"===h?.dates[0]||"dau-17-19"===h?.dates[0]){const v=new Date,g=new Date,s=this.tuThoiTimeRange[h?.dates[0]];s&&(v.setHours(s?.start?.split(":")[0]),v.setMinutes(s?.start?.split(":")[1]),v.setSeconds(s?.start?.split(":")[2]),o=`${s?.start}`,g.setHours(s?.end?.split(":")[0]),g.setMinutes(s?.end?.split(":")[1]),g.setSeconds(s?.end?.split(":")[2]),r=`${s?.end}`),"ty-23-01"===h?.dates[0]&&(v.setDate(v.getDate()-1),o=`${s?.start} ng\xe0y tr\u01b0\u1edbc`),m.push(v.toJSON().replaceAll("-","").replaceAll(":","").replaceAll(".","")),m.push(g.toJSON().replaceAll("-","").replaceAll(":","").replaceAll(".","")),p+=`&dates=${m?.join("/")}`}else h?.dates?.forEach((v,g)=>{let s=new Date;"string"==typeof v?(s.setHours(parseInt(v.split(":")[0])),s.setMinutes(parseInt(v.split(":")[1])),s.setSeconds(parseInt(v.split(":")[2]))):s=v,0===g&&(o=`${this.datePipe.transform(s,"HH:mm:ss")}`),1===g&&(r=`${this.datePipe.transform(s,"HH:mm:ss")}`),m.push(s.toJSON().replaceAll("-","").replaceAll(":","").replaceAll(".",""))}),p+=`&dates=${m?.join("/")}`;return h.details=encodeURI(`<h1><a href="${location.origin}">CaoDaiON</a></h1><h2>${h?.text} | ${h?.subTitle}</h2><ul><li><strong>B\u1eaft \u0111\u1ea7u:</strong> ${o}.</li><li><strong>K\u1ebft th\xfac:</strong> ${r}.</li></ul><p>S\u1ef1 ki\u1ec7n t\u1ef1 \u0111\u1ed9ng t\u1ea1o b\u1edfi \u1ee9ng d\u1ee5ng <a href="${location.origin}">CaoDaiON</a>.<br/></p>`),p+=`&location=${h?.location||location.origin}`,h?.details&&(p+=`&details=${h?.details}`),h?.recur&&(p+=`&recur=${h?.recur}`),p}}return(F=Y).\u0275fac=function(h){return new(h||F)(O.LFG(V.eN),O.LFG(W.v),O.LFG(z.uU))},F.\u0275prov=O.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),Y})()}}]);