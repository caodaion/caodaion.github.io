"use strict";(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[322],{322:(at,_,r)=>{r.r(_),r.d(_,{ThanhNgonHiepTuyenModule:()=>et});var m=r(6814),d=r(2787),t=r(5879),b=r(4457),y=r(6593),u=r(3305),x=r(9038),N=r(2296),v=r(6007);function k(e,s){1&e&&t._UZ(0,"mat-progress-bar",8)}function J(e,s){if(1&e&&(t.TgZ(0,"p",15)(1,"strong"),t._uU(2,"\u0110o\u1ea1n: "),t.qZA(),t._uU(3),t.qZA()),2&e){const a=t.oxw(2);t.xp6(3),t.hij("",null==a.reading?null:a.reading.stopAt," ")}}function H(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(a);const o=t.oxw(2);return t.KtG(o.continueReading(!0))}),t._uU(1," \u0110\u1eccC TI\u1ebeP V\xc0 NGHE "),t.qZA()}2&e&&t.Q6J("color","primary")}function I(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"div",9)(1,"h2",10),t._uU(2," B\u1ea1n \u0111ang \u0111\u1ecdc: "),t.TgZ(3,"span",11),t._uU(4),t.qZA()(),t.YNc(5,J,4,1,"p",12),t.TgZ(6,"button",13),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.continueReading())}),t._uU(7," \u0110\u1eccC TI\u1ebeP "),t.qZA(),t.YNc(8,H,2,1,"button",14),t.qZA()}if(2&e){const a=t.oxw();t.xp6(4),t.Oqu(null==a.reading?null:a.reading.name),t.xp6(1),t.Q6J("ngIf",null==a.reading?null:a.reading.stopAt),t.xp6(1),t.Q6J("color","primary"),t.xp6(2),t.Q6J("ngIf",null==a.reading?null:a.reading.currentTime)}}function E(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"mat-list-item")(1,"div",24)(2,"div",22),t._uU(3),t.qZA(),t.TgZ(4,"div",18)(5,"button",19),t.NdJ("click",function(){const i=t.CHM(a).$implicit,l=t.oxw(3);return t.KtG(l.readTNHTContent(i))}),t._uU(6," \u0110\u1ecdc "),t.qZA()()()()}if(2&e){const a=s.$implicit,n=t.oxw(3);t.xp6(3),t.hij(" ",n.getContentName(a)," ")}}function A(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"mat-expansion-panel",21)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"h6",22),t._uU(4),t.qZA()(),t.TgZ(5,"div",18)(6,"button",19),t.NdJ("click",function(){const i=t.CHM(a).$implicit,l=t.oxw(2);return t.KtG(l.readTNHTContent(i))}),t._uU(7," \u0110\u1ecdc "),t.qZA()()(),t.TgZ(8,"div")(9,"mat-list"),t.YNc(10,E,7,1,"mat-list-item",23),t.qZA()()()}if(2&e){const a=s.$implicit,n=t.oxw(2);t.Q6J("expanded",!1)("disabled",!a.content),t.xp6(4),t.hij(" ",n.getContentName(a)," "),t.xp6(6),t.Q6J("ngForOf",a.content)}}function F(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"mat-expansion-panel",16)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"h3",17),t._uU(4),t.qZA()(),t.TgZ(5,"div",18)(6,"button",19),t.NdJ("click",function(){const i=t.CHM(a).$implicit,l=t.oxw();return t.KtG(l.readTNHTContent(i))}),t._uU(7,"\u0110\u1ecdc"),t.qZA()()(),t.TgZ(8,"div")(9,"mat-accordion",6),t.YNc(10,A,11,4,"mat-expansion-panel",20),t.qZA()()()}if(2&e){const a=s.$implicit,n=t.oxw();t.Q6J("expanded",!0),t.xp6(4),t.hij(" ",n.getContentName(a)," "),t.xp6(6),t.Q6J("ngForOf",null==a?null:a.content)}}let O=(()=>{var e;class s{constructor(n,o,i){this.tnhtService=n,this.router=o,this.titleService=i,this.tableContent=[],this.isLoading=!1}ngOnInit(){this.titleService.setTitle("Th\xe1nh-Ng\xf4n Hi\u1ec7p-Tuy\u1ec3n"),this.getTableContent()}getTableContent(){this.isLoading=!0,this.tnhtService.getTNHTByPath("quyen-1").subscribe(n=>{n.data&&(this.isLoading=!1,this.tableContent.push(n.data),this.reading=JSON.parse(localStorage.getItem("reading")||"[]")?.find(o=>"thanhngonhieptuyenquyen1"==o.key),this.dataMigration())})}dataMigration(){}readTNHTContent(n){n?.attrs?.hash?.includes("#")?this.router.navigate([n?.attrs?.pathname],{fragment:n?.attrs?.hash.replace("#","")}):this.router.navigate([`${n?.attrs?.pathname}${n?.attrs?.hash||""}`])}getContentName(n){if(!n?.name){let o="";return n?.content[0]?.content?.forEach(i=>{"text"==i.type&&(o+=i?.text)}),o}return n?.name}continueReading(n=!1){n?this.router.navigateByUrl(`${this.reading.location.replace(location.origin,"")}`,{state:{autoplay:!0}}):this.router.navigateByUrl(this.reading.location.replace(location.origin,""))}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(b.z),t.Y36(d.F0),t.Y36(y.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tnht-table-content"]],decls:9,vars:3,consts:[[1,"tnht-table-content"],[1,"text-center","tnht-title","text-4xl"],["mode","indeterminate",4,"ngIf"],[1,"table-content-wrapper"],[1,"container-fluid"],["class","reading-section",4,"ngIf"],["multi",""],["disabled","","hideToggle","",3,"expanded",4,"ngFor","ngForOf"],["mode","indeterminate"],[1,"reading-section"],[1,"text-3xl"],[2,"font-weight","400"],["class","mb-5",4,"ngIf"],["mat-flat-button","",1,"w-100",3,"color","click"],["mat-flat-button","","class","w-100",3,"color","click",4,"ngIf"],[1,"mb-5"],["disabled","","hideToggle","",3,"expanded"],[1,"content-name","text-3xl"],[1,"d-flex","align-items-center"],["mat-stroked-button","",3,"click"],["hideToggle","",3,"expanded","disabled",4,"ngFor","ngForOf"],["hideToggle","",3,"expanded","disabled"],[1,"content-name"],[4,"ngFor","ngForOf"],[1,"w-100","d-flex","justify-content-between","align-items-center"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Th\xe1nh-Ng\xf4n Hi\u1ec7p-Tuy\u1ec3n"),t.qZA(),t.YNc(3,k,1,0,"mat-progress-bar",2),t.TgZ(4,"div",3)(5,"div",4),t.YNc(6,I,9,4,"div",5),t.qZA(),t.TgZ(7,"mat-accordion",6),t.YNc(8,F,11,3,"mat-expansion-panel",7),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("ngIf",o.isLoading),t.xp6(3),t.Q6J("ngIf",null==o.reading?null:o.reading.name),t.xp6(2),t.Q6J("ngForOf",o.tableContent))},dependencies:[m.sg,m.O5,u.pp,u.ib,u.yz,u.yK,x.i$,x.Tg,N.lW,v.pW],styles:[".tnht-table-content .tnht-title{margin:2rem 0}  .tnht-table-content .mat-expansion-panel-header[aria-disabled=true]{color:unset}  .tnht-table-content .mat-expansion-panel-header{min-height:48px;height:auto}  .tnht-table-content .mat-expansion-panel-header .mat-expansion-panel-header-title,   .tnht-table-content .mat-expansion-panel-header .mat-expansion-panel-header .mat-expansion-panel-header-description,   .tnht-table-content .mat-expansion-panel-header .content-name{white-space:normal;margin-right:1rem}  .tnht-table-content .reading-section button{margin-bottom:1rem}  .tnht-table-content .content-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}  .tnht-table-content a{color:unset;text-decoration:none}"]}),s})();var w=r(6091),f=r(7874),B=r(3096),U=r(1088),Y=r(4193),$=r(6471),M=r(5185),Q=r(9020);function L(e,s){1&e&&t._UZ(0,"mat-progress-bar",7)}function K(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"div",8)(1,"cp-content-creator",9),t.NdJ("save",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onSaveContent())})("nextFontSize",function(o){t.CHM(a);const i=t.oxw();return t.KtG(i.updateFontSize(o))})("nextContent",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onNextContent())}),t.qZA()()}if(2&e){const a=t.oxw();t.xp6(1),t.Q6J("data",a.content)("contentEditable",a.contentEditable)("rootContent",a.rootContent)}}const S=function(e){return{link:e}},z=function(e){return{text:"Tr\u01b0\u1edbc \u0111\xf3",navigate:e}},j=function(e){return{text:"Ti\u1ebfp theo",navigate:e}};function D(e,s){if(1&e&&t._UZ(0,"app-bottom-navigator",10),2&e){const a=t.oxw();t.Q6J("prev",t.VKq(4,z,t.VKq(2,S,a.navigate.prev.link)))("next",t.VKq(8,j,t.VKq(6,S,a.navigate.next.link)))}}const G=function(){return{link:"/thanh-ngon-hiep-tuyen"}},W=function(e){return{navigate:e}};let Z=(()=>{var e;class s{constructor(n,o,i,l,c,p){this.tnhtService=n,this.route=o,this.router=i,this.authService=l,this.breakpointObserver=c,this.titleService=p,this.isLoading=!1,this.navigate={prev:{link:void 0},next:{link:void 0}},this.contentEditable=!1}ngOnInit(){this.route.params.subscribe(n=>{n.key&&!n.level&&this.getContent(n.key,n.level),n.key&&n.level&&this.getContent(n.key,n.level)}),this.router.navigate(["."],{relativeTo:this.route,fragment:location.hash.replace("#","")}),this.contentEditable=this.authService.contentEditable}getContent(n,o){this.isLoading=!0,this.tnhtService.getTNHTByPath(n).subscribe(i=>{if(i.data){if(this.rootContent=i.data,setTimeout(()=>{this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(c=>{c.matches?localStorage.setItem("currentLayout",JSON.stringify({isHideToolbar:!0,isHideBottomNavBar:!0})):localStorage.setItem("currentLayout",JSON.stringify({isHideToolbar:!1,isHideBottomNavBar:!1}))})},0),o){const c=(p,T)=>{let C;return p.some(g=>C=g.key===T?g:c(g.content||[],T)),C};this.content=c(i.data.content,location.pathname.slice(0,location.pathname.length).split("/").slice(0).join("-").replaceAll("-","")),this.titleService.setTitle(`${this.content.name} | ${this.rootContent.name} | CaoDaiON`),this.isLoading=!1,this.getNavigateLink()}else this.content=i.data,this.titleService.setTitle(`${this.content.name} | ${this.rootContent.name} | CaoDaiON`),this.isLoading=!1,this.getNavigateLink();location.hash&&location.pathname.includes("thanh-ngon-hiep-tuyen")&&setTimeout(()=>{const c=document.getElementById(`${location.hash.replace("#","")}`),p=document.getElementById("contentCreatorWrapper");c&&(c.style.color="#4285f4",p.scroll({top:c.offsetTop-(this.content.audio?60:0)}))},0);let l=JSON.parse(localStorage.getItem("reading")||"[]");l||(l=[]),o&&localStorage.setItem("reading",JSON.stringify(l))}})}onSaveContent(){console.log(this.rootContent),navigator.clipboard.writeText(JSON.stringify({data:this.rootContent}))}getNavigateLink(){this.navigate.prev.link=this.rootContent.content[this.rootContent.content.findIndex(o=>o.key==this.content.key)-1]?.attrs.pathname+this.rootContent.content[this.rootContent.content.findIndex(o=>o.key==this.content.key)-1]?.attrs.hash||"/",this.navigate.next.link=this.rootContent.content[this.rootContent.content.findIndex(o=>o.key==this.content.key)+1]?.attrs.pathname+this.rootContent.content[this.rootContent.content.findIndex(o=>o.key==this.content.key)+1]?.attrs.hash||"/"}onNextContent(){this.rootContent?.content?.findIndex(n=>n?.key==this.content?.key)<this.rootContent?.content?.length-1&&this.router.navigate([this.navigate.next.link],{queryParams:{autoplay:!0}}).then(()=>{localStorage.setItem("currentLayout",JSON.stringify({isHideToolbar:!0,isHideBottomNavBar:!0})),document.getElementById("contentCreatorWrapper")?.scrollTo({top:0})})}generaToken(n){const o=ot=>{let h=f.enc.Base64.stringify(ot);return h=h.replace(/=+$/,""),h=h.replace(/\+/g,"-"),h=h.replace(/\//g,"_"),h},c=o(f.enc.Utf8.parse(JSON.stringify({alg:"HS256",typ:"JWT"}))),T=o(f.enc.Utf8.parse(JSON.stringify(n))),C=f.HmacSHA512("caodaiondata","caodaionkey").toString();return`${c}.${T}.${btoa(C)}`}updateFontSize(n){const o=JSON.parse(localStorage.getItem("users")||"{}"),i=localStorage.getItem("token");if(i){const c=(new w.N0).decodeToken(i);c.fontSize=n,o[c.userName]&&(o[c.userName]=this.generaToken(c),localStorage.setItem("users",JSON.stringify(o)),localStorage.setItem("token",JSON.stringify(this.generaToken(c))))}}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(b.z),t.Y36(d.gz),t.Y36(d.F0),t.Y36(B.e),t.Y36(U.Yg),t.Y36(y.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tnht-content"]],decls:9,vars:8,consts:[[1,"wrapper-container","tnht-content-container"],[1,"header",3,"prevPage"],[1,"tnht-header"],["mode","indeterminate",4,"ngIf"],[1,"tnht-container-wrapper"],["class","h-100",4,"ngIf"],[3,"prev","next",4,"ngIf"],["mode","indeterminate"],[1,"h-100"],[3,"data","contentEditable","rootContent","save","nextFontSize","nextContent"],[3,"prev","next"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"app-header",1)(2,"div",2)(3,"app-header-title"),t._uU(4),t.qZA()()(),t.YNc(5,L,1,0,"mat-progress-bar",3),t.TgZ(6,"div",4),t.YNc(7,K,2,3,"div",5),t.qZA(),t.YNc(8,D,1,10,"app-bottom-navigator",6),t.qZA()),2&n&&(t.xp6(1),t.Q6J("prevPage",t.VKq(6,W,t.DdM(5,G))),t.xp6(3),t.Oqu(null==o.content?null:o.content.name),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(2),t.Q6J("ngIf",o.content),t.xp6(1),t.Q6J("ngIf","block"==(null==o.content?null:o.content.type)))},dependencies:[m.O5,Y.S,$.G,M.d,v.pW,Q.T],styles:["app-tnht-content{display:flex;flex-direction:column;height:100%;max-height:100%;overflow:hidden}  app-tnht-content .tnht-content-title{padding:2rem;margin:0}  app-tnht-content .tnht-container-wrapper{flex:1;overflow:hidden}  app-tnht-content .tnht-header{white-space:normal;overflow:hidden;width:100%}"]}),s})();const P=[{path:"",children:[{path:"",component:O},{path:":key",component:Z},{path:":key/:level",component:Z}]}];let R=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(P),d.Bz]}),s})();var V=r(4649),q=r(313),X=r(4085),tt=r(8955),nt=r(617);let et=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,R,u.To,x.ie,N.ot,V.m,q.x,X.O,v.Cv,tt.e,nt.Ps]}),s})()}}]);