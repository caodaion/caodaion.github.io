"use strict";(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[193],{4193:(O,E,p)=>{p.d(E,{S:()=>Cn});var t=p(5879),w=p(6091),A=p(1088),b=p(2787),g=p(9347),y=p(3858),f=p(7022),h=p(6814),S=p(2939),L=p(3096),z=p(8005),k=p(617),x=p(2296),Z=p(2596),T=p(4170),F=p(2032),Q=p(6385),B=p(7988),C=p(6223);function W(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"div",5)(1,"button",2),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.formatContent({fontWeight:"bold"}))}),t.TgZ(2,"mat-icon"),t._uU(3,"format_bold"),t.qZA()(),t._UZ(4,"mat-divider",4),t.qZA()}2&a&&(t.xp6(4),t.Q6J("vertical",!0))}function R(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"div",5)(1,"button",6)(2,"mat-icon"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-menu",null,7)(6,"button",8),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.formatContent({textAlign:"left"}))}),t.TgZ(7,"mat-icon"),t._uU(8,"format_align_left"),t.qZA()(),t.TgZ(9,"button",8),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.formatContent({textAlign:"center"}))}),t.TgZ(10,"mat-icon"),t._uU(11,"format_align_center"),t.qZA()(),t.TgZ(12,"button",8),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.formatContent({textAlign:"right"}))}),t.TgZ(13,"mat-icon"),t._uU(14,"format_align_right"),t.qZA()(),t.TgZ(15,"button",8),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.formatContent({textAlign:"justify"}))}),t.TgZ(16,"mat-icon"),t._uU(17,"format_align_justify"),t.qZA()()(),t._UZ(18,"mat-divider",4),t.qZA()}if(2&a){const n=t.MAs(5),e=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(2),t.hij("format_align_",e.textAlign,""),t.xp6(3),t.Q6J("disabled","left"==e.textAlign),t.xp6(3),t.Q6J("disabled","center"==e.textAlign),t.xp6(3),t.Q6J("disabled","right"==e.textAlign),t.xp6(3),t.Q6J("disabled","justify"==e.textAlign),t.xp6(3),t.Q6J("vertical",!0)}}function j(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"div",0),t._UZ(1,"mat-divider",4),t.TgZ(2,"button",2),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.addKnollContent())}),t.O4$(),t.TgZ(3,"svg",9),t._UZ(4,"path",10)(5,"path",11)(6,"rect",12)(7,"rect",13)(8,"rect",14)(9,"rect",15),t.qZA()(),t.kcU(),t._UZ(10,"mat-divider",4),t.TgZ(11,"mat-form-field",16)(12,"mat-label"),t._uU(13,"M\xe3 \u0111\u1ecbnh danh"),t.qZA(),t.TgZ(14,"input",17),t.NdJ("blur",function(o){t.CHM(n);const i=t.oxw();return t.KtG(i.changeKey(o))}),t.qZA()(),t.TgZ(15,"mat-form-field",16)(16,"mat-label"),t._uU(17,"Li\xean k\u1ebft \u0111\u1ecbnh danh"),t.qZA(),t.TgZ(18,"input",17),t.NdJ("blur",function(o){t.CHM(n);const i=t.oxw();return t.KtG(i.changeHash(o))}),t.qZA()()()}if(2&a){const n=t.oxw();t.xp6(1),t.Q6J("vertical",!0),t.xp6(9),t.Q6J("vertical",!0),t.xp6(4),t.Q6J("value",n.data.key),t.xp6(4),t.Q6J("value",null==n.data.attrs?null:n.data.attrs.hash)}}function V(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"div",0)(1,"mat-form-field",16)(2,"mat-label"),t._uU(3,"B\u1eaft \u0111\u1ea7u"),t.qZA(),t.TgZ(4,"input",18),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw();return t.KtG(i.audioStart=o)})("ngModelChange",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.changetime())}),t.qZA()(),t.TgZ(5,"mat-form-field",16)(6,"mat-label"),t._uU(7,"K\u1ebft th\xfac"),t.qZA(),t.TgZ(8,"input",18),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw();return t.KtG(i.audioEnd=o)})("ngModelChange",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.changetime())}),t.qZA()()()}if(2&a){const n=t.oxw();t.xp6(4),t.Q6J("ngModel",n.audioStart),t.xp6(4),t.Q6J("ngModel",n.audioEnd)}}let I=(()=>{var a;class c{constructor(e){this._snackBar=e,this.isShowSetting=!1,this.isShowAudioTimeStamp=!1,this.textAlign="justify",this.durationInSeconds=3,this.horizontalPosition="start",this.verticalPosition="bottom"}ngOnInit(){const e=(i,l)=>{let r;return i.some(s=>r=s.key===l?s:e(s.content||[],l)),r},o=document.getSelection();if("contentBlock"==this.data.type&&o){const i=e(this.data.content,o?.focusNode?.parentNode?.id);i?.attrs&&(this.textAlign=i.attrs.textAlign||"justify")}}formatContent(e){const o=(i,l)=>{let r;return i.some(s=>r=s.key===l?s:o(s.content||[],l)),r};if("bold"==e.fontWeight&&document.execCommand("bold"),e.textAlign){const i=document.getSelection();"contentBlock"==this.data.type&&i&&i.focusNode?.parentNode&&o(this.data.content,i?.focusNode?.parentNode?.id)&&(o(this.data.content,i?.focusNode?.parentNode?.id).attrs||(o(this.data.content,i?.focusNode?.parentNode?.id).attrs={}),o(this.data.content,i?.focusNode?.parentNode?.id).attrs.textAlign=e.textAlign,document.getElementById(i?.focusNode?.parentNode?.id).style.textAlign=e.textAlign||"justify")}}addKnollContent(){const e=document.getSelection(),o=e?.getRangeAt(0);let r=document.createElement("SPAN"),s=document.createElement("SPAN");s.innerHTML='<svg width="15" height="15" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M7 10C7 8.89543 7.89543 8 9 8H55C56.1046 8 57 8.89543 57 10V23C57 36.8071 45.8071 48 32 48C18.1929 48 7 36.8071 7 23V10Z" fill="#FF992B"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M15.1182 8H18.8819L50.5937 39.7118C50.0001 40.3719 49.3719 41.0001 48.7119 41.5937L15.1182 8ZM13.377 8H14.1485L48.1947 42.0462C48.0556 42.1645 47.9153 42.2814 47.7737 42.3967L13.377 8ZM51.0462 39.1947L19.8516 8H32.3848L55.614 31.2292C54.5879 34.1741 53.0264 36.8681 51.0462 39.1947Z" fill="#B87333"/>\n    <rect x="31" y="53" width="2" height="16" rx="1" transform="rotate(-90 31 53)" fill="#A82300"/>\n    <rect x="30" y="55" width="6" height="6" rx="3" transform="rotate(-90 30 55)" fill="#A82300"/>\n    <rect x="17" y="56" width="8" height="16" rx="1" transform="rotate(-90 17 56)" fill="#FFD700"/>\n    <rect x="45" y="54" width="4" height="2" rx="1" transform="rotate(-90 45 54)" fill="#A82300"/>\n    </svg>',s.classList.add("stading-bell-icon"),s.style.position="absolute",s.style.height="15px",s.style.right="100%",s.style.bottom="100%",s.style.transform="translate(5px, 5px)",r.innerHTML=`${s.outerHTML}<span class="knoll-content">${e?.toString()}</span>`,r.classList.add("knoll"),r.style.color="#FF992B",r.style.position="relative",r.style.textDecoration="underline",o?.deleteContents(),o?.insertNode(r),document.body.focus()}changeKey(e){this.data.key=e.target.value}changeHash(e){this.data.attrs.hash=e.target.value}showAudioTimeStamp(){this.isShowAudioTimeStamp=!1;const e=(i,l)=>{let r;return i.some(s=>r=s.key===l?s:e(s.content||[],l)),r},o=document.getSelection();if("contentBlock"==this.data.type&&o){const i=o?.focusNode?.parentNode?.id,l=[...o?.focusNode?.parentNode?.classList];i&&l?.includes("split")?(this.isShowAudioTimeStamp=!0,this.foundSplit=null,this.foundSplit=e(this.data.content,i),this.foundSplit&&(this.foundSplit?.audio||(this.foundSplit.audio={start:"",end:""}),this.audioStart=this.foundSplit?.audio?.start||"",this.audioEnd=this.foundSplit?.audio?.end||"")):this.isShowAudioTimeStamp=!1}}changetime(e,o){this.foundSplit.audio.start=this.audioStart,this.foundSplit.audio.end=this.audioEnd,console.log(this.data)}splitParagraph(){const o=document.getSelection();if("contentBlock"==this.data.type&&o){const i=o?.getRangeAt(0);let r=document.createElement("SPAN");r.innerHTML=`${o?.toString()}`,r.classList.add("split"),i?.deleteContents(),i?.insertNode(r),document.body.focus(),this._snackBar.open("\u0110\xe3 t\xe1ch th\xe0nh c\xf4ng","\u0110\xf3ng",{duration:200*this.durationInSeconds,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})}}}return(a=c).\u0275fac=function(e){return new(e||a)(t.Y36(S.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["cp-creator-block-toolbar"]],inputs:{data:"data"},decls:16,vars:6,consts:[[1,"d-flex"],["class","text-setting-group d-flex",4,"ngIf"],["mat-icon-button","",3,"click"],["class","d-flex",4,"ngIf"],[3,"vertical"],[1,"text-setting-group","d-flex"],["mat-icon-button","",3,"matMenuTriggerFor"],["alignContentMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["width","64","height","64","viewBox","0 0 64 64","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3 10C3 8.89543 3.89543 8 5 8H51C52.1046 8 53 8.89543 53 10V23C53 36.8071 41.8071 48 28 48V48C14.1929 48 3 36.8071 3 23V10Z","fill","#FF992B"],["fill-rule","evenodd","clip-rule","evenodd","d","M11.1182 8H14.8819L46.5937 39.7118C46.0001 40.3719 45.3719 41.0001 44.7119 41.5937L11.1182 8ZM9.37695 8H10.1485L44.1947 42.0462C44.0556 42.1645 43.9153 42.2814 43.7737 42.3967L9.37695 8ZM47.0462 39.1947L15.8516 8H28.3848L51.614 31.2292C50.5879 34.1741 49.0264 36.8681 47.0462 39.1947Z","fill","#B87333"],["x","27","y","53","width","2","height","16","rx","1","transform","rotate(-90 27 53)","fill","#A82300"],["x","26","y","55","width","6","height","6","rx","3","transform","rotate(-90 26 55)","fill","#A82300"],["x","13","y","56","width","8","height","16","rx","1","transform","rotate(-90 13 56)","fill","#FFD700"],["x","41","y","54","width","4","height","2","rx","1","transform","rotate(-90 41 54)","fill","#A82300"],["appearance","fill",1,"setting-form-field"],["matInput","",3,"value","blur"],["matInput","",3,"ngModel","ngModelChange"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,W,5,1,"div",1),t.YNc(2,R,19,7,"div",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.isShowSetting=!o.isShowSetting}),t.TgZ(4,"mat-icon"),t._uU(5,"settings"),t.qZA()(),t.YNc(6,j,19,4,"div",3),t._UZ(7,"mat-divider",4),t.TgZ(8,"button",2),t.NdJ("click",function(){return o.showAudioTimeStamp()}),t.TgZ(9,"mat-icon"),t._uU(10,"music_note"),t.qZA()(),t.YNc(11,V,9,2,"div",3),t._UZ(12,"mat-divider",4),t.TgZ(13,"button",2),t.NdJ("click",function(){return o.splitParagraph()}),t.TgZ(14,"mat-icon"),t._uU(15,"splitscreen_left"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngIf","contentBlock"==o.data.type),t.xp6(1),t.Q6J("ngIf","contentBlock"==o.data.type),t.xp6(4),t.Q6J("ngIf",o.isShowSetting),t.xp6(1),t.Q6J("vertical",!0),t.xp6(4),t.Q6J("ngIf",o.isShowAudioTimeStamp),t.xp6(1),t.Q6J("vertical",!0))},dependencies:[h.O5,x.RK,k.Hw,T.KE,T.hX,F.Nt,Q.d,B.VK,B.OP,B.p6,C.Fj,C.JJ,C.On],styles:["cp-creator-block-toolbar{position:absolute;bottom:100%;left:0;background:white;border-radius:4px;box-shadow:0 2px 2px #00000024,0 3px 1px -2px #0000001f,0 1px 5px #0003;padding:.5rem 0}  cp-creator-block-toolbar *{color:#000}  cp-creator-block-toolbar .mat-mdc-form-field-subscript-wrapper{display:none}  cp-creator-block-toolbar .setting-form-field{margin-right:.5rem}  cp-creator-block-toolbar .mat-mdc-icon-button{height:24px;width:24px;padding:0}  cp-creator-block-toolbar .mat-mdc-icon-button .mat-mdc-button-touch-target{height:24px;width:24px}"]}),c})();const X=["contentDiv"],tt=["contentMenu"];function nt(a,c){if(1&a){const n=t.EpF();t.ynx(0),t.TgZ(1,"input",10),t.NdJ("change",function(){t.CHM(n);const o=t.oxw(6);return t.KtG(o.onBlur())}),t.qZA(),t.BQk()}if(2&a){const n=t.oxw(3).$implicit;t.xp6(1),t.Q6J("placeholder",null==n?null:n.label)("id",null==n?null:n.key)("value",null==n?null:n.value)}}function et(a,c){if(1&a){const n=t.EpF();t.ynx(0),t.TgZ(1,"textarea",11),t.NdJ("change",function(){t.CHM(n);const o=t.oxw(6);return t.KtG(o.onBlur())}),t._uU(2),t.qZA(),t.BQk()}if(2&a){const n=t.oxw(3).$implicit;t.xp6(1),t.Q6J("placeholder",null==n?null:n.label)("id",null==n?null:n.key),t.xp6(1),t.Oqu(null==n?null:n.value)}}function ot(a,c){if(1&a){const n=t.EpF();t.ynx(0),t.TgZ(1,"label",12),t._uU(2),t.TgZ(3,"input",13),t.NdJ("change",function(){t.CHM(n);const o=t.oxw(6);return t.KtG(o.onBlur())}),t.qZA()(),t.BQk()}if(2&a){const n=t.oxw(3).$implicit;t.xp6(1),t.Q6J("for",null==n?null:n.key),t.xp6(1),t.Oqu(null==n?null:n.label),t.xp6(1),t.Q6J("id",null==n?null:n.key)("checked",null==n?null:n.value)}}function it(a,c){if(1&a&&(t.ynx(0),t.TgZ(1,"button",14),t._uU(2),t.qZA(),t.BQk()),2&a){const n=t.oxw(3).$implicit;t.xp6(1),t.Tol(n.mode),t.Q6J("id",null==n?null:n.key)("ariaLabel",null==n?null:n.label)("value",null==n?null:n.value),t.xp6(1),t.hij(" ",(null==n?null:n.text)||n.label," ")}}function at(a,c){if(1&a&&(t.ynx(0),t.YNc(1,nt,2,3,"ng-container",8),t.YNc(2,et,3,3,"ng-container",8),t.YNc(3,ot,4,4,"ng-container",8),t.YNc(4,it,3,6,"ng-container",8),t.BQk()),2&a){const n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","text"==n.formType),t.xp6(1),t.Q6J("ngIf","textarea"==n.formType),t.xp6(1),t.Q6J("ngIf","checkbox"==n.formType),t.xp6(1),t.Q6J("ngIf","comboLocation"==n.formType)}}const N=function(a){return{fontWeight:a}};function lt(a,c){if(1&a&&(t.ynx(0),t.TgZ(1,"span",15),t._uU(2),t.qZA(),t.BQk()),2&a){const n=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngStyle",t.VKq(2,N,null!=n&&n.value?"bold":"unset")),t.xp6(1),t.Oqu(null==n?null:n.label)}}function rt(a,c){if(1&a&&(t.TgZ(0,"span",15),t._uU(1),t.qZA()),2&a){const n=t.oxw(4).$implicit,e=t.oxw(3);t.Q6J("ngStyle",t.VKq(2,N,null!=n&&n.value?"bold":"unset")),t.xp6(1),t.hij(" ",e.getComboLocationText(n)," ")}}function ct(a,c){1&a&&(t.ynx(0),t._uU(1," . "),t.BQk())}const D=function(){return[]};function st(a,c){if(1&a&&(t.TgZ(0,"span"),t.YNc(1,ct,2,0,"ng-container",2),t.qZA()),2&a){const n=t.oxw(4).$implicit;t.xp6(1),t.Q6J("ngForOf",t.DdM(1,D).constructor(null==n?null:n.dots))}}function dt(a,c){if(1&a&&(t.ynx(0),t.YNc(1,rt,2,4,"span",16),t.YNc(2,st,2,2,"span",8),t.BQk()),2&a){const n=t.oxw(3).$implicit,e=t.oxw(3);let o,i;t.xp6(1),t.Q6J("ngIf",(null==(o=e.getComboLocationText(n))?null:o.length)>0),t.xp6(1),t.Q6J("ngIf",0==(null==(i=e.getComboLocationText(n))?null:i.length)&&(null==n?null:n.dots)>0)}}const ut=function(a){return{"opacity-50":a}};function pt(a,c){if(1&a&&(t.TgZ(0,"span",18),t._uU(1),t.qZA()),2&a){const n=t.oxw(4).$implicit;t.Q6J("ngClass",t.VKq(3,ut,!(null!=n&&n.value)))("ngStyle",t.VKq(5,N,null!=n&&n.value?"bold":"unset")),t.xp6(1),t.Oqu(null==n?null:n.value)}}function _t(a,c){1&a&&(t.ynx(0),t._uU(1," . "),t.BQk())}function mt(a,c){if(1&a&&(t.TgZ(0,"span"),t.YNc(1,_t,2,0,"ng-container",2),t.qZA()),2&a){const n=t.oxw(4).$implicit;t.xp6(1),t.Q6J("ngForOf",t.DdM(1,D).constructor(null==n?null:n.dots))}}function ht(a,c){if(1&a&&(t.ynx(0),t.YNc(1,pt,2,7,"span",17),t.YNc(2,mt,2,2,"span",8),t.BQk()),2&a){const n=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",null==n?null:n.value),t.xp6(1),t.Q6J("ngIf",!(null!=n&&n.value)&&(null==n?null:n.dots)>0)}}function gt(a,c){if(1&a&&(t.ynx(0),t.YNc(1,lt,3,4,"ng-container",8),t.YNc(2,dt,3,2,"ng-container",8),t.YNc(3,ht,3,2,"ng-container",8),t.BQk()),2&a){const n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","checkbox"==n.formType&&1==(null==n?null:n.value)),t.xp6(1),t.Q6J("ngIf","comboLocation"==n.formType),t.xp6(1),t.Q6J("ngIf","checkbox"!==n.formType&&"comboLocation"!==n.formType)}}function ft(a,c){if(1&a&&(t.ynx(0),t.YNc(1,at,5,4,"ng-container",8),t.YNc(2,gt,4,3,"ng-container",8),t.BQk()),2&a){const n=t.oxw(4);t.xp6(1),t.Q6J("ngIf",n.contentEditable),t.xp6(1),t.Q6J("ngIf",!n.contentEditable)}}function Ct(a,c){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.text)}}const H=function(a,c){return{knoll:a,split:c}},q=function(a,c,n,e,o,i,l,r){return{textAlign:a,color:c,fontWeight:n,fontStyle:e,fontSize:o,textDecoration:i,textIndent:l,position:r}};function bt(a,c){if(1&a&&(t.TgZ(0,"strong",19),t._uU(1),t.qZA()),2&a){const n=t.oxw().$implicit;t.Q6J("ngClass",t.WLB(4,H,null==n||null==n.attrs?null:n.attrs.knoll,null==n||null==n.attrs?null:n.attrs.split))("ngStyle",t.qlk(7,q,null!=n&&null!=n.attrs&&n.attrs.textAlign?null==n||null==n.attrs?null:n.attrs.textAlign:"jusify",null==n||null==n.attrs?null:n.attrs.color,null==n||null==n.attrs?null:n.attrs.fontWeight,null==n||null==n.attrs?null:n.attrs.fontStyle,null==n||null==n.attrs?null:n.attrs.fontSize,null==n||null==n.attrs?null:n.attrs.textDecoration,null==n||null==n.attrs?null:n.attrs.textIndent,null!=n&&null!=n.attrs&&n.attrs.knoll?"relative":""))("id",(null==n?null:n.key)||""),t.xp6(1),t.hij(" ",n.text,"")}}function xt(a,c){if(1&a&&(t.ynx(0),t.TgZ(1,"span",20)(2,"span",21),t.O4$(),t.TgZ(3,"svg",22),t._UZ(4,"path",23)(5,"path",24)(6,"rect",25)(7,"rect",26)(8,"rect",27)(9,"rect",28),t.qZA()(),t.kcU(),t.TgZ(10,"span",29),t._uU(11),t.qZA()(),t.BQk()),2&a){const n=t.oxw(2).$implicit;t.xp6(11),t.Oqu(n.text)}}function Tt(a,c){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const n=t.oxw(2).$implicit;t.xp6(1),t.Oqu(n.text)}}function yt(a,c){if(1&a&&(t.TgZ(0,"span",19),t.YNc(1,xt,12,1,"ng-container",8),t.YNc(2,Tt,2,1,"ng-container",8),t.qZA()),2&a){const n=t.oxw().$implicit;t.Q6J("ngClass",t.WLB(5,H,null==n||null==n.attrs?null:n.attrs.knoll,null==n||null==n.attrs?null:n.attrs.split))("ngStyle",t.qlk(8,q,null!=n&&null!=n.attrs&&n.attrs.textAlign?null==n||null==n.attrs?null:n.attrs.textAlign:"jusify",null==n||null==n.attrs?null:n.attrs.color,null==n||null==n.attrs?null:n.attrs.fontWeight,null==n||null==n.attrs?null:n.attrs.fontStyle,null==n||null==n.attrs?null:n.attrs.fontSize,null==n||null==n.attrs?null:n.attrs.textDecoration,null==n||null==n.attrs?null:n.attrs.textIndent,null!=n&&null!=n.attrs&&n.attrs.knoll?"relative":""))("id",(null==n?null:n.key)||""),t.xp6(1),t.Q6J("ngIf",null==n||null==n.attrs?null:n.attrs.knoll),t.xp6(1),t.Q6J("ngIf",!(null!=n&&null!=n.attrs&&n.attrs.knoll))}}function kt(a,c){if(1&a&&(t.ynx(0),t.YNc(1,ft,3,2,"ng-container",8),t.YNc(2,Ct,2,1,"ng-container",8),t.YNc(3,bt,2,16,"strong",9),t.YNc(4,yt,3,17,"span",9),t.BQk()),2&a){const n=c.$implicit;t.xp6(1),t.Q6J("ngIf","form-control"==n.type),t.xp6(1),t.Q6J("ngIf","text"==n.type&&!n.attrs),t.xp6(1),t.Q6J("ngIf","text"==n.type&&n.attrs&&(null==n||null==n.attrs?null:n.attrs.fontWeight)),t.xp6(1),t.Q6J("ngIf","text"==n.type&&n.attrs&&!(null!=n&&null!=n.attrs&&n.attrs.fontWeight))}}const vt=function(a,c,n,e,o,i,l){return{textAlign:a,color:c,fontWeight:n,fontStyle:e,fontSize:o,textDecoration:i,textIndent:l,margin:0}};function Et(a,c){if(1&a&&(t.TgZ(0,"p",7),t.YNc(1,kt,5,4,"ng-container",2),t.qZA()),2&a){const n=t.oxw().$implicit;t.Q6J("id",n.key)("ngStyle",t.Hh0(3,vt,null!=n&&null!=n.attrs&&n.attrs.textAlign?null==n||null==n.attrs?null:n.attrs.textAlign:"jusify",null==n||null==n.attrs?null:n.attrs.color,null==n||null==n.attrs?null:n.attrs.fontWeight,null==n||null==n.attrs?null:n.attrs.fontStyle,null==n||null==n.attrs?null:n.attrs.fontSize,null==n||null==n.attrs?null:n.attrs.textDecoration,null==n||null==n.attrs?null:n.attrs.textIndent)),t.xp6(1),t.Q6J("ngForOf",n.content)}}function wt(a,c){if(1&a&&(t.ynx(0),t.YNc(1,Et,2,11,"p",6),t.BQk()),2&a){const n=c.$implicit;t.xp6(1),t.Q6J("ngIf","paragraph"==n.type)}}function At(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.getLink(o.data))}),t.TgZ(1,"mat-icon"),t._uU(2,"link"),t.qZA()()}}function St(a,c){if(1&a&&t._UZ(0,"cp-creator-block-toolbar",31),2&a){const n=t.oxw();t.Q6J("data",n.data)}}function Zt(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"h4"),t._uU(1),t.qZA(),t.TgZ(2,"div",32)(3,"button",33),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.copyContent("content"))}),t._uU(4," Sao Ch\xe9p n\u1ed9i dung "),t.qZA(),t.TgZ(5,"button",34),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.copyContent("link"))}),t._uU(6," Sao ch\xe9p li\xean k\u1ebft "),t.qZA()(),t.TgZ(7,"button",35),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.copyContent("content&link"))}),t._uU(8," Sao ch\xe9p c\u1ea3 n\u1ed9i dung v\xe0 li\xean k\u1ebft "),t.qZA()}if(2&a){const n=t.oxw();t.xp6(1),t.Oqu(null==n.shareInformation?null:n.shareInformation.content),t.xp6(2),t.Q6J("color","primary"),t.xp6(2),t.Q6J("color","primary"),t.xp6(2),t.Q6J("color","primary")}}const Ft=function(a){return{fontSize:a}};let $=(()=>{var a;class c{click(e){if(this.eRef.nativeElement.contains(e.target)){const o=document.getSelection();if("contentBlock"==this.data.type&&o){const i=o?.focusNode?.parentNode?.id,l=[...o?.focusNode?.parentNode?.classList];if(this.contentEditable)this.data.focused=!0;else if(this.data.focused=!1,i&&l?.includes("split")){const r=new Array(document.getElementsByClassName("split"))[0],s=document.getElementById(i);for(let u=0;u<=r.length;u++)r[u]?.setAttribute("style","color: unset");if(s){s.style.color="#4285f4";let u=JSON.parse(localStorage.getItem("reading")||"[]");u||(u=[]),this.contentToContent.emit(i)}}}}else this.data.focused=!1,this.focusedBlock.emit(this.data)}onKeyControlS(e){e.preventDefault(),this.onBlur()}onKeyControlEnterDown(){this.data.focused=!1}onContextMenu(e){this.contentEditable||2===e?.button&&(e.preventDefault(),this.showContentMenu(e))}constructor(e,o,i,l,r,s){this._snackBar=e,this.eRef=o,this.authService=i,this.commonService=l,this.matBottomSheet=r,this.locationService=s,this.contentEditable=!1,this.isShowFontSizeSelect=!0,this.contentFormat={},this.durationInSeconds=3,this.horizontalPosition="start",this.verticalPosition="bottom",this.provinces=[],this.districts=[],this.filteredDistricts=[],this.calculatedTuanCuu=[],this.wards=[],this.filteredWards=[],this.focusedBlock=new t.vpe,this.contentToContent=new t.vpe,this.updated=!1}ngOnChanges(){(!this.data.content||0==this.data.content.length)&&"contentBlock"==this.data.type&&(this.data.content=[{key:`${this.data.key}p0`,type:"paragraph",content:[{type:"text",text:"\n"}]}])}getLink(e){e?.attrs?.pathname&&e?.attrs?.hash&&(navigator.clipboard.writeText(`${location.origin}${e?.attrs?.pathname}${e?.attrs?.hash}`),this._snackBar.open("\u0110\xe3 sao ch\xe9p li\xean k\u1ebft \u0111\u1ebfn \u0111o\u1ea1n kinh n\xe0y","\u0110\xf3ng",{duration:200*this.durationInSeconds,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition}))}onTab(e){e.preventDefault();const i=document.getSelection()?.getRangeAt(0),r=document.createTextNode("\t");i?.insertNode(r),i?.setStartAfter(r),i?.setEndAfter(r)}onEnter(e){document.execCommand("insertLineBreak"),e.preventDefault()}onBlur(){this.updated&&[...this.contentDiv.nativeElement.children].forEach(e=>{const o=(i,l)=>{let r;return i.some(s=>r=s.key===l?s:o(s.content||[],l)),r};o(this.data.content,e.id)&&(o(this.data.content,e.id).content=[],e.children&&0!=e.children.length?e.childNodes&&e.childNodes.length>0&&([...e.childNodes].filter(i=>"#comment"!==i?.nodeName)?.forEach(i=>{if("#text"==i.nodeName&&i.data?.length>0&&o(this.data.content,e.id).content.push({type:"text",text:i.data}),("B"==i.nodeName||"STRONG"==i.nodeName)&&o(this.data.content,e.id).content.push({type:"text",text:i.innerHTML,attrs:{fontWeight:"bold"}}),"SPAN"==i.nodeName&&i.classList.contains("knoll")){const l=[...i.childNodes].find(r=>r.classList.contains("knoll-content"))?.textContent;o(this.data.content,e.id).content.push({type:"text",text:l,attrs:{color:"#FF992B",textDecoration:"underline",knoll:!0}})}if("SPAN"==i.nodeName&&i.classList.contains("split")){const l=i.textContent;l.toString()?.length>0&&o(this.data.content,e.id).content.push({type:"text",text:l,attrs:{split:!0},key:`${e.id}t${o(this.data.content,e.id).content?.length}`})}if("INPUT"==i.nodeName&&i.classList.contains("form-control")&&i.classList.contains("text")&&(o(this.data.content,e.id).content.push({type:"form-control",formType:"text",value:i.value,label:i.placeholder,key:i.id}),console.log(i)),"TEXTAREA"==i.nodeName&&i.classList.contains("form-control")&&i.classList.contains("textarea")&&(o(this.data.content,e.id).content.push({type:"form-control",formType:"textarea",value:i.value,label:i.placeholder,key:i.id}),console.log(i)),"LABEL"==i.nodeName&&i.classList.contains("form-control")&&i.classList.contains("checkbox")){const l={type:"form-control",formType:"checkbox",value:!1,label:"",key:i.id};[...i.childNodes].filter(r=>"#comment"!==r?.nodeName)?.forEach(r=>{"#text"==r.nodeName&&(l.label=r.textContent),"INPUT"==r.nodeName&&(l.value=r.checked,l.key=r.id)}),console.log(l),o(this.data.content,e.id).content.push(l)}if("BUTTON"==i.nodeName&&i.classList.contains("form-control")&&i.classList.contains("comboLocation")){const l={type:"form-control",formType:"comboLocation",text:i.getAttribute("aria-label")!==i.textContent?i.textContent:"",value:i.getAttribute("value")?i.getAttribute("value")||"{}":"",label:i.getAttribute("aria-label"),mode:i.classList.contains("PpDdWwA")?"PpDdWwA":i.classList.contains("pPdDwWA")?"pPdDwWA":"",key:i.id};console.log(l),o(this.data.content,e.id).content.push(l)}}),e.innerHTML=o(this.data.content,e.id).content.map(i=>"form-control"===i?.type?"comboLocation"===i?.formType?`<button id="${i?.key}" class="form-control font-bold comboLocation ${i?.mode}" aria-label="${i?.label}" value="${i?.value}" contentEditable="false">${i?.text||i?.label}</button>`:"text"===i?.formType?`<input type="text" id="${i?.key}" placeholder="${i?.label}" class="font-bold form-control text" value="${i?.value}" />`:"checkbox"===i?.formType?`<label class="form-control checkbox" for="${i.key}">${i?.label}<input type="checkbox" class="form-control checkbox" id="${i.key}" ${1==i?.value?"checked":""} /></label>`:"textarea"===i?.formType?`<textarea  id="${i?.key}" placeholder="${i?.label}" class="font-bold form-control textarea">${i?.value}</textarea>`:"":i?.attrs?.knoll?`<span style="color: #FF992B; position: relative; text-decoration: underline" class="knoll"><span class="stading-bell-icon" style="position: absolute; height: 15px; right: 100%; bottom: 100%; transform: translate(5px, 5px);"><svg width="15" height="15" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M7 10C7 8.89543 7.89543 8 9 8H55C56.1046 8 57 8.89543 57 10V23C57 36.8071 45.8071 48 32 48C18.1929 48 7 36.8071 7 23V10Z" fill="#FF992B"/>\n              <path fill-rule="evenodd" clip-rule="evenodd" d="M15.1182 8H18.8819L50.5937 39.7118C50.0001 40.3719 49.3719 41.0001 48.7119 41.5937L15.1182 8ZM13.377 8H14.1485L48.1947 42.0462C48.0556 42.1645 47.9153 42.2814 47.7737 42.3967L13.377 8ZM51.0462 39.1947L19.8516 8H32.3848L55.614 31.2292C54.5879 34.1741 53.0264 36.8681 51.0462 39.1947Z" fill="#B87333"/>\n              <rect x="31" y="53" width="2" height="16" rx="1" transform="rotate(-90 31 53)" fill="#A82300"/>\n              <rect x="30" y="55" width="6" height="6" rx="3" transform="rotate(-90 30 55)" fill="#A82300"/>\n              <rect x="17" y="56" width="8" height="16" rx="1" transform="rotate(-90 17 56)" fill="#FFD700"/>\n              <rect x="45" y="54" width="4" height="2" rx="1" transform="rotate(-90 45 54)" fill="#A82300"/>\n              </svg></span><span class="knoll-content">${i.text}</span></span>`:i?.attrs?.split?`<span class="split" id="${i.key}">${i.text}</span>`:"bold"===i?.attrs?.fontWeight?`<strong>${i.text}</strong>`:`${i.text}`).join(""),this.updated=!1):(o(this.data.content,e.id).content.push({type:"text",text:e.innerText}),e.innerHTML=e.innerText,this.updated=!1))})}getComboLocationText(e){let o={};return o=this.rootContent.formGroup.find(d=>d.key===e?.key)?.value||{},this.provinces.find(d=>d.code==parseInt(o.province)),this.districts.find(d=>d.code==parseInt(o.district)),this.wards.find(d=>d.code==parseInt(o.ward)),this.wards.find(d=>d.code==parseInt(o.ward))?.name?.replace("Ph\u01b0\u1eddng","")?.replace("Th\u1ecb tr\u1ea5n","")?.replace("X\xe3",""),o.mode=e?.mode,o.text!=o.title?o.text:""}getAllDivisions(){this.provinces=this.locationService.provinces;try{this.locationService.getAllDivisions().subscribe(e=>{e?.length>0&&(this.provinces=e,this.locationService.provinces=e)})}catch(e){console.log(e)}}getDistricts(){if(this.districts=this.locationService.districts,this.districts&&0!==this.districts?.length)this.filteredDistricts=this.districts?.filter(e=>e.province_code===this.calculatedTuanCuu?.details?.province);else try{this.locationService.getDistricts().subscribe(e=>{e?.length>0&&(this.districts=e,this.locationService.districts=e)})}catch(e){console.log(e)}}getWards(){if(this.wards=this.locationService.wards,this.wards&&0!==this.wards?.length)this.filteredWards=this.wards?.filter(e=>e.district_code===this.calculatedTuanCuu?.details?.district);else try{this.locationService.getWards().subscribe(e=>{e?.length>0&&(this.wards=e,this.locationService.wards=e)})}catch(e){console.log(e)}}showContentMenu(e){this.shareInformation={content:e.target?.outerText,id:e.target?.id,targetLink:`${location.href?.split("#")[0]}#${e.target?.id}`},this.shareBottomSheetRef=this.matBottomSheet.open(this.contentMenu)}copyContent(e){"content"===e&&(navigator.clipboard.writeText(this.shareInformation.content),this.shareBottomSheetRef.dismiss(),this._snackBar.open("\u0110\xe3 sao ch\xe9p n\u1ed9i dung","\u0110\xf3ng",{duration:1e3*this.durationInSeconds,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})),"link"===e&&(navigator.clipboard.writeText(this.shareInformation.targetLink),this.shareBottomSheetRef.dismiss(),this._snackBar.open("\u0110\xe3 sao ch\xe9p li\xean k\u1ebft","\u0110\xf3ng",{duration:1e3*this.durationInSeconds,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})),"content&link"===e&&(navigator.clipboard.writeText(`${this.shareInformation.content}\n${this.shareInformation.targetLink}`),this.shareBottomSheetRef.dismiss(),this._snackBar.open("\u0110\xe3 sao ch\xe9p n\u1ed9i dung v\xe0 li\xean k\u1ebft","\u0110\xf3ng",{duration:1e3*this.durationInSeconds,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition}))}}return(a=c).\u0275fac=function(e){return new(e||a)(t.Y36(S.ux),t.Y36(t.SBq),t.Y36(L.e),t.Y36(f.v),t.Y36(z.ch),t.Y36(y.a))},a.\u0275cmp=t.Xpm({type:a,selectors:[["cp-creator-content"]],viewQuery:function(e,o){if(1&e&&(t.Gf(X,5),t.Gf(tt,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.contentDiv=i.first),t.iGM(i=t.CRH())&&(o.contentMenu=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("click",function(l){return o.click(l)},!1,t.evT)("keydown.control.s",function(l){return o.onKeyControlS(l)},!1,t.evT)("keydown.control.enter",function(){return o.onKeyControlEnterDown()},!1,t.evT)("contextmenu",function(l){return o.onContextMenu(l)},!1,t.evT)},inputs:{data:"data",topGuide:"topGuide",rootContent:"rootContent",contentEditable:"contentEditable",isShowFontSizeSelect:"isShowFontSizeSelect",contentFormat:"contentFormat"},outputs:{focusedBlock:"focusedBlock",contentToContent:"contentToContent"},features:[t.TTD],decls:7,vars:7,consts:[[1,"creator-content-editable",2,"box-sizing","border-box","cursor","text","line-height","1.42","outline","none","overflow-y","auto","tab-size","6","-moz-tab-size","6","white-space","pre-wrap","text-align","jutify","word-wrap","break-word","font-size","18px","overflow","visible","text-align","justify","user-select","text",3,"contentEditable","ngStyle","blur","input","keydown.enter","keydown.tab"],["contentDiv",""],[4,"ngFor","ngForOf"],["mat-icon-button","","class","targetButton","matTooltip","Sao ch\xe9p li\xean k\u1ebft",3,"click",4,"ngIf"],[3,"data",4,"ngIf"],["contentMenu",""],[3,"id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],[4,"ngIf"],[3,"ngClass","ngStyle","id",4,"ngIf"],["type","text",1,"font-bold","form-control","text",3,"placeholder","id","value","change"],[1,"font-bold","form-control","textarea",3,"placeholder","id","change"],["contentEditable","false",1,"form-control","checkbox",3,"for"],["type","checkbox",1,"form-control","checkbox",3,"id","checked","change"],["contentEditable","false",1,"form-control","font-bold","comboLocation",3,"id","ariaLabel","value"],[3,"ngStyle"],[3,"ngStyle",4,"ngIf"],[3,"ngClass","ngStyle",4,"ngIf"],[3,"ngClass","ngStyle"],[3,"ngClass","ngStyle","id"],[1,"knoll",2,"color","rgb(255, 153, 43)","position","relative","text-decoration","underline"],[1,"stading-bell-icon",2,"position","absolute","height","15px","right","100%","bottom","100%","transform","translate(5px, 5px)"],["width","15","height","15","viewBox","0 0 64 64","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7 10C7 8.89543 7.89543 8 9 8H55C56.1046 8 57 8.89543 57 10V23C57 36.8071 45.8071 48 32 48C18.1929 48 7 36.8071 7 23V10Z","fill","#FF992B"],["fill-rule","evenodd","clip-rule","evenodd","d","M15.1182 8H18.8819L50.5937 39.7118C50.0001 40.3719 49.3719 41.0001 48.7119 41.5937L15.1182 8ZM13.377 8H14.1485L48.1947 42.0462C48.0556 42.1645 47.9153 42.2814 47.7737 42.3967L13.377 8ZM51.0462 39.1947L19.8516 8H32.3848L55.614 31.2292C54.5879 34.1741 53.0264 36.8681 51.0462 39.1947Z","fill","#B87333"],["x","31","y","53","width","2","height","16","rx","1","transform","rotate(-90 31 53)","fill","#A82300"],["x","30","y","55","width","6","height","6","rx","3","transform","rotate(-90 30 55)","fill","#A82300"],["x","17","y","56","width","8","height","16","rx","1","transform","rotate(-90 17 56)","fill","#FFD700"],["x","45","y","54","width","4","height","2","rx","1","transform","rotate(-90 45 54)","fill","#A82300"],[1,"knoll-content"],["mat-icon-button","","matTooltip","Sao ch\xe9p li\xean k\u1ebft",1,"targetButton",3,"click"],[3,"data"],[1,"flex"],["mat-flat-button","",1,"w-1/2","me-2",3,"color","click"],["mat-flat-button","",1,"w-1/2","ms-2",3,"color","click"],["mat-flat-button","",1,"w-full","mt-4",3,"color","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0,1),t.NdJ("blur",function(){return o.onBlur()})("input",function(){return o.updated=!0})("keydown.enter",function(l){return o.onEnter(l)})("keydown.tab",function(l){return o.onTab(l)}),t.YNc(2,wt,2,1,"ng-container",2),t.qZA(),t.YNc(3,At,3,0,"button",3),t.YNc(4,St,1,1,"cp-creator-block-toolbar",4),t.YNc(5,Zt,9,4,"ng-template",null,5,t.W1O)),2&e&&(t.Q6J("contentEditable",o.contentEditable)("ngStyle",t.VKq(5,Ft,!o.contentEditable&&o.contentFormat.fontSize?o.contentFormat.fontSize+"px":"18px")),t.xp6(2),t.Q6J("ngForOf",o.data.content),t.xp6(1),t.Q6J("ngIf",!o.contentEditable&&(null==o.data||null==o.data.attrs?null:o.data.attrs.pathname)&&(null==o.data||null==o.data.attrs?null:o.data.attrs.hash)),t.xp6(1),t.Q6J("ngIf",o.data.focused))},dependencies:[h.mk,h.sg,h.O5,h.PC,k.Hw,x.lW,x.RK,Z.gM,I],styles:["cp-creator-content{display:block;position:relative}  cp-creator-content [contenteditable][placeholder]:empty:before{content:attr(placeholder);position:absolute;color:gray;background-color:transparent}  cp-creator-content .creator-content-editable{padding:.5rem}@media only screen and (max-width: 600px){  cp-creator-content .creator-content-editable{tab-size:2!important}}  cp-creator-content .targetButton{position:absolute;right:calc(100% - 20px);top:0;visibility:hidden;opacity:0;transition:.5s}  cp-creator-content:hover .targetButton{visibility:visible;opacity:1}"]}),c})();const Bt=["audioPlayer"];function Nt(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(),i=t.MAs(5);return t.KtG(o.toggleAudioPlayer(i))}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(2),t.Oqu(n.playerIcon)}}const Jt=function(a){return{targetBlock:a}};function Mt(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"cp-creator-content",14),t.NdJ("contentToContent",function(o){t.CHM(n);const i=t.oxw(3);return t.KtG(i.contentToContent(o))}),t.qZA()}if(2&a){const n=t.oxw().$implicit,e=t.oxw(2);t.Q6J("data",n)("contentEditable",e.contentEditable)("contentFormat",e.contentFormat)("isShowFontSizeSelect",e.isShowFontSizeSelect)("rootContent",e.rootContent)("id",e.getId(n))("ngClass",t.VKq(7,Jt,"contentBlock"==n.type))}}function Lt(a,c){if(1&a&&(t.ynx(0),t.YNc(1,Mt,1,9,"cp-creator-content",13),t.BQk()),2&a){const n=c.$implicit;t.xp6(1),t.Q6J("ngIf","contentBlock"==n.type)}}function Qt(a,c){if(1&a&&(t.ynx(0),t.YNc(1,Lt,2,1,"ng-container",12),t.BQk()),2&a){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.data.content)}}function It(a,c){1&a&&(t.ynx(0),t.TgZ(1,"h3"),t._uU(2,"Ch\u01b0a ho\xe0n th\xe0nh"),t.qZA(),t.BQk())}function Dt(a,c){if(1&a&&t._UZ(0,"cp-creator-block-toolbar",15),2&a){const n=t.oxw();t.Q6J("data",n.data)}}let Ht=(()=>{var a;class c{clickout(e){this.authService.contentEditable&&this.eRef.nativeElement.contains(e.target)?(this.data.focused=!0,this.focusedBlock.emit(this.data)):this.data.focused=!1}ngAfterViewInit(){this.audioTracking(),console.log(this.contentEditable)}constructor(e,o,i,l){this._snackBar=e,this.eRef=o,this.authService=i,this.router=l,this.contentEditable=!1,this.isShowFontSizeSelect=!0,this.contentFormat={},this.durationInSeconds=3,this.horizontalPosition="start",this.verticalPosition="bottom",this.playerIcon="play_circle",this.focusedBlock=new t.vpe}ngOnChanges(){}getId(e){return e.key.replaceAll("-","")}getLink(e,o=!1){o?e?.attrs?.hash?.includes("#")?this.router.navigate([e?.attrs?.pathname],{fragment:e?.attrs?.hash.replace("#","")}):this.router.navigate([`${e?.attrs?.pathname}${e?.attrs?.hash||""}`]):(navigator.clipboard.writeText(`${location.origin}${e?.attrs?.pathname}${e?.attrs?.hash}`),this._snackBar.open("\u0110\xe3 sao ch\xe9p li\xean k\u1ebft \u0111\u1ebfn \u0111o\u1ea1n kinh n\xe0y","\u0110\xf3ng",{duration:200*this.durationInSeconds,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition}))}changeValue(e){this.data.name=e.target.innerText,e.target.innerText=e.target.innerHTML}toggleAudioPlayer(e){e.paused?(e.play(),e.controls=!0,this.playerIcon="pause_circle",localStorage.setItem("audio",JSON.stringify({content:this.data.key,currentTime:e.currentTime}))):(e.pause(),e.controls=!1,this.playerIcon="play_circle",localStorage.setItem("audio",JSON.stringify({content:this.data.key,currentTime:e.currentTime})))}contentToContent(e){e?.audio?.start&&(this.audioPlayer.nativeElement.currentTime=e.audio.start)}audioTracking(){"block"==this.data.type&&(this.authService.contentEditable?this.audioPlayer.nativeElement.addEventListener("pause",e=>{const o=this.audioPlayer.nativeElement.currentTime;navigator.clipboard.writeText(o),navigator.clipboard.writeText(o)}):(this.audioPlayer.nativeElement.addEventListener("timeupdate",e=>{const o=this.audioPlayer.nativeElement.currentTime;let i=this.data.content.find(l=>o>l?.audio?.start&&o<l?.audio?.end);if(i){const l=document.getElementById(i.key);if(l&&(!l.style.color||"unset"==l.style.color)){const r=document.getElementsByTagName("cp-creator-content");Array.from({length:r.length},(s,u)=>{r[u].setAttribute("style","color: unset")}),l.style.color="#4285f4"}}}),this.audioPlayer.nativeElement.addEventListener("pause",e=>{localStorage.setItem("audio",JSON.stringify({content:this.data.key,currentTime:this.audioPlayer.nativeElement.currentTime}))})))}}return(a=c).\u0275fac=function(e){return new(e||a)(t.Y36(S.ux),t.Y36(t.SBq),t.Y36(L.e),t.Y36(b.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["cp-creator-block"]],viewQuery:function(e,o){if(1&e&&t.Gf(Bt,5),2&e){let i;t.iGM(i=t.CRH())&&(o.audioPlayer=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("click",function(l){return o.clickout(l)},!1,t.evT)},inputs:{data:"data",rootContent:"rootContent",contentEditable:"contentEditable",isShowFontSizeSelect:"isShowFontSizeSelect",contentFormat:"contentFormat"},outputs:{focusedBlock:"focusedBlock"},features:[t.TTD],decls:17,vars:7,consts:[[1,"creator-block-title","position-relative"],[1,"d-flex","align-items-center","justify-content-between"],[1,"w-100",3,"contentEditable","blur"],[1,"w-100",3,"src"],["audioPlayer",""],[1,"d-flex","redirectButton"],["mat-icon-button","","matTooltip","Nghe ri\xeang b\xe0i n\xe0y",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","\u0110\u1ecdc ri\xeang b\xe0i n\xe0y",3,"click"],["mat-icon-button","","matTooltip","Sao ch\xe9p li\xean k\u1ebft",1,"targetButton",3,"click"],[4,"ngIf"],[3,"data",4,"ngIf"],["mat-icon-button","","matTooltip","Nghe ri\xeang b\xe0i n\xe0y",3,"click"],[4,"ngFor","ngForOf"],[3,"data","contentEditable","contentFormat","isShowFontSizeSelect","rootContent","id","ngClass","contentToContent",4,"ngIf"],[3,"data","contentEditable","contentFormat","isShowFontSizeSelect","rootContent","id","ngClass","contentToContent"],[3,"data"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t.NdJ("blur",function(l){return o.changeValue(l)}),t._uU(3),t.qZA(),t._UZ(4,"audio",3,4),t.TgZ(6,"div",5),t.YNc(7,Nt,3,1,"button",6),t.TgZ(8,"button",7),t.NdJ("click",function(){return o.getLink(o.data,!0)}),t.TgZ(9,"mat-icon"),t._uU(10,"local_library"),t.qZA()()()(),t.TgZ(11,"button",8),t.NdJ("click",function(){return o.getLink(o.data)}),t.TgZ(12,"mat-icon"),t._uU(13,"link"),t.qZA()()(),t.YNc(14,Qt,2,1,"ng-container",9),t.YNc(15,It,3,0,"ng-container",9),t.YNc(16,Dt,1,1,"cp-creator-block-toolbar",10)),2&e&&(t.xp6(2),t.Q6J("contentEditable",o.contentEditable),t.xp6(1),t.hij(" ",o.data.name," "),t.xp6(1),t.Q6J("src",null==o.data||null==o.data.audio?null:o.data.audio.src,t.LSH),t.xp6(3),t.Q6J("ngIf",null==o.data||null==o.data.audio?null:o.data.audio.src),t.xp6(7),t.Q6J("ngIf",!o.contentEditable&&o.data.published||o.contentEditable&&(o.data.published||!o.data.published)),t.xp6(1),t.Q6J("ngIf",!o.contentEditable&&!o.data.published),t.xp6(1),t.Q6J("ngIf",o.data.focused))},dependencies:[h.mk,h.sg,h.O5,$,x.RK,k.Hw,Z.gM,I],styles:["cp-creator-block{padding:0 3rem 2rem;display:block;border-bottom:1px solid #e0e0e0;position:relative}@media only screen and (max-width: 600px){  cp-creator-block{padding:0}}  cp-creator-block .creator-block-title .targetButton{position:absolute;right:calc(100% - 20px);top:calc(0% - 10px);visibility:hidden;opacity:0;transition:.5s}  cp-creator-block .creator-block-title .redirectButton{position:absolute;right:-20px;top:calc(0% - 10px);visibility:hidden;opacity:0;transition:.5s}  cp-creator-block .creator-block-title:hover .targetButton,   cp-creator-block .creator-block-title:hover .redirectButton{visibility:visible;opacity:1}"]}),c})();var J=p(2651),P=p(4104),U=p(7466),qt=p(5986);const $t=["audioDialog"];function Pt(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.saveData())}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA(),t._uU(3,"L\u01b0u "),t.qZA()}}function Ut(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.reset.emit())}),t.TgZ(1,"mat-icon"),t._uU(2,"refresh"),t.qZA(),t._uU(3,"T\u1ea3i l\u1ea1i "),t.qZA()}}function Kt(a,c){if(1&a&&(t.TgZ(0,"mat-radio-button",22),t._uU(1),t.qZA()),2&a){const n=c.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function Gt(a,c){if(1&a){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"mat-label"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-radio-group",11),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw().$implicit;return t.KtG(i.value=o)}),t.YNc(5,Kt,2,2,"mat-radio-button",21),t.qZA(),t.BQk()}if(2&a){const n=t.oxw().$implicit;t.xp6(3),t.Oqu(null==n?null:n.label),t.xp6(1),t.Q6J("ngModel",n.value),t.xp6(1),t.Q6J("ngForOf",null==n?null:n.data)}}function Yt(a,c){if(1&a){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",7)(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"input",9),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw().$implicit;return t.KtG(i.value=o)}),t.qZA()(),t.BQk()}if(2&a){const n=t.oxw().$implicit;t.xp6(3),t.Oqu(null==n?null:n.label),t.xp6(1),t.Q6J("ngModel",n.value)}}function Ot(a,c){if(1&a){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"mat-checkbox",11),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw().$implicit;return t.KtG(i.value=o)}),t.qZA()(),t.BQk()}if(2&a){const n=t.oxw().$implicit;t.xp6(3),t.Oqu(n.label),t.xp6(1),t.Q6J("ngModel",n.value)}}function zt(a,c){if(1&a){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",7)(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"textarea",9),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw().$implicit;return t.KtG(i.value=o)}),t.qZA()(),t.BQk()}if(2&a){const n=t.oxw().$implicit;t.xp6(3),t.Oqu(null==n?null:n.label),t.xp6(1),t.Q6J("ngModel",n.value)}}function Wt(a,c){if(1&a&&(t.ynx(0),t.YNc(1,Gt,6,3,"ng-container",20),t.YNc(2,Yt,5,2,"ng-container",20),t.YNc(3,Ot,5,2,"ng-container",20),t.YNc(4,zt,5,2,"ng-container",20),t.BQk()),2&a){const n=c.$implicit;t.xp6(1),t.Q6J("ngIf","radio"==(null==n?null:n.type)),t.xp6(1),t.Q6J("ngIf","shortText"==(null==n?null:n.type)||"text"==(null==n?null:n.type)),t.xp6(1),t.Q6J("ngIf","checkbox"==(null==n?null:n.type)),t.xp6(1),t.Q6J("ngIf","textarea"==(null==n?null:n.type))}}function Rt(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"div",23),t._uU(1,"Ch\u1ec9nh s\u1eeda \xe2m thanh"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Ngu\u1ed3n"),t.qZA(),t.TgZ(6,"input",24),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw();return t.KtG(i.data.audio.src=o)}),t.qZA()()(),t.TgZ(7,"mat-dialog-actions")(8,"button",25),t._uU(9,"\u0110\xf3ng"),t.qZA(),t.TgZ(10,"button",26),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.addContentAudio())}),t._uU(11," L\u01b0u "),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(6),t.Q6J("ngModel",n.data.audio.src),t.xp6(4),t.Q6J("color","primary")("mat-dialog-close",!0)}}const v=function(a){return{selectedType:a}};function jt(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"div",23),t._uU(1,"Th\xeam tr\u01b0\u1eddng m\u1edbi"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"div",27)(4,"mat-form-field",28)(5,"mat-label"),t._uU(6,"M\xe3 \u0111\u1ecbnh danh tr\u01b0\u1eddng"),t.qZA(),t.TgZ(7,"input",29),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw();return t.KtG(i.addedFormField.key=o)}),t.qZA()(),t.TgZ(8,"mat-form-field",28)(9,"mat-label"),t._uU(10,"Ti\xeau \u0111\u1ec1 c\u1ee7a tr\u01b0\u1eddng"),t.qZA(),t.TgZ(11,"input",30),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw();return t.KtG(i.addedFormField.label=o)})("input",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.updateAddedFormFieldKey())}),t.qZA()()(),t.TgZ(12,"button",31),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.addedFormField.type="text")}),t.TgZ(13,"div",32)(14,"div",33),t._uU(15,"Tr\u01b0\u1eddng nh\u1eadp d\u1eef li\u1ec7u"),t.qZA(),t._UZ(16,"mat-divider"),t.TgZ(17,"div",34),t._uU(18," Nh\u1eadp n\u1ed9i dung ng\u1eafn b\u1eb1ng c\xe1ch g\xf5 b\xe0n ph\xedm v\xe0o tr\u01b0\u1eddng \u0111\u01b0\u1ee3c th\xeam v\xe0o "),t.qZA()()(),t.TgZ(19,"button",31),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.addedFormField.type="textarea")}),t.TgZ(20,"div",32)(21,"div",33),t._uU(22,"Tr\u01b0\u1eddng nh\u1eadp d\u1eef li\u1ec7u d\xe0i"),t.qZA(),t._UZ(23,"mat-divider"),t.TgZ(24,"div",34),t._uU(25," Nh\u1eadp n\u1ed9i dung d\xe0i b\u1eb1ng c\xe1ch g\xf5 b\xe0n ph\xedm v\xe0o tr\u01b0\u1eddng \u0111\u01b0\u1ee3c th\xeam v\xe0o "),t.qZA()()(),t.TgZ(26,"button",31),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.addedFormField.type="checkbox")}),t.TgZ(27,"div",32)(28,"div",33),t._uU(29,"H\u1ed9p ki\u1ec3m"),t.qZA(),t._UZ(30,"mat-divider"),t.TgZ(31,"div",34),t._uU(32,"Gi\xe1 tr\u1ecb c\u1ee7a tr\u01b0\u1eddng s\u1ebd hi\u1ec3n th\u1ecb khi \u1ea5n ch\u1ecdn v\xe0o"),t.qZA()()(),t.TgZ(33,"button",31),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.addedFormField.type="comboLocation")}),t.TgZ(34,"div",32)(35,"div",33),t._uU(36,"Kh\u1ed1i \u0111\u1ecba ch\u1ec9"),t.qZA(),t._UZ(37,"mat-divider"),t.TgZ(38,"div",34),t._uU(39," Kh\u1ed1i \u0111\u1ecba ch\u1ec9 s\u1ebd gi\xfap c\u1eadp nh\u1eadt th\xf4ng tin v\u1ec1 \u0111\u1ecba ch\u1ec9 "),t.qZA(),t.TgZ(40,"div",34),t._uU(41," H\xe3y ch\u1ecdn m\u1ed9t trong c\xe1c ki\u1ec3u hi\u1ec3n th\u1ecb \u0111\u1ecba ch\u1ec9 nh\u01b0 d\u01b0\u1edbi \u0111\xe2y "),t.qZA(),t.TgZ(42,"div",34)(43,"mat-radio-group",35),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw();return t.KtG(i.addedFormField.mode=o)}),t.TgZ(44,"mat-radio-button",36),t._uU(45,"L\xe2m \u0110\u1ed3ng t\u1ec9nh, \u0110\xe0 L\u1ea1t th\xe0nh ph\u1ed1, \u0111\u1ec7 th\u1ea5t ph\u01b0\u1eddng, \u0110a Th\xe0nh th\xf4n"),t.qZA(),t.TgZ(46,"mat-radio-button",36),t._uU(47,"t\u1ec9nh L\xe2m \u0110\u1ed3ng, th\xe0nh ph\u1ed1 \u0110\xe0 L\u1ea1t, ph\u01b0\u1eddng 7, th\xf4n \u0110a Th\xe0nh"),t.qZA()()()()()(),t.TgZ(48,"mat-dialog-actions")(49,"button",37),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.addNewInputField())}),t._uU(50," Th\xeam "),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(4),t.Q6J("appearance","outline"),t.xp6(3),t.Q6J("ngModel",n.addedFormField.key)("required",!0)("disabled",!0),t.xp6(1),t.Q6J("appearance","outline"),t.xp6(3),t.Q6J("ngModel",n.addedFormField.label)("required",!0),t.xp6(1),t.Q6J("type","button")("disabled",!n.addedFormField.key)("ngClass",t.VKq(26,v,"text"===n.addedFormField.type)),t.xp6(7),t.Q6J("type","button")("disabled",!n.addedFormField.key)("ngClass",t.VKq(28,v,"textarea"===n.addedFormField.type)),t.xp6(7),t.Q6J("type","button")("disabled",!n.addedFormField.key)("ngClass",t.VKq(30,v,"checkbox"===n.addedFormField.type)),t.xp6(7),t.Q6J("type","button")("disabled",!n.addedFormField.key)("ngClass",t.VKq(32,v,"comboLocation"===n.addedFormField.type)),t.xp6(10),t.Q6J("ngModel",n.addedFormField.mode)("disabled","comboLocation"!==n.addedFormField.type),t.xp6(1),t.Q6J("value","PpDdWwA"),t.xp6(2),t.Q6J("value","pPdDwWA"),t.xp6(3),t.Q6J("color","primary")("disabled",n.disabledAddFormField())("matDialogClose",!0)}}let Vt=(()=>{var a;class c{onKeyControlEnterDown(){this.addNewContentBlock()}onKeyControlS(e){e.preventDefault(),this.saveData()}constructor(e,o,i){this.dialog=e,this.commonService=o,this.locationService=i,this.contentEditable=!1,this.save=new t.vpe,this.reset=new t.vpe,this.addedFormField={},this.provinces=[],this.districts=[],this.filteredDistricts=[],this.calculatedTuanCuu=[],this.wards=[],this.filteredWards=[]}ngOnInit(){this.data=={}&&(this.data={name:"",key:""})}saveData(){const e=(i,l)=>{let r;return i.some(s=>r=s.focused===l?s:e(s.content||[],l)),r},o=()=>{e(this.data.content,!0)?(e(this.data.content,!0).focused=!1,o()):this.save.emit()};setTimeout(()=>{o()},0)}addNewContentBlock(){"contentBlock"==this.focusedBlock?.type&&(this.data.content.push({key:`${location.pathname.slice(1,location.pathname.length).split("/").slice(1).join("-").replaceAll("-","")}${this.data.content.length||0}`,attrs:{pathname:location.pathname,hash:`#${this.data.content.length}`},type:"contentBlock",focused:!0}),setTimeout(()=>{const o=document.getElementById(`${location.pathname.slice(1,location.pathname.length).split("/").slice(1).join("-").replaceAll("-","")}${this.data.content.length-1||0}p0`);o?.parentElement&&o?.parentElement.focus()},0)),"block"==this.focusedBlock?.type&&(this.focusedBlock.content.push({key:`${(location.pathname+this.focusedBlock.attrs.hash).slice(1,(location.pathname+this.focusedBlock.attrs.hash).length).split("/").slice(1).join("-").replaceAll("-","")}${this.focusedBlock.content.length||0}`,attrs:{pathname:location.pathname+this.focusedBlock.attrs.hash,hash:`#${this.focusedBlock.content.length||0}`},type:"contentBlock",focused:!0}),setTimeout(()=>{const e=document.getElementById(`${(location.pathname+this.focusedBlock.attrs.hash).slice(1,(location.pathname+this.focusedBlock.attrs.hash).length).split("/").slice(1).join("-").replaceAll("-","")}${this.focusedBlock.content.length-1||0}p0`);e?.parentElement&&e?.parentElement.focus()},0))}addNewBlock(){(!this.data.content||0==this.data.content.length)&&(this.data.content=[]),"block"==this.focusedBlock?.type&&this.data.content.push({key:`${location.pathname.slice(1,location.pathname.length).split("/").slice(1).join("-").replaceAll("-","")}b${this.data.content.length||0}`,attrs:{pathname:location.pathname,hash:`/b${this.data.content.length}`},content:[{key:`${location.pathname.slice(1,location.pathname.length).split("/").slice(1).join("-").replaceAll("-","")}b${this.data.content.length||0}`,attrs:{pathname:`${location.pathname}/b${this.data.content.length}`,hash:"#0"},type:"contentBlock",focused:!0}],type:"block",focused:!0})}addContentAudio(){console.log(this.data)}openAudioDialog(e){this.data.audio||(this.data.audio={src:""}),this.dialog.open(e)}openAddNewInputField(e){this.dialog.open(e);const i=document.getSelection();if(i){const l={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,baseNode:i.baseNode,baseOffset:i.baseOffset,extentNode:i.extentNode,extentOffset:i.extentOffset,focusNode:i.focusNode,focusOffset:i.focusOffset,isCollapsed:i.isCollapsed,rangeCount:i.rangeCount,type:i.type,getRangeAt:i?.getRangeAt(0)};this.sel=l,console.log(this.sel)}}disabledAddFormField(){return!this.addedFormField.type||!this.addedFormField.key||"comboLocation"===this.addedFormField.type&&!this.addedFormField.mode}updateAddedFormFieldKey(){this.addedFormField.key=this.commonService.generatedSlug(this.addedFormField.label)}addNewInputField(){const o=()=>{const s=this.sel?.getRangeAt;let d=document.createElement("INPUT");d.setAttribute("placeholder",this.addedFormField.label),d.classList.add("font-bold"),d.classList.add("form-control"),d.classList.add("text"),d.id=this.addedFormField.key,s?.deleteContents(),s?.insertNode(d),document.body.focus(),this.data.formGroup.push({key:this.addedFormField.key,label:this.addedFormField.label,value:"",required:!1,type:"text"})},i=()=>{const s=this.sel?.getRangeAt;let d=document.createElement("TEXTAREA");d.setAttribute("placeholder",this.addedFormField.label),d.classList.add("font-bold"),d.classList.add("form-control"),d.classList.add("textarea"),d.id=this.addedFormField.key,s?.deleteContents(),s?.insertNode(d),document.body.focus(),this.data.formGroup.push({key:this.addedFormField.key,label:this.addedFormField.label,value:"",required:!1,type:"textarea"})},l=()=>{const s=this.sel?.getRangeAt;let _=document.createElement("LABEL"),m=document.createElement("INPUT");m.setAttribute("type","checkbox"),_.classList.add("form-control"),_.classList.add("checkbox"),m.classList.add("form-control"),m.classList.add("checkbox"),m.id=this.addedFormField.key,_.setAttribute("for",this.addedFormField.key),_.innerHTML=`${this.addedFormField.label}${m.outerHTML.toString()}`,_.setAttribute("contentEditable","false"),s?.deleteContents(),s?.insertNode(_),document.body.focus(),this.data.formGroup.push({key:this.addedFormField.key,label:this.addedFormField.label,value:"",required:!1,type:"checkbox"})},r=()=>{const s=this.sel?.getRangeAt;let d=document.createElement("button");d.classList.add("form-control"),d.classList.add("font-bold"),d.classList.add("comboLocation"),d.classList.add(this.addedFormField.mode),d.id=this.addedFormField.key,d.innerHTML=this.addedFormField.label,d.setAttribute("aria-label",this.addedFormField.label),d.setAttribute("contentEditable","false"),s?.deleteContents(),s?.insertNode(d),document.body.focus(),this.data.formGroup.push({key:this.addedFormField.key,label:this.addedFormField.label,mode:this.addedFormField.mode,value:"",required:!1,type:"comboLocation"})};if(this.sel)switch(this.addedFormField.type){case"text":o();break;case"textarea":i();break;case"checkbox":l();break;case"comboLocation":r()}}getAllDivisions(){this.provinces=this.locationService.provinces;try{this.locationService.getAllDivisions().subscribe(e=>{e?.length>0&&(this.provinces=e,this.locationService.provinces=e)})}catch(e){console.log(e)}}getDistricts(){if(this.districts=this.locationService.districts,this.districts&&0!==this.districts?.length)this.filteredDistricts=this.districts?.filter(e=>e.province_code===this.calculatedTuanCuu?.details?.province);else try{this.locationService.getDistricts().subscribe(e=>{e?.length>0&&(this.districts=e,this.locationService.districts=e)})}catch(e){console.log(e)}}getWards(){if(this.wards=this.locationService.wards,this.wards&&0!==this.wards?.length)this.filteredWards=this.wards?.filter(e=>e.district_code===this.calculatedTuanCuu?.details?.district);else try{this.locationService.getWards().subscribe(e=>{e?.length>0&&(this.wards=e,this.locationService.wards=e)})}catch(e){console.log(e)}}}return(a=c).\u0275fac=function(e){return new(e||a)(t.Y36(g.uw),t.Y36(f.v),t.Y36(y.a))},a.\u0275cmp=t.Xpm({type:a,selectors:[["cp-content-creator-toolbar"]],viewQuery:function(e,o){if(1&e&&t.Gf($t,5),2&e){let i;t.iGM(i=t.CRH())&&(o.audioDialog=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("keydown.control.enter",function(){return o.onKeyControlEnterDown()},!1,t.evT)("keydown.control.s",function(l){return o.onKeyControlS(l)},!1,t.evT)},inputs:{data:"data",focusedBlock:"focusedBlock",contentEditable:"contentEditable"},outputs:{save:"save",reset:"reset"},decls:39,vars:11,consts:[[1,"cp-creator-toolbar"],[1,"flex","justify-around","items-center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],[1,"toolbar-content"],["label","C\xe0i \u0111\u1eb7t"],[1,"w-100","form-group"],["appearance","fill",1,"w-100"],["matInput","","disabled","",3,"ngModel","ngModelChange"],["matInput","",3,"ngModel","ngModelChange"],[1,"w-100"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["label","Ch\xe8n"],["mat-icon-button","",3,"disabled","matTooltip","click"],["mat-icon-button","",3,"matTooltip","click"],["audioDialog",""],["newFieldDialog",""],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","","color","primary",3,"click"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-dialog-title",""],["type","text","matInput","",3,"ngModel","ngModelChange"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"color","mat-dialog-close","click"],[1,"w-full","!my-4"],[1,"w-full",3,"appearance"],["type","text","matInput","",3,"ngModel","required","disabled","ngModelChange"],["type","text","matInput","",3,"ngModel","required","ngModelChange","input"],[1,"w-full","block","my-4","p-2","border","rounded",3,"type","disabled","ngClass","click"],[1,"px-2","mb-2"],[1,"text-xl","font-bold","mb-2"],[1,"mt-2"],[3,"ngModel","disabled","ngModelChange"],[1,"w-full","block",3,"value"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Pt,4,0,"button",2),t.YNc(3,Ut,4,0,"button",3),t.qZA(),t.TgZ(4,"div",4)(5,"mat-tab-group")(6,"mat-tab",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),t._uU(10,"M\xe3 \u0111\u1ecbnh danh"),t.qZA(),t.TgZ(11,"input",8),t.NdJ("ngModelChange",function(r){return o.data.key=r}),t.qZA()(),t.TgZ(12,"mat-form-field",7)(13,"mat-label"),t._uU(14,"T\xean"),t.qZA(),t.TgZ(15,"input",9),t.NdJ("ngModelChange",function(r){return o.data.name=r}),t.qZA()(),t.TgZ(16,"div",10)(17,"mat-label"),t._uU(18,"C\xf4ng b\u1ed1"),t.qZA(),t.TgZ(19,"mat-checkbox",11),t.NdJ("ngModelChange",function(r){return o.data.published=r}),t.qZA()(),t.YNc(20,Wt,5,4,"ng-container",12),t.qZA()(),t.TgZ(21,"mat-tab",13)(22,"div",6)(23,"button",14),t.NdJ("click",function(){return o.addNewBlock()}),t.TgZ(24,"mat-icon"),t._uU(25,"add"),t.qZA()(),t.TgZ(26,"button",15),t.NdJ("click",function(){return o.addNewContentBlock()}),t.TgZ(27,"mat-icon"),t._uU(28,"text_fields"),t.qZA()(),t.TgZ(29,"button",15),t.NdJ("click",function(){t.CHM(i);const r=t.MAs(36);return t.KtG(o.openAudioDialog(r))}),t.TgZ(30,"mat-icon"),t._uU(31,"music_note"),t.qZA()(),t.TgZ(32,"button",15),t.NdJ("click",function(){t.CHM(i);const r=t.MAs(38);return t.KtG(o.openAddNewInputField(r))}),t.TgZ(33,"mat-icon"),t._uU(34,"input"),t.qZA()()()()()()(),t.YNc(35,Rt,12,3,"ng-template",null,16,t.W1O),t.YNc(37,jt,51,34,"ng-template",null,17,t.W1O)}2&e&&(t.xp6(2),t.Q6J("ngIf",o.contentEditable),t.xp6(1),t.Q6J("ngIf",o.contentEditable),t.xp6(8),t.Q6J("ngModel",o.data.key),t.xp6(4),t.Q6J("ngModel",o.data.name),t.xp6(4),t.Q6J("ngModel",o.data.published),t.xp6(1),t.Q6J("ngForOf",null==o.data?null:o.data.formGroup),t.xp6(3),t.Q6J("disabled",!o.focusedBlock||"contentBlock"==(null==o.focusedBlock?null:o.focusedBlock.type))("matTooltip","Th\xeam kh\u1ed1i"),t.xp6(3),t.Q6J("matTooltip","Th\xeam n\u1ed9i dung"),t.xp6(3),t.Q6J("matTooltip","Th\xeam \xe2m thanh"),t.xp6(3),t.Q6J("matTooltip","Th\xeam tr\u01b0\u1eddng"))},dependencies:[h.mk,h.sg,h.O5,x.lW,x.RK,k.Hw,P.uX,P.SP,T.KE,T.hX,F.Nt,C.Fj,C.JJ,C.Q7,C.On,U.VQ,U.U0,g.ZT,g.uh,g.xY,g.H8,qt.oG,Z.gM,Q.d],styles:[".cp-creator-toolbar{display:flex;flex-direction:column;height:100%}  .cp-creator-toolbar .toolbar-content{flex:1}  .cp-creator-toolbar .toolbar-content .form-group{padding:1rem}  .selectedType{--tw-border-opacity: 1;border-color:rgb(63 81 181 / var(--tw-border-opacity))}"]}),c})();var Xt=p(6007),tn=p(8525),nn=p(3680);const en=["audioPlayer"],on=["comboLocation"],an=["creatorContent"];function ln(a,c){1&a&&t._UZ(0,"mat-progress-bar",14)}function rn(a,c){if(1&a&&t._UZ(0,"audio",15,16),2&a){const n=t.oxw();t.Q6J("src",null==n.data||null==n.data.audio?null:n.data.audio.src,t.LSH)}}function cn(a,c){if(1&a&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&a){const n=c.$implicit;t.Q6J("value",n),t.xp6(1),t.hij("",n,"px")}}function sn(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"C\u1ee1 ch\u1eef"),t.qZA(),t.TgZ(3,"mat-select",17),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw();return t.KtG(i.contentFormat.fontSize=o)})("ngModelChange",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.updateFontSize())}),t.YNc(4,cn,2,2,"mat-option",18),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(3),t.Q6J("ngModel",n.contentFormat.fontSize),t.xp6(1),t.Q6J("ngForOf",n.fontSizeRange)}}function dn(a,c){if(1&a&&(t.TgZ(0,"div",20)(1,"i")(2,"small"),t._uU(3),t.qZA()()()),2&a){const n=t.oxw();t.xp6(3),t.Oqu(n.topGuide)}}function un(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"cp-creator-block",23),t.NdJ("focusedBlock",function(o){t.CHM(n);const i=t.oxw(2);return t.KtG(i.focusedBlock=o)}),t.qZA()}if(2&a){const n=t.oxw().$implicit,e=t.oxw();t.Q6J("data",n)("rootContent",e.rootContent)("contentEditable",e.contentEditable)("isShowFontSizeSelect",e.isShowFontSizeSelect)("contentFormat",e.contentFormat)("id",e.getId(n))}}const pn=function(a){return{targetBlock:a}};function _n(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"cp-creator-content",24,25),t.NdJ("focusedBlock",function(o){t.CHM(n);const i=t.oxw(2);return t.KtG(i.focusedBlock=o)})("contentToContent",function(o){t.CHM(n);const i=t.oxw(2);return t.KtG(i.contentToContent(o))}),t.qZA()}if(2&a){const n=t.oxw().$implicit,e=t.oxw();t.Q6J("data",n)("topGuide",e.topGuide)("rootContent",e.rootContent)("contentEditable",e.contentEditable)("isShowFontSizeSelect",e.isShowFontSizeSelect)("contentFormat",e.contentFormat)("id",e.getId(n))("ngClass",t.VKq(8,pn,"contentBlock"==n.type))}}function mn(a,c){if(1&a&&(t.ynx(0),t.YNc(1,un,1,6,"cp-creator-block",21),t.YNc(2,_n,2,10,"cp-creator-content",22),t.BQk()),2&a){const n=c.$implicit;t.xp6(1),t.Q6J("ngIf","block"==(null==n?null:n.type)),t.xp6(1),t.Q6J("ngIf","contentBlock"==(null==n?null:n.type))}}function hn(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"div",26),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"div",27)(4,"mat-form-field",28)(5,"mat-label"),t._uU(6,"Nh\u1eadp tay"),t.qZA(),t.TgZ(7,"textarea",29),t.NdJ("ngModelChange",function(o){t.CHM(n);const i=t.oxw();return t.KtG(i.addedComboLocation.text=o)}),t.qZA()()()(),t.TgZ(8,"mat-dialog-actions")(9,"button",30),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.addComboLocation())}),t._uU(10," C\u1eadp nh\u1eadt "),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(1),t.hij("C\u1eadp nh\u1eadt ",n.addedComboLocation.title,""),t.xp6(3),t.Q6J("appearance","outline"),t.xp6(3),t.Q6J("cols",100)("ngModel",n.addedComboLocation.text),t.xp6(2),t.Q6J("color","primary")("matDialogClose",!0)}}function gn(a,c){if(1&a){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.onPrint())}),t.TgZ(1,"mat-icon"),t._uU(2,"print"),t.qZA()()}2&a&&t.Q6J("color","primary")}const fn=function(a){return{contentEditable:a}};let Cn=(()=>{var a;class c{click(e){if(this.eRef.nativeElement.contains(e.target)&&[...e.target.classList].includes("form-control")&&[...e.target.classList].includes("comboLocation")){this.addedComboLocation={},this.addedComboLocation.title=e.target.getAttribute("aria-label"),this.addedComboLocation.key=e.target.getAttribute("id"),this.addedComboLocation.mode=e.target.classList.contains("PpDdWwA")?"PpDdWwA":e.target.classList.contains("pPdDwWA")?"pPdDwWA":"",this.matDialog.open(this.comboLocation),this.filteredDistricts=[],this.filteredWards=[];const i=JSON.parse(e.target.getAttribute("value")||"{}");this.addedComboLocation.country="Vi\u1ec7t Nam",this.isShowCountry=!1,i?.country&&(this.addedComboLocation.country=i?.country,this.isShowCountry=!0),i?.province&&(this.addedComboLocation.province=i?.province),i?.district&&(this.addedComboLocation.district=i?.district),i?.ward&&(this.addedComboLocation.ward=i?.ward),i?.village&&(this.addedComboLocation.village=i?.village)}}constructor(e,o,i,l,r,s,u){this.breakpointObserver=e,this.route=o,this.cd=i,this.eRef=l,this.matDialog=r,this.locationService=s,this.commonService=u,this.contentEditable=!1,this.isShowFontSizeSelect=!0,this.isShowController=void 0,this.save=new t.vpe,this.reset=new t.vpe,this.nextContent=new t.vpe,this.nextFontSize=new t.vpe,this.isAutoPlay=!1,this.audioReadyToPlay=!1,this.fromLocalStorage=!0,this.isShowCountry=!1,this.addedComboLocation={},this.provinces=[],this.districts=[],this.filteredDistricts=[],this.calculatedTuanCuu=[],this.wards=[],this.filteredWards=[],this.contentFormat={},this.fontSizeRange=[10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46]}ngAfterViewInit(){if(console.log(typeof this.isShowController),typeof this.isShowController>"u"&&(this.isShowController=!0,this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(e=>{this.isShowController=!e.matches&&this.contentEditable})),this.audioTracking(),this.getLocationSettings(),console.log(this.rootContent),this.data?.fontSize)this.contentFormat.fontSize=this.data?.fontSize||18;else{const e=localStorage.getItem("token");if(e){const i=(new w.N0).decodeToken(e);this.contentFormat.fontSize=i?.fontSize||18}}}ngOnChanges(){this.audioTracking(),this.cd.detectChanges(),(!this.data.content||0==this.data.content.length)&&"block"==this.data.type&&(this.data.content=[{key:`${location.pathname.slice(1,location.pathname.length).split("/").slice(1).join("-").replaceAll("-","")}${this.data.content.length-1||0}`,attrs:{pathname:location.pathname,hash:"#"+(this.data.content.length-1)},type:"contentBlock"}]),this.data.key||(this.data.content=[{key:`${location.pathname.slice(1,location.pathname.length).split("/").slice(1).join("-").replaceAll("-","")}${this.data.content?.length-1||0}`,attrs:{pathname:location.pathname,hash:`#${this.data.content?.length-1||0}`},type:"contentBlock"}])}getLocationSettings(){}getId(e){return e.key?.replaceAll("-","")}saveData(){this.save.emit()}contentToContent(e){const o=(l,r)=>{let s;return l.some(u=>s=u.key===r?u:o(u.content||[],r)),s},i=o(this.data.content,e);if(this.audioPlayer&&i?.audio?.start)this.audioPlayer.nativeElement.currentTime=i.audio.start,this.contentEditable&&navigator.clipboard.writeText(this.audioPlayer.nativeElement.currentTime);else{let l=JSON.parse(localStorage.getItem("reading")||"[]");l||(l=[]);let r=l.find(s=>s.key==this.rootContent?.key);r&&(r.name=this.data.name)}}audioTracking(){if(this.cd.detectChanges(),"block"==this.data.type&&this.audioPlayer){this.route.queryParams.subscribe(l=>{this.audioPlayer.nativeElement.autoplay=!!l.autoplay||history.state.autoplay});const e=JSON.parse(localStorage.getItem("reading")||"[]"),o=this.fromLocalStorage?e.find(l=>l.content==this.data.key):this.audioPlayer.nativeElement,i=(l,r)=>{let s;return l.some(u=>s=o?.currentTime>=u?.audio?.start&&o?.currentTime<=u?.audio?.end?u:i(u.content||[],r)),s};if(o&&o?.currentTime){let l=i(this.data.content,0);this.audioPlayer.nativeElement.currentTime=l?.audio?.start||o?.currentTime}this.fromLocalStorage=!1,this.audioPlayer.nativeElement.addEventListener("loadstart",l=>{this.audioReadyToPlay=!1}),this.audioPlayer.nativeElement.addEventListener("loadeddata",l=>{this.audioReadyToPlay=!0,this.cd.detectChanges(),this.audioPlayer.nativeElement.controls=!0,this.route.queryParams.subscribe(r=>{this.audioPlayer.nativeElement.autoplay=!!r.autoplay||history.state.autoplay})}),this.audioPlayer.nativeElement.addEventListener("canplay",l=>{this.audioReadyToPlay=!0,this.cd.detectChanges(),this.audioPlayer.nativeElement.controls=!0,this.route.queryParams.subscribe(r=>{this.audioPlayer.nativeElement.autoplay=!!r.autoplay||history.state.autoplay})}),this.contentEditable?this.audioPlayer.nativeElement.addEventListener("pause",l=>{const r=this.audioPlayer?.nativeElement.currentTime;navigator.clipboard.writeText(r);let s=i(this.data.content,0);s&&this.updateStudy(s,r)}):(this.audioPlayer.nativeElement.addEventListener("timeupdate",l=>{const r=this.audioPlayer?.nativeElement.currentTime;let s=i(this.data.content,0);if(s){this.updateStudy(s,r);const u=document.getElementById(s.key);if(u&&(!u.style.color||"unset"==u.style.color)){const d=new Array(document.getElementsByClassName("split"))[0];for(let m=0;m<=d.length;m++)d[m]?.setAttribute("style","color: unset");u.style.color="#4285f4";let _={};if(u){const m=u.parentNode;if(m?.parentNode?.parentNode?.id){const K=(bn,G)=>{let Y;return bn.some(M=>Y=M.key===G?M:K(M.content||[],G)),Y};_=K(this.data.content,m?.parentNode?.parentNode?.id),s.attrs.pathname=_.attrs?.pathname}}this.updateStudy(s,r)}}}),this.audioPlayer.nativeElement.addEventListener("pause",l=>{const r=this.audioPlayer?.nativeElement.currentTime;let s=i(this.data.content,0);s&&this.updateStudy(s,r)}),this.audioPlayer.nativeElement.addEventListener("ended",l=>{const r=this.audioPlayer?.nativeElement.currentTime;let s=i(this.data.content,0);s&&this.updateStudy(s,r),this.nextContent.emit()}))}this.cd.detectChanges()}updateStudy(e,o){let i=JSON.parse(localStorage.getItem("reading")||"[]");i||(i=[]);let l=i.find(r=>r.key==this.rootContent.key);l?(l.name=this.data.name,l.content=this.data.key,l.currentTime=o,l.location=`${location.origin}${this.data?.attrs?.pathname}${this.data?.attrs?.hash}#${e?.key}`,l.stopAt=e?.text||e?.content[0].content[0].text):i.push({name:this.data.name,content:this.data.key,key:this.rootContent.key,currentTime:o,location:`${location.origin}${this.data?.attrs?.pathname}${this.data?.attrs?.hash}#${e?.key}`,stopAt:e?.text||e?.content[0].content[0].text}),localStorage.setItem("reading",JSON.stringify(i))}getAllDivisions(){this.provinces=this.locationService.provinces;try{this.locationService.getAllDivisions().subscribe(e=>{e?.length>0&&(this.provinces=e,this.locationService.provinces=e)})}catch(e){console.log(e)}}getDistricts(){if(this.districts=this.locationService.districts,this.districts&&0!==this.districts?.length)this.filteredDistricts=this.districts?.filter(e=>e.province_code===this.addedComboLocation.province);else try{this.locationService.getDistricts().subscribe(e=>{e?.length>0&&(this.districts=e,this.locationService.districts=e,this.filteredDistricts=e?.filter(o=>o.province_code===this.addedComboLocation?.province))})}catch(e){console.log(e)}}getWards(){if(this.wards=this.locationService.wards,this.wards&&0!==this.wards?.length)this.filteredWards=this.wards?.filter(e=>e.district_code===this.addedComboLocation.district);else try{this.locationService.getWards().subscribe(e=>{e?.length>0&&(this.wards=e,this.locationService.wards=e,this.filteredWards=e?.filter(o=>o.district_code===this.addedComboLocation?.district))})}catch(e){console.log(e)}}addComboLocation(){const e=document.getElementById(this.addedComboLocation.key);if(e?.setAttribute("value",JSON.stringify(this.addedComboLocation)),e){this.provinces.find(d=>d.code===parseInt(this.addedComboLocation.province)),this.districts.find(d=>d.code===parseInt(this.addedComboLocation.district)),this.wards.find(d=>d.code===parseInt(this.addedComboLocation.ward)),this.wards.find(d=>d.code===parseInt(this.addedComboLocation.ward))?.name?.replace("Ph\u01b0\u1eddng","")?.replace("Th\u1ecb tr\u1ea5n","")?.replace("X\xe3",""),e.innerHTML=this.addedComboLocation.text;const u=this.data.formGroup?.find(d=>d.key===this.addedComboLocation.key);u&&(u.value=this.addedComboLocation,this.onBlur(),this.saveData())}}onBlur(){this.creatorContent.updated=!0,this.creatorContent.onBlur()}updateFontSize(){this.nextFontSize.emit(this.contentFormat?.fontSize)}onPrint(){let e=window.open("","PRINT",`width=${window.innerWidth},height=${window.innerHeight}`);e?.document.write(`<html><head>\n      <title>${document.title.toUpperCase()}PRINTER</title>\n      <style>\n      .tableContent td, th {\n        font-size: 22px;\n        text-align: left;\n        padding: 1rem;\n        border-bottom: 1px solid #000000;\n      }\n      .btn-share-item {\n        display: none;\n      }\n      .hide-print {\n        display: none;\n      }\n      </style>\n      `),e?.document.write("</head><body >");const o=document.getElementById("contentCreatorWrapper"),i=document.createElement("DIV");i&&(i.innerHTML=`${o?.outerHTML}`,i.childNodes[0]&&i.childNodes[0].style&&(i.childNodes[0].style.padding=0)),e?.document.write(i?.outerHTML),e?.document.write("</body></html>"),e?.document.close(),e?.focus(),e?.print()}}return(a=c).\u0275fac=function(e){return new(e||a)(t.Y36(A.Yg),t.Y36(b.gz),t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(g.uw),t.Y36(y.a),t.Y36(f.v))},a.\u0275cmp=t.Xpm({type:a,selectors:[["cp-content-creator"]],viewQuery:function(e,o){if(1&e&&(t.Gf(en,5),t.Gf(on,5),t.Gf(an,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.audioPlayer=i.first),t.iGM(i=t.CRH())&&(o.comboLocation=i.first),t.iGM(i=t.CRH())&&(o.creatorContent=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("click",function(l){return o.click(l)},!1,t.evT)},inputs:{data:"data",topGuide:"topGuide",rootContent:"rootContent",contentEditable:"contentEditable",isShowFontSizeSelect:"isShowFontSizeSelect",isShowController:"isShowController"},outputs:{save:"save",reset:"reset",nextContent:"nextContent",nextFontSize:"nextFontSize"},features:[t.TTD],decls:15,vars:14,consts:[["autosize","",1,"cp-content-creator-mat-drawer"],["id","contentCreatorWrapper"],[1,"block-audio-player"],["mode","indeterminate",4,"ngIf"],[1,"flex","hide-print"],["class","w-100",3,"src",4,"ngIf"],[4,"ngIf"],["style","text-align: right; ",4,"ngIf"],[1,"cp-creator-block-group",3,"ngClass"],[4,"ngFor","ngForOf"],["mode","side","opened","",3,"position","opened"],[3,"focusedBlock","contentEditable","data","save","reset"],["comboLocation",""],["mat-fab","","class","!fixed bottom-[80px] lg:bottom-8 right-8 z-[999999999999]",3,"color","click",4,"ngIf"],["mode","indeterminate"],[1,"w-100",3,"src"],["audioPlayer",""],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[2,"text-align","right"],[3,"data","rootContent","contentEditable","isShowFontSizeSelect","contentFormat","id","focusedBlock",4,"ngIf"],[3,"data","topGuide","rootContent","contentEditable","isShowFontSizeSelect","contentFormat","id","ngClass","focusedBlock","contentToContent",4,"ngIf"],[3,"data","rootContent","contentEditable","isShowFontSizeSelect","contentFormat","id","focusedBlock"],[3,"data","topGuide","rootContent","contentEditable","isShowFontSizeSelect","contentFormat","id","ngClass","focusedBlock","contentToContent"],["creatorContent",""],["mat-dialog-title",""],[1,"pt-8"],[1,"w-full",3,"appearance"],["matInput","",3,"cols","ngModel","ngModelChange"],["mat-flat-button","",3,"color","matDialogClose","click"],["mat-fab","",1,"!fixed","bottom-[80px]","lg:bottom-8","right-8","z-[999999999999]",3,"color","click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-drawer-container",0)(1,"mat-drawer-content",1)(2,"div",2),t.YNc(3,ln,1,0,"mat-progress-bar",3),t.TgZ(4,"div",4),t.YNc(5,rn,2,1,"audio",5),t.YNc(6,sn,5,2,"mat-form-field",6),t.qZA()(),t.YNc(7,dn,4,1,"div",7),t.TgZ(8,"div",8),t.YNc(9,mn,3,2,"ng-container",9),t.qZA()(),t.TgZ(10,"mat-drawer",10)(11,"cp-content-creator-toolbar",11),t.NdJ("save",function(){return o.saveData()})("reset",function(){return o.reset.emit()}),t.qZA()()(),t.YNc(12,hn,11,6,"ng-template",null,12,t.W1O),t.YNc(14,gn,3,1,"button",13)),2&e&&(t.xp6(3),t.Q6J("ngIf",!o.audioReadyToPlay&&"block"===(null==o.data?null:o.data.type)&&(null==o.data||null==o.data.audio?null:o.data.audio.src)),t.xp6(2),t.Q6J("ngIf","block"===(null==o.data?null:o.data.type)&&(null==o.data||null==o.data.audio?null:o.data.audio.src)),t.xp6(1),t.Q6J("ngIf",o.isShowFontSizeSelect),t.xp6(1),t.Q6J("ngIf",o.topGuide),t.xp6(1),t.Q6J("ngClass",t.VKq(12,fn,o.isShowController)),t.xp6(1),t.Q6J("ngForOf",null==o.data?null:o.data.content),t.xp6(1),t.Q6J("position","end")("opened",o.isShowController),t.xp6(1),t.Q6J("focusedBlock",o.focusedBlock)("contentEditable",o.contentEditable)("data",o.data),t.xp6(3),t.Q6J("ngIf",!o.contentEditable))},dependencies:[h.mk,h.sg,h.O5,Ht,$,x.lW,x.cs,J.jA,J.kh,J.LW,Vt,Xt.pW,g.ZT,g.uh,g.xY,g.H8,T.KE,T.hX,tn.gD,nn.ey,C.Fj,C.JJ,C.On,F.Nt,k.Hw],styles:["cp-content-creator{width:100%;height:100%;display:flex}  cp-content-creator .mat-drawer-container{background:white;width:100%}  cp-content-creator mat-drawer{min-width:300px;width:300px;background-color:#fff;box-shadow:0 1px 2px #0000004d,0 1px 3px 1px #00000026}  cp-content-creator .mat-drawer-content{overflow-y:auto;overflow-x:hidden}  cp-content-creator .mat-drawer-content .block-audio-player{position:sticky;top:0;z-index:2}  cp-content-creator .cp-creator-block-group{flex:1;padding:3rem 3rem 1rem}  cp-content-creator .cp-creator-block-group.contentEditable{padding-top:5rem}@media only screen and (max-width: 600px){  cp-content-creator .cp-creator-block-group{padding:1rem}}  cp-content-creator .form-control{border-bottom-width:1px}"]}),c})()},3858:(O,E,p)=>{p.d(E,{a:()=>A});var t=p(5879),w=p(9862);let A=(()=>{var b;class g{constructor(f){this.http=f,this.provinces=[],this.districts=[],this.wards=[]}getAllDivisions(){return this.http.get("https://vn-public-apis.fpo.vn/provinces/getAll?limit=-1")}getDistricts(){return this.http.get("https://provinces.open-api.vn/api/d/")}getWards(){return this.http.get("https://provinces.open-api.vn/api/w/")}}return(b=g).\u0275fac=function(f){return new(f||b)(t.LFG(w.eN))},b.\u0275prov=t.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),g})()}}]);