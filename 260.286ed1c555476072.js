"use strict";(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[260],{2065:(H,L,r)=>{r.d(L,{C:()=>k});var a=r(5879),f=r(2939),J=r(8005),x=r(7022),t=r(2787),y=r(4170),T=r(2032),w=r(2596),M=r(617),E=r(2296),D=r(7742),U=r(6385),_=r(9038);const p=["shareBottomSheet"];function O(Z,S){if(1&Z){const g=a.EpF();a.TgZ(0,"h3"),a._uU(1),a.qZA(),a.TgZ(2,"div",1)(3,"h4",2),a._uU(4,"Sao ch\xe9p li\xean k\u1ebft chia s\u1ebb"),a.qZA(),a.TgZ(5,"mat-form-field",3)(6,"mat-label"),a._uU(7,"Li\xean k\u1ebft"),a.qZA(),a._UZ(8,"input",4),a.TgZ(9,"button",5),a.NdJ("click",function(){a.CHM(g);const v=a.oxw();return a.KtG(v.copyLink())}),a.TgZ(10,"mat-icon"),a._uU(11,"link"),a.qZA()()(),a.TgZ(12,"div",6),a._UZ(13,"qrcode",7,8),a.TgZ(15,"div",9)(16,"button",10),a.NdJ("click",function(){a.CHM(g);const v=a.MAs(14),C=a.oxw();return a.KtG(C.saveAsImage(v))}),a.TgZ(17,"mat-icon"),a._uU(18,"download"),a.qZA(),a._uU(19," T\u1ea3i M\xe3 QR chia s\u1ebb "),a.qZA()()(),a._UZ(20,"mat-divider"),a.TgZ(21,"mat-nav-list")(22,"a",11),a.NdJ("click",function(){a.CHM(g);const v=a.oxw();return a.KtG(v.shareTo("facebook"))}),a.TgZ(23,"span",12),a._uU(24,"Chia s\u1ebb l\xean Facebook"),a.qZA()()()()}if(2&Z){const g=a.oxw();a.xp6(1),a.Oqu(g.title),a.xp6(7),a.Q6J("value",g.sharedUrl)("disabled",!0),a.xp6(1),a.Q6J("matTooltip","Sao ch\xe9p li\xean k\u1ebft"),a.xp6(4),a.Q6J("qrdata",g.sharedUrl)("width",300)("imageHeight",75)("imageWidth",75)("cssClass","flex justify-center")("errorCorrectionLevel","M")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","canvas")("margin",4)("scale",128)("imageSrc","assets/icons/assets/circle-logo.svg")}}const B=["*"];let k=(()=>{var Z;class S{onClick(m){this.eRef&&this.eRef.nativeElement.contains(m.target)&&(this.shareBottomSheetRef=this.matBottomSheet.open(this.shareBottomSheet))}constructor(m,v,C,b,N){this._snackBar=m,this.matBottomSheet=v,this.eRef=C,this.commonService=b,this.router=N,this.url="",this.horizontalPosition="center",this.verticalPosition="bottom",this.durationInSeconds=3,this.sharedUrl=""}ngOnInit(){this.router.events.subscribe(m=>{this.sharedUrl=`${window.location.origin}${m.url||window.location.pathname}`}),this.url&&(this.sharedUrl=this.url)}ngAfterViewChecked(){this.url&&(this.sharedUrl=this.url)}copyLink(){navigator.clipboard.writeText(this.sharedUrl),this.shareBottomSheetRef.dismiss(),this._snackBar.open("\u0110\xe3 sao ch\xe9p li\xean k\u1ebft","\u0110\xf3ng",{duration:1e3*this.durationInSeconds,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})}shareTo(m){"facebook"===m?window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(this.sharedUrl)}`):this.copyLink()}convertBase64ToBlob(m){const v=m.split(";base64,"),C=v[0].split(":")[1],b=window.atob(v[1]),N=new Uint8Array(b.length);for(let A=0;A<b.length;++A)N[A]=b.charCodeAt(A);return new Blob([N],{type:C})}saveAsImage(m){let v=null;if(v=m.qrcElement.nativeElement.querySelector("canvas").toDataURL("image/png"),v){let C=this.convertBase64ToBlob(v);const b=new Blob([C],{type:"image/png"}),N=window.URL.createObjectURL(b),A=document.createElement("a");A.href=N,A.download=this.commonService.generatedSlug(this.title||"caodaion-qr"),A.click()}}}return(Z=S).\u0275fac=function(m){return new(m||Z)(a.Y36(f.ux),a.Y36(J.ch),a.Y36(a.SBq),a.Y36(x.v),a.Y36(t.F0))},Z.\u0275cmp=a.Xpm({type:Z,selectors:[["button-share"]],viewQuery:function(m,v){if(1&m&&a.Gf(p,5),2&m){let C;a.iGM(C=a.CRH())&&(v.shareBottomSheet=C.first)}},hostBindings:function(m,v){1&m&&a.NdJ("click",function(b){return v.onClick(b)},!1,a.evT)},inputs:{title:"title",url:"url"},ngContentSelectors:B,decls:3,vars:0,consts:[["shareBottomSheet",""],[1,"container-fluid"],[1,"text-2xl","my-2","font-semibold"],[1,"w-100"],["type","text","matInput","",3,"value","disabled"],["mat-icon-button","","matSuffix","",3,"matTooltip","click"],[1,"qr-area","text-center"],[3,"qrdata","width","imageHeight","imageWidth","cssClass","errorCorrectionLevel","colorDark","colorLight","elementType","margin","scale","imageSrc"],["parent",""],[1,"text-center"],["mat-raised-button","","color","primary",3,"click"],["mat-list-item","",3,"click"],["matListItemTitle",""]],template:function(m,v){1&m&&(a.F$t(),a.Hsn(0),a.YNc(1,O,25,16,"ng-template",null,0,a.W1O))},dependencies:[y.KE,y.hX,y.R9,T.Nt,w.gM,M.Hw,E.lW,E.RK,D.V,U.d,_.Hk,_.Tg,_.sL],styles:[".qr-area[_ngcontent-%COMP%]{padding-bottom:1rem}"]}),S})()},5185:(H,L,r)=>{r.d(L,{d:()=>J});var a=r(5879);const f=["*"];let J=(()=>{var x;class t{}return(x=t).\u0275fac=function(T){return new(T||x)},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-header-title"]],ngContentSelectors:f,decls:2,vars:0,template:function(T,w){1&T&&(a.F$t(),a.TgZ(0,"div"),a.Hsn(1),a.qZA())},styles:["app-header-title div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:20px}"]}),t})()},6471:(H,L,r)=>{r.d(L,{G:()=>M});var a=r(5879),f=r(2787),J=r(1274),x=r(617),t=r(2296),y=r(2065),T=r(2596);const w=["*"];let M=(()=>{var E;class D{constructor(_){this.router=_,this.prevPage=".."}ngOnInit(){this.current={title:"Chia s\u1ebb ngay",location:location.href}}onClickBackButton(){if(this.prevPage?.navigate?.link)this.router.navigate([this.prevPage?.navigate?.link],{queryParams:this.prevPage?.navigate?.queryParams});else{const _=location.pathname.split("/");_.pop(),this.router.navigate([_.join("/")],{queryParams:this.prevPage?.navigate?.queryParams})}}}return(E=D).\u0275fac=function(_){return new(_||E)(a.Y36(f.F0))},E.\u0275cmp=a.Xpm({type:E,selectors:[["app-header"]],inputs:{prevPage:"prevPage"},ngContentSelectors:w,decls:9,vars:3,consts:[["mat-icon-button","","aria-label","Back to previous page",1,"prev-icon",3,"click"],[3,"title"],["mat-icon-button","",3,"color","matTooltip"]],template:function(_,p){1&_&&(a.F$t(),a.TgZ(0,"mat-toolbar")(1,"button",0),a.NdJ("click",function(){return p.onClickBackButton()}),a.TgZ(2,"mat-icon"),a._uU(3,"arrow_back"),a.qZA()(),a.Hsn(4),a.TgZ(5,"button-share",1)(6,"button",2)(7,"mat-icon"),a._uU(8,"share"),a.qZA()()()()),2&_&&(a.xp6(5),a.Q6J("title",null==p.current?null:p.current.title),a.xp6(1),a.Q6J("color","primary")("matTooltip","Chia s\u1ebb ngay"))},dependencies:[J.Ye,x.Hw,t.RK,y.C,T.gM],styles:["app-header .mat-toolbar{justify-content:space-between;background-color:#f6f8fc;height:auto}"]}),D})()},4085:(H,L,r)=>{r.d(L,{O:()=>w});var a=r(6814),f=r(1274),J=r(617),x=r(2296),t=r(813),y=r(2596),T=r(5879);let w=(()=>{var M;class E{}return(M=E).\u0275fac=function(U){return new(U||M)},M.\u0275mod=T.oAB({type:M}),M.\u0275inj=T.cJS({imports:[a.ez,f.g0,J.Ps,x.ot,t.S,y.AV]}),E})()},8260:(H,L,r)=>{r.r(L),r.d(L,{EventModule:()=>Ut});var a=r(6814),f=r(2787),J=r(8480),x=r(6245),t=r(5879),y=r(3096),T=r(1088),w=r(9811),M=r(6593),E=r(7022),D=r(8929),U=r(4104),_=r(3176),p=r(5195),O=r(6385),B=r(6007),k=r(3305),Z=r(2296),S=r(3680),g=r(617);function m(o,d){1&o&&t._UZ(0,"mat-progress-bar",9)}function v(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.happeningEvents.showFullList=!e.happeningEvents.showFullList)}),t._uU(1),t.qZA()}if(2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.happeningEvents.showFullList?"\u1ea8n b\u1edbt":"Xem th\xeam"," ")}}const C=function(o){return{"position-absolute":o}},b=function(o,d,n,i,e,s){return{transform:o,color:d,background:n,width:i,zIndex:e,opacity:s}};function N(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.clickEvent(s,l))}),t.TgZ(1,"div",18)(2,"div",19)(3,"button",20),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.toggleNotificationSubscription(s,l))}),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()(),t._uU(6," Nh\u1eadn th\xf4ng b\xe1o "),t.qZA(),t.TgZ(7,"div",21),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.viewEvent(s,l))}),t._uU(8),t.qZA(),t.TgZ(9,"div",22),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.viewEvent(s,l))}),t._uU(10),t.ALo(11,"date"),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"div",23),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.viewEvent(s,l))}),t._uU(14),t.qZA()()()}if(2&o){const n=d.$implicit,i=d.index,e=t.oxw(2);t.Q6J("ngClass",t.VKq(13,C,!e.happeningEvents.showFullList&&0!==i))("ngStyle",t.HTZ(15,b,"translateY("+(e.happeningEvents.showFullList?"":.5*i+"rem")+")",n.color||"rgba(0, 0, 0, 0.87)",n.backgroundColor,e.happeningEvents.showFullList?"":100-5*i+"%",e.happeningEvents.showFullList?"":e.happeningEvents.event.length-i,e.happeningEvents.showFullList?"":100-5*i<100?"0."+(100-5*i-30):1)),t.xp6(5),t.Oqu(!0===(null==n?null:n.isActiveNotification)?"notifications_active":!1===(null==n?null:n.isActiveNotification)?"notifications_off":"notifications"),t.xp6(3),t.hij(" ",null==n?null:n.name," "),t.xp6(2),t.AsE(" ",t.xi3(11,7,null==n?null:n.startTime,"HH:mm"),"-",t.xi3(12,10,null==n?null:n.endTime,"HH:mm")," "),t.xp6(4),t.hij(" ",null==n?null:n.location," ")}}const A=function(o){return{marginTop:o}};function j(o,d){if(1&o&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h1",12),t._uU(3,"\u0110ANG DI\u1ec4N RA"),t.qZA(),t.YNc(4,v,2,1,"button",13),t.qZA(),t.TgZ(5,"div",14),t.YNc(6,N,15,22,"div",15),t.qZA(),t._UZ(7,"mat-divider",7),t.qZA()),2&o){const n=t.oxw();t.xp6(4),t.Q6J("ngIf",n.happeningEvents.event.length>1),t.xp6(2),t.Q6J("ngForOf",n.happeningEvents.event),t.xp6(1),t.Q6J("ngStyle",t.VKq(3,A,.75*n.happeningEvents.event.length+"rem"))}}function V(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.upcomingEvents.showFullList=!e.upcomingEvents.showFullList)}),t._uU(1),t.qZA()}if(2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.upcomingEvents.showFullList?"\u1ea8n b\u1edbt":"Xem th\xeam"," ")}}function z(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.clickEvent(s,l))}),t.TgZ(1,"div",18)(2,"div",19)(3,"button",20),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.toggleNotificationSubscription(s,l))}),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()(),t._uU(6," Nh\u1eadn th\xf4ng b\xe1o "),t.qZA(),t.TgZ(7,"div",21),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.viewEvent(s,l))}),t._uU(8),t.qZA(),t.TgZ(9,"div",22),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.viewEvent(s,l))}),t._uU(10),t.ALo(11,"date"),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"div",23),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.viewEvent(s,l))}),t._uU(14),t.qZA()()()}if(2&o){const n=d.$implicit,i=d.index,e=t.oxw(2);t.Q6J("ngClass",t.VKq(13,C,!e.upcomingEvents.showFullList&&0!==i))("ngStyle",t.HTZ(15,b,"translateY("+(e.upcomingEvents.showFullList?"":.5*i+"rem")+")",n.color||"rgba(0, 0, 0, 0.87)",n.backgroundColor,e.upcomingEvents.showFullList?"":100-5*i+"%",e.upcomingEvents.showFullList?"":e.upcomingEvents.event.length-i,e.upcomingEvents.showFullList?"":100-5*i<100?"0."+(100-5*i-30):1)),t.xp6(5),t.Oqu(!0===(null==n?null:n.isActiveNotification)?"notifications_active":!1===(null==n?null:n.isActiveNotification)?"notifications_off":"notifications"),t.xp6(3),t.hij(" ",null==n?null:n.name," "),t.xp6(2),t.AsE(" ",t.xi3(11,7,null==n?null:n.startTime,"HH:mm"),"-",t.xi3(12,10,null==n?null:n.endTime,"HH:mm")," "),t.xp6(4),t.hij(" ",null==n?null:n.location," ")}}function X(o,d){if(1&o&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h1",12),t._uU(3,"S\u1eaeP T\u1edaI"),t.qZA(),t.YNc(4,V,2,1,"button",13),t.qZA(),t.TgZ(5,"div",14),t.YNc(6,z,15,22,"div",15),t.qZA()()),2&o){const n=t.oxw();t.xp6(4),t.Q6J("ngIf",n.upcomingEvents.event.length>1),t.xp6(2),t.Q6J("ngForOf",n.upcomingEvents.event)}}function tt(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.todayEvents.showFullList=!e.todayEvents.showFullList)}),t._uU(1),t.qZA()}if(2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.todayEvents.showFullList?"\u1ea8n b\u1edbt":"Xem th\xeam"," ")}}function et(o,d){if(1&o&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2),t.qZA(),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(2),t.Oqu((null==n?null:n.name)||(null==n?null:n.eventName))}}function nt(o,d){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",(null==n?null:n.name)||(null==n?null:n.eventName)," ")}}function it(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){const e=t.CHM(n),s=e.$implicit,l=e.index,c=t.oxw(2);return t.KtG(c.clickEvent(s,l))}),t.TgZ(1,"div",24),t._UZ(2,"div",19),t.TgZ(3,"div",25),t.YNc(4,et,3,1,"ng-container",26),t.YNc(5,nt,2,1,"ng-container",26),t.qZA(),t.TgZ(6,"div",27),t._uU(7),t.qZA(),t.TgZ(8,"div",28),t._uU(9),t.qZA()()()}if(2&o){const n=d.$implicit,i=d.index,e=t.oxw(2);t.Q6J("ngClass",t.VKq(7,C,!e.todayEvents.showFullList&&0!==i))("ngStyle",t.HTZ(9,b,"translateY("+(e.todayEvents.showFullList?"":.5*i+"rem")+")",n.color||"rgba(0, 0, 0, 0.87)",n.backgroundColor,e.todayEvents.showFullList?"":100-5*i+"%",e.todayEvents.showFullList?"":e.todayEvents.event.length-i,e.todayEvents.showFullList?"":100-5*i<100?"0."+(100-5*i-30):1)),t.xp6(4),t.Q6J("ngIf",!(null!=n&&n.startTime||null!=n&&n.endTime)),t.xp6(1),t.Q6J("ngIf",(null==n?null:n.startTime)&&(null==n?null:n.endTime)),t.xp6(2),t.AsE(" ",null==n?null:n.startTime," ",null!=n&&n.endTime?"-"+(null==n?null:n.endTime):""," "),t.xp6(2),t.Oqu(null==n?null:n.location)}}function ot(o,d){if(1&o&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h1",12),t._uU(3,"H\xd4M NAY"),t.qZA(),t.YNc(4,tt,2,1,"button",13),t.qZA(),t.TgZ(5,"div",14),t.YNc(6,it,10,16,"div",15),t.qZA()()),2&o){const n=t.oxw();t.xp6(4),t.Q6J("ngIf",n.todayEvents.event.length>1),t.xp6(2),t.Q6J("ngForOf",n.todayEvents.event)}}function at(o,d){if(1&o&&(t.TgZ(0,"mat-grid-tile")(1,"mat-card",33)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-content")(8,"p"),t._uU(9),t.qZA()()()()),2&o){const n=d.$implicit;t.xp6(1),t.Q6J("routerLink","chinh-sua/"+(null==n?null:n.key)),t.xp6(3),t.Oqu(null==n?null:n.name),t.xp6(2),t.Oqu(null==n?null:n.key),t.xp6(3),t.Oqu(null==n?null:n.description)}}function lt(o,d){1&o&&(t.TgZ(0,"mat-grid-tile")(1,"mat-card",33)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"+ Th\xeam m\u1edbi"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6,"Th\xeam m\u1edbi s\u1ef1 ki\u1ec7n"),t.qZA()()()()),2&o&&(t.xp6(1),t.Q6J("routerLink","them-moi"))}function st(o,d){if(1&o&&(t.TgZ(0,"mat-tab",3,4)(2,"mat-accordion",29)(3,"mat-expansion-panel",30)(4,"mat-expansion-panel-header")(5,"mat-panel-title"),t._uU(6," S\u1ef1 ki\u1ec7n"),t.qZA()(),t.TgZ(7,"mat-grid-list",31),t.YNc(8,at,10,4,"mat-grid-tile",32),t.YNc(9,lt,7,1,"mat-grid-tile",26),t.qZA()()()()),2&o){const n=t.oxw();t.Q6J("label","C\xc0I \u0110\u1eb6T"),t.xp6(3),t.Q6J("expanded",!0),t.xp6(4),t.Q6J("cols",n.cols),t.xp6(1),t.Q6J("ngForOf",n.eventList),t.xp6(1),t.Q6J("ngIf",n.contentEditable)}}let rt=(()=>{var o;class d{constructor(i,e,s,l,c,u,h,I,q){this.router=i,this.route=e,this.authService=s,this.breakpointObserver=l,this.eventService=c,this.titleSerVice=u,this.commonService=h,this.datePipe=I,this.notificationsService=q,this.selectedIndex=0,this.isLoading=!1,this.cols=1,this.eventList=[],this.happeningEvents={event:[],showFullList:!1},this.upcomingEvents={event:[],showFullList:!1},this.todayEvents={event:[],showFullList:!1},this.time=this.commonService.time}ngOnInit(){this.getEvents(),this.route.queryParams.subscribe(i=>{this.selectedIndex=i.t?parseInt(i.t):this.authService.contentEditable?3:0}),this.titleSerVice.setTitle(`S\u1ef1 ki\u1ec7n | ${J.s.page.name}`),this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(i=>{this.cols=i.matches?2:6}),this.contentEditable=this.authService.contentEditable}selectedTabChange(i){this.router.navigate([],{relativeTo:this.route,queryParams:{t:i.index},queryParamsHandling:"merge"})}getEvents(){this.eventList=this.eventService.eventList,this.getTodayTuThoiEvents(),this.getLocalStorageEvents()}getLocalStorageEvents(){const i=new Date;JSON.parse(localStorage.getItem("tuanCuu")||"[]").forEach(s=>{const l=s.event.find(c=>new Date(c?.solar).getDate()==i.getDate()&&new Date(c?.solar).getMonth()==i.getMonth()&&new Date(c?.solar).getFullYear()==i.getFullYear());if(l){const c=x.h.data.find(h=>h.key===s.details.title);this.todayEvents.event.push({eventName:`${c?.eventTitle} ${l.eventName} cho ${c?.howToAddress?"male"===s.details.sex?c?.howToAddress.male:"female"===s.details.sex?c?.howToAddress.female:"":""} ${c?.name} ${s.details?.holyName||s.details?.name} ${s.details?.age?s.details?.age+" tu\u1ed5i.":"."}`,backgroundColor:"#fbbc05"})}})}getHappeningTuThoiEvents(){this.happeningEvents.event=[],this.happeningEvents.event=this.upcomingEvents?.event?.filter(i=>{const e=new Date;return e>=i?.startTime&&e<=i?.endTime})}getTodayTuThoiEvents(){let i=JSON.parse(localStorage.getItem("pushedNotification")||"[]");if(i||(i=[]),this.upcomingEvents.event=[],this.upcomingEvents.event=this.eventList.find(e=>"cung-tu-thoi"===e.key)?.event?.filter(e=>"cung-tu-thoi"!==e.key),this.upcomingEvents.event.forEach(e=>{if(e.location="all"===e?.locationType[0]?"\u0110i\u1ec7n th\u1edd \u0110\u1ee9c Ch\xed T\xf4n":"",e?.time){const s=new Date;e.startTime=new Date(`${this.datePipe.transform(s,"yyyy-MM-dd")} ${e?.time[0].split("-")[1]?.slice(0,2)}:00:00`),e.endTime=new Date(`${this.datePipe.transform(s,"yyyy-MM-dd")} ${e?.time[0].split("-")[1]?.slice(2,4)}:00:00`);const l=new Date;switch(l.setDate(l.getDate()),l.setHours(parseInt(e?.time[0].split("-")[1]?.slice(0,2))),l.setMinutes(0),l.setSeconds(0),l.setMinutes(l.getMinutes()-10),e.isActiveNotification=!!i?.find(c=>c.key==`${e?.key}.${this.datePipe.transform(l,"yyyyMMddHHmmss")?.toString()}`),e?.time[0]){case"ty-2301":e.color="#ffffff",e.backgroundColor="linear-gradient(#221f23, #19386d)";break;case"meo-0507":e.backgroundColor="linear-gradient(#f1a2c4, #f9f2ec)";break;case"ngo-1113":e.backgroundColor="linear-gradient(#daf4d7, #07b4ff)";break;case"dau-1719":e.color="#ffffff",e.backgroundColor="linear-gradient(#b87059, #7a019e)";break;default:e.backgroundColor="black",e.color="white"}}}),this.upcomingEvents.event=this.upcomingEvents?.event?.filter(e=>e.endTime>new Date),this.upcomingEvents?.event?.length<2){const e=(l,c)=>{let u;return l.some(h=>u=h.key===c?h:e(h.event||[],c)),u},s=e(this.eventList,"cung-thoi-ty");s&&(s.color="#ffffff",s.backgroundColor="linear-gradient(#221f23, #19386d)",s.endTime.setDate(s.endTime.getDate()+1),this.upcomingEvents?.event.push(e(this.eventList,"cung-thoi-ty")))}this.getHappeningTuThoiEvents()}viewEvent(i,e){i?.key&&(!this.upcomingEvents.showFullList&&(!i&&!e||i&&0!==e)?this.upcomingEvents.showFullList=!this.upcomingEvents.showFullList:this.router.navigate([i?.key],{relativeTo:this.route}))}clickEvent(i,e){i?.key&&!this.upcomingEvents.showFullList&&(!i&&!e||i&&0!==e)&&(this.upcomingEvents.showFullList=!this.upcomingEvents.showFullList)}toggleNotificationSubscription(i,e){i.isActiveNotification=!i.isActiveNotification;const s=[];Array.from({length:3},(l,c)=>{let u=i.startTime,h={body:`\u0110\xe3 \u0111\u1ebfn ${this.datePipe.transform(u,"HH:mm")}, l\xe0 gi\u1edd ${i?.name}`,data:{url:`${location.href}/${i?.key}`},icon:"assets/icons/windows11/Square150x150Logo.scale-400.png",image:"assets/icons/windows11/Wide310x150Logo.scale-400.png"};c>1&&(h.body=`H\xe3y chu\u1ea9n b\u1ecb ${i?.name} v\xe0o l\xfac ${this.datePipe.transform(i.startTime,"HH:mm")}`,u.setMinutes(u.getMinutes()-(this.notificationsService.pushNotificationsSettings?.tuThoi?.duration||10))),0==c&&(h.body=`\u0110\xe3 \u0111\u1eb7t th\xf4ng b\xe1o tr\u01b0\u1edbc ${i?.name} ${this.notificationsService.pushNotificationsSettings?.tuThoi?.duration||10} ph\xfat.`,u=new Date),s.push({key:`${i.key}.${this.datePipe.transform(u,"yyyyMMddHHmmss")}`,title:`Th\xf4ng b\xe1o ${i?.name}`,isforcePush:0==c,payload:h,notificationAt:this.datePipe.transform(u,"yyyy-MM-dd HH:mm:ss")})}),this.notificationsService.addNewPush(s)}}return(o=d).\u0275fac=function(i){return new(i||o)(t.Y36(f.F0),t.Y36(f.gz),t.Y36(y.e),t.Y36(T.Yg),t.Y36(w.P),t.Y36(M.Dx),t.Y36(E.v),t.Y36(a.uU),t.Y36(D.T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-event-list"]],decls:12,vars:13,consts:[[1,"event-list-container"],["mode","indeterminate",4,"ngIf"],[3,"selectedIndex","selectedTabChange"],[3,"label"],["tabGroup",""],[1,"main-event-list"],["class","container-fluid event-group happenning-event",4,"ngIf"],[3,"ngStyle"],[3,"label",4,"ngIf"],["mode","indeterminate"],[1,"container-fluid","event-group","happenning-event"],[1,"event-group-header","d-flex","justify-content-between","align-items-center"],[1,"event-group-title"],["mat-button","","class","event-group-action",3,"click",4,"ngIf"],[1,"event-group-list","d-flex","flex-column","align-items-center"],["class","event-card d-flex",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],["mat-button","",1,"event-group-action",3,"click"],[1,"event-card","d-flex",3,"ngClass","ngStyle","click"],[1,"w-100","event-information"],[1,"notification-subscribe"],["mat-icon-button","","aria-label","B\u1eadt/T\u1eaft th\xf4ng b\xe1o",1,"notification-subscribe-btn",3,"click"],[1,"w-100","event-name",3,"click"],[1,"w-100","event-time",3,"click"],[1,"w-100","event-location",3,"click"],[1,"event-information"],[1,"event-name"],[4,"ngIf"],[1,"event-time"],[1,"event-location"],["multi",""],[3,"expanded"],["rowHeight","1:1",3,"cols"],[4,"ngFor","ngForOf"],["appearance","outlined","matRipple","",1,"h-100","w-100",3,"routerLink"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t.YNc(1,m,1,0,"mat-progress-bar",1),t.TgZ(2,"mat-tab-group",2),t.NdJ("selectedTabChange",function(l){return e.selectedTabChange(l)}),t.TgZ(3,"mat-tab",3,4)(5,"div",5),t.YNc(6,j,8,5,"div",6),t.YNc(7,X,7,2,"div",6),t._UZ(8,"mat-divider",7),t.YNc(9,ot,7,2,"div",6),t._UZ(10,"mat-divider",7),t.qZA()(),t.YNc(11,st,10,5,"mat-tab",8),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("ngIf",e.isLoading),t.xp6(1),t.Q6J("selectedIndex",e.selectedIndex),t.xp6(1),t.Q6J("label","S\u1ef0 KI\u1ec6N"),t.xp6(3),t.Q6J("ngIf",e.happeningEvents.event.length>0),t.xp6(1),t.Q6J("ngIf",e.upcomingEvents.event.length>0),t.xp6(1),t.Q6J("ngStyle",t.VKq(9,A,.75*e.upcomingEvents.event.length+"rem")),t.xp6(1),t.Q6J("ngIf",e.todayEvents.event.length>0),t.xp6(1),t.Q6J("ngStyle",t.VKq(11,A,.75*e.todayEvents.event.length+"rem")),t.xp6(1),t.Q6J("ngIf",e.contentEditable))},dependencies:[a.mk,a.sg,a.O5,a.PC,f.rH,U.uX,U.SP,_.Il,_.DX,p.a8,p.dn,p.dk,p.$j,p.n5,O.d,B.pW,k.pp,k.ib,k.yz,k.yK,Z.lW,Z.RK,S.wG,g.Hw,a.uU],styles:[".event-list-container{height:100%;overflow:hidden}  .event-list-container .mat-grid-tile-content{padding:.5rem!important}  .event-list-container .mat-mdc-card{cursor:pointer}  .event-list-container .mat-tab-body-content{padding:.5rem}  .event-list-container .mat-tab-body-wrapper{flex:1}  .event-list-container .mat-mdc-tab-group{flex:1;height:100%;overflow:hidden;background-color:#fff}  .event-list-container .main-event-list .event-group{padding-bottom:2rem}  .event-list-container .main-event-list .event-group .event-group-header{margin:1rem 0;color:#000000de}  .event-list-container .main-event-list .event-group .event-group-header .event-group-action{text-decoration:underline}  .event-list-container .main-event-list .event-group .event-group-list{position:relative}  .event-list-container .main-event-list .event-group .event-group-list .event-card{border-radius:1rem;padding:1rem;color:#fff;margin-bottom:1rem;width:100%;position:relative;transition:all 1s;cursor:pointer}  .event-list-container .main-event-list .event-group .event-group-list .event-card.position-absolute{position:absolute;top:0}  .event-list-container .main-event-list .event-group .event-group-list .event-card .notification-subscribe-btn{background:rgba(255,255,255,.5);margin-bottom:.5rem}  .event-list-container .main-event-list .event-group .event-group-list .event-card .event-name{padding-bottom:.5rem}  .event-list-container .main-event-list .event-group .event-group-list .event-card .event-time{font-size:30px;font-weight:700;padding-bottom:.5rem}  .event-list-container .main-event-list .event-group .event-group-list .event-card .event-location{font-weight:300}"]}),d})();class ${}var ct=r(2939),Y=r(2234),dt=r(7259),K=r(6223),F=r(4170),R=r(2032),P=r(9038),G=r(8525),Q=r(7466);function mt(o,d){1&o&&t._UZ(0,"mat-progress-bar",3)}function ut(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.onSave())}),t._uU(1," L\u01b0u "),t.qZA()}2&o&&t.Q6J("color","primary")}function _t(o,d){if(1&o&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&o){const n=d.$implicit;t.Q6J("value",null==n?null:n.key),t.xp6(1),t.hij(" ",n.name," ")}}function vt(o,d){if(1&o&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&o){const n=d.$implicit;t.Q6J("value",null==n?null:n.key),t.xp6(1),t.hij(" ",n.name," ")}}function pt(o,d){if(1&o&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&o){const n=d.$implicit;t.Q6J("value",null==n?null:n.key),t.xp6(1),t.hij(" ",n.name," ")}}function gt(o,d){if(1&o&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&o){const n=d.$implicit;t.Q6J("value",null==n?null:n.key),t.xp6(1),t.hij(" ",n.name," ")}}function ht(o,d){if(1&o&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&o){const n=d.$implicit;t.Q6J("value",null==n?null:n.key),t.xp6(1),t.hij(" ",n.name," ")}}function ft(o,d){if(1&o&&(t.TgZ(0,"mat-list-option",24),t._uU(1),t._UZ(2,"mat-divider"),t.qZA()),2&o){const n=d.$implicit;t.Q6J("value",null==n?null:n.key),t.xp6(1),t.hij(" ",null==n?null:n.name," ")}}function Et(o,d){if(1&o&&(t.TgZ(0,"mat-list-option",24),t._uU(1),t._UZ(2,"mat-divider"),t.qZA()),2&o){const n=d.$implicit;t.Q6J("value",null==n?null:n.key),t.xp6(1),t.hij(" ",null==n?null:n.name," ")}}function Ct(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"mat-card",20)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"div",11)(6,"div",12)(7,"mat-form-field",13)(8,"mat-label"),t._uU(9,"T\xean s\u1ef1 ki\u1ec7n"),t.qZA(),t.TgZ(10,"input",21),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.name=e)})("input",function(){const s=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onChangeEventName(s))}),t.qZA()(),t.TgZ(11,"div",22)(12,"mat-radio-group",23),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.dateType=e)}),t.TgZ(13,"mat-radio-button",24)(14,"mat-label"),t._uU(15,"\xc2m l\u1ecbch"),t.qZA()(),t.TgZ(16,"mat-radio-button",24)(17,"mat-label"),t._uU(18,"D\u01b0\u01a1ng l\u1ecbch"),t.qZA()()(),t.TgZ(19,"mat-form-field",13)(20,"mat-label"),t._uU(21,"N\u0103m"),t.qZA(),t.TgZ(22,"input",25),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.year=e)}),t.qZA(),t.TgZ(23,"mat-select",26),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.year=e)}),t.YNc(24,_t,2,2,"mat-option",27),t.qZA()(),t.TgZ(25,"mat-form-field",13)(26,"mat-label"),t._uU(27,"Th\xe1ng"),t.qZA(),t.TgZ(28,"mat-select",28),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.month=e)}),t.YNc(29,vt,2,2,"mat-option",27),t.qZA()(),t.TgZ(30,"mat-form-field",13)(31,"mat-label"),t._uU(32,"Ng\xe0y"),t.qZA(),t.TgZ(33,"mat-select",28),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.selectedDate=e)}),t.YNc(34,pt,2,2,"mat-option",27),t.qZA()()(),t.TgZ(35,"mat-form-field",13)(36,"mat-label"),t._uU(37,"Th\u1eddi gian"),t.qZA(),t.TgZ(38,"mat-select",29),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.time=e)})("selectionChange",function(){const s=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onChangeCommonTime(s))}),t.YNc(39,gt,2,2,"mat-option",27),t.qZA()(),t.TgZ(40,"mat-form-field",13)(41,"mat-label"),t._uU(42,"\u0110\u1ecba \u0111i\u1ec3m"),t.qZA(),t.TgZ(43,"mat-select",29),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.locationType=e)})("selectionChange",function(){const s=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onChangeCommonLocationTypeValue(s))}),t.YNc(44,ht,2,2,"mat-option",27),t.qZA()()()(),t._UZ(45,"mat-divider"),t.TgZ(46,"div",11)(47,"mat-grid-list",30)(48,"mat-grid-tile",31)(49,"mat-card",32)(50,"mat-card-header")(51,"mat-card-title"),t._uU(52,"NGU\u1ed2N"),t.qZA()(),t.TgZ(53,"mat-card-content",33),t._UZ(54,"mat-divider"),t.TgZ(55,"mat-selection-list",34,35),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.kinh=e)})("selectionChange",function(){const s=t.CHM(n).$implicit,l=t.MAs(56),c=t.MAs(66),u=t.oxw(2);return t.KtG(u.onChangeSelectedKinhOption("stock",s,l,c))}),t.YNc(57,ft,3,2,"mat-list-option",27),t.qZA()()()(),t.TgZ(58,"mat-grid-tile",31)(59,"mat-card",32)(60,"mat-card-header")(61,"mat-card-title"),t._uU(62),t.qZA()(),t.TgZ(63,"mat-card-content",33),t._UZ(64,"mat-divider"),t.TgZ(65,"mat-selection-list",34,36),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.kinh=e)})("selectionChange",function(){const s=t.CHM(n).$implicit,l=t.MAs(56),c=t.MAs(66),u=t.oxw(2);return t.KtG(u.onChangeSelectedKinhOption("filter",s,l,c))}),t.YNc(67,Et,3,2,"mat-list-option",27),t.qZA()()()()()()(),t.TgZ(68,"mat-card-actions",37)(69,"button",38)(70,"mat-icon"),t._uU(71,"delete"),t.qZA(),t._uU(72," X\xf3a "),t.qZA(),t.TgZ(73,"button",19),t.NdJ("click",function(){const s=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onAddNewEvent(s))}),t.TgZ(74,"mat-icon"),t._uU(75,"add"),t.qZA(),t._uU(76," TH\xcaM S\u1ef0 KI\u1ec6N M\u1edaI "),t.qZA()()()}if(2&o){const n=d.$implicit,i=t.oxw(2);t.xp6(3),t.AsE("S\u1ef1 ki\u1ec7n ",n.name," (",n.key,")"),t.xp6(4),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",n.name),t.xp6(2),t.Q6J("ngModel",n.dateType),t.xp6(1),t.Q6J("value","lunar"),t.xp6(3),t.Q6J("value","solar"),t.xp6(3),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",n.year)("autocomplete","off"),t.xp6(1),t.Q6J("multiple",!0)("ngModel",n.year),t.xp6(1),t.Q6J("ngForOf",null==i.commonDates?null:i.commonDates.year),t.xp6(1),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",n.month),t.xp6(1),t.Q6J("ngForOf",null==i.commonDates?null:i.commonDates.month),t.xp6(1),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",n.selectedDate),t.xp6(1),t.Q6J("ngForOf",null==i.commonDates?null:i.commonDates.date),t.xp6(1),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",n.time)("multiple",!0),t.xp6(1),t.Q6J("ngForOf",i.commonTimes),t.xp6(1),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",n.locationType)("multiple",!0),t.xp6(1),t.Q6J("ngForOf",i.commonLocationTypes),t.xp6(3),t.Q6J("cols",2)("rowHeight","2:1"),t.xp6(8),t.Q6J("ngModel",n.kinh),t.xp6(2),t.Q6J("ngForOf",i.kinhList),t.xp6(5),t.hij("Danh s\xe1ch kinh: ",null==n?null:n.name,""),t.xp6(3),t.Q6J("ngModel",n.kinh),t.xp6(2),t.Q6J("ngForOf",n.kinhList),t.xp6(1),t.Q6J("align","end"),t.xp6(1),t.Q6J("color","warn"),t.xp6(4),t.Q6J("color","primary")}}function Tt(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div")(5,"h1"),t._uU(6),t.qZA()(),t.TgZ(7,"div"),t.YNc(8,ut,2,1,"button",8),t.TgZ(9,"button",9),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.onBack())}),t._uU(10,"Tho\xe1t"),t.qZA()()(),t._UZ(11,"mat-divider"),t.qZA(),t.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"mat-form-field",13)(16,"mat-label"),t._uU(17,"T\xean s\u1ef1 ki\u1ec7n"),t.qZA(),t.TgZ(18,"input",14),t.NdJ("ngModelChange",function(e){t.CHM(n);const s=t.oxw();return t.KtG(s.currentEvent.name=e)})("change",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.onChangeName())}),t.qZA()(),t.TgZ(19,"mat-form-field",13)(20,"mat-label"),t._uU(21,"Key/Slug"),t.qZA(),t.TgZ(22,"input",15),t.NdJ("ngModelChange",function(e){t.CHM(n);const s=t.oxw();return t.KtG(s.currentEvent.key=e)}),t.qZA()()()(),t.TgZ(23,"div",11)(24,"mat-form-field",13)(25,"mat-label"),t._uU(26,"M\xf4 t\u1ea3"),t.qZA(),t.TgZ(27,"textarea",16),t.NdJ("ngModelChange",function(e){t.CHM(n);const s=t.oxw();return t.KtG(s.currentEvent.description=e)}),t.qZA()()(),t._UZ(28,"mat-divider"),t.TgZ(29,"div",17),t.YNc(30,Ct,77,37,"mat-card",18),t.qZA()()()()}if(2&o){const n=t.oxw();t.xp6(6),t.hij("S\u1ef1 ki\u1ec7n - ",n.currentEvent.name,""),t.xp6(2),t.Q6J("ngIf",n.contentEditable),t.xp6(7),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",n.currentEvent.name),t.xp6(1),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",n.currentEvent.key)("disabled","them-moi"!==n.eventKey),t.xp6(2),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",n.currentEvent.description),t.xp6(3),t.Q6J("ngForOf",n.currentEvent.event)}}let xt=(()=>{var o;class d{constructor(i,e,s,l,c,u,h,I,q){this.route=i,this._snackBar=e,this.breakpointObserver=s,this.authService=l,this.location=c,this.eventService=u,this.kinhService=h,this.caodaionEditorService=I,this.commonService=q,this.currentEvent=new $,this.contentEditable=!1,this.isLoading=!1,this.isShowBackButton=!1,this.horizontalPosition="center",this.verticalPosition="bottom",this.eventList=this.eventService.eventList,this.kinhList=this.kinhService.kinhList,this.commonTimes=this.commonService.commonTimes,this.commonDates=this.commonService.commonDates,this.commonLocationTypes=this.commonService.commonLocationTypes}ngOnInit(){this.route.params.subscribe(i=>{this.eventKey=i.eventKey}),this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(i=>{i.matches?(this.contentEditable=!1,this.isShowBackButton=!1,localStorage.setItem("currentLayout",JSON.stringify({isHideToolbar:!0,isHideBottomNavBar:!0}))):(this.contentEditable=this.authService.contentEditable,this.isShowBackButton=!0,localStorage.setItem("currentLayout",JSON.stringify({isHideToolbar:!1,isHideBottomNavBar:!1})))}),this.getEvent()}getEvent(){let i=this.eventList.find(e=>e.key===this.eventKey);if(this.currentEvent=i||new $,this.currentEvent.event&&0!==this.currentEvent.event.length)this.currentEvent.event.forEach(e=>{e.selectedDate=e.date.split("-")[2],e.month=e.date.split("-")[1],e.year=[e.date.split("-")[0]],e.kinhList=[],e.kinh.forEach(s=>{let l=this.kinhList?.find(c=>c.key===s);e.kinhList.push(l)})});else{this.currentEvent.event=[];const e=new W;this.currentEvent.event.push(e)}}onChangeSelectedKinhOption(i,e,s,l){e.kinhList=[],"stock"===i&&s.selectedOptions.selected&&s.selectedOptions.selected.forEach(c=>{let u=this.kinhList?.find(h=>h.key===c.value);e.kinhList.push(u)}),"filter"===i&&l.selectedOptions.selected&&l.selectedOptions.selected.forEach(c=>{let u=this.kinhList?.find(h=>h.key===c.value);e.kinhList.push(u)}),e.kinh=e.kinhList.map(c=>c.key)}onChangeCommonTime(i){i.time=this.commonService.getCommonTimeValue(i.time)}onChangeCommonLocationTypeValue(i){i.locationType=this.commonService.getCommonLocationTypeValue(i.locationType)}onAddNewEvent(i){const e=new W;i?i.name&&i.time&&i.locationType&&i.kinh&&0!==i.kinh.length?this.currentEvent.event.push(e):console.log(i):this.currentEvent.event.push(e)}onChangeName(){this.currentEvent.key=this.currentEvent.name?this.getSlug(this.currentEvent.name):""}onChangeEventName(i){i.key=i.name?this.getSlug(i.name):""}getSlug(i){return this.caodaionEditorService.generatedSlug(i)}onSave(){let i=[];"them-moi"===this.eventKey&&this.eventList.push(this.currentEvent),this.eventList.forEach(e=>{let s=[];s=e.event.map(l=>({key:l.key,name:l.name,dateType:l.dateType,date:l.year&&l.month&&l.selectedDate?`${l.year}-${l.month}-${l.selectedDate}`:l.date,time:l.time,locationType:l.locationType,kinh:l.kinh})),i.push({name:e.name,description:e.description,key:e.key,event:s})}),console.log({data:i})}onBack(){this.location.back()}}return(o=d).\u0275fac=function(i){return new(i||o)(t.Y36(f.gz),t.Y36(ct.ux),t.Y36(T.Yg),t.Y36(y.e),t.Y36(a.Ye),t.Y36(w.P),t.Y36(Y.c),t.Y36(dt.TB),t.Y36(E.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-event-content"]],decls:3,vars:2,consts:[[1,"wrapper-container","event-content-container"],["mode","indeterminate",4,"ngIf"],["class","wrapper-container event-container-wrapper",4,"ngIf"],["mode","indeterminate"],[1,"wrapper-container","event-container-wrapper"],[1,"flex-1","wrapper-container","event-container"],[1,"top-pannel"],[1,"top-pannel-content","d-flex","justify-content-between"],["mat-flat-button","",3,"color","click",4,"ngIf"],["mat-stroked-button","",3,"click"],[1,"flex-1","event-content-form"],[1,"form-group"],[1,"d-flex"],[1,"w-100",3,"appearance"],["type","text","matInput","",3,"ngModel","ngModelChange","change"],["type","text","matInput","",3,"ngModel","disabled","ngModelChange"],["rows","3","matInput","",3,"ngModel","ngModelChange"],[1,"form-group","event-form-group"],["appearance","outlined","class","event-details",4,"ngFor","ngForOf"],["mat-flat-button","",3,"color","click"],["appearance","outlined",1,"event-details"],["type","text","matInput","","required","",3,"ngModel","ngModelChange","input"],[1,"w-100","d-flex"],[3,"ngModel","ngModelChange"],[3,"value"],["matInput","",3,"ngModel","autocomplete","ngModelChange"],["required","",3,"multiple","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["required","",3,"ngModel","ngModelChange"],["required","",3,"ngModel","multiple","ngModelChange","selectionChange"],[3,"cols","rowHeight"],[1,"kinh-list-wrapper"],["appearance","outlined",1,"w-100","h-100","wrapper-container"],[1,"flex-1","kinh-list","w-100","h-100"],[3,"ngModel","ngModelChange","selectionChange"],["stock",""],["filter",""],[3,"align"],["mat-button","",3,"color"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t.YNc(1,mt,1,0,"mat-progress-bar",1),t.YNc(2,Tt,31,10,"div",2),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",e.isLoading),t.xp6(1),t.Q6J("ngIf",e.currentEvent))},dependencies:[a.sg,a.O5,_.Il,_.DX,p.a8,p.hq,p.dn,p.dk,p.n5,O.d,B.pW,Z.lW,g.Hw,K.Fj,K.JJ,K.Q7,K.On,F.KE,F.hX,R.Nt,P.Ub,P.vS,G.gD,S.ey,Q.VQ,Q.U0],styles:[".event-content-container{background-color:#fff}  .event-content-container .top-pannel-content button{margin-left:1rem}  .event-content-container .form-group{padding:1rem}  .event-content-container .form-group mat-card{margin-bottom:1rem}  .event-content-container .form-group mat-card .kinh-list{overflow:auto}  .event-content-container .kinh-list-wrapper .mat-grid-tile-content{padding:.5rem}  .event-content-container .event-content-form{overflow:auto}"]}),d})();class W{constructor(){this.dateType="lunar"}}var yt=r(6471),Zt=r(5185);function bt(o,d){if(1&o&&(t.TgZ(0,"mat-grid-tile")(1,"mat-card",11)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4),t.qZA()()()()),2&o){const n=d.$implicit;t.xp6(1),t.Q6J("routerLink","/kinh/"+(null==n?null:n.key)),t.xp6(3),t.Oqu(null==n?null:n.name)}}const Mt=function(){return{link:"/lich/su-kien"}},At=function(o){return{navigate:o}},kt=[{path:"",children:[{path:"",component:rt},{path:"chinh-sua/:eventKey",component:xt},{path:":eventKey",component:(()=>{var o;class d{constructor(i,e,s,l,c){this.route=i,this.eventService=e,this.kinhService=s,this.commonService=l,this.breakpointObserver=c,this.eventList=[],this.kinhList=[],this.currentKinhList=[],this.cols=0}ngOnInit(){this.getEvents(),this.route.params.subscribe(i=>{i.eventKey&&(this.eventKey=i.eventKey)}),this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(i=>{this.cols=i.matches?2:6})}getEvents(){this.eventList=this.eventService.eventList,this.getKinhs()}getKinhs(){this.kinhService.getKinhList().subscribe(i=>{i&&(this.kinhList=i.data,this.getEventDetails())})}getEventDetails(){const i=(e,s)=>{let l;return e.some(c=>l=c.key===s?c:i(c.event||[],s)),l};this.event=i(this.eventList,this.eventKey),this.event.time&&(this.event.timeName=this.commonService.commonTimes.find(e=>e.key===this.event.time[0])?.name),this.event.kinh.forEach(e=>{let s=this.kinhList.find(l=>l.key===e);s&&this.currentKinhList.push(s)})}}return(o=d).\u0275fac=function(i){return new(i||o)(t.Y36(f.gz),t.Y36(w.P),t.Y36(Y.c),t.Y36(E.v),t.Y36(T.Yg))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-event-details"]],decls:25,vars:11,consts:[[1,"wrapper-container","event-content-container"],[1,"header",3,"prevPage"],[1,"kinh-header"],[1,"wrapper-container","event-container-wrapper"],[1,"flex-1","wrapper-container","event-container"],[1,"event-accordion"],[1,"d-flex","align-items-center","information-data"],["multi","",1,"event-accordion"],[3,"expanded"],["rowHeight","1:1",3,"cols"],[4,"ngFor","ngForOf"],["appearance","outlined","matRipple","",1,"h-100","w-100",3,"routerLink"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"app-header",1)(2,"div",2)(3,"app-header-title"),t._uU(4),t.qZA()()(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"h1"),t._uU(9),t.qZA(),t.TgZ(10,"div",6)(11,"mat-icon"),t._uU(12,"event"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"div",6)(15,"mat-icon"),t._uU(16,"schedule"),t.qZA(),t._uU(17),t.qZA()(),t.TgZ(18,"mat-accordion",7)(19,"mat-expansion-panel",8)(20,"mat-expansion-panel-header")(21,"mat-panel-title"),t._uU(22," \xc1p d\u1ee5ng kinh"),t.qZA()(),t.TgZ(23,"mat-grid-list",9),t.YNc(24,bt,5,2,"mat-grid-tile",10),t.qZA()()()()()()),2&i&&(t.xp6(1),t.Q6J("prevPage",t.VKq(9,At,t.DdM(8,Mt))),t.xp6(3),t.Oqu(null==e.event?null:e.event.name),t.xp6(5),t.Oqu(null==e.event?null:e.event.name),t.xp6(4),t.hij(" ","yearly-monthly-daily"===(null==e.event?null:e.event.date)?"M\u1ed7i ng\xe0y":"yearly-monthly-daily"!==(null==e.event?null:e.event.date)&&null!=e.event&&e.event.date.includes("yearly-monthly-")?"Ng\xe0y "+(null==e.event?null:e.event.date.split("-")[2])+" m\u1ed7i th\xe1ng":"yearly-monthly-daily"===(null==e.event?null:e.event.date)||null!=e.event&&e.event.date.includes("yearly-monthly-")||null==e.event||!e.event.date.includes("yearly-")?"yearly-monthly-daily"===(null==e.event?null:e.event.date)||null!=e.event&&e.event.date.includes("yearly-monthly-")||null==e.event||!e.event.date.includes("yearly-")?"":"Ng\xe0y "+(null==e.event?null:e.event.date.split("-")[2])+" th\xe1ng "+(null==e.event?null:e.event.date.split("-")[1])+" n\u0103m"+(null==e.event?null:e.event.date.split("-")[0]):"Ng\xe0y "+(null==e.event?null:e.event.date.split("-")[2])+" th\xe1ng "+(null==e.event?null:e.event.date.split("-")[1])+" m\u1ed7i n\u0103m"," "),t.xp6(4),t.hij(" ",null==e.event?null:e.event.timeName," "),t.xp6(2),t.Q6J("expanded",!0),t.xp6(4),t.Q6J("cols",e.cols),t.xp6(1),t.Q6J("ngForOf",e.currentKinhList))},dependencies:[a.sg,f.rH,_.Il,_.DX,p.a8,p.dk,p.n5,yt.G,Zt.d,k.pp,k.ib,k.yz,k.yK,S.wG,g.Hw],styles:[".event-content-container{background-color:#fff}  .event-content-container .event-accordion{padding:.5rem!important}  .event-content-container .mat-grid-tile-content{padding:.5rem!important}  .event-content-container .mat-mdc-card{cursor:pointer}  .event-content-container .information-data{margin-bottom:.5rem}  .event-content-container .information-data mat-icon{margin-right:.5rem}"]}),d})()}]}];let Lt=(()=>{var o;class d{}return(o=d).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[f.Bz.forChild(kt),f.Bz]}),d})();var wt=r(4085);let Ut=(()=>{var o;class d{}return(o=d).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[a.uU],imports:[a.ez,Lt,U.Nh,_.N6,p.QW,O.t,B.Cv,wt.O,k.To,Z.ot,S.si,g.Ps,K.u5,F.lN,R.c,P.ie,G.LD,Q.Fk]}),d})()}}]);