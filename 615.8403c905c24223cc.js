"use strict";(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[615],{615:(vt,y,a)=>{a.r(y),a.d(y,{KinhModule:()=>ut});var u=a(6895),c=a(9299),t=a(4650),K=a(8565),k=a(5899),T=a(4797),x=a(2289),C=a(1481),f=a(3162),b=a(3883),E=a(5203);const S=["*"];let N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-header-sub-title"]],ngContentSelectors:S,decls:1,vars:0,template:function(e,i){1&e&&(t.F$t(),t.Hsn(0))},styles:["app-header-sub-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#0009;font-size:18px}"]}),n})();const I=["*"];let Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-header-description"]],ngContentSelectors:I,decls:1,vars:0,template:function(e,i){1&e&&(t.F$t(),t.Hsn(0))},styles:["app-header-description{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:400}"]}),n})();var P=a(7759),F=a(5895);function H(n,s){1&n&&t._UZ(0,"mat-progress-bar",8)}function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"cp-content-creator",10),t.NdJ("save",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onSaveContent())}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("data",e.content)}}const w=function(n,s){return{link:n,queryParams:s}},A=function(n){return{text:"Tr\u01b0\u1edbc \u0111\xf3",navigate:n}},O=function(n){return{text:"Ti\u1ebfp theo",navigate:n}};function Q(n,s){if(1&n&&t._UZ(0,"app-bottom-navigator",11),2&n){const e=t.oxw();t.Q6J("prev",t.VKq(5,A,t.WLB(2,w,e.navigate.prev.link,e.queryParams)))("next",t.VKq(10,O,t.WLB(7,w,e.navigate.next.link,e.queryParams)))}}const Y=function(){return{link:"trang-chu/kinh"}},B=function(n){return{navigate:n}};let G=(()=>{class n{constructor(e,i,o,h,r,l,d){this.kinhService=e,this.eventService=i,this.route=o,this.authService=h,this.breakpointObserver=r,this.titleService=l,this.router=d,this.isLoading=!1,this.navigate={prev:{link:"/"},next:{link:"/"}},this.eventList=this.eventService.eventList,this.queryParams={me:"",e:""}}ngOnInit(){this.route.params.subscribe(e=>{e.kinhKey&&(this.kinhKey=e.kinhKey,this.getKinhContent(e.kinhKey))}),this.route.queryParams.subscribe(e=>{e.me&&e.e&&(this.queryParams.me=e.me,this.queryParams.e=e.e),this.router.navigate(["."],{relativeTo:this.route,fragment:location.hash.replace("#",""),queryParams:{me:this.queryParams.me,e:this.queryParams.e}})})}getKinhContent(e){this.isLoading=!0,this.kinhService.getKinhContent(e).subscribe(i=>{i.data&&(this.rootContent=i.data,this.content=i.data,(!this.content.formGroup||0==this.content.formGroup.length)&&(this.content.formGroup=[]),this.updateForm(),console.log(this.content),this.titleService.setTitle(`${this.content.name} | CaoDaiON`),this.isLoading=!1,this.getEventList(),setTimeout(()=>{this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(o=>{o.matches?localStorage.setItem("currentLayout",JSON.stringify({isHideToolbar:!0,isHideBottomNavBar:!0})):localStorage.setItem("currentLayout",JSON.stringify({isHideToolbar:!1,isHideBottomNavBar:!1}))})},0),location.hash&&location.pathname.includes("kinh")&&setTimeout(()=>{const o=document.getElementById(`${location.pathname.slice(1,location.pathname.length).split("/").slice(1).join("-").replaceAll("-","")}${location.hash.replace("#","")}`);o.style.color="#4285f4",document.getElementById("contentCreatorWrapper").scroll({top:o.offsetTop})},0))})}onSaveContent(){this.rootContent.key||(this.rootContent.key=this.kinhKey,this.rootContent.type="block"),this.rootContent.event="quan-hon-tang-te",console.log({data:this.rootContent}),navigator.clipboard.writeText(JSON.stringify({data:this.rootContent}))}getEventList(){const i=this.eventList.find(o=>o.key==(this.queryParams.me||this.rootContent?.event)).event.find(o=>o.key==(this.queryParams.e||this.rootContent?.event));this.navigate.prev.link=i.kinh[i.kinh.findIndex(o=>o==this.kinhKey)-1]?`${location.pathname.replace(this.kinhKey,"")}${i.kinh[i.kinh.findIndex(o=>o==this.kinhKey)-1]}`:"/",this.navigate.next.link=i.kinh[i.kinh.findIndex(o=>o==this.kinhKey)+1]?`${location.pathname.replace(this.kinhKey,"")}${i.kinh[i.kinh.findIndex(o=>o==this.kinhKey)+1]}`:"/"}updateForm(){this.content.formGroup?.find(e=>"ten-khac-phan-loai"===e.key)||this.content.formGroup.push({key:"ten-khac-phan-loai",label:"T\xean kh\xe1c/Ph\xe2n lo\u1ea1i",value:"",required:!1,type:"shortText"}),this.content.formGroup?.find(e=>"giong-doc"===e.key)||this.content.formGroup.push({key:"giong-doc",label:"Gi\u1ecdng \u0110\u1ecdc",data:["Gi\u1ecdng Nam Ai","Gi\u1ecdng Nam Xu\xe2n"],value:"",required:!1,type:"radio"})}getFormValue(e){return this.content?.formGroup?.find(i=>i.key===e)?.value||""}swipe(e,i){const o=[e.changedTouches[0].clientX,e.changedTouches[0].clientY],h=(new Date).getTime();if("start"===i)this.swipeCoord=o,this.swipeTime=h;else if("end"===i){let l,r=[];if(this.swipeCoord&&(r=[o[0]-this.swipeCoord[0],o[1]-this.swipeCoord[1]]),this.swipeTime&&(l=h-this.swipeTime),l<1e3&&Math.abs(r[0])>30&&Math.abs(r[0])>Math.abs(3*r[1])){const d=r[0]<0?this.navigate.next.link:this.navigate.prev.link;"/"!==d&&this.router.navigate([d],{queryParams:this.queryParams})}}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(K.c),t.Y36(k.P),t.Y36(c.gz),t.Y36(T.e),t.Y36(x.Yg),t.Y36(C.Dx),t.Y36(c.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-kinh-content"]],decls:14,vars:10,consts:[[1,"wrapper-container","kinh-content-container"],[1,"header",3,"prevPage"],[1,"kinh-header"],[1,"header-description"],["mode","indeterminate",4,"ngIf"],[1,"kinh-container-wrapper",3,"touchstart","touchend"],["class","h-100",4,"ngIf"],[3,"prev","next",4,"ngIf"],["mode","indeterminate"],[1,"h-100"],[3,"data","save"],[3,"prev","next"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"app-header",1)(2,"div",2)(3,"app-header-title"),t._uU(4),t.qZA(),t.TgZ(5,"app-header-sub-title"),t._uU(6),t.qZA(),t.TgZ(7,"div",3)(8,"app-header-description"),t._uU(9),t.qZA()()()(),t.YNc(10,H,1,0,"mat-progress-bar",4),t.TgZ(11,"div",5),t.NdJ("touchstart",function(h){return i.swipe(h,"start")})("touchend",function(h){return i.swipe(h,"end")}),t.YNc(12,J,2,1,"div",6),t.qZA(),t.YNc(13,Q,1,12,"app-bottom-navigator",7),t.qZA()),2&e&&(t.xp6(1),t.Q6J("prevPage",t.VKq(8,B,t.DdM(7,Y))),t.xp6(3),t.Oqu(null==i.content?null:i.content.name),t.xp6(2),t.Oqu(i.getFormValue("ten-khac-phan-loai")?" - "+i.getFormValue("ten-khac-phan-loai"):""),t.xp6(3),t.Oqu(i.getFormValue("giong-doc")),t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Q6J("ngIf",i.content),t.xp6(1),t.Q6J("ngIf",!i.authService.contentEditable||"block"==(null==i.content?null:i.content.type)))},dependencies:[u.O5,f.pW,b.G,E.d,N,Z,P.T,F.S],styles:["app-kinh-content{display:flex;flex-direction:column;height:100%;max-height:100%;overflow:hidden}  app-kinh-content .kinh-content-title{padding:2rem;margin:0}  app-kinh-content .kinh-container-wrapper{flex:1;overflow:hidden}  app-kinh-content .kinh-header{overflow:hidden;white-space:normal;width:100%}  app-kinh-content .kinh-header .header-description{line-height:1;margin-bottom:.5rem}"]}),n})();var m=a(7084),M=a(1517),D=a(4051),v=a(3848),g=a(782),p=a(3546),L=a(3238);const $=["filterExansionPannel"];function U(n,s){1&n&&t._UZ(0,"mat-progress-bar",5)}function q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-grid-tile")(1,"mat-card",9),t.NdJ("click",function(){const h=t.CHM(e).$implicit,r=t.oxw().$implicit,l=t.oxw();return l.nowKinh.filter.me=null==r?null:r.key,l.nowKinh.filter.e=null==r?null:r.key,t.KtG(l.onOpenKinhContent(h))}),t.TgZ(2,"mat-card-header",10)(3,"mat-card-title"),t._uU(4),t.qZA()()()()}if(2&n){const e=s.$implicit;t.xp6(4),t.Oqu(null==e?null:e.name)}}function V(n,s){if(1&n&&(t.TgZ(0,"mat-tab",6)(1,"mat-grid-list",7),t.YNc(2,q,5,1,"mat-grid-tile",8),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw();t.Q6J("label",null==e?null:e.name),t.xp6(1),t.Q6J("cols",i.cols),t.xp6(1),t.Q6J("ngForOf",null==e?null:e.kinh)}}const R=function(){return{whiteSpace:"pre-wrap"}};function z(n,s){if(1&n&&(t.TgZ(0,"mat-grid-tile")(1,"mat-card",14)(2,"mat-card-header",10)(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-content",15),t._uU(8),t.qZA()()()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("routerLink",null==e?null:e.key),t.xp6(3),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(null==e?null:e.giongDoc),t.xp6(1),t.Q6J("ngStyle",t.DdM(5,R)),t.xp6(1),t.Oqu(null==e?null:e.goiNho)}}function W(n,s){1&n&&(t.TgZ(0,"mat-grid-tile")(1,"mat-card",16)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"+ TH\xcaM KINH M\u1edaI"),t.qZA()()()()),2&n&&(t.xp6(1),t.Q6J("routerLink","them-moi"))}function X(n,s){if(1&n&&(t.TgZ(0,"mat-tab",6)(1,"mat-accordion",11)(2,"mat-expansion-panel",12)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),t._uU(5," KINH "),t.qZA(),t.TgZ(6,"mat-panel-description"),t._uU(7,"KINH C\xdaNG T\u1ee8-TH\u1edcI v\xe0 QUANG-H\xd4N, TANG-T\u1ebe"),t.qZA()(),t.TgZ(8,"mat-grid-list",7),t.YNc(9,z,9,6,"mat-grid-tile",8),t.YNc(10,W,5,1,"mat-grid-tile",13),t.qZA()()()()),2&n){const e=t.oxw();t.Q6J("label","C\xc0I \u0110\u1eb6T"),t.xp6(2),t.Q6J("expanded",!1),t.xp6(6),t.Q6J("cols",e.cols),t.xp6(1),t.Q6J("ngForOf",e.kinhList),t.xp6(1),t.Q6J("ngIf",e.contentEditable)}}let j=(()=>{class n{constructor(e,i,o,h,r,l,d,ft){this.commonService=e,this.kinhService=i,this.eventService=o,this.breakpointObserver=h,this.authService=r,this.route=l,this.titleSerVice=d,this.router=ft,this.nowKinh=new _,this.kinhList=this.kinhService.kinhList,this.commonTimes=this.commonService.commonTimes,this.commonLocationTypes=this.commonService.commonLocationTypes,this.kinhFilter=[],this.cols=1,this.selectedIndex=0,this.isLoading=!1,this.eventList=this.eventService.eventList,this.time=this.commonService.time}ngOnInit(){this.getKinhList(),this.titleSerVice.setTitle(`Kinh | ${M.s.page.name}`),this.route.queryParams.subscribe(e=>{0===this.selectedIndex&&(e.me&&(this.nowKinh.filter.me=e.me),e.e&&(this.nowKinh.filter.e=e.e)),this.selectedIndex=this.kinhFilter.findIndex(({key:i})=>i===this.nowKinh.filter.me)}),this.contentEditable=this.authService.contentEditable,this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(e=>{this.cols=e.matches?2:6})}getKinhList(){let e=this.eventList.find(o=>"cung-tu-thoi"===o.key)?.event.find(o=>"cung-tu-thoi"===o.key)?.kinh,i=this.kinhList.filter(o=>!e.includes(o.key));i=i.map(o=>o.key),this.kinhFilter.push({key:"cung-tu-thoi",name:"C\xdaNG T\u1ee8 TH\u1edcI",kinh:this.getKinhListByKey(e)},{key:"quan-hon-tang-te",name:"QUAN-H\xd4N, TANG-T\u1ebe",kinh:this.getKinhListByKey(i)})}getNowKinh(e){this.nowKinh.time=this.commonService.getCommonTimeValue(this.nowKinh.time),this.nowKinh.locationType=this.commonService.getCommonLocationTypeValue(this.nowKinh.locationType);let i=[];this.eventList.forEach(r=>{r.event.forEach(l=>{i.push({mainEventKey:r.key,event:l})})});let o={time:this.nowKinh.time,date:this.nowKinh.date,locationType:this.nowKinh.locationType};this.nowKinh.eventList=i?.filter(r=>r?.event?.time?.filter(l=>o.time.includes(l)).length>0&&r?.event?.locationType?.filter(l=>o.locationType.includes(l)).length>0);const h=r=>{this.filterExansionPannel&&(this.nowKinh.filterRequired=!1,this.filterExansionPannel.expanded=!1,this.nowKinh.selectedEvent=r.event,this.nowKinh.filterdMessage=`\u0110\xe3 l\u1ecdc kinh ${this.nowKinh.selectedEvent?.name} di\u1ec5n ra l\xfac ${this.commonTimes.find(l=>l.key===this.nowKinh.selectedEvent?.time[0])?.name.split("|")[1]}`)};e?e.event.kinh&&(this.nowKinh.key=e.event.key,this.nowKinh.kinh=e.event.kinh,this.nowKinh.kinhList=this.getKinhListByKey(e.event.kinh),this.nowKinh.kinhList.length>0&&this.filterExansionPannel&&(h({mainEventKey:e.mainEventKey,event:e.event}),this.router.navigate([],{relativeTo:this.route,queryParams:{me:e.mainEventKey,e:e.event.key},queryParamsHandling:"merge"}))):(this.nowKinh.kinhList=this.getKinhListByKey(this.nowKinh.eventList.find(r=>r.mainEventKey===this.nowKinh.filter.me&&r.event.key===this.nowKinh.filter.e)?.event?.kinh),this.nowKinh.selectedEvent=this.nowKinh.eventList.find(r=>r.mainEventKey===this.nowKinh.filter.me&&r.event.key===this.nowKinh.filter.e)?.event,h({mainEventKey:this.nowKinh.filter.me,event:this.nowKinh.selectedEvent})),1===this.nowKinh.eventList.length&&(this.nowKinh.kinhList=this.getKinhListByKey(this.nowKinh.eventList[0].event.kinh),this.nowKinh.kinhList.length>0&&this.filterExansionPannel&&h({mainEventKey:this.nowKinh.eventList[0].mainEventKey,event:this.nowKinh.eventList[0].event})),(!this.nowKinh.eventList||!this.nowKinh.kinhList||0===this.nowKinh.eventList.length||0===this.nowKinh.kinhList.length)&&(this.nowKinh.filterRequired=!0)}getDefaultNowKinh(){let e=this.nowKinh.eventList.filter(i=>"cung-tu-thoi"===i.mainEventKey).find(i=>"cung-tu-thoi"!==i.event.key&&i.event.time.includes(this.time?.commonTime?.tuThoiUpcoming?.key));this.getNowKinh(e)}getKinhListByKey(e){let i=[];return e?.forEach(o=>{let h=this.kinhList.find(r=>r.key===o);h&&i.push(h)}),i}selectedTabChange(e){this.router.navigate([],{relativeTo:this.route,queryParams:{me:this.kinhFilter[e.index]?.key,e:this.kinhFilter[e.index]?.key},queryParamsHandling:"merge"})}onOpenKinhContent(e){this.router.navigate([e.key],{relativeTo:this.route,queryParams:{me:this.nowKinh.filter.me,e:this.nowKinh.filter.e}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.v),t.Y36(K.c),t.Y36(k.P),t.Y36(x.Yg),t.Y36(T.e),t.Y36(c.gz),t.Y36(C.Dx),t.Y36(c.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-kinh-list"]],viewQuery:function(e,i){if(1&e&&t.Gf($,7,m.ib),2&e){let o;t.iGM(o=t.CRH())&&(i.filterExansionPannel=o.first)}},decls:5,vars:4,consts:[[1,"wrapper-container","kinh-list-container"],["mode","indeterminate",4,"ngIf"],[3,"selectedIndex","selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],["mode","indeterminate"],[3,"label"],["rowHeight","1:1",3,"cols"],[4,"ngFor","ngForOf"],["appearance","outlined","matRipple","",1,"w-100","h-100","d-flex","flex-column","align-items-center","justify-content-center",3,"click"],[1,"w-100"],["multi",""],[3,"expanded"],[4,"ngIf"],["appearance","outlined","matRipple","",1,"w-100","h-100","d-flex","flex-column","align-items-center","justify-content-center",3,"routerLink"],[1,"w-100",3,"ngStyle"],["appearance","outlined","matRipple","",1,"w-100","h-100","d-flex","align-items-center","justify-content-center",3,"routerLink"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,U,1,0,"mat-progress-bar",1),t.TgZ(2,"mat-tab-group",2),t.NdJ("selectedTabChange",function(h){return i.selectedTabChange(h)}),t.YNc(3,V,3,3,"mat-tab",3),t.YNc(4,X,11,5,"mat-tab",4),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("selectedIndex",i.selectedIndex),t.xp6(1),t.Q6J("ngForOf",i.kinhFilter),t.xp6(1),t.Q6J("ngIf",i.contentEditable))},dependencies:[u.sg,u.O5,u.PC,c.rH,v.uX,v.SP,g.Il,g.DX,p.a8,p.dn,p.dk,p.$j,p.n5,f.pW,m.pp,m.ib,m.yz,m.yK,m.u4,L.wG],styles:[".kinh-list-container .description-text{color:red}  .kinh-list-container .description-text.filtered{color:green;font-weight:700}  .kinh-list-container .mat-grid-tile-content{padding:.5rem!important}  .kinh-list-container .mat-mdc-card{display:flex!important;cursor:pointer}  .kinh-list-container .mat-tab-body-content{padding:.5rem}  .kinh-list-container .mat-tab-body-wrapper{flex:1}  .kinh-list-container .mat-mdc-tab-group{flex:1;height:100%;overflow:hidden;background-color:#fff}  .kinh-list-container .kinh-list-pannel .mat-expansion-panel-header-title{color:#000000de;font-weight:700}"]}),n})();class _{constructor(){this.filterRequired=!1,this.filter={me:"",e:""},this.date=["all"],this.time=["all"],this.locationType=["all"]}}const tt=[{path:"",children:[{path:"",component:j},{path:":kinhKey",component:G}]}];let et=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.Bz.forChild(tt),c.Bz]}),n})();var nt=a(4760),it=a(4850),ot=a(1259),at=a(7533),st=a(4859),rt=a(7392),ht=a(4006),lt=a(9549),ct=a(4144),mt=a(6338),pt=a(4385),dt=a(7154);let ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,et,nt.l,v.Nh,g.N6,p.QW,it.t,f.Cv,ot.O,m.To,at.e,st.ot,L.si,rt.Ps,ht.u5,lt.lN,ct.c,mt.ie,pt.LD,dt.m]}),n})()}}]);